(()=>{var lc={6281:(o,R,y)=>{"use strict";var k=y(7396),S=function(){function T(f){if(T.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=f,T.INSTANCE=this}return T.prototype.enable=function(f,c){k.IsInitialized&&(y(4309).wp(f&&c,this._client),y(5823).wp(f,this._client),y(454).wp(f,this._client))},T.prototype.isInitialized=function(){return this._isInitialized},T.prototype.dispose=function(){T.INSTANCE=null,this.enable(!1,!1)},T._methodNames=["debug","info","log","warn","error"],T}();o.exports=S},894:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(5282),S=y(7396),T=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var u=c.session.get(c.CONTEXT_NAME);return u===void 0?null:u},c.generateContextObject=function(u,a,h,p,d,m){return a=a||u,this.enabled?{operation:{name:h,id:u,parentId:a,traceparent:d,tracestate:m},customProperties:new f(p)}:null},c.runWithContext=function(u,a){if(c.enabled)return c.session.bind(a,(h={},h[c.CONTEXT_NAME]=u,h))();return a();var h},c.wrapEmitter=function(u){c.enabled&&c.session.bindEmitter(u)},c.wrapCallback=function(u){return c.enabled?c.session.bind(u):u},c.enable=function(u){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=u,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=y(9562):this.cls=y(3057)),c.session=this.cls.createNamespace("AI-CLS-Session"),S.registerContextPreservation(function(a){return c.session.bind(a)})),this.enabled=!0}},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var u=process.versions.node.split(".");return parseInt(u[0])>3||parseInt(u[0])>2&&parseInt(u[1])>2},c.shouldUseClsHooked=function(){var u=process.versions.node.split(".");return parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=2},c.canUseClsHooked=function(){var u=process.versions.node.split("."),a=parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=0,h=parseInt(u[0])<8||parseInt(u[0])<=8&&parseInt(u[1])<2,p=parseInt(u[0])>4||parseInt(u[0])>=4&&parseInt(u[1])>=7;return!(a&&h)&&p},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();R.CorrelationContextManager=T;var f=function(){function c(u){this.props=[],this.addHeaderData(u)}return c.prototype.addHeaderData=function(u){var a=u?u.split(", "):[];this.props=a.map(function(h){var p=h.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(u){return u.key+"="+u.value}).join(", ")},c.prototype.getProperty=function(u){for(var a=0;a<this.props.length;++a){var h=this.props[a];if(h.key===u)return h.value}},c.prototype.setProperty=function(u,a){if(c.bannedCharacters.test(u)||c.bannedCharacters.test(a)){k.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+u+" and value: "+a);return}for(var h=0;h<this.props.length;++h){var p=this.props[h];if(p.key===u){p.value=a;return}}this.props.push({key:u,value:a})},c.bannedCharacters=/[,=]/,c}()},6639:o=>{"use strict";var R=function(){function y(k){if(y.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");y.INSTANCE=this,this._client=k;var S=process.versions.node.split(".");y._canUseUncaughtExceptionMonitor=parseInt(S[0])>13||parseInt(S[0])===13&&parseInt(S[1])>=7}return y.prototype.isInitialized=function(){return this._isInitialized},y.prototype.enable=function(k){var S=this;if(k){this._isInitialized=!0;var T=this;if(!this._exceptionListenerHandle){var f=function(c,u,a){a===void 0&&(a=new Error(y._FALLBACK_ERROR_MESSAGE)),S._client.trackException({exception:a}),S._client.flush({isAppCrashing:!0}),c&&u&&process.listeners(u).length===1&&(console.error(a),process.exit(1))};y._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=f.bind(this,!1),process.on(y.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=f.bind(this,!0,y.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=f.bind(this,!1),process.on(y.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(y.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(y._canUseUncaughtExceptionMonitor?process.removeListener(y.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(y.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(y.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},y.prototype.dispose=function(){y.INSTANCE=null,this.enable(!1),this._isInitialized=!1},y.INSTANCE=null,y.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",y.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",y.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",y._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",y._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",y._canUseUncaughtExceptionMonitor=!1,y}();o.exports=R},8723:(o,R,y)=>{"use strict";var k=y(8605),S=y(7211),T=y(5282),f=y(5740),c=y(9036),u=y(8339),a=y(894),h=y(9962),p=y(8090),d=y(7396),m=function(){function b(v){if(b.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");b.INSTANCE=this,this._client=v}return b.prototype.enable=function(v){this._isEnabled=v,this._isEnabled&&!this._isInitialized&&this._initialize(),d.IsInitialized&&(y(7886).wp(v,this._client),y(4777).wp(v,this._client),y(5071).wp(v,this._client),y(1227).wp(v,this._client))},b.prototype.isInitialized=function(){return this._isInitialized},b.prototype._initialize=function(){var v=this;this._isInitialized=!0;var _=k.get,E=k.request,N=S.request,D=function(L,I){var q=!I[b.disableCollectionRequestOption]&&!L[b.alreadyAutoCollectedFlag];L[b.alreadyAutoCollectedFlag]=!0,L&&I&&q&&(a.CorrelationContextManager.wrapEmitter(L),b.trackRequest(v._client,{options:I,request:L}))};k.request=function(L){for(var I=[],q=1;q<arguments.length;q++)I[q-1]=arguments[q];var A=E.call.apply(E,[k,L].concat(I));return D(A,L),A},S.request=function(L){for(var I=[],q=1;q<arguments.length;q++)I[q-1]=arguments[q];var A=N.call.apply(N,[S,L].concat(I));return D(A,L),A},k.get=function(L){for(var I=[],q=1;q<arguments.length;q++)I[q-1]=arguments[q];var A=(U=k.request).call.apply(U,[k,L].concat(I));return A.end(),A;var U},S.get=function(L){for(var I=[],q=1;q<arguments.length;q++)I[q-1]=arguments[q];var A=(U=S.request).call.apply(U,[S,L].concat(I));return A.end(),A;var U}},b.trackRequest=function(v,_){if(!_.options||!_.request||!v){T.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!_.options,!_.request,!v);return}var E=new u(_.options,_.request),N=a.CorrelationContextManager.getCurrentContext(),D,L;if(N&&N.operation&&N.operation.traceparent&&p.isValidTraceId(N.operation.traceparent.traceId))N.operation.traceparent.updateSpanId(),D=N.operation.traceparent.getBackCompatRequestId();else if(h.w3cEnabled){var I=new p;L=I.toString(),D=I.getBackCompatRequestId()}else D=N&&N.operation&&N.operation.parentId+b.requestNumber+++".";if(f.canIncludeCorrelationHeader(v,E.getUrl())&&_.request.getHeader&&_.request.setHeader&&v.config&&v.config.correlationId){var q=_.request.getHeader(c.requestContextHeader);try{f.safeIncludeCorrelationHeader(v,_.request,q)}catch(O){T.warn("Request-Context header could not be set. Correlation of requests may be lost",O)}if(N&&N.operation)try{if(_.request.setHeader(c.requestIdHeader,D),_.request.setHeader(c.parentIdHeader,N.operation.id),_.request.setHeader(c.rootIdHeader,D),L||N.operation.traceparent)_.request.setHeader(c.traceparentHeader,L||N.operation.traceparent.toString());else if(h.w3cEnabled){var I=new p().toString();_.request.setHeader(c.traceparentHeader,I)}if(N.operation.tracestate){var A=N.operation.tracestate.toString();A&&_.request.setHeader(c.traceStateHeader,A)}var U=N.customProperties.serializeToHeader();U&&_.request.setHeader(c.correlationContextHeader,U)}catch(O){T.warn("Correlation headers could not be set. Correlation of requests may be lost.",O)}}_.request.on&&(_.request.on("response",function(O){E.onResponse(O);var F=E.getDependencyTelemetry(_,D);F.contextObjects=F.contextObjects||{},F.contextObjects["http.RequestOptions"]=_.options,F.contextObjects["http.ClientRequest"]=_.request,F.contextObjects["http.ClientResponse"]=O,v.trackDependency(F)}),_.request.on("error",function(O){E.onError(O);var F=E.getDependencyTelemetry(_,D);F.contextObjects=F.contextObjects||{},F.contextObjects["http.RequestOptions"]=_.options,F.contextObjects["http.ClientRequest"]=_.request,F.contextObjects.Error=O,v.trackDependency(F)}))},b.prototype.dispose=function(){b.INSTANCE=null,this.enable(!1),this._isInitialized=!1},b.disableCollectionRequestOption="disableAppInsightsAutoCollection",b.requestNumber=1,b.alreadyAutoCollectedFlag="_appInsightsAutoCollected",b}();o.exports=m},8339:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var b in m)m.hasOwnProperty(b)&&(d[b]=m[b])};return function(d,m){p(d,m);function b(){this.constructor=d}d.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}}(),S=y(8835),T=y(5290),f=y(5740),c=y(9036),u=y(3054),a=y(9962),h=function(p){k(d,p);function d(m,b){var v=p.call(this)||this;return b&&b.method&&m&&(v.method=b.method,v.url=d._getUrlFromRequestOptions(m,b),v.startTime=+new Date),v}return d.prototype.onError=function(m){this._setStatus(void 0,m)},d.prototype.onResponse=function(m){this._setStatus(m.statusCode,void 0),this.correlationId=f.getCorrelationContextTarget(m,c.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(m,b){var v=S.parse(this.url);v.search=void 0,v.hash=void 0;var _=this.method.toUpperCase()+" "+v.pathname,E=T.RemoteDependencyDataConstants.TYPE_HTTP,N=v.hostname;this.correlationId?(E=T.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==a.correlationIdPrefix&&(N=v.hostname+" | "+this.correlationId)):E=T.RemoteDependencyDataConstants.TYPE_HTTP,v.port&&(N+=":"+v.port);var D={id:b,name:_,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:E,target:N};if(m){for(var L in m)D[L]||(D[L]=m[L]);if(m.properties)for(var L in m.properties)D.properties[L]=m.properties[L]}return D},d._getUrlFromRequestOptions=function(m,b){if(typeof m=="string")m=S.parse(m);else{var v=m;m={},v&&Object.keys(v).forEach(function(N){m[N]=v[N]})}if(m.path){var _=S.parse(m.path);m.pathname=_.pathname,m.search=_.search}if(m.host&&m.port){var E=S.parse("http://"+m.host);!E.port&&m.port&&(m.hostname=m.host,delete m.host)}return m.protocol=m.protocol||b.agent&&b.agent.protocol||void 0,m.hostname=m.hostname||"localhost",S.format(m)},d}(u);o.exports=h},6694:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,v){b.__proto__=v}||function(b,v){for(var _ in v)v.hasOwnProperty(_)&&(b[_]=v[_])};return function(b,v){m(b,v);function _(){this.constructor=b}b.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)}}(),S=y(8835),T=y(5290),f=y(5740),c=y(9036),u=y(3054),a=y(9962),h=y(6333),p=y(8090),d=function(m){k(b,m);function b(v,_){var E=m.call(this)||this;return v&&(E.method=v.method,E.url=E._getAbsoluteUrl(v),E.startTime=+new Date,E.socketRemoteAddress=v.socket&&v.socket.remoteAddress,E.parseHeaders(v,_),v.connection&&(E.connectionRemoteAddress=v.connection.remoteAddress,E.legacySocketRemoteAddress=v.connection.socket&&v.connection.socket.remoteAddress)),E}return b.prototype.onError=function(v,_){this._setStatus(void 0,v),_&&(this.duration=_)},b.prototype.onResponse=function(v,_){this._setStatus(v.statusCode,void 0),_&&(this.duration=_)},b.prototype.getRequestTelemetry=function(v){var _={id:this.requestId,name:this.method+" "+S.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(v){for(var E in v)_[E]||(_[E]=v[E]);if(v.properties)for(var E in v.properties)_.properties[E]=v.properties[E]}return _},b.prototype.getRequestTags=function(v){var _={};for(var E in v)_[E]=v[E];return _[b.keys.locationIp]=v[b.keys.locationIp]||this._getIp(),_[b.keys.sessionId]=v[b.keys.sessionId]||this._getId("ai_session"),_[b.keys.userId]=v[b.keys.userId]||this._getId("ai_user"),_[b.keys.userAuthUserId]=v[b.keys.userAuthUserId]||this._getId("ai_authUser"),_[b.keys.operationName]=this.getOperationName(v),_[b.keys.operationParentId]=this.getOperationParentId(v),_[b.keys.operationId]=this.getOperationId(v),_},b.prototype.getOperationId=function(v){return v[b.keys.operationId]||this.operationId},b.prototype.getOperationParentId=function(v){return v[b.keys.operationParentId]||this.parentId||this.getOperationId(v)},b.prototype.getOperationName=function(v){return v[b.keys.operationName]||this.method+" "+S.parse(this.url).pathname},b.prototype.getRequestId=function(){return this.requestId},b.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},b.prototype.getTraceparent=function(){return this.traceparent},b.prototype.getTracestate=function(){return this.tracestate},b.prototype.getLegacyRootId=function(){return this.legacyRootId},b.prototype._getAbsoluteUrl=function(v){if(!v.headers)return v.url;var _=v.connection?v.connection.encrypted:null,E=S.parse(v.url),N=E.pathname,D=E.search,L=S.format({protocol:_?"https":"http",host:v.headers.host,pathname:N,search:D});return L},b.prototype._getIp=function(){var v=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,_=function(N){var D=v.exec(N);if(D)return D[0]},E=_(this.rawHeaders["x-forwarded-for"])||_(this.rawHeaders["x-client-ip"])||_(this.rawHeaders["x-real-ip"])||_(this.connectionRemoteAddress)||_(this.socketRemoteAddress)||_(this.legacySocketRemoteAddress);return!E&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(E="127.0.0.1"),E},b.prototype._getId=function(v){var _=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",E=b.parseId(f.getCookie(v,_));return E},b.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},b.prototype.parseHeaders=function(v,_){if(this.rawHeaders=v.headers||v.rawHeaders,this.userAgent=v.headers&&v.headers["user-agent"],this.sourceCorrelationId=f.getCorrelationContextTarget(v,c.requestContextSourceKey),v.headers){var E=v.headers[c.traceStateHeader],N=v.headers[c.traceparentHeader],D=v.headers[c.requestIdHeader],L=v.headers[c.parentIdHeader],I=v.headers[c.rootIdHeader];this.correlationContextHeader=v.headers[c.correlationContextHeader],a.w3cEnabled&&(N||E)?(this.traceparent=new p(N),this.tracestate=N&&E&&new h(E),this.setBackCompatFromThisTraceContext()):D?a.w3cEnabled?(this.traceparent=new p(null,D),this.setBackCompatFromThisTraceContext()):(this.parentId=D,this.requestId=a.generateRequestId(this.parentId),this.operationId=a.getRootId(this.requestId)):a.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=L,this.traceparent.legacyRootId=I||L,this.setBackCompatFromThisTraceContext()):(this.parentId=L,this.requestId=a.generateRequestId(I||this.parentId),this.correlationContextHeader=null,this.operationId=a.getRootId(this.requestId)),_&&(this.requestId=_,this.operationId=a.getRootId(this.requestId))}},b.parseId=function(v){var _=v.split("|");return _.length>0?_[0]:""},b.keys=new T.ContextTagKeys,b}(u);o.exports=d},731:(o,R,y)=>{"use strict";var k=y(8605),S=y(7211),T=y(5282),f=y(5740),c=y(9036),u=y(6694),a=y(894),h=y(4350),p=function(){function d(m){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=m}return d.prototype.enable=function(m){this._isEnabled=m,(this._isAutoCorrelating||this._isEnabled||h.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(m,b){m&&!this._isAutoCorrelating?a.CorrelationContextManager.enable(b):!m&&this._isAutoCorrelating&&a.CorrelationContextManager.disable(),this._isAutoCorrelating=m},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(m){if(!!this._isAutoCorrelating)return a.CorrelationContextManager.generateContextObject(m.getOperationId(this._client.context.tags),m.getRequestId(),m.getOperationName(this._client.context.tags),m.getCorrelationContextHeader(),m.getTraceparent(),m.getTracestate())},d.prototype._initialize=function(){var m=this;this._isInitialized=!0;var b=function(N){if(!!N){if(typeof N!="function")throw new Error("onRequest handler must be a function");return function(D,L){a.CorrelationContextManager.wrapEmitter(D),a.CorrelationContextManager.wrapEmitter(L);var I=D&&!D[d.alreadyAutoCollectedFlag];if(D&&I){var q=new u(D),A=m._generateCorrelationContext(q);a.CorrelationContextManager.runWithContext(A,function(){m._isEnabled&&(D[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(m._client,{request:D,response:L},q)),typeof N=="function"&&N(D,L)})}else typeof N=="function"&&N(D,L)}}},v=function(N){var D=N.addListener.bind(N);N.addListener=function(L,I){switch(L){case"request":case"checkContinue":return D(L,b(I));default:return D(L,I)}},N.on=N.addListener},_=k.createServer;k.createServer=function(N){var D=_(b(N));return v(D),D};var E=S.createServer;S.createServer=function(N,D){var L=E(N,b(D));return v(L),L}},d.trackRequestSync=function(m,b){if(!b.request||!b.response||!m){T.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!b.request,!b.response,!m);return}d.addResponseCorrelationIdHeader(m,b.response);var v=a.CorrelationContextManager.getCurrentContext(),_=new u(b.request,v&&v.operation.parentId);v&&(v.operation.id=_.getOperationId(m.context.tags)||v.operation.id,v.operation.name=_.getOperationName(m.context.tags)||v.operation.name,v.operation.parentId=_.getRequestId()||v.operation.parentId,v.customProperties.addHeaderData(_.getCorrelationContextHeader())),d.endRequest(m,_,b,b.duration,b.error)},d.trackRequest=function(m,b,v){if(!b.request||!b.response||!m){T.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!b.request,!b.response,!m);return}var _=a.CorrelationContextManager.getCurrentContext(),E=v||new u(b.request,_&&_.operation.parentId);f.canIncludeCorrelationHeader(m,E.getUrl())&&d.addResponseCorrelationIdHeader(m,b.response),_&&!v&&(_.operation.id=E.getOperationId(m.context.tags)||_.operation.id,_.operation.name=E.getOperationName(m.context.tags)||_.operation.name,_.operation.parentId=E.getOperationParentId(m.context.tags)||_.operation.parentId,_.customProperties.addHeaderData(E.getCorrelationContextHeader())),b.response.once&&b.response.once("finish",function(){d.endRequest(m,E,b,null,null)}),b.request.on&&b.request.on("error",function(N){d.endRequest(m,E,b,null,N)})},d.addResponseCorrelationIdHeader=function(m,b){if(m.config&&m.config.correlationId&&b.getHeader&&b.setHeader&&!b.headersSent){var v=b.getHeader(c.requestContextHeader);f.safeIncludeCorrelationHeader(m,b,v)}},d.endRequest=function(m,b,v,_,E){E?b.onError(E,_):b.onResponse(v.response,_);var N=b.getRequestTelemetry(v);if(N.tagOverrides=b.getRequestTags(m.context.tags),v.tagOverrides)for(var D in v.tagOverrides)N.tagOverrides[D]=v.tagOverrides[D];var L=b.getLegacyRootId();L&&(N.properties.ai_legacyRootId=L),N.contextObjects=N.contextObjects||{},N.contextObjects["http.ServerRequest"]=v.request,N.contextObjects["http.ServerResponse"]=v.response,m.trackRequest(N)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,a.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();o.exports=p},1629:function(o,R,y){"use strict";var k=this&&this.__assign||Object.assign||function(u){for(var a,h=1,p=arguments.length;h<p;h++){a=arguments[h];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(u[d]=a[d])}return u};Object.defineProperty(R,"__esModule",{value:!0});var S=y(9253),T=y(4470),f=y(5282),c=function(){function u(a){this._disabledMetrics={},u.INSTANCE&&u.INSTANCE.dispose(),u.INSTANCE=this,this._client=a}return u.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},u.prototype.enable=function(a,h,p){var d=this;if(h===void 0&&(h={}),p===void 0&&(p=6e4),!!u.isNodeVersionCompatible()){if(u._metricsAvailable==null&&a&&!this._isInitialized)try{var m=y(6591);u._emitter=new m,u._metricsAvailable=!0,f.info("Native metrics module successfully loaded!")}catch(b){u._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=h,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&u._emitter?(u._emitter.enable(!0,p),this._handle=setInterval(function(){return d._trackNativeMetrics()},p),this._handle.unref()):u._emitter&&(u._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},u.prototype.dispose=function(){this.enable(!1)},u.parseEnabled=function(a){var h=process.env[S.ENV_nativeMetricsDisableAll],p=process.env[S.ENV_nativeMetricsDisablers];if(h)return{isEnabled:!1,disabledMetrics:{}};if(p){var d=p.split(","),m={};if(d.length>0)for(var b=0,v=d;b<v.length;b++){var _=v[b];m[_]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:k({},a,m)}:{isEnabled:a,disabledMetrics:m}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},u.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},u.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var a=u._emitter.getGCData();for(var h in a){var p=a[h].metrics,d=h+" Garbage Collection Duration",m=Math.sqrt(p.sumSquares/p.count-Math.pow(p.total/p.count,2))||0;this._client.trackMetric({name:d,value:p.total,count:p.count,max:p.max,min:p.min,stdDev:m,tagOverrides:(b={},b[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+T.sdkVersion,b)})}var b}},u.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var a=u._emitter.getLoopData(),h=a.loopUsage;if(h.count!=0){var p="Event Loop CPU Time",d=Math.sqrt(h.sumSquares/h.count-Math.pow(h.total/h.count,2))||0;this._client.trackMetric({name:p,value:h.total,count:h.count,min:h.min,max:h.max,stdDev:d,tagOverrides:(m={},m[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+T.sdkVersion,m)});var m}}},u.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var a=process.memoryUsage(),h=a.heapUsed,p=a.heapTotal,d=a.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:h,count:1,tagOverrides:(m={},m[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+T.sdkVersion,m)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(b={},b[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+T.sdkVersion,b)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:d-p,count:1,tagOverrides:(v={},v[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+T.sdkVersion,v)});var m,b,v}},u}();R.AutoCollectNativePerformance=c},4350:(o,R,y)=>{"use strict";var k=y(2087),S=y(3580),T=function(){function f(c,u,a){u===void 0&&(u=6e4),a===void 0&&(a=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=c,this._collectionInterval=u,this._enableLiveMetricsCounters=a}return f.prototype.enable=function(c,u){var a=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._lastCpus=k.cpus(),this._lastRequests={totalRequestCount:f._totalRequestCount,totalFailedRequestCount:f._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:f._totalDependencyCount,totalFailedDependencyCount:f._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:f._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=u||this._collectionInterval,this._handle=setInterval(function(){return a.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},f.countRequest=function(c,u){var a;if(!!f.isEnabled()){if(typeof c=="string")a=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")a=c;else return;f._intervalRequestExecutionTime+=a,u===!1&&f._totalFailedRequestCount++,f._totalRequestCount++}},f.countException=function(){f._totalExceptionCount++},f.countDependency=function(c,u){var a;if(!!f.isEnabled()){if(typeof c=="string")a=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")a=c;else return;f._intervalDependencyExecutionTime+=a,u===!1&&f._totalFailedDependencyCount++,f._totalDependencyCount++}},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},f.prototype._trackCpu=function(){var c=k.cpus();if(c&&c.length&&this._lastCpus&&c.length===this._lastCpus.length){for(var u=0,a=0,h=0,p=0,d=0,m=0;!!c&&m<c.length;m++){var b=c[m],v=this._lastCpus[m],_="% cpu("+m+") ",E=b.model,N=b.speed,D=b.times,L=v.times,I=D.user-L.user||0;u+=I;var q=D.sys-L.sys||0;a+=q;var A=D.nice-L.nice||0;h+=A;var U=D.idle-L.idle||0;p+=U;var O=D.irq-L.irq||0;d+=O}var F=void 0;if(typeof process.cpuUsage=="function"){var x=process.cpuUsage(),H=process.hrtime(),B=x.user-this._lastAppCpuUsage.user+(x.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var z=(H[0]-this._lastHrtime[0])*1e6+(H[1]-this._lastHrtime[1])/1e3||0;F=100*B/(z*c.length)}this._lastAppCpuUsage=x,this._lastHrtime=H}var V=u+a+h+p+d||1;this._client.trackMetric({name:S.PerformanceCounter.PROCESSOR_TIME,value:(V-p)/V*100}),this._client.trackMetric({name:S.PerformanceCounter.PROCESS_TIME,value:F||u/V*100})}this._lastCpus=c},f.prototype._trackMemory=function(){var c=k.freemem(),u=process.memoryUsage().rss,a=k.totalmem()-c;this._client.trackMetric({name:S.PerformanceCounter.PRIVATE_BYTES,value:u}),this._client.trackMetric({name:S.PerformanceCounter.AVAILABLE_BYTES,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:S.QuickPulseCounter.COMMITTED_BYTES,value:a})},f.prototype._trackNetwork=function(){var c=this._lastRequests,u={totalRequestCount:f._totalRequestCount,totalFailedRequestCount:f._totalFailedRequestCount,time:+new Date},a=u.totalRequestCount-c.totalRequestCount||0,h=u.totalFailedRequestCount-c.totalFailedRequestCount||0,p=u.time-c.time,d=p/1e3,m=(f._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/a||0;if(this._lastIntervalRequestExecutionTime=f._intervalRequestExecutionTime,p>0){var b=a/d,v=h/d;this._client.trackMetric({name:S.PerformanceCounter.REQUEST_RATE,value:b}),(!this._enableLiveMetricsCounters||a>0)&&this._client.trackMetric({name:S.PerformanceCounter.REQUEST_DURATION,value:m}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:S.QuickPulseCounter.REQUEST_FAILURE_RATE,value:v})}this._lastRequests=u},f.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var c=this._lastDependencies,u={totalDependencyCount:f._totalDependencyCount,totalFailedDependencyCount:f._totalFailedDependencyCount,time:+new Date},a=u.totalDependencyCount-c.totalDependencyCount||0,h=u.totalFailedDependencyCount-c.totalFailedDependencyCount||0,p=u.time-c.time,d=p/1e3,m=(f._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/a||0;if(this._lastIntervalDependencyExecutionTime=f._intervalDependencyExecutionTime,p>0){var b=a/d,v=h/d;this._client.trackMetric({name:S.QuickPulseCounter.DEPENDENCY_RATE,value:b}),this._client.trackMetric({name:S.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:v}),(!this._enableLiveMetricsCounters||a>0)&&this._client.trackMetric({name:S.QuickPulseCounter.DEPENDENCY_DURATION,value:m})}this._lastDependencies=u}},f.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var c=this._lastExceptions,u={totalExceptionCount:f._totalExceptionCount,time:+new Date},a=u.totalExceptionCount-c.totalExceptionCount||0,h=u.time-c.time,p=h/1e3;if(h>0){var d=a/p;this._client.trackMetric({name:S.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=u}},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f._totalRequestCount=0,f._totalFailedRequestCount=0,f._lastRequestExecutionTime=0,f._totalDependencyCount=0,f._totalFailedDependencyCount=0,f._lastDependencyExecutionTime=0,f._totalExceptionCount=0,f._intervalDependencyExecutionTime=0,f._intervalRequestExecutionTime=0,f}();o.exports=T},3054:o=>{"use strict";var R=function(){function y(){}return y.prototype.getUrl=function(){return this.url},y.prototype.RequestParser=function(){this.startTime=+new Date},y.prototype._setStatus=function(k,S){var T=+new Date;this.duration=T-this.startTime,this.statusCode=k;var f=this.properties||{};if(S){if(typeof S=="string")f.error=S;else if(S instanceof Error)f.error=S.message;else if(typeof S=="object")for(var c in S)f[c]=S[c]&&S[c].toString&&S[c].toString()}this.properties=f},y.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},y}();o.exports=R},5823:(o,R,y)=>{"use strict";var k;k={value:!0};var S=y(5290),T=y(4953),f=[],c={10:S.SeverityLevel.Verbose,20:S.SeverityLevel.Verbose,30:S.SeverityLevel.Information,40:S.SeverityLevel.Warning,50:S.SeverityLevel.Error,60:S.SeverityLevel.Critical},u=function(p){var d=p.data.result;f.forEach(function(m){var b=c[p.data.level];d instanceof Error?m.trackException({exception:d}):m.trackTrace({message:d,severity:b})})};function a(p,d){p?(f.length===0&&T.channel.subscribe("bunyan",u),f.push(d)):(f=f.filter(function(m){return m!=d}),f.length===0&&T.channel.unsubscribe("bunyan",u))}R.wp=a;function h(){T.channel.unsubscribe("bunyan",u),f=[]}k=h},4309:(o,R,y)=>{"use strict";var k;k={value:!0};var S=y(5290),T=y(4953),f=[],c=function(h){var p=h.data.message;f.forEach(function(d){p instanceof Error?d.trackException({exception:p}):(p.lastIndexOf(`
`)==p.length-1&&(p=p.substring(0,p.length-1)),d.trackTrace({message:p,severity:h.data.stderr?S.SeverityLevel.Warning:S.SeverityLevel.Information}))})};function u(h,p){h?(f.length===0&&T.channel.subscribe("console",c),f.push(p)):(f=f.filter(function(d){return d!=p}),f.length===0&&T.channel.unsubscribe("console",c))}R.wp=u;function a(){T.channel.unsubscribe("console",c),f=[]}k=a},7396:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(5282);R.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var S="DiagnosticChannel";if(R.IsInitialized){var T=y(4106),f=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",c=f.split(","),u={bunyan:T.bunyan,console:T.console,mongodb:T.mongodb,mongodbCore:T.mongodbCore,mysql:T.mysql,redis:T.redis,pg:T.pg,pgPool:T.pgPool,winston:T.winston};for(var a in u)c.indexOf(a)===-1&&(u[a].enable(),k.info(S,"Subscribed to "+a+" events"));c.length>0&&k.info(S,"Some modules will not be patched",c)}else k.info(S,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");function h(p){!R.IsInitialized||y(4953).channel.addContextPreservation(p)}R.registerContextPreservation=h},7886:(o,R,y)=>{"use strict";var k;k={value:!0};var S=y(4953),T=[];R.qP=function(c){c.data.event.commandName==="ismaster",T.forEach(function(u){var a=c.data.startedData&&c.data.startedData.databaseName||"Unknown database";u.trackDependency({target:a,data:c.data.event.commandName,name:c.data.event.commandName,duration:c.data.event.duration,success:c.data.succeeded,resultCode:c.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})};function f(c,u){c?(T.length===0&&S.channel.subscribe("mongodb",R.qP),T.push(u)):(T=T.filter(function(a){return a!=u}),T.length===0&&S.channel.unsubscribe("mongodb",R.qP))}R.wp=f},4777:(o,R,y)=>{"use strict";var k;k={value:!0};var S=y(4953),T=[];R.qP=function(c){T.forEach(function(u){var a=c.data.query||{},h=a.sql||"Unknown query",p=!c.data.err,d=a._connection||{},m=d.config||{},b=m.socketPath?m.socketPath:(m.host||"localhost")+":"+m.port;u.trackDependency({target:b,data:h,name:h,duration:c.data.duration,success:p,resultCode:p?"0":"1",dependencyTypeName:"mysql"})})};function f(c,u){c?(T.length===0&&S.channel.subscribe("mysql",R.qP),T.push(u)):(T=T.filter(function(a){return a!=u}),T.length===0&&S.channel.unsubscribe("mysql",R.qP))}R.wp=f},1227:(o,R,y)=>{"use strict";var k;k={value:!0};var S=y(4953),T=[];R.qP=function(c){T.forEach(function(u){var a=c.data.query,h=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",p=!c.data.error,d=c.data.database.host+":"+c.data.database.port;u.trackDependency({target:d,data:h,name:h,duration:c.data.duration,success:p,resultCode:p?"0":"1",dependencyTypeName:"postgres"})})};function f(c,u){c?(T.length===0&&S.channel.subscribe("postgres",R.qP),T.push(u)):(T=T.filter(function(a){return a!=u}),T.length===0&&S.channel.unsubscribe("postgres",R.qP))}R.wp=f},5071:(o,R,y)=>{"use strict";var k;k={value:!0};var S=y(4953),T=[];R.qP=function(c){T.forEach(function(u){c.data.commandObj.command!=="info"&&u.trackDependency({target:c.data.address,name:c.data.commandObj.command,data:c.data.commandObj.command,duration:c.data.duration,success:!c.data.err,resultCode:c.data.err?"1":"0",dependencyTypeName:"redis"})})};function f(c,u){c?(T.length===0&&S.channel.subscribe("redis",R.qP),T.push(u)):(T=T.filter(function(a){return a!=u}),T.length===0&&S.channel.unsubscribe("redis",R.qP))}R.wp=f},454:(o,R,y)=>{"use strict";var k;k={value:!0};var S=y(5290),T=y(4953),f=[],c={syslog:function(p){var d={emerg:S.SeverityLevel.Critical,alert:S.SeverityLevel.Critical,crit:S.SeverityLevel.Critical,error:S.SeverityLevel.Error,warning:S.SeverityLevel.Warning,notice:S.SeverityLevel.Information,info:S.SeverityLevel.Information,debug:S.SeverityLevel.Verbose};return d[p]===void 0?S.SeverityLevel.Information:d[p]},npm:function(p){var d={error:S.SeverityLevel.Error,warn:S.SeverityLevel.Warning,info:S.SeverityLevel.Information,verbose:S.SeverityLevel.Verbose,debug:S.SeverityLevel.Verbose,silly:S.SeverityLevel.Verbose};return d[p]===void 0?S.SeverityLevel.Information:d[p]},unknown:function(p){return S.SeverityLevel.Information}},u=function(p){var d=p.data.message;f.forEach(function(m){if(d instanceof Error)m.trackException({exception:d,properties:p.data.meta});else{var b=c[p.data.levelKind](p.data.level);m.trackTrace({message:d,severity:b,properties:p.data.meta})}})};function a(p,d){p?(f.length===0&&T.channel.subscribe("winston",u),f.push(d)):(f=f.filter(function(m){return m!=d}),f.length===0&&T.channel.unsubscribe("winston",u))}R.wp=a;function h(){T.channel.unsubscribe("winston",u),f=[]}k=h},3580:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",R.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",R.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var y;(function(T){T.COMMITTED_BYTES="\\Memory\\Committed Bytes",T.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",T.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",T.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",T.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",T.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",T.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",T.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",T.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(y=R.QuickPulseCounter||(R.QuickPulseCounter={}));var k;(function(T){T.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",T.AVAILABLE_BYTES="\\Memory\\Available Bytes",T.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",T.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",T.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",T.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(k=R.PerformanceCounter||(R.PerformanceCounter={})),R.PerformanceToQuickPulseCounter=(S={},S[k.PROCESSOR_TIME]=y.PROCESSOR_TIME,S[k.REQUEST_RATE]=y.REQUEST_RATE,S[k.REQUEST_DURATION]=y.REQUEST_DURATION,S[y.COMMITTED_BYTES]=y.COMMITTED_BYTES,S[y.REQUEST_FAILURE_RATE]=y.REQUEST_FAILURE_RATE,S[y.DEPENDENCY_RATE]=y.DEPENDENCY_RATE,S[y.DEPENDENCY_FAILURE_RATE]=y.DEPENDENCY_FAILURE_RATE,S[y.DEPENDENCY_DURATION]=y.DEPENDENCY_DURATION,S[y.EXCEPTION_RATE]=y.EXCEPTION_RATE,S),R.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability"},R.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument"},R.TelemetryTypeStringToQuickPulseType={EventData:R.QuickPulseType.Event,ExceptionData:R.QuickPulseType.Exception,MessageData:R.QuickPulseType.Trace,MetricData:R.QuickPulseType.Metric,RequestData:R.QuickPulseType.Request,RemoteDependencyData:R.QuickPulseType.Dependency,AvailabilityData:R.QuickPulseType.Availability},R.TelemetryTypeStringToQuickPulseDocumentType={EventData:R.QuickPulseDocumentType.Event,ExceptionData:R.QuickPulseDocumentType.Exception,MessageData:R.QuickPulseDocumentType.Trace,MetricData:R.QuickPulseDocumentType.Metric,RequestData:R.QuickPulseDocumentType.Request,RemoteDependencyData:R.QuickPulseDocumentType.Dependency,AvailabilityData:R.QuickPulseDocumentType.Availability};var S},9382:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(9958),S=function(){function f(){}return f.TYPE_HTTP="Http",f.TYPE_AI="Http (tracked component)",f}();R.RemoteDependencyDataConstants=S;function T(f){return"properties"in f||f instanceof k.EventData||f instanceof k.ExceptionData||f instanceof k.MessageData||f instanceof k.MetricData||f instanceof k.PageViewData||f instanceof k.RemoteDependencyData||f instanceof k.RequestData}R.domainSupportsProperties=T},7220:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(8934),T=function(f){k(c,f);function c(){var u=f.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return c}(S);o.exports=T},4101:o=>{"use strict";var R=function(){function y(){}return y}();o.exports=R},9871:o=>{"use strict";var R=function(){function y(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return y}();o.exports=R},320:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(4101),T=function(f){k(c,f);function c(){return f.call(this)||this}return c}(S);o.exports=T},8602:(o,R,y)=>{"use strict";var k=y(495),S=function(){function T(){this.kind=k.Measurement}return T}();o.exports=S},495:o=>{"use strict";var R;(function(y){y[y.Measurement=0]="Measurement",y[y.Aggregation=1]="Aggregation"})(R||(R={})),o.exports=R},8934:o=>{"use strict";var R=function(){function y(){}return y}();o.exports=R},7300:o=>{"use strict";var R=function(){function y(){this.ver=1,this.sampleRate=100,this.tags={}}return y}();o.exports=R},4526:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(8934),T=function(f){k(c,f);function c(){var u=f.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return c}(S);o.exports=T},935:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(8934),T=function(f){k(c,f);function c(){var u=f.call(this)||this;return u.ver=2,u.exceptions=[],u.properties={},u.measurements={},u}return c}(S);o.exports=T},8082:o=>{"use strict";var R=function(){function y(){this.hasFullStack=!0,this.parsedStack=[]}return y}();o.exports=R},901:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(8934),T=function(f){k(c,f);function c(){var u=f.call(this)||this;return u.ver=2,u.properties={},u}return c}(S);o.exports=T},3092:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(8934),T=function(f){k(c,f);function c(){var u=f.call(this)||this;return u.ver=2,u.metrics=[],u.properties={},u}return c}(S);o.exports=T},6279:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(4526),T=function(f){k(c,f);function c(){var u=f.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return c}(S);o.exports=T},6290:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(8934),T=function(f){k(c,f);function c(){var u=f.call(this)||this;return u.ver=2,u.success=!0,u.properties={},u.measurements={},u}return c}(S);o.exports=T},7339:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){f(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),S=y(8934),T=function(f){k(c,f);function c(){var u=f.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return c}(S);o.exports=T},9697:o=>{"use strict";var R;(function(y){y[y.Verbose=0]="Verbose",y[y.Information=1]="Information",y[y.Warning=2]="Warning",y[y.Error=3]="Error",y[y.Critical=4]="Critical"})(R||(R={})),o.exports=R},6376:o=>{"use strict";var R=function(){function y(){}return y}();o.exports=R},9958:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.AvailabilityData=y(7220),R.Base=y(4101),R.ContextTagKeys=y(9871),R.Data=y(320),R.DataPoint=y(8602),R.DataPointType=y(495),R.Domain=y(8934),R.Envelope=y(7300),R.EventData=y(4526),R.ExceptionData=y(935),R.ExceptionDetails=y(8082),R.MessageData=y(901),R.MetricData=y(3092),R.PageViewData=y(6279),R.RemoteDependencyData=y(6290),R.RequestData=y(7339),R.SeverityLevel=y(9697),R.StackFrame=y(6376)},5481:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});function y(T){switch(T){case S.Event:return"EventData";case S.Exception:return"ExceptionData";case S.Trace:return"MessageData";case S.Metric:return"MetricData";case S.Request:return"RequestData";case S.Dependency:return"RemoteDependencyData";case S.Availability:return"AvailabilityData"}}R.telemetryTypeToBaseType=y;function k(T){switch(T){case"EventData":return S.Event;case"ExceptionData":return S.Exception;case"MessageData":return S.Trace;case"MetricData":return S.Metric;case"RequestData":return S.Request;case"RemoteDependencyData":return S.Dependency;case"AvailabilityData":return S.Availability}}R.baseTypeToTelemetryType=k,R.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData"};var S;(function(T){T[T.Event=0]="Event",T[T.Exception=1]="Exception",T[T.Trace=2]="Trace",T[T.Metric=3]="Metric",T[T.Request=4]="Request",T[T.Dependency=5]="Dependency",T[T.Availability=6]="Availability"})(S=R.TelemetryType||(R.TelemetryType={}))},2626:(o,R,y)=>{"use strict";function k(S){for(var T in S)R.hasOwnProperty(T)||(R[T]=S[T])}Object.defineProperty(R,"__esModule",{value:!0}),k(y(5481))},5290:(o,R,y)=>{"use strict";function k(S){for(var T in S)R.hasOwnProperty(T)||(R[T]=S[T])}Object.defineProperty(R,"__esModule",{value:!0}),k(y(9382)),k(y(9958)),k(y(2626))},3504:(o,R,y)=>{"use strict";var k=y(5282),S=function(){function T(f,c,u,a){this._buffer=[],this._lastSend=0,this._isDisabled=f,this._getBatchSize=c,this._getBatchIntervalMs=u,this._sender=a}return T.prototype.setUseDiskRetryCaching=function(f,c,u){this._sender.setDiskRetryMode(f,c,u)},T.prototype.send=function(f){var c=this;if(!this._isDisabled()){if(!f){k.warn("Cannot send null/undefined telemetry");return}var u=this._stringify(f);if(typeof u=="string"){if(this._buffer.push(u),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){c._timeoutHandle=null,c.triggerSend(!1)},this._getBatchIntervalMs()))}}},T.prototype.triggerSend=function(f,c){var u=this._buffer.length<1;if(!u){var a=this._buffer.join(`
`);f?(this._sender.saveOnCrash(a),typeof c=="function"&&c("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(a):new Buffer(a),c)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,u&&typeof c=="function"&&c("no data to send")},T.prototype._stringify=function(f){try{return JSON.stringify(f)}catch(c){k.warn("Failed to serialize payload",c,f)}},T}();o.exports=S},9253:(o,R,y)=>{"use strict";var k=y(9962),S=y(5158),T=y(3580),f=y(8835),c=function(){function u(a){var h=this;this.endpointBase=T.DEFAULT_BREEZE_ENDPOINT;var p=process.env[u.ENV_connectionString],d=S.parse(a),m=S.parse(p),b=!d.instrumentationkey&&Object.keys(d).length>0?null:a;this.instrumentationKey=d.instrumentationkey||b||m.instrumentationkey||u._getInstrumentationKey(),this.endpointUrl=(d.ingestionendpoint||m.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(v){return h.correlationId=v},this.proxyHttpUrl=process.env[u.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[u.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=d.ingestionendpoint||m.ingestionendpoint||process.env[u.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=d.liveendpoint||m.liveendpoint||process.env[u.ENV_quickPulseHost]||T.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=f.parse(this._quickPulseHost).host)}return Object.defineProperty(u.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(a){k.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=a,this.correlationId=k.correlationIdPrefix,k.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(a){this._quickPulseHost=a},enumerable:!0,configurable:!0}),u._getInstrumentationKey=function(){var a=process.env[u.ENV_iKey]||process.env[u.ENV_azurePrefix+u.ENV_iKey]||process.env[u.legacy_ENV_iKey]||process.env[u.ENV_azurePrefix+u.legacy_ENV_iKey];if(!a||a=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return a},u.ENV_azurePrefix="APPSETTING_",u.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",u.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",u.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",u.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",u.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",u.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",u.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",u.ENV_http_proxy="http_proxy",u.ENV_https_proxy="https_proxy",u}();o.exports=c},5158:(o,R,y)=>{"use strict";var k=y(3580),S=function(){function T(){}return T.parse=function(f){if(!f)return{};var c=f.split(T._FIELDS_SEPARATOR),u=c.reduce(function(h,p){var d=p.split(T._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var m=d[0].toLowerCase(),b=d[1];h[m]=b}return h},{});if(Object.keys(u).length>0){if(u.endpointsuffix){var a=u.location?u.location+".":"";u.ingestionendpoint=u.ingestionendpoint||"https://"+a+"dc."+u.endpointsuffix,u.liveendpoint=u.liveendpoint||"https://"+a+"live."+u.endpointsuffix}u.ingestionendpoint=u.ingestionendpoint||k.DEFAULT_BREEZE_ENDPOINT,u.liveendpoint=u.liveendpoint||k.DEFAULT_LIVEMETRICS_ENDPOINT}return u},T._FIELDS_SEPARATOR=";",T._FIELD_KEY_VALUE_SEPARATOR="=",T}();o.exports=S},4470:(o,R,y)=>{"use strict";var k=y(2087),S=y(5747),T=y(5622),f=y(5290),c=y(5282),u=function(){function a(h){this.keys=new f.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return a.prototype._loadApplicationContext=function(h){if(h=h||T.resolve(__dirname,"../../../../package.json"),!a.appVersion[h]){a.appVersion[h]="unknown";try{var p=JSON.parse(S.readFileSync(h,"utf8"));p&&typeof p.version=="string"&&(a.appVersion[h]=p.version)}catch(d){c.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=a.appVersion[h]},a.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=k&&k.hostname(),this.tags[this.keys.deviceOSVersion]=k&&k.type()+" "+k.release(),this.tags[this.keys.cloudRole]=a.DefaultRoleName,this.tags["ai.device.osArchitecture"]=k&&k.arch(),this.tags["ai.device.osPlatform"]=k&&k.platform()},a.prototype._loadInternalContext=function(){var h=T.resolve(__dirname,"../../package.json");if(!a.sdkVersion){a.sdkVersion="unknown";try{var p=JSON.parse(S.readFileSync(h,"utf8"));p&&typeof p.version=="string"&&(a.sdkVersion=p.version)}catch(d){c.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+a.sdkVersion},a.DefaultRoleName="Web",a.appVersion={},a.sdkVersion=null,a}();o.exports=u},9962:(o,R,y)=>{"use strict";var k=y(5740),S=y(5282),T=function(){function f(){}return f.queryCorrelationId=function(c,u){var a=c.profileQueryEndpoint+"/api/profiles/"+c.instrumentationKey+"/appId";if(f.completedLookups.hasOwnProperty(a)){u(f.completedLookups[a]);return}else if(f.pendingLookups[a]){f.pendingLookups[a].push(u);return}f.pendingLookups[a]=[u];var h=function(){if(!!f.pendingLookups[a]){var p={method:"GET",disableAppInsightsAutoCollection:!0};S.info(f.TAG,p);var d=k.makeRequest(c,a,p,function(m){if(m.statusCode===200){var b="";m.setEncoding("utf-8"),m.on("data",function(v){b+=v}),m.on("end",function(){S.info(f.TAG,b);var v=f.correlationIdPrefix+b;f.completedLookups[a]=v,f.pendingLookups[a]&&f.pendingLookups[a].forEach(function(_){return _(v)}),delete f.pendingLookups[a]})}else m.statusCode>=400&&m.statusCode<500?(f.completedLookups[a]=void 0,delete f.pendingLookups[a]):setTimeout(h,c.correlationIdRetryIntervalMs)});d&&(d.on("error",function(m){S.warn(f.TAG,m)}),d.end())}};setTimeout(h,0)},f.cancelCorrelationIdQuery=function(c,u){var a=c.profileQueryEndpoint+"/api/profiles/"+c.instrumentationKey+"/appId",h=f.pendingLookups[a];h&&(f.pendingLookups[a]=h.filter(function(p){return p!=u}),f.pendingLookups[a].length==0&&delete f.pendingLookups[a])},f.generateRequestId=function(c){if(c){c=c[0]=="|"?c:"|"+c,c[c.length-1]!=="."&&(c+=".");var u=(f.currentRootId++).toString(16);return f.appendSuffix(c,u,"_")}else return f.generateRootId()},f.getRootId=function(c){var u=c.indexOf(".");u<0&&(u=c.length);var a=c[0]==="|"?1:0;return c.substring(a,u)},f.generateRootId=function(){return"|"+k.w3cTraceId()+"."},f.appendSuffix=function(c,u,a){if(c.length+u.length<f.requestIdMaxLength)return c+u+a;var h=f.requestIdMaxLength-9;if(c.length>h)for(;h>1;--h){var p=c[h-1];if(p==="."||p==="_")break}if(h<=1)return f.generateRootId();for(u=k.randomu32().toString(16);u.length<8;)u="0"+u;return c.substring(0,h)+u+"#"},f.TAG="CorrelationIdManager",f.correlationIdPrefix="cid-v1:",f.w3cEnabled=!1,f.pendingLookups={},f.completedLookups={},f.requestIdMaxLength=1024,f.currentRootId=k.randomu32(),f}();o.exports=T},9813:(o,R,y)=>{"use strict";var k=y(5290),S=y(5740),T=y(894),f=function(){function u(){}return u.createEnvelope=function(a,h,p,d,m){var b=null;switch(h){case k.TelemetryType.Trace:b=u.createTraceData(a);break;case k.TelemetryType.Dependency:b=u.createDependencyData(a);break;case k.TelemetryType.Event:b=u.createEventData(a);break;case k.TelemetryType.Exception:b=u.createExceptionData(a);break;case k.TelemetryType.Request:b=u.createRequestData(a);break;case k.TelemetryType.Metric:b=u.createMetricData(a);break;case k.TelemetryType.Availability:b=u.createAvailabilityData(a);break}if(p&&k.domainSupportsProperties(b.baseData)){if(b&&b.baseData)if(!b.baseData.properties)b.baseData.properties=p;else for(var v in p)b.baseData.properties[v]||(b.baseData.properties[v]=p[v]);b.baseData.properties=S.validateStringMap(b.baseData.properties)}var _=m&&m.instrumentationKey||"",E=new k.Envelope;return E.data=b,E.iKey=_,E.name="Microsoft.ApplicationInsights."+_.replace(/-/g,"")+"."+b.baseType.substr(0,b.baseType.length-4),E.tags=this.getTags(d,a.tagOverrides),E.time=new Date().toISOString(),E.ver=1,E.sampleRate=m?m.samplingPercentage:100,h===k.TelemetryType.Metric&&(E.sampleRate=100),E},u.createTraceData=function(a){var h=new k.MessageData;h.message=a.message,h.properties=a.properties,isNaN(a.severity)?h.severityLevel=k.SeverityLevel.Information:h.severityLevel=a.severity;var p=new k.Data;return p.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Trace),p.baseData=h,p},u.createDependencyData=function(a){var h=new k.RemoteDependencyData;typeof a.name=="string"&&(h.name=a.name.length>1024?a.name.slice(0,1021)+"...":a.name),h.data=a.data,h.target=a.target,h.duration=S.msToTimeSpan(a.duration),h.success=a.success,h.type=a.dependencyTypeName,h.properties=a.properties,h.resultCode=a.resultCode?a.resultCode+"":"",a.id?h.id=a.id:h.id=S.w3cTraceId();var p=new k.Data;return p.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Dependency),p.baseData=h,p},u.createEventData=function(a){var h=new k.EventData;h.name=a.name,h.properties=a.properties,h.measurements=a.measurements;var p=new k.Data;return p.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Event),p.baseData=h,p},u.createExceptionData=function(a){var h=new k.ExceptionData;h.properties=a.properties,isNaN(a.severity)?h.severityLevel=k.SeverityLevel.Error:h.severityLevel=a.severity,h.measurements=a.measurements,h.exceptions=[];var p=a.exception.stack,d=new k.ExceptionDetails;d.message=a.exception.message,d.typeName=a.exception.name,d.parsedStack=this.parseStack(p),d.hasFullStack=S.isArray(d.parsedStack)&&d.parsedStack.length>0,h.exceptions.push(d);var m=new k.Data;return m.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Exception),m.baseData=h,m},u.createRequestData=function(a){var h=new k.RequestData;a.id?h.id=a.id:h.id=S.w3cTraceId(),h.name=a.name,h.url=a.url,h.source=a.source,h.duration=S.msToTimeSpan(a.duration),h.responseCode=a.resultCode?a.resultCode+"":"",h.success=a.success,h.properties=a.properties;var p=new k.Data;return p.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Request),p.baseData=h,p},u.createMetricData=function(a){var h=new k.MetricData;h.metrics=[];var p=new k.DataPoint;p.count=isNaN(a.count)?1:a.count,p.kind=k.DataPointType.Aggregation,p.max=isNaN(a.max)?a.value:a.max,p.min=isNaN(a.min)?a.value:a.min,p.name=a.name,p.stdDev=isNaN(a.stdDev)?0:a.stdDev,p.value=a.value,h.metrics.push(p),h.properties=a.properties;var d=new k.Data;return d.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Metric),d.baseData=h,d},u.createAvailabilityData=function(a){var h=new k.AvailabilityData;a.id?h.id=a.id:h.id=S.w3cTraceId(),h.name=a.name,h.duration=S.msToTimeSpan(a.duration),h.success=a.success,h.runLocation=a.runLocation,h.message=a.message,h.measurements=a.measurements,h.properties=a.properties;var p=new k.Data;return p.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Availability),p.baseData=h,p},u.getTags=function(a,h){var p=T.CorrelationContextManager.getCurrentContext(),d={};if(a&&a.tags)for(var m in a.tags)d[m]=a.tags[m];if(h)for(var m in h)d[m]=h[m];return p&&(d[a.keys.operationId]=d[a.keys.operationId]||p.operation.id,d[a.keys.operationName]=d[a.keys.operationName]||p.operation.name,d[a.keys.operationParentId]=d[a.keys.operationParentId]||p.operation.parentId),d},u.parseStack=function(a){var h=void 0;if(typeof a=="string"){var p=a.split(`
`);h=[];for(var d=0,m=0,b=0;b<=p.length;b++){var v=p[b];if(c.regex.test(v)){var _=new c(p[b],d++);m+=_.sizeInBytes,h.push(_)}}var E=32*1024;if(m>E)for(var N=0,D=h.length-1,L=0,I=N,q=D;N<D;){var A=h[N].sizeInBytes,U=h[D].sizeInBytes;if(L+=A+U,L>E){var O=q-I+1;h.splice(I,O);break}I=N,q=D,N++,D--}}return h},u}(),c=function(){function u(a,h){this.sizeInBytes=0,this.level=h,this.method="<no_method>",this.assembly=S.trim(a);var p=a.match(u.regex);p&&p.length>=5&&(this.method=S.trim(p[2])||this.method,this.fileName=S.trim(p[4])||"<no_filename>",this.line=parseInt(p[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=u.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return u.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,u.baseSize=58,u}();o.exports=f},5282:o=>{"use strict";var R=function(){function y(){}return y.info=function(k){for(var S=[],T=1;T<arguments.length;T++)S[T-1]=arguments[T];y.enableDebug&&console.info(y.TAG+k,S)},y.warn=function(k){for(var S=[],T=1;T<arguments.length;T++)S[T-1]=arguments[T];y.disableWarnings||console.warn(y.TAG+k,S)},y.enableDebug=!1,y.disableWarnings=!1,y.disableErrors=!1,y.TAG="ApplicationInsights:",y}();o.exports=R},1259:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])};return function(h,p){a(h,p);function d(){this.constructor=h}h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),S=y(7625),T=y(731),f=y(8723),c=y(5282),u=function(a){k(h,a);function h(){return a!==null&&a.apply(this,arguments)||this}return h.prototype.trackNodeHttpRequestSync=function(p){p&&p.request&&p.response&&p.duration?T.trackRequestSync(this,p):c.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},h.prototype.trackNodeHttpRequest=function(p){(p.duration||p.error)&&c.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),p&&p.request&&p.response?T.trackRequest(this,p):c.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},h.prototype.trackNodeHttpDependency=function(p){p&&p.request?f.trackRequest(this,p):c.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},h}(S);o.exports=u},7148:function(o,R,y){"use strict";var k=this&&this.__assign||Object.assign||function(p){for(var d,m=1,b=arguments.length;m<b;m++){d=arguments[m];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(p[v]=d[v])}return p},S=y(2087),T=y(5290),f=y(3580),c=y(5740),u=y(5282),a=c.w3cTraceId(),h=function(){function p(){}return p.createQuickPulseEnvelope=function(d,m,b,v){var _=S&&typeof S.hostname=="function"&&S.hostname()||"Unknown",E=v.tags&&v.keys&&v.keys.cloudRoleInstance&&v.tags[v.keys.cloudRoleInstance]||_,N={Documents:m.length>0?m:null,InstrumentationKey:b.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:v.tags[v.keys.internalSdkVersion],StreamId:a,MachineName:_,Instance:E};return N},p.createQuickPulseMetric=function(d){var m;return m={Name:d.name,Value:d.value,Weight:d.count||1},m},p.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case T.TelemetryTypeString.Event:return p.createQuickPulseEventDocument(d);case T.TelemetryTypeString.Exception:return p.createQuickPulseExceptionDocument(d);case T.TelemetryTypeString.Trace:return p.createQuickPulseTraceDocument(d);case T.TelemetryTypeString.Dependency:return p.createQuickPulseDependencyDocument(d);case T.TelemetryTypeString.Request:return p.createQuickPulseRequestDocument(d)}return null},p.createQuickPulseEventDocument=function(d){var m=p.createQuickPulseDocument(d),b=d.data.baseData.name,v=k({},m,{Name:b});return v},p.createQuickPulseTraceDocument=function(d){var m=p.createQuickPulseDocument(d),b=d.data.baseData.severityLevel||0,v=k({},m,{Message:d.data.baseData.message,SeverityLevel:T.SeverityLevel[b]});return v},p.createQuickPulseExceptionDocument=function(d){var m=p.createQuickPulseDocument(d),b=d.data.baseData.exceptions,v="",_="",E="";b&&b.length>0&&(b[0].parsedStack&&b[0].parsedStack.length>0?b[0].parsedStack.forEach(function(D){v+=D.assembly+`
`}):b[0].stack&&b[0].stack.length>0&&(v=b[0].stack),_=b[0].message,E=b[0].typeName);var N=k({},m,{Exception:v,ExceptionMessage:_,ExceptionType:E});return N},p.createQuickPulseRequestDocument=function(d){var m=p.createQuickPulseDocument(d),b=d.data.baseData,v=k({},m,{Name:b.name,Success:b.success,Duration:b.duration,ResponseCode:b.responseCode,OperationName:b.name});return v},p.createQuickPulseDependencyDocument=function(d){var m=p.createQuickPulseDocument(d),b=d.data.baseData,v=k({},m,{Name:b.name,Target:b.target,Success:b.success,Duration:b.duration,ResultCode:b.resultCode,CommandName:b.data,OperationName:m.OperationId,DependencyTypeName:b.type});return v},p.createQuickPulseDocument=function(d){var m,b,v,_;d.data.baseType?(b=f.TelemetryTypeStringToQuickPulseType[d.data.baseType],m=f.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):u.warn("Document type invalid; not sending live metric document",d.data.baseType),v=d.tags[p.keys.operationId],_=p.aggregateProperties(d);var E={DocumentType:m,__type:b,OperationId:v,Version:"1.0",Properties:_};return E},p.aggregateProperties=function(d){var m=[],b=d.data.baseData.measurements||{};for(var v in b)if(b.hasOwnProperty(v)){var _=b[v],E={key:v,value:_};m.push(E)}var N=d.data.baseData.properties||{};for(var v in N)if(N.hasOwnProperty(v)){var _=N[v],E={key:v,value:_};m.push(E)}return m},p.keys=new T.ContextTagKeys,p}();o.exports=h},9184:(o,R,y)=>{"use strict";var k=y(7211),S=y(8723),T=y(5282),f={method:"POST",time:"x-ms-qps-transmission-time",subscribed:"x-ms-qps-subscribed"},c=function(){function u(a){this._config=a,this._consecutiveErrors=0}return u.prototype.ping=function(a,h){this._submitData(a,h,"ping")},u.prototype.post=function(a,h){this._submitData([a],h,"post")},u.prototype._submitData=function(a,h,p){var d=this,m=JSON.stringify(a),b=(_={},_[S.disableCollectionRequestOption]=!0,_.host=this._config.quickPulseHost,_.method=f.method,_.path="/QuickPulseService.svc/"+p+"?ikey="+this._config.instrumentationKey,_.headers=(E={Expect:"100-continue"},E[f.time]=1e4*Date.now(),E["Content-Type"]="application/json",E["Content-Length"]=Buffer.byteLength(m),E),_),v=k.request(b,function(N){var D=N.headers[f.subscribed]==="true";d._consecutiveErrors=0,h(D,N)});v.on("error",function(N){d._consecutiveErrors++;var D="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";d._consecutiveErrors%u.MAX_QPS_FAILURES_BEFORE_WARN==0?(D="Live Metrics endpoint could not be reached "+d._consecutiveErrors+" consecutive times. Most recent error:",T.warn(u.TAG,D,N)):T.info(u.TAG,D,N),h()}),v.write(m),v.end();var _,E},u.TAG="QuickPulseSender",u.MAX_QPS_FAILURES_BEFORE_WARN=25,u}();o.exports=c},3668:(o,R,y)=>{"use strict";var k=y(5282),S=y(9253),T=y(7148),f=y(9184),c=y(3580),u=y(4470),a=function(){function h(p,d){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new S(p),this.context=d||new u,this._sender=new f(this.config),this._isEnabled=!1}return h.prototype.addCollector=function(p){this._collectors.push(p)},h.prototype.trackMetric=function(p){this._addMetric(p)},h.prototype.addDocument=function(p){var d=T.telemetryEnvelopeToQuickPulseDocument(p);d&&this._documents.push(d)},h.prototype.enable=function(p){p&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!p&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},h.prototype.enableCollectors=function(p){this._collectors.forEach(function(d){d.enable(p)})},h.prototype._addMetric=function(p){var d=p.value,m=p.count||1,b=c.PerformanceToQuickPulseCounter[p.name];b&&(this._metrics[b]?(this._metrics[b].Value=(this._metrics[b].Value*this._metrics[b].Weight+d*m)/(this._metrics[b].Weight+m),this._metrics[b].Weight+=m):(this._metrics[b]=T.createQuickPulseMetric(p),this._metrics[b].Name=b,this._metrics[b].Weight=1))},h.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},h.prototype._goQuickPulse=function(){var p=this,d=Object.keys(this._metrics).map(function(v){return p._metrics[v]}),m=T.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(m):this._ping(m);var b=this._isCollectingData?h.POST_INTERVAL:h.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=h.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,b=h.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=h.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(b=h.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),b),this._handle.unref()},h.prototype._ping=function(p){this._sender.ping(p,this._quickPulseDone.bind(this))},h.prototype._post=function(p){this._sender.post(p,this._quickPulseDone.bind(this))},h.prototype._quickPulseDone=function(p,d){p!=null?(this._isCollectingData!==p&&(k.info("Live Metrics sending data",p),this.enableCollectors(p)),this._isCollectingData=p,d&&d.statusCode<300&&d.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},h.MAX_POST_WAIT_TIME=2e4,h.MAX_PING_WAIT_TIME=6e4,h.FALLBACK_INTERVAL=6e4,h.PING_INTERVAL=5e3,h.POST_INTERVAL=1e3,h}();o.exports=a},9036:o=>{"use strict";o.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},2588:(o,R,y)=>{"use strict";var k=y(5747),S=y(2087),T=y(5622),f=y(8761),c=y(3129),u=y(5282),a=y(8723),h=y(5740),p=function(){function d(m,b,v){if(this._config=m,this._onSuccess=b,this._onError=v,this._enableDiskRetryMode=!1,this._resendInterval=d.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=d.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!d.OS_PROVIDES_FILE_PROTECTION)if(d.USE_ICACLS){try{d.OS_PROVIDES_FILE_PROTECTION=k.existsSync(d.ICACLS_PATH)}catch(_){}d.OS_PROVIDES_FILE_PROTECTION||u.warn(d.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else d.OS_PROVIDES_FILE_PROTECTION=!0}return d.prototype.setDiskRetryMode=function(m,b,v){this._enableDiskRetryMode=d.OS_PROVIDES_FILE_PROTECTION&&m,typeof b=="number"&&b>=0&&(this._resendInterval=Math.floor(b)),typeof v=="number"&&v>=0&&(this._maxBytesOnDisk=Math.floor(v)),m&&!d.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(d.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},d.prototype.send=function(m,b){var v=this,_=this._config.endpointUrl,E={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};f.gzip(m,function(N,D){var L=D;N?(u.warn(N),L=m,E.headers["Content-Length"]=m.length.toString()):(E.headers["Content-Encoding"]="gzip",E.headers["Content-Length"]=D.length),u.info(d.TAG,E),E[a.disableCollectionRequestOption]=!0;var I=function(A){A.setEncoding("utf-8");var U="";A.on("data",function(O){U+=O}),A.on("end",function(){v._numConsecutiveFailures=0,u.info(d.TAG,U),typeof v._onSuccess=="function"&&v._onSuccess(U),typeof b=="function"&&b(U),v._enableDiskRetryMode&&(A.statusCode===200?setTimeout(function(){return v._sendFirstFileOnDisk()},v._resendInterval).unref():(A.statusCode===408||A.statusCode===429||A.statusCode===439||A.statusCode===500||A.statusCode===503)&&v._storeToDisk(m))})},q=h.makeRequest(v._config,_,E,I);q.on("error",function(A){if(v._numConsecutiveFailures++,!v._enableDiskRetryMode||v._numConsecutiveFailures>0&&v._numConsecutiveFailures%d.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var U="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";v._enableDiskRetryMode&&(U="Ingestion endpoint could not be reached "+v._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(d.TAG,U,A)}else{var U="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";u.info(d.TAG,U,A)}if(v._onErrorHelper(A),typeof b=="function"){var O="error sending telemetry";A&&typeof A.toString=="function"&&(O=A.toString()),b(O)}v._enableDiskRetryMode&&v._storeToDisk(m)}),q.write(L),q.end()})},d.prototype.saveOnCrash=function(m){this._enableDiskRetryMode&&this._storeToDiskSync(m)},d.prototype._runICACLS=function(m,b){var v=c.spawn(d.ICACLS_PATH,m,{windowsHide:!0});v.on("error",function(_){return b(_)}),v.on("close",function(_,E){return b(_===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+_+")"))})},d.prototype._runICACLSSync=function(m){if(c.spawnSync){var b=c.spawnSync(d.ICACLS_PATH,m,{windowsHide:!0});if(b.error)throw b.error;if(b.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+b.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},d.prototype._getACLIdentity=function(m){if(d.ACL_IDENTITY)return m(null,d.ACL_IDENTITY);var b=c.spawn(d.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),v="";b.stdout.on("data",function(_){return v+=_}),b.on("error",function(_){return m(_,null)}),b.on("close",function(_,E){return d.ACL_IDENTITY=v&&v.trim(),m(_===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+_+")"),d.ACL_IDENTITY)})},d.prototype._getACLIdentitySync=function(){if(d.ACL_IDENTITY)return d.ACL_IDENTITY;if(c.spawnSync){var m=c.spawnSync(d.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(m.error)throw m.error;if(m.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+m.status+")");return d.ACL_IDENTITY=m.stdout&&m.stdout.toString().trim(),d.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},d.prototype._getACLArguments=function(m,b){return[m,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",b+":(OI)(CI)F","/inheritance:r"]},d.prototype._applyACLRules=function(m,b){var v=this;if(!d.USE_ICACLS)return b(null);if(d.ACLED_DIRECTORIES[m]===void 0)d.ACLED_DIRECTORIES[m]=!1,this._getACLIdentity(function(_,E){if(_)return d.ACLED_DIRECTORIES[m]=!1,b(_);v._runICACLS(v._getACLArguments(m,E),function(N){return d.ACLED_DIRECTORIES[m]=!N,b(N)})});else return b(d.ACLED_DIRECTORIES[m]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},d.prototype._applyACLRulesSync=function(m){if(d.USE_ICACLS){if(d.ACLED_DIRECTORIES[m]===void 0){this._runICACLSSync(this._getACLArguments(m,this._getACLIdentitySync())),d.ACLED_DIRECTORIES[m]=!0;return}else if(!d.ACLED_DIRECTORIES[m])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},d.prototype._confirmDirExists=function(m,b){var v=this;k.lstat(m,function(_,E){_&&_.code==="ENOENT"?k.mkdir(m,function(N){N&&N.code!=="EEXIST"?b(N):v._applyACLRules(m,b)}):!_&&E.isDirectory()?v._applyACLRules(m,b):b(_||new Error("Path existed but was not a directory"))})},d.prototype._getShallowDirectorySize=function(m,b){k.readdir(m,function(v,_){if(v)return b(v,-1);var E=null,N=0,D=0;if(_.length===0){b(null,0);return}for(var L=0;L<_.length;L++)k.stat(T.join(m,_[L]),function(I,q){D++,I?E=I:q.isFile()&&(N+=q.size),D===_.length&&(E?b(E,-1):b(E,N))})})},d.prototype._getShallowDirectorySizeSync=function(m){for(var b=k.readdirSync(m),v=0,_=0;_<b.length;_++)v+=k.statSync(T.join(m,b[_])).size;return v},d.prototype._storeToDisk=function(m){var b=this,v=T.join(S.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);u.info(d.TAG,"Checking existance of data storage directory: "+v),this._confirmDirExists(v,function(_){if(_){u.warn(d.TAG,"Error while checking/creating directory: "+(_&&_.message)),b._onErrorHelper(_);return}b._getShallowDirectorySize(v,function(E,N){if(E||N<0){u.warn(d.TAG,"Error while checking directory size: "+(E&&E.message)),b._onErrorHelper(E);return}else if(N>b._maxBytesOnDisk){u.warn(d.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+N);return}var D=new Date().getTime()+".ai.json",L=T.join(v,D);u.info(d.TAG,"saving data to disk at: "+L),k.writeFile(L,m,{mode:384},function(I){return b._onErrorHelper(I)})})})},d.prototype._storeToDiskSync=function(m){var b=T.join(S.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);try{u.info(d.TAG,"Checking existance of data storage directory: "+b),k.existsSync(b)||k.mkdirSync(b),this._applyACLRulesSync(b);var v=this._getShallowDirectorySizeSync(b);if(v>this._maxBytesOnDisk){u.info(d.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+v);return}var _=new Date().getTime()+".ai.json",E=T.join(b,_);u.info(d.TAG,"saving data before crash to disk at: "+E),k.writeFileSync(E,m,{mode:384})}catch(N){u.warn(d.TAG,"Error while saving data to disk: "+(N&&N.message)),this._onErrorHelper(N)}},d.prototype._sendFirstFileOnDisk=function(){var m=this,b=T.join(S.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);k.exists(b,function(v){v&&k.readdir(b,function(_,E){if(_)m._onErrorHelper(_);else if(E=E.filter(function(L){return T.basename(L).indexOf(".ai.json")>-1}),E.length>0){var N=E[0],D=T.join(b,N);k.readFile(D,function(L,I){L?m._onErrorHelper(L):k.unlink(D,function(q){q?m._onErrorHelper(q):m.send(I)})})}})})},d.prototype._onErrorHelper=function(m){typeof this._onError=="function"&&this._onError(m)},d.TAG="Sender",d.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",d.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",d.ACLED_DIRECTORIES={},d.ACL_IDENTITY=null,d.WAIT_BETWEEN_RESEND=60*1e3,d.MAX_BYTES_ON_DISK=50*1e3*1e3,d.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,d.TEMPDIR_PREFIX="appInsights-node",d.OS_PROVIDES_FILE_PROTECTION=!1,d.USE_ICACLS=S.type()==="Windows_NT",d}();o.exports=p},7625:(o,R,y)=>{"use strict";var k=y(8835),S=y(9253),T=y(4470),f=y(5290),c=y(3504),u=y(9428),a=y(894),h=y(2588),p=y(5740),d=y(5282),m=y(9813),b=function(){function v(_){this._telemetryProcessors=[];var E=new S(_);this.config=E,this.context=new T,this.commonProperties={};var N=new h(this.config);this.channel=new c(function(){return E.disableAppInsights},function(){return E.maxBatchSize},function(){return E.maxBatchIntervalMs},N)}return v.prototype.trackAvailability=function(_){this.track(_,f.TelemetryType.Availability)},v.prototype.trackTrace=function(_){this.track(_,f.TelemetryType.Trace)},v.prototype.trackMetric=function(_){this.track(_,f.TelemetryType.Metric)},v.prototype.trackException=function(_){_&&_.exception&&!p.isError(_.exception)&&(_.exception=new Error(_.exception.toString())),this.track(_,f.TelemetryType.Exception)},v.prototype.trackEvent=function(_){this.track(_,f.TelemetryType.Event)},v.prototype.trackRequest=function(_){this.track(_,f.TelemetryType.Request)},v.prototype.trackDependency=function(_){_&&!_.target&&_.data&&(_.target=k.parse(_.data).host),this.track(_,f.TelemetryType.Dependency)},v.prototype.flush=function(_){this.channel.triggerSend(_?!!_.isAppCrashing:!1,_?_.callback:void 0)},v.prototype.track=function(_,E){if(_&&f.telemetryTypeToBaseType(E)){var N=m.createEnvelope(_,E,this.commonProperties,this.context,this.config);_.time&&(N.time=_.time.toISOString());var D=this.runTelemetryProcessors(N,_.contextObjects);D=D&&u.samplingTelemetryProcessor(N,{correlationContext:a.CorrelationContextManager.getCurrentContext()}),u.performanceMetricsTelemetryProcessor(N,this.quickPulseClient),D&&this.channel.send(N)}else d.warn("track() requires telemetry object and telemetryType to be specified.")},v.prototype.addTelemetryProcessor=function(_){this._telemetryProcessors.push(_)},v.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},v.prototype.runTelemetryProcessors=function(_,E){var N=!0,D=this._telemetryProcessors.length;if(D===0)return N;E=E||{},E.correlationContext=a.CorrelationContextManager.getCurrentContext();for(var L=0;L<D;++L)try{var I=this._telemetryProcessors[L];if(I&&I.apply(null,[_,E])===!1){N=!1;break}}catch(q){N=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",q,_)}return N},v}();o.exports=b},8090:(o,R,y)=>{"use strict";var k=y(5740),S=y(9962),T=function(){function f(c,u){if(this.traceFlag=f.DEFAULT_TRACE_FLAG,this.version=f.DEFAULT_VERSION,c&&typeof c=="string")if(c.split(",").length>1)this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16);else{var a=c.trim().split("-"),h=a.length;h>=4?(this.version=a[0],this.traceId=a[1],this.spanId=a[2],this.traceFlag=a[3]):(this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=f.DEFAULT_VERSION,this.traceId=k.w3cTraceId()),this.version==="00"&&h!==4&&(this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=f.DEFAULT_VERSION,this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=f.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=f.DEFAULT_TRACE_FLAG,this.traceId=k.w3cTraceId()),f.isValidTraceId(this.traceId)||(this.traceId=k.w3cTraceId()),f.isValidSpanId(this.spanId)||(this.spanId=k.w3cTraceId().substr(0,16),this.traceId=k.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(u){this.parentId=u.slice();var p=S.getRootId(u);f.isValidTraceId(p)||(this.legacyRootId=p,p=k.w3cTraceId()),u.indexOf("|")!==-1&&(u=u.substring(1+u.substring(0,u.length-1).lastIndexOf("."),u.length-1)),this.traceId=p,this.spanId=u}else this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16)}return f.isValidTraceId=function(c){return c.match(/^[0-9a-f]{32}$/)&&c!=="00000000000000000000000000000000"},f.isValidSpanId=function(c){return c.match(/^[0-9a-f]{16}$/)&&c!=="0000000000000000"},f.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},f.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},f.prototype.updateSpanId=function(){this.spanId=k.w3cTraceId().substr(0,16)},f.DEFAULT_TRACE_FLAG="01",f.DEFAULT_VERSION="00",f}();o.exports=T},6333:o=>{"use strict";var R=function(){function y(k){this.fieldmap=[],!!k&&(this.fieldmap=this.parseHeader(k))}return y.prototype.toString=function(){var k=this.fieldmap;return!k||k.length==0?null:k.join(", ")},y.validateKeyChars=function(k){var S=k.split("@");if(S.length==2){var T=S[0].trim(),f=S[1].trim(),c=Boolean(T.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),u=Boolean(f.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&u}else if(S.length==1)return Boolean(k.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},y.prototype.parseHeader=function(k){var S=[],T={},f=k.split(",");if(f.length>32)return null;for(var c=0,u=f;c<u.length;c++){var a=u[c],h=a.trim();if(h.length!==0){var p=h.split("=");if(p.length!==2||!y.validateKeyChars(p[0])||T[p[0]])return null;T[p[0]]=!0,S.push(h)}}return S},y.strict=!0,y}();o.exports=R},5740:function(o,R,y){"use strict";var k=this&&this.__assign||Object.assign||function(p){for(var d,m=1,b=arguments.length;m<b;m++){d=arguments[m];for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&(p[v]=d[v])}return p},S=y(8605),T=y(7211),f=y(8835),c=y(7619),u=y(5282),a=y(9036),h=function(){function p(){}return p.getCookie=function(d,m){var b="";if(d&&d.length&&typeof m=="string")for(var v=d+"=",_=m.split(";"),E=0;E<_.length;E++){var m=_[E];if(m=p.trim(m),m&&m.indexOf(v)===0){b=m.substring(v.length,_[E].length);break}}return b},p.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},p.int32ArrayToBase64=function(d){var m=function(N,D){return String.fromCharCode(N>>D&255)},b=function(N){return m(N,24)+m(N,16)+m(N,8)+m(N,0)},v=d.map(b).join(""),_=Buffer.from?Buffer.from(v,"binary"):new Buffer(v,"binary"),E=_.toString("base64");return E.substr(0,E.indexOf("="))},p.random32=function(){return 4294967296*Math.random()|0},p.randomu32=function(){return p.random32()+2147483648},p.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],m="",b,v=0;v<4;v++)b=p.random32(),m+=d[b&15]+d[b>>4&15]+d[b>>8&15]+d[b>>12&15]+d[b>>16&15]+d[b>>20&15]+d[b>>24&15]+d[b>>28&15];var _=d[8+Math.random()*4|0];return m.substr(0,8)+m.substr(9,4)+"4"+m.substr(13,3)+_+m.substr(16,3)+m.substr(19,12)},p.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},p.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},p.isError=function(d){return d instanceof Error},p.isPrimitive=function(d){var m=typeof d;return m==="string"||m==="number"||m==="boolean"},p.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},p.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var m=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),b=""+Math.floor(d/(1e3*60))%60,v=""+Math.floor(d/(1e3*60*60))%24,_=Math.floor(d/(1e3*60*60*24));m=m.indexOf(".")<2?"0"+m:m,b=b.length<2?"0"+b:b,v=v.length<2?"0"+v:v;var E=_>0?_+".":"";return E+v+":"+b+":"+m},p.extractError=function(d){var m=d;return{message:d.message,code:m.code||m.id||""}},p.extractObject=function(d){return d instanceof Error?p.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},p.validateStringMap=function(d){if(typeof d!="object"){u.info("Invalid properties dropped from payload");return}var m={};for(var b in d){var v="",_=d[b],E=typeof _;if(p.isPrimitive(_))v=_.toString();else if(_===null||E==="undefined")v="";else if(E==="function"){u.info("key: "+b+" was function; will not serialize");continue}else{var N=p.isArray(_)?_:p.extractObject(_);try{p.isPrimitive(N)?v=N:v=JSON.stringify(N)}catch(D){v=_.constructor.name.toString()+" (Error: "+D.message+")",u.info("key: "+b+", could not be serialized")}}m[b]=v.substring(0,p.MAX_PROPERTY_LENGTH)}return m},p.canIncludeCorrelationHeader=function(d,m){var b=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!b||b.length==0||!m)return!0;for(var v=0;v<b.length;v++){var _=new RegExp(b[v].replace(/\./g,".").replace(/\*/g,".*"));if(_.test(f.parse(m).hostname))return!1}return!0},p.getCorrelationContextTarget=function(d,m){var b=d.headers&&d.headers[a.requestContextHeader];if(b)for(var v=b.split(","),_=0;_<v.length;++_){var E=v[_].split("=");if(E.length==2&&E[0]==m)return E[1]}},p.makeRequest=function(d,m,b,v){m&&m.indexOf("//")===0&&(m="https:"+m);var _=f.parse(m),E=k({},b,{host:_.hostname,port:_.port,path:_.pathname}),N=void 0;if(_.protocol==="https:"&&(N=d.proxyHttpsUrl||void 0),_.protocol==="http:"&&(N=d.proxyHttpUrl||void 0),N){N.indexOf("//")===0&&(N="http:"+N);var D=f.parse(N);D.protocol==="https:"?(u.info("Proxies that use HTTPS are not supported"),N=void 0):E=k({},E,{host:D.hostname,port:D.port||"80",path:m,headers:k({},E.headers,{Host:_.hostname})})}var L=_.protocol==="https:"&&!N;return L&&d.httpsAgent!==void 0?E.agent=d.httpsAgent:!L&&d.httpAgent!==void 0?E.agent=d.httpAgent:L&&(E.agent=p.tlsRestrictedAgent),L?T.request(E,v):S.request(E,v)},p.safeIncludeCorrelationHeader=function(d,m,b){var v;if(typeof b=="string")v=b;else if(b instanceof Array)v=b.join(",");else if(b&&typeof b.toString=="function")try{v=b.toString()}catch(_){u.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",_,b)}v?p.addCorrelationIdHeaderFromString(d,m,v):m.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+d.config.correlationId)},p.addCorrelationIdHeaderFromString=function(d,m,b){var v=b.split(","),_=a.requestContextSourceKey+"=",E=v.some(function(N){return N.substring(0,_.length)===_});E||m.setHeader(a.requestContextHeader,b+","+a.requestContextSourceKey+"="+d.config.correlationId)},p.MAX_PROPERTY_LENGTH=8192,p.tlsRestrictedAgent=new T.Agent({secureOptions:c.SSL_OP_NO_SSLv2|c.SSL_OP_NO_SSLv3|c.SSL_OP_NO_TLSv1|c.SSL_OP_NO_TLSv1_1}),p}();o.exports=h},4127:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(4350),S=y(5290);function T(f,c){switch(c&&c.addDocument(f),f.data.baseType){case S.TelemetryTypeString.Exception:k.countException();break;case S.TelemetryTypeString.Request:var u=f.data.baseData;k.countRequest(u.duration,u.success);break;case S.TelemetryTypeString.Dependency:var a=f.data.baseData;k.countDependency(a.duration,a.success);break}return!0}R.performanceMetricsTelemetryProcessor=T},2037:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(5290);function S(f,c){var u=f.sampleRate,a=!1;return u==null||u>=100||f.data&&k.TelemetryType.Metric===k.baseTypeToTelemetryType(f.data.baseType)?!0:(c.correlationContext&&c.correlationContext.operation?a=T(c.correlationContext.operation.id)<u:a=Math.random()*100<u,a)}R.samplingTelemetryProcessor=S;function T(f){var c=-2147483648,u=2147483647,a=5381;if(!f)return 0;for(;f.length<8;)f=f+f;for(var h=0;h<f.length;h++)a=((a<<5)+a|0)+f.charCodeAt(h)|0;return a=a<=c?u:Math.abs(a),a/u*100}R.getSamplingHashCode=T},9428:(o,R,y)=>{"use strict";function k(S){for(var T in S)R.hasOwnProperty(T)||(R[T]=S[T])}Object.defineProperty(R,"__esModule",{value:!0}),k(y(2037)),k(y(4127))},9574:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(894),S=y(6281),T=y(6639),f=y(4350),c=y(8723),u=y(731),a=y(9962),h=y(5282),p=y(3668),d=y(1629);R.TelemetryClient=y(1259),R.Contracts=y(5290);var m;(function(de){de[de.AI=0]="AI",de[de.AI_AND_W3C=1]="AI_AND_W3C"})(m=R.DistributedTracingModes||(R.DistributedTracingModes={}));var b=!0,v=!1,_=!0,E=!0,N=!0,D=!0,L=!0,I=!0,q,A=!1,U=!0,O,F=void 0,x=void 0,H,B,z,V,J,le,oe=!1,we;function Z(de){return R.defaultClient?h.info("The default client is already setup"):(R.defaultClient=new R.TelemetryClient(de),H=new S(R.defaultClient),B=new T(R.defaultClient),z=new f(R.defaultClient),J=new u(R.defaultClient),le=new c(R.defaultClient),V||(V=new d.AutoCollectNativePerformance(R.defaultClient))),R.defaultClient&&R.defaultClient.channel&&R.defaultClient.channel.setUseDiskRetryCaching(L,F,x),ge}R.setup=Z;function ne(){return R.defaultClient?(oe=!0,H.enable(b,v),B.enable(_),z.enable(E),V.enable(U,O),J.useAutoCorrelation(I,q),J.enable(N),le.enable(D),R.liveMetricsClient&&A&&R.liveMetricsClient.enable(A)):h.warn("Start cannot be called before setup"),ge}R.start=ne;function te(){return I?k.CorrelationContextManager.getCurrentContext():null}R.getCorrelationContext=te;function he(de){return k.CorrelationContextManager.wrapCallback(de)}R.wrapWithCorrelationContext=he;var ge=function(){function de(){}return de.setDistributedTracingMode=function(fe){return a.w3cEnabled=fe===m.AI_AND_W3C,de},de.setAutoCollectConsole=function(fe,Ee){return Ee===void 0&&(Ee=!1),b=fe,v=Ee,oe&&H.enable(fe,Ee),de},de.setAutoCollectExceptions=function(fe){return _=fe,oe&&B.enable(fe),de},de.setAutoCollectPerformance=function(fe,Ee){Ee===void 0&&(Ee=!0),E=fe;var Me=d.AutoCollectNativePerformance.parseEnabled(Ee);return U=Me.isEnabled,O=Me.disabledMetrics,oe&&(z.enable(fe),V.enable(Me.isEnabled,Me.disabledMetrics)),de},de.setAutoCollectRequests=function(fe){return N=fe,oe&&J.enable(fe),de},de.setAutoCollectDependencies=function(fe){return D=fe,oe&&le.enable(fe),de},de.setAutoDependencyCorrelation=function(fe,Ee){return I=fe,q=Ee,oe&&J.useAutoCorrelation(fe,Ee),de},de.setUseDiskRetryCaching=function(fe,Ee,Me){return L=fe,F=Ee,x=Me,R.defaultClient&&R.defaultClient.channel&&R.defaultClient.channel.setUseDiskRetryCaching(fe,Ee,Me),de},de.setInternalLogging=function(fe,Ee){return fe===void 0&&(fe=!1),Ee===void 0&&(Ee=!0),h.enableDebug=fe,h.disableWarnings=!Ee,de},de.setSendLiveMetrics=function(fe){return fe===void 0&&(fe=!1),R.defaultClient?(!R.liveMetricsClient&&fe?(R.liveMetricsClient=new p(R.defaultClient.config.instrumentationKey),we=new f(R.liveMetricsClient,1e3,!0),R.liveMetricsClient.addCollector(we),R.defaultClient.quickPulseClient=R.liveMetricsClient):R.liveMetricsClient&&R.liveMetricsClient.enable(fe),A=fe,de):(h.warn("Live metrics client cannot be setup without the default client"),de)},de.start=ne,de}();R.Configuration=ge;function Se(){R.defaultClient=null,oe=!1,H&&H.dispose(),B&&B.dispose(),z&&z.dispose(),V&&V.dispose(),J&&J.dispose(),le&&le.dispose(),R.liveMetricsClient&&(R.liveMetricsClient.enable(!1),A=!1,R.liveMetricsClient=void 0)}R.dispose=Se},9822:(o,R,y)=>{"use strict";const k=process.binding("async_wrap"),S=k.Providers.TIMERWRAP,T={nextTick:y(3269),promise:y(9565),timers:y(7190)},f=new Set;function c(){this.enabled=!1,this.counter=0}function u(){const p=this.initFns=[],d=this.preFns=[],m=this.postFns=[],b=this.destroyFns=[];this.init=function(v,_,E,N){if(_===S){f.add(v);return}for(const D of p)D(v,this,_,E,N)},this.pre=function(v){if(!f.has(v))for(const _ of d)_(v,this)},this.post=function(v,_){if(!f.has(v))for(const E of m)E(v,this,_)},this.destroy=function(v){if(f.has(v)){f.delete(v);return}for(const _ of b)_(v)}}u.prototype.add=function(p){p.init&&this.initFns.push(p.init),p.pre&&this.preFns.push(p.pre),p.post&&this.postFns.push(p.post),p.destroy&&this.destroyFns.push(p.destroy)};function a(p,d){const m=p.indexOf(d);m!==-1&&p.splice(m,1)}u.prototype.remove=function(p){p.init&&a(this.initFns,p.init),p.pre&&a(this.preFns,p.pre),p.post&&a(this.postFns,p.post),p.destroy&&a(this.destroyFns,p.destroy)};function h(){this._state=new c,this._hooks=new u,this.version=y(1910).i8,this.providers=k.Providers;for(const p of Object.keys(T))T[p].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),k.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}o.exports=h,h.prototype.addHooks=function(p){this._hooks.add(p)},h.prototype.removeHooks=function(p){this._hooks.remove(p)},h.prototype.enable=function(){this._state.enabled=!0,k.enable()},h.prototype.disable=function(){this._state.enabled=!1,k.disable()}},3223:(o,R,y)=>{"use strict";const k=y(9822);if(global._asyncHook)if(global._asyncHook.version===y(1910).i8)o.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else y(2512).filter.attach(function(T,f){return f.filter(function(c){const u=c.getFileName();return!(u&&u.slice(0,__dirname.length)===__dirname)})}),o.exports=global._asyncHook=new k},1910:o=>{"use strict";o.exports={i8:"1.7.6"}},3269:o=>{"use strict";function R(){}o.exports=function(){const k=this._hooks,S=this._state,T=process.nextTick;process.nextTick=function(){if(!S.enabled)return T.apply(process,arguments);const f=new Array(arguments.length);for(let h=0;h<arguments.length;h++)f[h]=arguments[h];const c=f[0];if(typeof c!="function")throw new TypeError("callback is not a function");const u=new R,a=--S.counter;return k.init.call(u,a,0,null,null),f[0]=function(){k.pre.call(u,a);let h=!0;try{c.apply(this,arguments),h=!1}finally{h&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){k.post.call(u,a,!0),k.destroy.call(null,a)})}k.post.call(u,a,!1),k.destroy.call(null,a)},T.apply(process,f)}}},9565:o=>{"use strict";function R(){}o.exports=function(){const k=this._hooks,S=this._state,T=global.Promise,f=T.prototype.then;T.prototype.then=h;function c(p,d,m,b){return typeof p!="function"?b?u(m):a(m):function(){k.pre.call(d,m);try{return p.apply(this,arguments)}finally{k.post.call(d,m,!1),k.destroy.call(null,m)}}}function u(p){return function(m){return k.destroy.call(null,p),m}}function a(p){return function(m){throw k.destroy.call(null,p),m}}function h(p,d){if(!S.enabled)return f.call(this,p,d);const m=new R,b=--S.counter;return k.init.call(m,b,0,null,null),f.call(this,c(p,m,b,!0),c(d,m,b,!1))}}},7190:(o,R,y)=>{"use strict";const k=y(8213);function S(){}function T(){}function f(){}const c=new Map,u=new Map,a=new Map;let h=null,p=!1;o.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",S,c,!0),d(this._hooks,this._state,"setInterval","clearInterval",T,u,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",f,a,!0),global.setTimeout=k.setTimeout,global.setInterval=k.setInterval,global.setImmediate=k.setImmediate,global.clearTimeout=k.clearTimeout,global.clearInterval=k.clearInterval,global.clearImmediate=k.clearImmediate};function d(m,b,v,_,E,N,D){const L=k[v],I=k[_];k[v]=function(){if(!b.enabled)return L.apply(k,arguments);const q=new Array(arguments.length);for(let x=0;x<arguments.length;x++)q[x]=arguments[x];const A=q[0];if(typeof A!="function")throw new TypeError('"callback" argument must be a function');const U=new E,O=--b.counter;let F;return m.init.call(U,O,0,null,null),q[0]=function(){h=F,m.pre.call(U,O);let x=!0;try{A.apply(this,arguments),x=!1}finally{x&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){m.post.call(U,O,!0),N.delete(F),m.destroy.call(null,O)})}m.post.call(U,O,!1),h=null,(D||p)&&(p=!1,N.delete(F),m.destroy.call(null,O))},F=L.apply(k,q),N.set(F,O),F},k[_]=function(q){if(h===q&&q!==null)p=!0;else if(N.has(q)){const A=N.get(q);N.delete(q),m.destroy.call(null,A)}I.apply(k,arguments)}}},8286:o=>{"use strict";o.exports=(R,y)=>class extends R{constructor(S){var T,f;super(u);var c=this;try{S.apply(T,f)}catch(a){f[1](a)}return c;function u(a,h){T=this,f=[p,d];function p(m){return y(c,!1),a(m)}function d(m){return y(c,!1),h(m)}}}}},9090:(o,R,y)=>{var k=y(6372).wrap,S=1<<0,T=1<<1,f=1<<2,c=1<<3,u=[],a=0,h=!1,p=[],d,m;function b(U,O){var F=U.length,x=O.length,H=[];if(F===0&&x===0)return H;for(var B=0;B<F;B++)H[B]=U[B];if(x===0)return H;for(var z=0;z<x;z++){var V=!0;for(B=0;B<F;B++)if(U[B].uid===O[z].uid){V=!1;break}V&&H.push(O[z])}return H}if(process._fatalException){var v=!1,_;d=function(O){var F=u.length;if(v||F===0)return!1;var x=!1;v=!0;for(var H=0;H<F;++H){var B=u[H];if((B.flags&c)!=0){var z=_&&_[B.uid];x=B.error(z,O)||x}}return v=!1,p.length>0&&(u=p.pop()),_=void 0,x&&!h},m=function(O,F,x){var H=[];h=!0;for(var B=0;B<x;++B){var z=F[B];if(H[z.uid]=z.data,(z.flags&S)!=0){var V=z.create(z.data);V!==void 0&&(H[z.uid]=V)}}return h=!1,function(){_=H,p.push(u),u=b(F,u),h=!0;for(var J=0;J<x;++J)(F[J].flags&T)>0&&F[J].before(this,H[F[J].uid]);h=!1;var le=O.apply(this,arguments);for(h=!0,J=0;J<x;++J)(F[J].flags&f)>0&&F[J].after(this,H[F[J].uid]);return h=!1,u=p.pop(),_=void 0,le}},k(process,"_fatalException",function(U){return function(F){return d(F)||U(F)}})}else{var E=!1;d=function(O){if(E)throw O;for(var F=!1,x=u.length,H=0;H<x;++H){var B=u[H];(B.flags&c)!=0&&(F=B.error(null,O)||F)}if(!F&&h)throw O},m=function(O,F,x){var H=[];h=!0;for(var B=0;B<x;++B){var z=F[B];if(H[z.uid]=z.data,(z.flags&S)!=0){var V=z.create(z.data);V!==void 0&&(H[z.uid]=V)}}return h=!1,function(){var J=!1,le=!1;p.push(u),u=b(F,u),h=!0;for(var oe=0;oe<x;++oe)(F[oe].flags&T)>0&&F[oe].before(this,H[F[oe].uid]);h=!1;var we;try{we=O.apply(this,arguments)}catch(Z){J=!0;for(var oe=0;oe<x;++oe)if((u[oe].flags&c)!=0)try{le=u[oe].error(H[F[oe].uid],Z)||le}catch(te){throw E=!0,te}if(!le)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),Z}finally{if(!J||le){for(h=!0,oe=0;oe<x;++oe)(F[oe].flags&f)>0&&F[oe].after(this,H[F[oe].uid]);h=!1}u=p.pop()}return we}},process.addListener("uncaughtException",d)}function N(U,O,F){h=!0;for(var x=0;x<F;++x){var H=O[x];H.create&&H.create(H.data)}return h=!1,function(){p.push(u),u=b(O,u);var B=U.apply(this,arguments);return u=p.pop(),B}}function D(U){var O=u.length;if(O===0)return U;for(var F=u.slice(),x=0;x<O;++x)if(F[x].flags>0)return m(U,F,O);return N(U,F,O)}function L(U,O){typeof U.create=="function"&&(this.create=U.create,this.flags|=S),typeof U.before=="function"&&(this.before=U.before,this.flags|=T),typeof U.after=="function"&&(this.after=U.after,this.flags|=f),typeof U.error=="function"&&(this.error=U.error,this.flags|=c),this.uid=++a,this.data=O===void 0?null:O}L.prototype.create=void 0,L.prototype.before=void 0,L.prototype.after=void 0,L.prototype.error=void 0,L.prototype.data=void 0,L.prototype.uid=0,L.prototype.flags=0;function I(U,O){if(typeof U!="object"||!U)throw new TypeError("callbacks argument must be an object");return U instanceof L?U:new L(U,O)}function q(U,O){var F;U instanceof L?F=U:F=I(U,O);for(var x=!1,H=0;H<u.length;H++)if(F===u[H]){x=!0;break}return x||u.push(F),F}function A(U){for(var O=0;O<u.length;O++)if(U===u[O]){u.splice(O,1);break}}process.createAsyncListener=I,process.addAsyncListener=q,process.removeAsyncListener=A,o.exports=D},7645:(o,R,y)=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var k=y(6372),S=y(6625),T=k.wrap,f=k.massWrap,c=y(9090),u=y(1669),a=S.gte(process.version,"6.0.0"),h=S.gte(process.version,"7.0.0"),p=S.gte(process.version,"8.0.0"),d=S.gte(process.version,"11.0.0"),m=y(1631);h&&!m._normalizeArgs?m._normalizeArgs=function(Z){if(Z.length===0)return[{},null];var ne=Z[0],te={};typeof ne=="object"&&ne!==null?te=ne:we(ne)?te.path=ne:(te.port=ne,Z.length>1&&typeof Z[1]=="string"&&(te.host=Z[1]));var he=Z[Z.length-1];return typeof he!="function"?[te,null]:[te,he]}:!h&&!m._normalizeConnectArgs&&(m._normalizeConnectArgs=function(Z){var ne={};function te(ge){return(ge=Number(ge))>=0?ge:!1}typeof Z[0]=="object"&&Z[0]!==null?ne=Z[0]:typeof Z[0]=="string"&&te(Z[0])===!1?ne.path=Z[0]:(ne.port=Z[0],typeof Z[1]=="string"&&(ne.host=Z[1]));var he=Z[Z.length-1];return typeof he=="function"?[ne,he]:[ne]}),"_setUpListenHandle"in m.Server.prototype?T(m.Server.prototype,"_setUpListenHandle",b):T(m.Server.prototype,"_listen2",b);function b(Z){return function(){this.on("connection",function(ne){ne._handle&&(ne._handle.onread=c(ne._handle.onread))});try{return Z.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=c(this._handle.onconnection))}}}function v(Z){if(Z&&Z._handle){var ne=Z._handle;ne._originalOnread||(ne._originalOnread=ne.onread),ne.onread=c(ne._originalOnread)}}T(m.Socket.prototype,"connect",function(Z){return function(){var ne;p&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?ne=arguments[0]:ne=h?m._normalizeArgs(arguments):m._normalizeConnectArgs(arguments),ne[1]&&(ne[1]=c(ne[1]));var te=Z.apply(this,ne);return v(this),te}});var _=y(8605);T(_.Agent.prototype,"addRequest",function(Z){return function(ne){var te=ne.onSocket;return ne.onSocket=c(function(he){return v(he),te.apply(this,arguments)}),Z.apply(this,arguments)}});var E=y(3129);function N(Z){Array.isArray(Z.stdio)&&Z.stdio.forEach(function(ne){ne&&ne._handle&&(ne._handle.onread=c(ne._handle.onread),T(ne._handle,"close",le))}),Z._handle&&(Z._handle.onexit=c(Z._handle.onexit))}E.ChildProcess?T(E.ChildProcess.prototype,"spawn",function(Z){return function(){var ne=Z.apply(this,arguments);return N(this),ne}}):f(E,["execFile","fork","spawn"],function(Z){return function(){var ne=Z.apply(this,arguments);return N(ne),ne}}),process._fatalException||(process._originalNextTick=process.nextTick);var D=[];process._nextDomainTick&&D.push("_nextDomainTick"),process._tickDomainCallback&&D.push("_tickDomainCallback"),f(process,D,J),T(process,"nextTick",le);var L=["setTimeout","setInterval"];global.setImmediate&&L.push("setImmediate");var I=y(8213),q=global.setTimeout===I.setTimeout;f(I,L,le),q&&f(global,L,le);var A=y(881);f(A,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],J),A.resolveNaptr&&T(A,"resolveNaptr",J);var U=y(5747);f(U,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],J),U.lchown&&T(U,"lchown",J),U.lchmod&&T(U,"lchmod",J),U.ftruncate&&T(U,"ftruncate",J);var O;try{O=y(8761)}catch(Z){}if(O&&O.Deflate&&O.Deflate.prototype){var F=Object.getPrototypeOf(O.Deflate.prototype);F._transform?T(F,"_transform",J):F.write&&F.flush&&F.end&&f(F,["write","flush","end"],J)}var x;try{x=y(6417)}catch(Z){}if(x){var H=["pbkdf2","randomBytes"];d||H.push("pseudoRandomBytes"),f(x,H,J)}var B=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";if(B){var z=process.addAsyncListener({create:function(){B=!1}});global.Promise.resolve(!0).then(function(){B=!1}),process.removeAsyncListener(z)}B&&V();function V(){var Z=global.Promise;function ne(de){if(!(this instanceof ne))return Z(de);if(typeof de!="function")return new Z(de);var fe,Ee,Me=new Z(lt);Me.__proto__=ne.prototype;try{de.apply(fe,Ee)}catch($e){Ee[1]($e)}return Me;function lt($e,Ge){fe=this,Ee=[Ie,De];function Ie(_e){return he(Me,!1),$e(_e)}function De(_e){return he(Me,!1),Ge(_e)}}}if(u.inherits(ne,Z),T(Z.prototype,"then",Se),Z.prototype.chain&&T(Z.prototype,"chain",Se),a)global.Promise=y(8286)(Z,he);else{var te=["all","race","reject","resolve","accept","defer"];te.forEach(function(de){typeof Z[de]=="function"&&(ne[de]=Z[de])}),global.Promise=ne}function he(de,fe){(!de.__asl_wrapper||fe)&&(de.__asl_wrapper=c(ge))}function ge(de,fe,Ee,Me){var lt;try{return lt=fe.call(de,Ee),{returnVal:lt,error:!1}}catch($e){return{errorVal:$e,error:!0}}finally{lt instanceof Z?Me.__asl_wrapper=function(){var Ge=lt.__asl_wrapper||ge;return Ge.apply(this,arguments)}:he(Me,!0)}}function Se(de){return function(){var Ee=this,Me=de.apply(Ee,Array.prototype.map.call(arguments,lt));return Me.__asl_wrapper=function(Ge,Ie,De,_e){return Ee.__asl_wrapper?(Ee.__asl_wrapper(Ge,function(){},null,Me),Me.__asl_wrapper(Ge,Ie,De,_e)):ge(Ge,Ie,De,_e)},Me;function lt($e){return typeof $e!="function"?$e:c(function(Ge){var Ie=(Ee.__asl_wrapper||ge)(this,$e,Ge,Me);if(Ie.error)throw Ie.errorVal;return Ie.returnVal})}}}}function J(Z){var ne=function(){var te,he=arguments.length-1;if(typeof arguments[he]=="function"){te=Array(arguments.length);for(var ge=0;ge<arguments.length-1;ge++)te[ge]=arguments[ge];te[he]=c(arguments[he])}return Z.apply(this,te||arguments)};switch(Z.length){case 1:return function(te){return arguments.length!==1?ne.apply(this,arguments):(typeof te=="function"&&(te=c(te)),Z.call(this,te))};case 2:return function(te,he){return arguments.length!==2?ne.apply(this,arguments):(typeof he=="function"&&(he=c(he)),Z.call(this,te,he))};case 3:return function(te,he,ge){return arguments.length!==3?ne.apply(this,arguments):(typeof ge=="function"&&(ge=c(ge)),Z.call(this,te,he,ge))};case 4:return function(te,he,ge,Se){return arguments.length!==4?ne.apply(this,arguments):(typeof Se=="function"&&(Se=c(Se)),Z.call(this,te,he,ge,Se))};case 5:return function(te,he,ge,Se,de){return arguments.length!==5?ne.apply(this,arguments):(typeof de=="function"&&(de=c(de)),Z.call(this,te,he,ge,Se,de))};case 6:return function(te,he,ge,Se,de,fe){return arguments.length!==6?ne.apply(this,arguments):(typeof fe=="function"&&(fe=c(fe)),Z.call(this,te,he,ge,Se,de,fe))};default:return ne}}function le(Z){var ne=function(){var te;if(typeof arguments[0]=="function"){te=Array(arguments.length),te[0]=c(arguments[0]);for(var he=1;he<arguments.length;he++)te[he]=arguments[he]}return Z.apply(this,te||arguments)};switch(Z.length){case 1:return function(te){return arguments.length!==1?ne.apply(this,arguments):(typeof te=="function"&&(te=c(te)),Z.call(this,te))};case 2:return function(te,he){return arguments.length!==2?ne.apply(this,arguments):(typeof te=="function"&&(te=c(te)),Z.call(this,te,he))};case 3:return function(te,he,ge){return arguments.length!==3?ne.apply(this,arguments):(typeof te=="function"&&(te=c(te)),Z.call(this,te,he,ge))};case 4:return function(te,he,ge,Se){return arguments.length!==4?ne.apply(this,arguments):(typeof te=="function"&&(te=c(te)),Z.call(this,te,he,ge,Se))};case 5:return function(te,he,ge,Se,de){return arguments.length!==5?ne.apply(this,arguments):(typeof te=="function"&&(te=c(te)),Z.call(this,te,he,ge,Se,de))};case 6:return function(te,he,ge,Se,de,fe){return arguments.length!==6?ne.apply(this,arguments):(typeof te=="function"&&(te=c(te)),Z.call(this,te,he,ge,Se,de,fe))};default:return ne}}function oe(Z){return(Z=Number(Z))>=0?Z:!1}function we(Z){return typeof Z=="string"&&oe(Z)===!1}},9669:(o,R,y)=>{o.exports=y(1609)},7970:(o,R,y)=>{"use strict";var k=y(4867),S=y(6026),T=y(4097),f=y(5327),c=y(8605),u=y(7211),a=y(938).http,h=y(938).https,p=y(8835),d=y(8761),m=y(696),b=y(5061),v=y(481),_=/https:?/;function E(N,D,L){if(N.hostname=D.host,N.host=D.host,N.port=D.port,N.path=L,D.auth){var I=Buffer.from(D.auth.username+":"+D.auth.password,"utf8").toString("base64");N.headers["Proxy-Authorization"]="Basic "+I}N.beforeRedirect=function(A){A.headers.host=A.host,E(A,D,A.href)}}o.exports=function(D){return new Promise(function(I,q){var A=function(_e){I(_e)},U=function(_e){q(_e)},O=D.data,F=D.headers;if(!F["User-Agent"]&&!F["user-agent"]&&(F["User-Agent"]="axios/"+m.version),O&&!k.isStream(O)){if(!Buffer.isBuffer(O))if(k.isArrayBuffer(O))O=Buffer.from(new Uint8Array(O));else if(k.isString(O))O=Buffer.from(O,"utf-8");else return U(b("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",D));F["Content-Length"]=O.length}var x=void 0;if(D.auth){var H=D.auth.username||"",B=D.auth.password||"";x=H+":"+B}var z=T(D.baseURL,D.url),V=p.parse(z),J=V.protocol||"http:";if(!x&&V.auth){var le=V.auth.split(":"),oe=le[0]||"",we=le[1]||"";x=oe+":"+we}x&&delete F.Authorization;var Z=_.test(J),ne=Z?D.httpsAgent:D.httpAgent,te={path:f(V.path,D.params,D.paramsSerializer).replace(/^\?/,""),method:D.method.toUpperCase(),headers:F,agent:ne,agents:{http:D.httpAgent,https:D.httpsAgent},auth:x};D.socketPath?te.socketPath=D.socketPath:(te.hostname=V.hostname,te.port=V.port);var he=D.proxy;if(!he&&he!==!1){var ge=J.slice(0,-1)+"_proxy",Se=process.env[ge]||process.env[ge.toUpperCase()];if(Se){var de=p.parse(Se),fe=process.env.no_proxy||process.env.NO_PROXY,Ee=!0;if(fe){var Me=fe.split(",").map(function(_e){return _e.trim()});Ee=!Me.some(function(_e){return _e?_e==="*"||_e[0]==="."&&V.hostname.substr(V.hostname.length-_e.length)===_e?!0:V.hostname===_e:!1})}if(Ee&&(he={host:de.hostname,port:de.port,protocol:de.protocol},de.auth)){var lt=de.auth.split(":");he.auth={username:lt[0],password:lt[1]}}}}he&&(te.headers.host=V.hostname+(V.port?":"+V.port:""),E(te,he,J+"//"+V.hostname+(V.port?":"+V.port:"")+te.path));var $e,Ge=Z&&(he?_.test(he.protocol):!0);D.transport?$e=D.transport:D.maxRedirects===0?$e=Ge?u:c:(D.maxRedirects&&(te.maxRedirects=D.maxRedirects),$e=Ge?h:a),D.maxBodyLength>-1&&(te.maxBodyLength=D.maxBodyLength);var Ie=$e.request(te,function(_e){if(!Ie.aborted){var nt=_e,ke=_e.req||Ie;if(_e.statusCode!==204&&ke.method!=="HEAD"&&D.decompress!==!1)switch(_e.headers["content-encoding"]){case"gzip":case"compress":case"deflate":nt=nt.pipe(d.createUnzip()),delete _e.headers["content-encoding"];break}var nn={status:_e.statusCode,statusText:_e.statusMessage,headers:_e.headers,config:D,request:ke};if(D.responseType==="stream")nn.data=nt,S(A,U,nn);else{var rn=[];nt.on("data",function(Je){rn.push(Je),D.maxContentLength>-1&&Buffer.concat(rn).length>D.maxContentLength&&(nt.destroy(),U(b("maxContentLength size of "+D.maxContentLength+" exceeded",D,null,ke)))}),nt.on("error",function(Je){Ie.aborted||U(v(Je,D,null,ke))}),nt.on("end",function(){var Je=Buffer.concat(rn);D.responseType!=="arraybuffer"&&(Je=Je.toString(D.responseEncoding),(!D.responseEncoding||D.responseEncoding==="utf8")&&(Je=k.stripBOM(Je))),nn.data=Je,S(A,U,nn)})}}});Ie.on("error",function(_e){Ie.aborted&&_e.code!=="ERR_FR_TOO_MANY_REDIRECTS"||U(v(_e,D,null,Ie))}),D.timeout&&Ie.setTimeout(D.timeout,function(){Ie.abort(),U(b("timeout of "+D.timeout+"ms exceeded",D,"ECONNABORTED",Ie))}),D.cancelToken&&D.cancelToken.promise.then(function(_e){Ie.aborted||(Ie.abort(),U(_e))}),k.isStream(O)?O.on("error",function(_e){U(v(_e,D,null,Ie))}).pipe(Ie):Ie.end(O)})}},5448:(o,R,y)=>{"use strict";var k=y(4867),S=y(6026),T=y(4372),f=y(5327),c=y(4097),u=y(4109),a=y(7985),h=y(5061);o.exports=function(d){return new Promise(function(b,v){var _=d.data,E=d.headers;k.isFormData(_)&&delete E["Content-Type"];var N=new XMLHttpRequest;if(d.auth){var D=d.auth.username||"",L=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";E.Authorization="Basic "+btoa(D+":"+L)}var I=c(d.baseURL,d.url);if(N.open(d.method.toUpperCase(),f(I,d.params,d.paramsSerializer),!0),N.timeout=d.timeout,N.onreadystatechange=function(){if(!(!N||N.readyState!==4)&&!(N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0))){var U="getAllResponseHeaders"in N?u(N.getAllResponseHeaders()):null,O=!d.responseType||d.responseType==="text"?N.responseText:N.response,F={data:O,status:N.status,statusText:N.statusText,headers:U,config:d,request:N};S(b,v,F),N=null}},N.onabort=function(){!N||(v(h("Request aborted",d,"ECONNABORTED",N)),N=null)},N.onerror=function(){v(h("Network Error",d,null,N)),N=null},N.ontimeout=function(){var U="timeout of "+d.timeout+"ms exceeded";d.timeoutErrorMessage&&(U=d.timeoutErrorMessage),v(h(U,d,"ECONNABORTED",N)),N=null},k.isStandardBrowserEnv()){var q=(d.withCredentials||a(I))&&d.xsrfCookieName?T.read(d.xsrfCookieName):void 0;q&&(E[d.xsrfHeaderName]=q)}if("setRequestHeader"in N&&k.forEach(E,function(U,O){typeof _=="undefined"&&O.toLowerCase()==="content-type"?delete E[O]:N.setRequestHeader(O,U)}),k.isUndefined(d.withCredentials)||(N.withCredentials=!!d.withCredentials),d.responseType)try{N.responseType=d.responseType}catch(A){if(d.responseType!=="json")throw A}typeof d.onDownloadProgress=="function"&&N.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&N.upload&&N.upload.addEventListener("progress",d.onUploadProgress),d.cancelToken&&d.cancelToken.promise.then(function(U){!N||(N.abort(),v(U),N=null)}),_||(_=null),N.send(_)})}},1609:(o,R,y)=>{"use strict";var k=y(4867),S=y(1849),T=y(321),f=y(7185),c=y(5655);function u(h){var p=new T(h),d=S(T.prototype.request,p);return k.extend(d,T.prototype,p),k.extend(d,p),d}var a=u(c);a.Axios=T,a.create=function(p){return u(f(a.defaults,p))},a.Cancel=y(5263),a.CancelToken=y(4972),a.isCancel=y(6502),a.all=function(p){return Promise.all(p)},a.spread=y(8713),a.isAxiosError=y(6268),o.exports=a,o.exports.default=a},5263:o=>{"use strict";function R(y){this.message=y}R.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},R.prototype.__CANCEL__=!0,o.exports=R},4972:(o,R,y)=>{"use strict";var k=y(5263);function S(T){if(typeof T!="function")throw new TypeError("executor must be a function.");var f;this.promise=new Promise(function(a){f=a});var c=this;T(function(a){c.reason||(c.reason=new k(a),f(c.reason))})}S.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},S.source=function(){var f,c=new S(function(a){f=a});return{token:c,cancel:f}},o.exports=S},6502:o=>{"use strict";o.exports=function(y){return!!(y&&y.__CANCEL__)}},321:(o,R,y)=>{"use strict";var k=y(4867),S=y(5327),T=y(782),f=y(3572),c=y(7185);function u(a){this.defaults=a,this.interceptors={request:new T,response:new T}}u.prototype.request=function(h){typeof h=="string"?(h=arguments[1]||{},h.url=arguments[0]):h=h||{},h=c(this.defaults,h),h.method?h.method=h.method.toLowerCase():this.defaults.method?h.method=this.defaults.method.toLowerCase():h.method="get";var p=[f,void 0],d=Promise.resolve(h);for(this.interceptors.request.forEach(function(b){p.unshift(b.fulfilled,b.rejected)}),this.interceptors.response.forEach(function(b){p.push(b.fulfilled,b.rejected)});p.length;)d=d.then(p.shift(),p.shift());return d},u.prototype.getUri=function(h){return h=c(this.defaults,h),S(h.url,h.params,h.paramsSerializer).replace(/^\?/,"")},k.forEach(["delete","get","head","options"],function(h){u.prototype[h]=function(p,d){return this.request(c(d||{},{method:h,url:p,data:(d||{}).data}))}}),k.forEach(["post","put","patch"],function(h){u.prototype[h]=function(p,d,m){return this.request(c(m||{},{method:h,url:p,data:d}))}}),o.exports=u},782:(o,R,y)=>{"use strict";var k=y(4867);function S(){this.handlers=[]}S.prototype.use=function(f,c){return this.handlers.push({fulfilled:f,rejected:c}),this.handlers.length-1},S.prototype.eject=function(f){this.handlers[f]&&(this.handlers[f]=null)},S.prototype.forEach=function(f){k.forEach(this.handlers,function(u){u!==null&&f(u)})},o.exports=S},4097:(o,R,y)=>{"use strict";var k=y(1793),S=y(9002);o.exports=function(f,c){return f&&!k(c)?S(f,c):c}},5061:(o,R,y)=>{"use strict";var k=y(481);o.exports=function(T,f,c,u,a){var h=new Error(T);return k(h,f,c,u,a)}},3572:(o,R,y)=>{"use strict";var k=y(4867),S=y(8527),T=y(6502),f=y(5655);function c(u){u.cancelToken&&u.cancelToken.throwIfRequested()}o.exports=function(a){c(a),a.headers=a.headers||{},a.data=S(a.data,a.headers,a.transformRequest),a.headers=k.merge(a.headers.common||{},a.headers[a.method]||{},a.headers),k.forEach(["delete","get","head","post","put","patch","common"],function(d){delete a.headers[d]});var h=a.adapter||f.adapter;return h(a).then(function(d){return c(a),d.data=S(d.data,d.headers,a.transformResponse),d},function(d){return T(d)||(c(a),d&&d.response&&(d.response.data=S(d.response.data,d.response.headers,a.transformResponse))),Promise.reject(d)})}},481:o=>{"use strict";o.exports=function(y,k,S,T,f){return y.config=k,S&&(y.code=S),y.request=T,y.response=f,y.isAxiosError=!0,y.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},y}},7185:(o,R,y)=>{"use strict";var k=y(4867);o.exports=function(T,f){f=f||{};var c={},u=["url","method","data"],a=["headers","auth","proxy","params"],h=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],p=["validateStatus"];function d(_,E){return k.isPlainObject(_)&&k.isPlainObject(E)?k.merge(_,E):k.isPlainObject(E)?k.merge({},E):k.isArray(E)?E.slice():E}function m(_){k.isUndefined(f[_])?k.isUndefined(T[_])||(c[_]=d(void 0,T[_])):c[_]=d(T[_],f[_])}k.forEach(u,function(E){k.isUndefined(f[E])||(c[E]=d(void 0,f[E]))}),k.forEach(a,m),k.forEach(h,function(E){k.isUndefined(f[E])?k.isUndefined(T[E])||(c[E]=d(void 0,T[E])):c[E]=d(void 0,f[E])}),k.forEach(p,function(E){E in f?c[E]=d(T[E],f[E]):E in T&&(c[E]=d(void 0,T[E]))});var b=u.concat(a).concat(h).concat(p),v=Object.keys(T).concat(Object.keys(f)).filter(function(E){return b.indexOf(E)===-1});return k.forEach(v,m),c}},6026:(o,R,y)=>{"use strict";var k=y(5061);o.exports=function(T,f,c){var u=c.config.validateStatus;!c.status||!u||u(c.status)?T(c):f(k("Request failed with status code "+c.status,c.config,null,c.request,c))}},8527:(o,R,y)=>{"use strict";var k=y(4867);o.exports=function(T,f,c){return k.forEach(c,function(a){T=a(T,f)}),T}},5655:(o,R,y)=>{"use strict";var k=y(4867),S=y(6016),T={"Content-Type":"application/x-www-form-urlencoded"};function f(a,h){!k.isUndefined(a)&&k.isUndefined(a["Content-Type"])&&(a["Content-Type"]=h)}function c(){var a;return typeof XMLHttpRequest!="undefined"?a=y(5448):typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(a=y(7970)),a}var u={adapter:c(),transformRequest:[function(h,p){return S(p,"Accept"),S(p,"Content-Type"),k.isFormData(h)||k.isArrayBuffer(h)||k.isBuffer(h)||k.isStream(h)||k.isFile(h)||k.isBlob(h)?h:k.isArrayBufferView(h)?h.buffer:k.isURLSearchParams(h)?(f(p,"application/x-www-form-urlencoded;charset=utf-8"),h.toString()):k.isObject(h)?(f(p,"application/json;charset=utf-8"),JSON.stringify(h)):h}],transformResponse:[function(h){if(typeof h=="string")try{h=JSON.parse(h)}catch(p){}return h}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(h){return h>=200&&h<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},k.forEach(["delete","get","head"],function(h){u.headers[h]={}}),k.forEach(["post","put","patch"],function(h){u.headers[h]=k.merge(T)}),o.exports=u},1849:o=>{"use strict";o.exports=function(y,k){return function(){for(var T=new Array(arguments.length),f=0;f<T.length;f++)T[f]=arguments[f];return y.apply(k,T)}}},5327:(o,R,y)=>{"use strict";var k=y(4867);function S(T){return encodeURIComponent(T).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}o.exports=function(f,c,u){if(!c)return f;var a;if(u)a=u(c);else if(k.isURLSearchParams(c))a=c.toString();else{var h=[];k.forEach(c,function(m,b){m===null||typeof m=="undefined"||(k.isArray(m)?b=b+"[]":m=[m],k.forEach(m,function(_){k.isDate(_)?_=_.toISOString():k.isObject(_)&&(_=JSON.stringify(_)),h.push(S(b)+"="+S(_))}))}),a=h.join("&")}if(a){var p=f.indexOf("#");p!==-1&&(f=f.slice(0,p)),f+=(f.indexOf("?")===-1?"?":"&")+a}return f}},9002:o=>{"use strict";o.exports=function(y,k){return k?y.replace(/\/+$/,"")+"/"+k.replace(/^\/+/,""):y}},4372:(o,R,y)=>{"use strict";var k=y(4867);o.exports=k.isStandardBrowserEnv()?function(){return{write:function(f,c,u,a,h,p){var d=[];d.push(f+"="+encodeURIComponent(c)),k.isNumber(u)&&d.push("expires="+new Date(u).toGMTString()),k.isString(a)&&d.push("path="+a),k.isString(h)&&d.push("domain="+h),p===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(f){var c=document.cookie.match(new RegExp("(^|;\\s*)("+f+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(f){this.write(f,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:o=>{"use strict";o.exports=function(y){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(y)}},6268:o=>{"use strict";o.exports=function(y){return typeof y=="object"&&y.isAxiosError===!0}},7985:(o,R,y)=>{"use strict";var k=y(4867);o.exports=k.isStandardBrowserEnv()?function(){var T=/(msie|trident)/i.test(navigator.userAgent),f=document.createElement("a"),c;function u(a){var h=a;return T&&(f.setAttribute("href",h),h=f.href),f.setAttribute("href",h),{href:f.href,protocol:f.protocol?f.protocol.replace(/:$/,""):"",host:f.host,search:f.search?f.search.replace(/^\?/,""):"",hash:f.hash?f.hash.replace(/^#/,""):"",hostname:f.hostname,port:f.port,pathname:f.pathname.charAt(0)==="/"?f.pathname:"/"+f.pathname}}return c=u(window.location.href),function(h){var p=k.isString(h)?u(h):h;return p.protocol===c.protocol&&p.host===c.host}}():function(){return function(){return!0}}()},6016:(o,R,y)=>{"use strict";var k=y(4867);o.exports=function(T,f){k.forEach(T,function(u,a){a!==f&&a.toUpperCase()===f.toUpperCase()&&(T[f]=u,delete T[a])})}},4109:(o,R,y)=>{"use strict";var k=y(4867),S=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];o.exports=function(f){var c={},u,a,h;return f&&k.forEach(f.split(`
`),function(d){if(h=d.indexOf(":"),u=k.trim(d.substr(0,h)).toLowerCase(),a=k.trim(d.substr(h+1)),u){if(c[u]&&S.indexOf(u)>=0)return;u==="set-cookie"?c[u]=(c[u]?c[u]:[]).concat([a]):c[u]=c[u]?c[u]+", "+a:a}}),c}},8713:o=>{"use strict";o.exports=function(y){return function(S){return y.apply(null,S)}}},4867:(o,R,y)=>{"use strict";var k=y(1849),S=Object.prototype.toString;function T(x){return S.call(x)==="[object Array]"}function f(x){return typeof x=="undefined"}function c(x){return x!==null&&!f(x)&&x.constructor!==null&&!f(x.constructor)&&typeof x.constructor.isBuffer=="function"&&x.constructor.isBuffer(x)}function u(x){return S.call(x)==="[object ArrayBuffer]"}function a(x){return typeof FormData!="undefined"&&x instanceof FormData}function h(x){var H;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?H=ArrayBuffer.isView(x):H=x&&x.buffer&&x.buffer instanceof ArrayBuffer,H}function p(x){return typeof x=="string"}function d(x){return typeof x=="number"}function m(x){return x!==null&&typeof x=="object"}function b(x){if(S.call(x)!=="[object Object]")return!1;var H=Object.getPrototypeOf(x);return H===null||H===Object.prototype}function v(x){return S.call(x)==="[object Date]"}function _(x){return S.call(x)==="[object File]"}function E(x){return S.call(x)==="[object Blob]"}function N(x){return S.call(x)==="[object Function]"}function D(x){return m(x)&&N(x.pipe)}function L(x){return typeof URLSearchParams!="undefined"&&x instanceof URLSearchParams}function I(x){return x.replace(/^\s*/,"").replace(/\s*$/,"")}function q(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function A(x,H){if(!(x===null||typeof x=="undefined"))if(typeof x!="object"&&(x=[x]),T(x))for(var B=0,z=x.length;B<z;B++)H.call(null,x[B],B,x);else for(var V in x)Object.prototype.hasOwnProperty.call(x,V)&&H.call(null,x[V],V,x)}function U(){var x={};function H(V,J){b(x[J])&&b(V)?x[J]=U(x[J],V):b(V)?x[J]=U({},V):T(V)?x[J]=V.slice():x[J]=V}for(var B=0,z=arguments.length;B<z;B++)A(arguments[B],H);return x}function O(x,H,B){return A(H,function(V,J){B&&typeof V=="function"?x[J]=k(V,B):x[J]=V}),x}function F(x){return x.charCodeAt(0)===65279&&(x=x.slice(1)),x}o.exports={isArray:T,isArrayBuffer:u,isBuffer:c,isFormData:a,isArrayBufferView:h,isString:p,isNumber:d,isObject:m,isPlainObject:b,isUndefined:f,isDate:v,isFile:_,isBlob:E,isFunction:N,isStream:D,isURLSearchParams:L,isStandardBrowserEnv:q,forEach:A,merge:U,extend:O,trim:I,stripBOM:F}},696:o=>{"use strict";o.exports=JSON.parse('{"name":"axios","version":"0.21.1","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.10.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},5186:(o,R,y)=>{var k=y(3698),S=y(2505),T=y(5382),f=Function.bind,c=f.bind(f);function u(m,b,v){var _=c(T,null).apply(null,v?[b,v]:[b]);m.api={remove:_},m.remove=_,["before","error","after","wrap"].forEach(function(E){var N=v?[b,E,v]:[b,E];m[E]=m.api[E]=c(S,null).apply(null,N)})}function a(){var m="h",b={registry:{}},v=k.bind(null,b,m);return u(v,b,m),v}function h(){var m={registry:{}},b=k.bind(null,m);return u(b,m),b}var p=!1;function d(){return p||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),p=!0),h()}d.Singular=a.bind(),d.Collection=h.bind(),o.exports=d,o.exports.Hook=d,o.exports.Singular=d.Singular,o.exports.Collection=d.Collection},2505:o=>{o.exports=R;function R(y,k,S,T){var f=T;y.registry[S]||(y.registry[S]=[]),k==="before"&&(T=function(c,u){return Promise.resolve().then(f.bind(null,u)).then(c.bind(null,u))}),k==="after"&&(T=function(c,u){var a;return Promise.resolve().then(c.bind(null,u)).then(function(h){return a=h,f(a,u)}).then(function(){return a})}),k==="error"&&(T=function(c,u){return Promise.resolve().then(c.bind(null,u)).catch(function(a){return f(a,u)})}),y.registry[S].push({hook:T,orig:f})}},3698:o=>{o.exports=R;function R(y,k,S,T){if(typeof S!="function")throw new Error("method for before hook must be a function");return T||(T={}),Array.isArray(k)?k.reverse().reduce(function(f,c){return R.bind(null,y,c,f,T)},S)():Promise.resolve().then(function(){return y.registry[k]?y.registry[k].reduce(function(f,c){return c.hook.bind(null,f,T)},S)():S(T)})}},5382:o=>{o.exports=R;function R(y,k,S){if(!!y.registry[k]){var T=y.registry[k].map(function(f){return f.orig}).indexOf(S);T!==-1&&y.registry[k].splice(T,1)}}},4046:(o,R,y)=>{"use strict";const k=y(1669),S=y(2357),T=y(9867),f=y(3223),c="cls@contexts",u="error@context",a=[];for(let I in f.providers)a[f.providers[I]]=I;const h=process.env.DEBUG_CLS_HOOKED;let p=-1;o.exports={getNamespace:m,createNamespace:b,destroyNamespace:v,reset:_,ERROR_SYMBOL:u};function d(I){this.name=I,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(q,A){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return h&&E("    SETTING KEY:"+q+"="+A+" in ns:"+this.name+" uid:"+p+" active:"+k.inspect(this.active,!0)),this.active[q]=A,A},d.prototype.get=function(q){if(!this.active){h&&E("    GETTING KEY:"+q+"=undefined "+this.name+" uid:"+p+" active:"+k.inspect(this.active,!0));return}return h&&E("    GETTING KEY:"+q+"="+this.active[q]+" "+this.name+" uid:"+p+" active:"+k.inspect(this.active,!0)),this.active[q]},d.prototype.createContext=function(){h&&E("   CREATING Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  active:"+k.inspect(this.active,!0,2,!0));let q=Object.create(this.active?this.active:Object.prototype);return q._ns_name=this.name,q.id=p,h&&E("   CREATED Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  context:"+k.inspect(q,!0,2,!0)),q},d.prototype.run=function(q){let A=this.createContext();this.enter(A);try{return h&&E(" BEFORE RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+k.inspect(A)),q(A),A}catch(U){throw U&&(U[u]=A),U}finally{h&&E(" AFTER RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+k.inspect(A)),this.exit(A)}},d.prototype.runAndReturn=function(q){var A;return this.run(function(U){A=q(U)}),A},d.prototype.runPromise=function(q){let A=this.createContext();this.enter(A);let U=q(A);if(!U||!U.then||!U.catch)throw new Error("fn must return a promise.");return h&&E(" BEFORE runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+k.inspect(A)),U.then(O=>(h&&E(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+k.inspect(A)),this.exit(A),O)).catch(O=>{throw O[u]=A,h&&E(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+k.inspect(A)),this.exit(A),O})},d.prototype.bind=function(q,A){A||(this.active?A=this.active:A=this.createContext());let U=this;return function(){U.enter(A);try{return q.apply(this,arguments)}catch(F){throw F&&(F[u]=A),F}finally{U.exit(A)}}},d.prototype.enter=function(q){S.ok(q,"context must be provided for entering"),h&&E("  ENTER "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+k.inspect(q)),this._set.push(this.active),this.active=q},d.prototype.exit=function(q){if(S.ok(q,"context must be provided for exiting"),h&&E("  EXIT "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+k.inspect(q)),this.active===q){S.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let A=this._set.lastIndexOf(q);A<0?(h&&E("??ERROR?? context exiting but not entered - ignoring: "+k.inspect(q)),S.ok(A>=0,`context not currently entered; can't exit. 
`+k.inspect(this)+`
`+k.inspect(q))):(S.ok(A,"can't remove top context"),this._set.splice(A,1))},d.prototype.bindEmitter=function(q){S.ok(q.on&&q.addListener&&q.emit,"can only bind real EEs");let A=this,U="context@"+this.name;function O(x){!x||(x[c]||(x[c]=Object.create(null)),x[c][U]={namespace:A,context:A.active})}function F(x){if(!(x&&x[c]))return x;let H=x,B=x[c];return Object.keys(B).forEach(function(z){let V=B[z];H=V.namespace.bind(H,V.context)}),H}T(q,O,F)},d.prototype.fromException=function(q){return q[u]};function m(I){return process.namespaces[I]}function b(I){S.ok(I,"namespace must be given a name."),h&&E("CREATING NAMESPACE "+I);let q=new d(I);return q.id=p,f.addHooks({init(A,U,O,F,x){p=A,F?(q._contexts.set(A,q._contexts.get(F)),h&&E("PARENTID: "+I+" uid:"+A+" parent:"+F+" provider:"+O)):q._contexts.set(p,q.active),h&&E("INIT "+I+" uid:"+A+" parent:"+F+" provider:"+a[O]+" active:"+k.inspect(q.active,!0))},pre(A,U){p=A;let O=q._contexts.get(A);O?(h&&E(" PRE "+I+" uid:"+A+" handle:"+N(U)+" context:"+k.inspect(O)),q.enter(O)):h&&E(" PRE MISSING CONTEXT "+I+" uid:"+A+" handle:"+N(U))},post(A,U){p=A;let O=q._contexts.get(A);O?(h&&E(" POST "+I+" uid:"+A+" handle:"+N(U)+" context:"+k.inspect(O)),q.exit(O)):h&&E(" POST MISSING CONTEXT "+I+" uid:"+A+" handle:"+N(U))},destroy(A){p=A,h&&E("DESTROY "+I+" uid:"+A+" context:"+k.inspect(q._contexts.get(p))+" active:"+k.inspect(q.active,!0)),q._contexts.delete(A)}}),process.namespaces[I]=q,q}function v(I){let q=m(I);S.ok(q,`can't delete nonexistent namespace! "`+I+'"'),S.ok(q.id,"don't assign to process.namespaces directly! "+k.inspect(q)),process.namespaces[I]=null}function _(){process.namespaces&&Object.keys(process.namespaces).forEach(function(I){v(I)}),process.namespaces=Object.create(null)}process.namespaces={},f._state&&!f._state.enabled&&f.enable();function E(I){process.env.DEBUG&&process._rawDebug(I)}function N(I){if(!I)return I;if(typeof I=="function")return I.name?I.name:(I.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(I.constructor&&I.constructor.name)return I.constructor.name}if(h){var D=y(2512);for(var L in D.filter._modifiers)D.filter.deattach(L)}},3964:(o,R,y)=>{"use strict";const k=y(1669),S=y(2357),T=y(9867),f=y(7303),c="cls@contexts",u="error@context",a=process.env.DEBUG_CLS_HOOKED;let h=-1;o.exports={getNamespace:d,createNamespace:m,destroyNamespace:b,reset:v,ERROR_SYMBOL:u};function p(E){this.name=E,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}p.prototype.set=function(N,D){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[N]=D,a){const L=" ".repeat(this._indent<0?0:this._indent);_(L+"CONTEXT-SET KEY:"+N+"="+D+" in ns:"+this.name+" currentUid:"+h+" active:"+k.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return D},p.prototype.get=function(N){if(!this.active){if(a){const D=f.currentId(),L=f.triggerAsyncId(),I=" ".repeat(this._indent<0?0:this._indent);_(`${I}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${N}=undefined currentUid:${h} asyncHooksCurrentId:${D} triggerId:${L} len:${this._set.length}`)}return}if(a){const D=f.executionAsyncId(),L=f.triggerAsyncId(),I=" ".repeat(this._indent<0?0:this._indent);_(I+"CONTEXT-GETTING KEY:"+N+"="+this.active[N]+" ("+this.name+") currentUid:"+h+" active:"+k.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),_(`${I}CONTEXT-GETTING KEY: (${this.name}) ${N}=${this.active[N]} currentUid:${h} asyncHooksCurrentId:${D} triggerId:${L} len:${this._set.length} active:${k.inspect(this.active)}`)}return this.active[N]},p.prototype.createContext=function(){let N=Object.create(this.active?this.active:Object.prototype);if(N._ns_name=this.name,N.id=h,a){const D=f.executionAsyncId(),L=f.triggerAsyncId(),I=" ".repeat(this._indent<0?0:this._indent);_(`${I}CONTEXT-CREATED Context: (${this.name}) currentUid:${h} asyncHooksCurrentId:${D} triggerId:${L} len:${this._set.length} context:${k.inspect(N,{showHidden:!0,depth:2,colors:!0})}`)}return N},p.prototype.run=function(N){let D=this.createContext();this.enter(D);try{if(a){const L=f.triggerAsyncId(),I=f.executionAsyncId(),q=" ".repeat(this._indent<0?0:this._indent);_(`${q}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${h} triggerId:${L} asyncHooksCurrentId:${I} len:${this._set.length} context:${k.inspect(D)}`)}return N(D),D}catch(L){throw L&&(L[u]=D),L}finally{if(a){const L=f.triggerAsyncId(),I=f.executionAsyncId(),q=" ".repeat(this._indent<0?0:this._indent);_(`${q}CONTEXT-RUN END: (${this.name}) currentUid:${h} triggerId:${L} asyncHooksCurrentId:${I} len:${this._set.length} ${k.inspect(D)}`)}this.exit(D)}},p.prototype.runAndReturn=function(N){let D;return this.run(function(L){D=N(L)}),D},p.prototype.runPromise=function(N){let D=this.createContext();this.enter(D);let L=N(D);if(!L||!L.then||!L.catch)throw new Error("fn must return a promise.");return a&&_("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+h+" len:"+this._set.length+" "+k.inspect(D)),L.then(I=>(a&&_("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+h+" len:"+this._set.length+" "+k.inspect(D)),this.exit(D),I)).catch(I=>{throw I[u]=D,a&&_("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+h+" len:"+this._set.length+" "+k.inspect(D)),this.exit(D),I})},p.prototype.bind=function(N,D){D||(this.active?D=this.active:D=this.createContext());let L=this;return function(){L.enter(D);try{return N.apply(this,arguments)}catch(q){throw q&&(q[u]=D),q}finally{L.exit(D)}}},p.prototype.enter=function(N){if(S.ok(N,"context must be provided for entering"),a){const D=f.executionAsyncId(),L=f.triggerAsyncId(),I=" ".repeat(this._indent<0?0:this._indent);_(`${I}CONTEXT-ENTER: (${this.name}) currentUid:${h} triggerId:${L} asyncHooksCurrentId:${D} len:${this._set.length} ${k.inspect(N)}`)}this._set.push(this.active),this.active=N},p.prototype.exit=function(N){if(S.ok(N,"context must be provided for exiting"),a){const L=f.executionAsyncId(),I=f.triggerAsyncId(),q=" ".repeat(this._indent<0?0:this._indent);_(`${q}CONTEXT-EXIT: (${this.name}) currentUid:${h} triggerId:${I} asyncHooksCurrentId:${L} len:${this._set.length} ${k.inspect(N)}`)}if(this.active===N){S.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let D=this._set.lastIndexOf(N);D<0?(a&&_("??ERROR?? context exiting but not entered - ignoring: "+k.inspect(N)),S.ok(D>=0,`context not currently entered; can't exit. 
`+k.inspect(this)+`
`+k.inspect(N))):(S.ok(D,"can't remove top context"),this._set.splice(D,1))},p.prototype.bindEmitter=function(N){S.ok(N.on&&N.addListener&&N.emit,"can only bind real EEs");let D=this,L="context@"+this.name;function I(A){!A||(A[c]||(A[c]=Object.create(null)),A[c][L]={namespace:D,context:D.active})}function q(A){if(!(A&&A[c]))return A;let U=A,O=A[c];return Object.keys(O).forEach(function(F){let x=O[F];U=x.namespace.bind(U,x.context)}),U}T(N,I,q)},p.prototype.fromException=function(N){return N[u]};function d(E){return process.namespaces[E]}function m(E){S.ok(E,"namespace must be given a name."),a&&_(`NS-CREATING NAMESPACE (${E})`);let N=new p(E);return N.id=h,f.createHook({init(L,I,q,A){if(h=f.executionAsyncId(),N.active){if(N._contexts.set(L,N.active),a){const U=" ".repeat(N._indent<0?0:N._indent);_(`${U}INIT [${I}] (${E}) asyncId:${L} currentUid:${h} triggerId:${q} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} resource:${A}`)}}else if(h===0){const U=f.triggerAsyncId(),O=N._contexts.get(U);if(O){if(N._contexts.set(L,O),a){const F=" ".repeat(N._indent<0?0:N._indent);_(`${F}INIT USING CONTEXT FROM TRIGGERID [${I}] (${E}) asyncId:${L} currentUid:${h} triggerId:${U} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} resource:${A}`)}}else if(a){const F=" ".repeat(N._indent<0?0:N._indent);_(`${F}INIT MISSING CONTEXT [${I}] (${E}) asyncId:${L} currentUid:${h} triggerId:${U} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} resource:${A}`)}}if(a&&I==="PROMISE"){_(k.inspect(A,{showHidden:!0}));const U=A.parentId,O=" ".repeat(N._indent<0?0:N._indent);_(`${O}INIT RESOURCE-PROMISE [${I}] (${E}) parentId:${U} asyncId:${L} currentUid:${h} triggerId:${q} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} resource:${A}`)}},before(L){h=f.executionAsyncId();let I;if(I=N._contexts.get(L)||N._contexts.get(h),I){if(a){const q=f.triggerAsyncId(),A=" ".repeat(N._indent<0?0:N._indent);_(`${A}BEFORE (${E}) asyncId:${L} currentUid:${h} triggerId:${q} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} context:${k.inspect(I)}`),N._indent+=2}N.enter(I)}else if(a){const q=f.triggerAsyncId(),A=" ".repeat(N._indent<0?0:N._indent);_(`${A}BEFORE MISSING CONTEXT (${E}) asyncId:${L} currentUid:${h} triggerId:${q} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${k.inspect(N._contexts,{showHidden:!0,depth:2,colors:!0})}`),N._indent+=2}},after(L){h=f.executionAsyncId();let I;if(I=N._contexts.get(L)||N._contexts.get(h),I){if(a){const q=f.triggerAsyncId();N._indent-=2;const A=" ".repeat(N._indent<0?0:N._indent);_(`${A}AFTER (${E}) asyncId:${L} currentUid:${h} triggerId:${q} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} context:${k.inspect(I)}`)}N.exit(I)}else if(a){const q=f.triggerAsyncId();N._indent-=2;const A=" ".repeat(N._indent<0?0:N._indent);_(`${A}AFTER MISSING CONTEXT (${E}) asyncId:${L} currentUid:${h} triggerId:${q} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} context:${k.inspect(I)}`)}},destroy(L){if(h=f.executionAsyncId(),a){const I=f.triggerAsyncId(),q=" ".repeat(N._indent<0?0:N._indent);_(`${q}DESTROY (${E}) currentUid:${h} asyncId:${L} triggerId:${I} active:${k.inspect(N.active,{showHidden:!0,depth:2,colors:!0})} context:${k.inspect(N._contexts.get(h))}`)}N._contexts.delete(L)}}).enable(),process.namespaces[E]=N,N}function b(E){let N=d(E);S.ok(N,`can't delete nonexistent namespace! "`+E+'"'),S.ok(N.id,"don't assign to process.namespaces directly! "+k.inspect(N)),process.namespaces[E]=null}function v(){process.namespaces&&Object.keys(process.namespaces).forEach(function(E){b(E)}),process.namespaces=Object.create(null)}process.namespaces={};function _(...E){a&&process._rawDebug(`${k.format(...E)}`)}},9562:(o,R,y)=>{"use strict";const k=y(6625);process&&k.gte(process.versions.node,"8.0.0")?o.exports=y(3964):o.exports=y(4046)},3057:(o,R,y)=>{"use strict";var k=y(2357),S=y(9867),T="cls@contexts",f="error@context";process.addAsyncListener||y(7645);function c(d){this.name=d,this.active=null,this._set=[],this.id=null}c.prototype.set=function(d,m){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=m,m},c.prototype.get=function(d){if(!!this.active)return this.active[d]},c.prototype.createContext=function(){return Object.create(this.active)},c.prototype.run=function(d){var m=this.createContext();this.enter(m);try{return d(m),m}catch(b){throw b&&(b[f]=m),b}finally{this.exit(m)}},c.prototype.runAndReturn=function(d){var m;return this.run(function(b){m=d(b)}),m},c.prototype.bind=function(d,m){m||(this.active?m=this.active:m=this.createContext());var b=this;return function(){b.enter(m);try{return d.apply(this,arguments)}catch(v){throw v&&(v[f]=m),v}finally{b.exit(m)}}},c.prototype.enter=function(d){k.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},c.prototype.exit=function(d){if(k.ok(d,"context must be provided for exiting"),this.active===d){k.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var m=this._set.lastIndexOf(d);k.ok(m>=0,"context not currently entered; can't exit"),k.ok(m,"can't remove top context"),this._set.splice(m,1)},c.prototype.bindEmitter=function(d){k.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var m=this,b="context@"+this.name;function v(E){!E||(E[T]||(E[T]=Object.create(null)),E[T][b]={namespace:m,context:m.active})}function _(E){if(!(E&&E[T]))return E;var N=E,D=E[T];return Object.keys(D).forEach(function(L){var I=D[L];N=I.namespace.bind(N,I.context)}),N}S(d,v,_)},c.prototype.fromException=function(d){return d[f]};function u(d){return process.namespaces[d]}function a(d){k.ok(d,"namespace must be given a name!");var m=new c(d);return m.id=process.addAsyncListener({create:function(){return m.active},before:function(b,v){v&&m.enter(v)},after:function(b,v){v&&m.exit(v)},error:function(b){b&&m.exit(b)}}),process.namespaces[d]=m,m}function h(d){var m=u(d);k.ok(m,"can't delete nonexistent namespace!"),k.ok(m.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(m.id),process.namespaces[d]=null}function p(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){h(d)}),process.namespaces=Object.create(null)}process.namespaces||p(),o.exports={getNamespace:u,createNamespace:a,destroyNamespace:h,reset:p}},5175:o=>{"use strict";function R(y){if(!/^data:/i.test(y))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');y=y.replace(/\r?\n/g,"");const k=y.indexOf(",");if(k===-1||k<=4)throw new TypeError("malformed data: URI");const S=y.substring(5,k).split(";");let T="",f=!1;const c=S[0]||"text/plain";let u=c;for(let d=1;d<S.length;d++)S[d]==="base64"?f=!0:(u+=`;${S[d]}`,S[d].indexOf("charset=")===0&&(T=S[d].substring(8)));!S[0]&&!T.length&&(u+=";charset=US-ASCII",T="US-ASCII");const a=f?"base64":"ascii",h=unescape(y.substring(k+1)),p=Buffer.from(h,a);return p.type=c,p.typeFull=u,p.charset=T,p}o.exports=R},7484:function(o){(function(R,y){o.exports=y()})(this,function(){"use strict";var R="millisecond",y="second",k="minute",S="hour",T="day",f="week",c="month",u="quarter",a="year",h="date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},b=function(U,O,F){var x=String(U);return!x||x.length>=O?U:""+Array(O+1-x.length).join(F)+U},v={s:b,z:function(U){var O=-U.utcOffset(),F=Math.abs(O),x=Math.floor(F/60),H=F%60;return(O<=0?"+":"-")+b(x,2,"0")+":"+b(H,2,"0")},m:function U(O,F){if(O.date()<F.date())return-U(F,O);var x=12*(F.year()-O.year())+(F.month()-O.month()),H=O.clone().add(x,c),B=F-H<0,z=O.clone().add(x+(B?-1:1),c);return+(-(x+(F-H)/(B?H-z:z-H))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return{M:c,y:a,w:f,d:T,D:h,h:S,m:k,s:y,ms:R,Q:u}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},_="en",E={};E[_]=m;var N=function(U){return U instanceof q},D=function(U,O,F){var x;if(!U)return _;if(typeof U=="string")E[U]&&(x=U),O&&(E[U]=O,x=U);else{var H=U.name;E[H]=U,x=H}return!F&&x&&(_=x),x||!F&&_},L=function(U,O){if(N(U))return U.clone();var F=typeof O=="object"?O:{};return F.date=U,F.args=arguments,new q(F)},I=v;I.l=D,I.i=N,I.w=function(U,O){return L(U,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var q=function(){function U(F){this.$L=D(F.locale,null,!0),this.parse(F)}var O=U.prototype;return O.parse=function(F){this.$d=function(x){var H=x.date,B=x.utc;if(H===null)return new Date(NaN);if(I.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var z=H.match(p);if(z){var V=z[2]-1||0,J=(z[7]||"0").substring(0,3);return B?new Date(Date.UTC(z[1],V,z[3]||1,z[4]||0,z[5]||0,z[6]||0,J)):new Date(z[1],V,z[3]||1,z[4]||0,z[5]||0,z[6]||0,J)}}return new Date(H)}(F),this.$x=F.x||{},this.init()},O.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},O.$utils=function(){return I},O.isValid=function(){return this.$d.toString()!=="Invalid Date"},O.isSame=function(F,x){var H=L(F);return this.startOf(x)<=H&&H<=this.endOf(x)},O.isAfter=function(F,x){return L(F)<this.startOf(x)},O.isBefore=function(F,x){return this.endOf(x)<L(F)},O.$g=function(F,x,H){return I.u(F)?this[x]:this.set(H,F)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(F,x){var H=this,B=!!I.u(x)||x,z=I.p(F),V=function(he,ge){var Se=I.w(H.$u?Date.UTC(H.$y,ge,he):new Date(H.$y,ge,he),H);return B?Se:Se.endOf(T)},J=function(he,ge){return I.w(H.toDate()[he].apply(H.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(ge)),H)},le=this.$W,oe=this.$M,we=this.$D,Z="set"+(this.$u?"UTC":"");switch(z){case a:return B?V(1,0):V(31,11);case c:return B?V(1,oe):V(0,oe+1);case f:var ne=this.$locale().weekStart||0,te=(le<ne?le+7:le)-ne;return V(B?we-te:we+(6-te),oe);case T:case h:return J(Z+"Hours",0);case S:return J(Z+"Minutes",1);case k:return J(Z+"Seconds",2);case y:return J(Z+"Milliseconds",3);default:return this.clone()}},O.endOf=function(F){return this.startOf(F,!1)},O.$set=function(F,x){var H,B=I.p(F),z="set"+(this.$u?"UTC":""),V=(H={},H[T]=z+"Date",H[h]=z+"Date",H[c]=z+"Month",H[a]=z+"FullYear",H[S]=z+"Hours",H[k]=z+"Minutes",H[y]=z+"Seconds",H[R]=z+"Milliseconds",H)[B],J=B===T?this.$D+(x-this.$W):x;if(B===c||B===a){var le=this.clone().set(h,1);le.$d[V](J),le.init(),this.$d=le.set(h,Math.min(this.$D,le.daysInMonth())).$d}else V&&this.$d[V](J);return this.init(),this},O.set=function(F,x){return this.clone().$set(F,x)},O.get=function(F){return this[I.p(F)]()},O.add=function(F,x){var H,B=this;F=Number(F);var z=I.p(x),V=function(oe){var we=L(B);return I.w(we.date(we.date()+Math.round(oe*F)),B)};if(z===c)return this.set(c,this.$M+F);if(z===a)return this.set(a,this.$y+F);if(z===T)return V(1);if(z===f)return V(7);var J=(H={},H[k]=6e4,H[S]=36e5,H[y]=1e3,H)[z]||1,le=this.$d.getTime()+F*J;return I.w(le,this)},O.subtract=function(F,x){return this.add(-1*F,x)},O.format=function(F){var x=this;if(!this.isValid())return"Invalid Date";var H=F||"YYYY-MM-DDTHH:mm:ssZ",B=I.z(this),z=this.$locale(),V=this.$H,J=this.$m,le=this.$M,oe=z.weekdays,we=z.months,Z=function(ge,Se,de,fe){return ge&&(ge[Se]||ge(x,H))||de[Se].substr(0,fe)},ne=function(ge){return I.s(V%12||12,ge,"0")},te=z.meridiem||function(ge,Se,de){var fe=ge<12?"AM":"PM";return de?fe.toLowerCase():fe},he={YY:String(this.$y).slice(-2),YYYY:this.$y,M:le+1,MM:I.s(le+1,2,"0"),MMM:Z(z.monthsShort,le,we,3),MMMM:Z(we,le),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:Z(z.weekdaysMin,this.$W,oe,2),ddd:Z(z.weekdaysShort,this.$W,oe,3),dddd:oe[this.$W],H:String(V),HH:I.s(V,2,"0"),h:ne(1),hh:ne(2),a:te(V,J,!0),A:te(V,J,!1),m:String(J),mm:I.s(J,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:B};return H.replace(d,function(ge,Se){return Se||he[ge]||B.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(F,x,H){var B,z=I.p(x),V=L(F),J=6e4*(V.utcOffset()-this.utcOffset()),le=this-V,oe=I.m(this,V);return oe=(B={},B[a]=oe/12,B[c]=oe,B[u]=oe/3,B[f]=(le-J)/6048e5,B[T]=(le-J)/864e5,B[S]=le/36e5,B[k]=le/6e4,B[y]=le/1e3,B)[z]||le,H?oe:I.a(oe)},O.daysInMonth=function(){return this.endOf(c).$D},O.$locale=function(){return E[this.$L]},O.locale=function(F,x){if(!F)return this.$L;var H=this.clone(),B=D(F,x,!0);return B&&(H.$L=B),H},O.clone=function(){return I.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},U}(),A=q.prototype;return L.prototype=A,[["$ms",R],["$s",y],["$m",k],["$H",S],["$W",T],["$M",c],["$y",a],["$D",h]].forEach(function(U){A[U[1]]=function(O){return this.$g(O,U[0],U[1])}}),L.extend=function(U,O){return U.$i||(U(O,q,L),U.$i=!0),L},L.locale=D,L.isDayjs=N,L.unix=function(U){return L(1e3*U)},L.en=E[_],L.Ls=E,L.p={},L})},4110:function(o){(function(R,y){o.exports=y()})(this,function(){"use strict";return function(R,y,k){R=R||{};var S=y.prototype,T={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function f(u,a,h,p){return S.fromToBase(u,a,h,p)}k.en.relativeTime=T,S.fromToBase=function(u,a,h,p,d){for(var m,b,v,_=h.$locale().relativeTime||T,E=R.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],N=E.length,D=0;D<N;D+=1){var L=E[D];L.d&&(m=p?k(u).diff(h,L.d,!0):h.diff(u,L.d,!0));var I=(R.rounding||Math.round)(Math.abs(m));if(v=m>0,I<=L.r||!L.r){I<=1&&D>0&&(L=E[D-1]);var q=_[L.l];d&&(I=d(""+I)),b=typeof q=="string"?q.replace("%d",I):q(I,a,L.l,v);break}}if(a)return b;var A=v?_.future:_.past;return typeof A=="function"?A(b):A.replace("%s",b)},S.to=function(u,a){return f(u,a,this,!0)},S.from=function(u,a){return f(u,a,this)};var c=function(u){return u.$u?k.utc():k()};S.toNow=function(u){return this.to(c(this),u)},S.fromNow=function(u){return this.from(c(this),u)}}})},660:function(o){(function(R,y){o.exports=y()})(this,function(){"use strict";return function(R,y,k){k.updateLocale=function(S,T){var f=k.Ls[S];if(f)return(T?Object.keys(T):[]).forEach(function(c){f[c]=T[c]}),f}}})},9435:o=>{var R=1e3,y=R*60,k=y*60,S=k*24,T=S*7,f=S*365.25;o.exports=function(p,d){d=d||{};var m=typeof p;if(m==="string"&&p.length>0)return c(p);if(m==="number"&&isFinite(p))return d.long?a(p):u(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function c(p){if(p=String(p),!(p.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(!!d){var m=parseFloat(d[1]),b=(d[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return m*f;case"weeks":case"week":case"w":return m*T;case"days":case"day":case"d":return m*S;case"hours":case"hour":case"hrs":case"hr":case"h":return m*k;case"minutes":case"minute":case"mins":case"min":case"m":return m*y;case"seconds":case"second":case"secs":case"sec":case"s":return m*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function u(p){var d=Math.abs(p);return d>=S?Math.round(p/S)+"d":d>=k?Math.round(p/k)+"h":d>=y?Math.round(p/y)+"m":d>=R?Math.round(p/R)+"s":p+"ms"}function a(p){var d=Math.abs(p);return d>=S?h(p,d,S,"day"):d>=k?h(p,d,k,"hour"):d>=y?h(p,d,y,"minute"):d>=R?h(p,d,R,"second"):p+" ms"}function h(p,d,m,b){var v=d>=m*1.5;return Math.round(p/m)+" "+b+(v?"s":"")}},1758:(o,R,y)=>{R.formatArgs=S,R.save=T,R.load=f,R.useColors=k,R.storage=c(),R.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),R.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function k(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function S(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;a.splice(1,0,h,"color: inherit");let p=0,d=0;a[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(p++,m==="%c"&&(d=p))}),a.splice(d,0,h)}R.log=console.debug||console.log||(()=>{});function T(a){try{a?R.storage.setItem("debug",a):R.storage.removeItem("debug")}catch(h){}}function f(){let a;try{a=R.storage.getItem("debug")}catch(h){}return!a&&typeof process!="undefined"&&"env"in process&&(a=process.env.DEBUG),a}function c(){try{return localStorage}catch(a){}}o.exports=y(2447)(R);const{formatters:u}=o.exports;u.j=function(a){try{return JSON.stringify(a)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}},2447:(o,R,y)=>{function k(S){f.debug=f,f.default=f,f.coerce=d,f.disable=a,f.enable=u,f.enabled=h,f.humanize=y(9435),f.destroy=m,Object.keys(S).forEach(b=>{f[b]=S[b]}),f.names=[],f.skips=[],f.formatters={};function T(b){let v=0;for(let _=0;_<b.length;_++)v=(v<<5)-v+b.charCodeAt(_),v|=0;return f.colors[Math.abs(v)%f.colors.length]}f.selectColor=T;function f(b){let v,_=null;function E(...N){if(!E.enabled)return;const D=E,L=Number(new Date),I=L-(v||L);D.diff=I,D.prev=v,D.curr=L,v=L,N[0]=f.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");let q=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(U,O)=>{if(U==="%%")return"%";q++;const F=f.formatters[O];if(typeof F=="function"){const x=N[q];U=F.call(D,x),N.splice(q,1),q--}return U}),f.formatArgs.call(D,N),(D.log||f.log).apply(D,N)}return E.namespace=b,E.useColors=f.useColors(),E.color=f.selectColor(b),E.extend=c,E.destroy=f.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>_===null?f.enabled(b):_,set:N=>{_=N}}),typeof f.init=="function"&&f.init(E),E}function c(b,v){const _=f(this.namespace+(typeof v=="undefined"?":":v)+b);return _.log=this.log,_}function u(b){f.save(b),f.names=[],f.skips=[];let v;const _=(typeof b=="string"?b:"").split(/[\s,]+/),E=_.length;for(v=0;v<E;v++)!_[v]||(b=_[v].replace(/\*/g,".*?"),b[0]==="-"?f.skips.push(new RegExp("^"+b.substr(1)+"$")):f.names.push(new RegExp("^"+b+"$")))}function a(){const b=[...f.names.map(p),...f.skips.map(p).map(v=>"-"+v)].join(",");return f.enable(""),b}function h(b){if(b[b.length-1]==="*")return!0;let v,_;for(v=0,_=f.skips.length;v<_;v++)if(f.skips[v].test(b))return!1;for(v=0,_=f.names.length;v<_;v++)if(f.names[v].test(b))return!0;return!1}function p(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function d(b){return b instanceof Error?b.stack||b.message:b}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return f.enable(f.load()),f}o.exports=k},8104:(o,R,y)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?o.exports=y(1758):o.exports=y(39)},39:(o,R,y)=>{const k=y(3867),S=y(1669);R.init=p,R.log=u,R.formatArgs=f,R.save=a,R.load=h,R.useColors=T,R.destroy=S.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),R.colors=[6,2,3,4,5,1];try{const m=y(2130);m&&(m.stderr||m).level>=2&&(R.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(m){}R.inspectOpts=Object.keys(process.env).filter(m=>/^debug_/i.test(m)).reduce((m,b)=>{const v=b.substring(6).toLowerCase().replace(/_([a-z])/g,(E,N)=>N.toUpperCase());let _=process.env[b];return/^(yes|on|true|enabled)$/i.test(_)?_=!0:/^(no|off|false|disabled)$/i.test(_)?_=!1:_==="null"?_=null:_=Number(_),m[v]=_,m},{});function T(){return"colors"in R.inspectOpts?Boolean(R.inspectOpts.colors):k.isatty(process.stderr.fd)}function f(m){const{namespace:b,useColors:v}=this;if(v){const _=this.color,E="[3"+(_<8?_:"8;5;"+_),N=`  ${E};1m${b} [0m`;m[0]=N+m[0].split(`
`).join(`
`+N),m.push(E+"m+"+o.exports.humanize(this.diff)+"[0m")}else m[0]=c()+b+" "+m[0]}function c(){return R.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(...m){return process.stderr.write(S.format(...m)+`
`)}function a(m){m?process.env.DEBUG=m:delete process.env.DEBUG}function h(){return process.env.DEBUG}function p(m){m.inspectOpts={};const b=Object.keys(R.inspectOpts);for(let v=0;v<b.length;v++)m.inspectOpts[b[v]]=R.inspectOpts[b[v]]}o.exports=y(2447)(R);const{formatters:d}=o.exports;d.o=function(m){return this.inspectOpts.colors=this.useColors,S.inspect(m,this.inspectOpts).split(`
`).map(b=>b.trim()).join(" ")},d.O=function(m){return this.inspectOpts.colors=this.useColors,S.inspect(m,this.inspectOpts)}},8604:function(o,R,y){"use strict";var k=this&&this.__assign||Object.assign||function(u){for(var a,h=1,p=arguments.length;h<p;h++){a=arguments[h];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(u[d]=a[d])}return u};Object.defineProperty(R,"__esModule",{value:!0});var S=y(4953);R.AzureMonitorSymbol="Azure_Monitor_Tracer";var T=function(u){try{var a=y(8921).BasicTracer,h=S.channel.spanContextPropagator?{scopeManager:S.channel.spanContextPropagator}:void 0,p=new a(h),d=p.startSpan;p.startSpan=function(m,b){if(!b||!b.parent){var v=p.getCurrentSpan();v&&v.operation&&v.operation.traceparent&&(b=k({},b,{parent:{traceId:v.operation.traceparent.traceId,spanId:v.operation.traceparent.spanId}}))}var _=d.call(this,m,b);return _.addEvent("Application Insights Integration enabled"),_},p.addSpanProcessor(new f),p[R.AzureMonitorSymbol]=!0,u.setTracer(p)}catch(m){}return u},f=function(){function u(){}return u.prototype.onStart=function(a){},u.prototype.onEnd=function(a){S.channel.publish("azure-coretracing",a)},u.prototype.shutdown=function(){},u}();R.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:T};function c(){S.channel.registerMonkeyPatch("@azure/core-tracing",R.azureCoreTracing)}R.enable=c},8859:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(4953),S=function(f){var c=f.prototype._emit;return f.prototype._emit=function(u,a){var h=c.apply(this,arguments);if(!a){var p=h;p||(p=c.call(this,u,!0)),k.channel.publish("bunyan",{level:u.level,result:p})}return h},f};R.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:S};function T(){k.channel.registerMonkeyPatch("bunyan",R.bunyan)}R.enable=T},2495:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(4953),S=y(2413),T=function(c){var u=new S.Writable,a=new S.Writable;u.write=function(_){if(!_)return!0;var E=_.toString();return k.channel.publish("console",{message:E}),!0},a.write=function(_){if(!_)return!0;var E=_.toString();return k.channel.publish("console",{message:E,stderr:!0}),!0};for(var h=new c.Console(u,a),p=["log","info","warn","error","dir","time","timeEnd","trace","assert"],d=function(_){var E=c[_];E&&(c[_]=function(){if(h[_])try{h[_].apply(h,arguments)}catch(N){}return E.apply(c,arguments)})},m=0,b=p;m<b.length;m++){var v=b[m];d(v)}return c};R.console={versionSpecifier:">= 4.0.0",patch:T};function f(){k.channel.registerMonkeyPatch("console",R.console),y(7082)}R.enable=f},4106:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(8604);R.azuresdk=k;var S=y(8859);R.bunyan=S;var T=y(2495);R.console=T;var f=y(2028);R.mongodbCore=f;var c=y(8436);R.mongodb=c;var u=y(8002);R.mysql=u;var a=y(9024);R.pgPool=a;var h=y(8060);R.pg=h;var p=y(4487);R.redis=p;var d=y(6661);R.tedious=d;var m=y(4650);R.winston=m;function b(){S.enable(),T.enable(),f.enable(),c.enable(),u.enable(),h.enable(),a.enable(),p.enable(),m.enable(),k.enable(),d.enable()}R.enable=b},2028:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(4953),S=function(f){var c=f.Server.prototype.connect;return f.Server.prototype.connect=function(){var a=c.apply(this,arguments),h=this.s.pool.write;this.s.pool.write=function(){var m=typeof arguments[1]=="function"?1:2;return typeof arguments[m]=="function"&&(arguments[m]=k.channel.bindToContext(arguments[m])),h.apply(this,arguments)};var p=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=k.channel.bindToContext(arguments[1])),p.apply(this,arguments)},a},f};R.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:S};function T(){k.channel.registerMonkeyPatch("mongodb-core",R.mongoCore)}R.enable=T},8436:function(o,R,y){"use strict";var k=this&&this.__assign||Object.assign||function(h){for(var p,d=1,m=arguments.length;d<m;d++){p=arguments[d];for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(h[b]=p[b])}return h};Object.defineProperty(R,"__esModule",{value:!0});var S=y(4953),T=function(h){var p=h.instrument({operationIdGenerator:{next:function(){return S.channel.bindToContext(function(m){return m()})}}}),d={};return p.on("started",function(m){d[m.requestId]||(d[m.requestId]=k({},m,{time:new Date}))}),p.on("succeeded",function(m){var b=d[m.requestId];b&&delete d[m.requestId],typeof m.operationId=="function"?m.operationId(function(){return S.channel.publish("mongodb",{startedData:b,event:m,succeeded:!0})}):S.channel.publish("mongodb",{startedData:b,event:m,succeeded:!0})}),p.on("failed",function(m){var b=d[m.requestId];b&&delete d[m.requestId],typeof m.operationId=="function"?m.operationId(function(){return S.channel.publish("mongodb",{startedData:b,event:m,succeeded:!1})}):S.channel.publish("mongodb",{startedData:b,event:m,succeeded:!1})}),h},f=function(h){var p=h.instrument(),d={},m={};return p.on("started",function(b){d[b.requestId]||(m[b.requestId]=S.channel.bindToContext(function(v){return v()}),d[b.requestId]=k({},b,{time:new Date}))}),p.on("succeeded",function(b){var v=d[b.requestId];v&&delete d[b.requestId],typeof b=="object"&&typeof m[b.requestId]=="function"&&(m[b.requestId](function(){return S.channel.publish("mongodb",{startedData:v,event:b,succeeded:!0})}),delete m[b.requestId])}),p.on("failed",function(b){var v=d[b.requestId];v&&delete d[b.requestId],typeof b=="object"&&typeof m[b.requestId]=="function"&&(m[b.requestId](function(){return S.channel.publish("mongodb",{startedData:v,event:b,succeeded:!1})}),delete m[b.requestId])}),h},c=function(h){var p=h.Server.prototype.connect;return h.Server.prototype.connect=function(){var m=p.apply(this,arguments),b=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var E=typeof arguments[1]=="function"?1:2;return typeof arguments[E]=="function"&&(arguments[E]=S.channel.bindToContext(arguments[E])),b.apply(this,arguments)};var v=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=S.channel.bindToContext(arguments[1])),v.apply(this,arguments)},m},h},u=function(h){c(h);var p=h.instrument(),d={},m={};return p.on("started",function(b){d[b.requestId]||(m[b.requestId]=S.channel.bindToContext(function(v){return v()}),d[b.requestId]=b)}),p.on("succeeded",function(b){var v=d[b.requestId];v&&delete d[b.requestId],typeof b=="object"&&typeof m[b.requestId]=="function"&&(m[b.requestId](function(){return S.channel.publish("mongodb",{startedData:v,event:b,succeeded:!0})}),delete m[b.requestId])}),p.on("failed",function(b){var v=d[b.requestId];v&&delete d[b.requestId],typeof b=="object"&&typeof m[b.requestId]=="function"&&(m[b.requestId](function(){return S.channel.publish("mongodb",{startedData:v,event:b,succeeded:!1})}),delete m[b.requestId])}),h};R.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:T},R.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:f},R.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:u};function a(){S.channel.registerMonkeyPatch("mongodb",R.mongo2),S.channel.registerMonkeyPatch("mongodb",R.mongo3),S.channel.registerMonkeyPatch("mongodb",R.mongo330)}R.enable=a},8002:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(4953),S=y(5622),T=function(c,u){var a=function(v,_){return function(E,N){var D=v[E];D&&(v[E]=function(){for(var I=arguments.length-1,q=arguments.length-1;q>=0;--q)if(typeof arguments[q]=="function"){I=q;break}else if(typeof arguments[q]!="undefined")break;var A=arguments[I],U={result:null,startTime:null,startDate:null};typeof A=="function"&&(N?(U.startTime=process.hrtime(),U.startDate=new Date,arguments[I]=k.channel.bindToContext(N(U,A))):arguments[I]=k.channel.bindToContext(A));var O=D.apply(this,arguments);return U.result=O,O})}},h=function(v,_){return a(v.prototype,_+".prototype")},p=["connect","changeUser","ping","statistics","end"],d=y(4694)(S.dirname(u)+"/lib/Connection");p.forEach(function(v){return h(d,"Connection")(v)}),a(d,"Connection")("createQuery",function(v,_){return function(E){var N=process.hrtime(v.startTime),D=N[0]*1e3+N[1]/1e6|0;k.channel.publish("mysql",{query:v.result,callbackArgs:arguments,err:E,duration:D,time:v.startDate}),_.apply(this,arguments)}});var m=["_enqueueCallback"],b=y(420)(S.dirname(u)+"/lib/Pool");return m.forEach(function(v){return h(b,"Pool")(v)}),c};R.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:T};function f(){k.channel.registerMonkeyPatch("mysql",R.mysql)}R.enable=f},9024:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(4953);function S(f){var c=f.prototype.connect;return f.prototype.connect=function(a){return a&&(arguments[0]=k.channel.bindToContext(a)),c.apply(this,arguments)},f}R.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:S};function T(){k.channel.registerMonkeyPatch("pg-pool",R.postgresPool1)}R.enable=T},8060:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(4953),S=y(8614);function T(u,a){var h=u.Client.prototype.query,p="__diagnosticOriginalFunc";return u.Client.prototype.query=function(m,b,v){var _={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},E=process.hrtime(),N;function D(L){L&&L[p]&&(L=L[p]);var I=k.channel.bindToContext(function(q,A){var U=process.hrtime(E);if(_.result=A&&{rowCount:A.rowCount,command:A.command},_.error=q,_.duration=Math.ceil(U[0]*1e3+U[1]/1e6),k.channel.publish("postgres",_),q){if(L)return L.apply(this,arguments);N&&N instanceof S.EventEmitter&&N.emit("error",q)}else L&&L.apply(this,arguments)});try{return Object.defineProperty(I,p,{value:L}),I}catch(q){return L}}try{typeof m=="string"?b instanceof Array?(_.query.preparable={text:m,args:b},v=D(v)):(_.query.text=m,v?v=D(v):b=D(b)):(typeof m.name=="string"?_.query.plan=m.name:m.values instanceof Array?_.query.preparable={text:m.text,args:m.values}:_.query.text=m.text,v?v=D(v):b?b=D(b):m.callback=D(m.callback))}catch(L){return h.apply(this,arguments)}return arguments[0]=m,arguments[1]=b,arguments[2]=v,arguments.length=arguments.length>3?arguments.length:3,N=h.apply(this,arguments),N},u}function f(u,a){var h=u.Client.prototype.query,p="__diagnosticOriginalFunc";return u.Client.prototype.query=function(m,b,v){var _=this,E=!!v,N={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},D=process.hrtime(),L;function I(q){q&&q[p]&&(q=q[p]);var A=k.channel.bindToContext(function(U,O){var F=process.hrtime(D);if(N.result=O&&{rowCount:O.rowCount,command:O.command},N.error=U,N.duration=Math.ceil(F[0]*1e3+F[1]/1e6),k.channel.publish("postgres",N),U){if(q)return q.apply(this,arguments);L&&L instanceof S.EventEmitter&&L.emit("error",U)}else q&&q.apply(this,arguments)});try{return Object.defineProperty(A,p,{value:q}),A}catch(U){return q}}try{typeof m=="string"?b instanceof Array?(N.query.preparable={text:m,args:b},E=typeof v=="function",v=E?I(v):v):(N.query.text=m,v?(E=typeof v=="function",v=E?I(v):v):(E=typeof b=="function",b=E?I(b):b)):(typeof m.name=="string"?N.query.plan=m.name:m.values instanceof Array?N.query.preparable={text:m.text,args:m.values}:N.query.text=m.text,v?(E=typeof v=="function",v=I(v)):b?(E=typeof b=="function",b=E?I(b):b):(E=typeof m.callback=="function",m.callback=E?I(m.callback):m.callback))}catch(q){return h.apply(this,arguments)}return arguments[0]=m,arguments[1]=b,arguments[2]=v,arguments.length=arguments.length>3?arguments.length:3,L=h.apply(this,arguments),E?L:L.then(function(q){return I()(void 0,q),new _._Promise(function(A,U){A(q)})}).catch(function(q){return I()(q,void 0),new _._Promise(function(A,U){U(q)})})},u}R.postgres6={versionSpecifier:"6.*",patch:T},R.postgres7={versionSpecifier:">=7.* <=8.*",patch:f};function c(){k.channel.registerMonkeyPatch("pg",R.postgres6),k.channel.registerMonkeyPatch("pg",R.postgres7)}R.enable=c},4487:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(4953),S=function(f){var c=f.RedisClient.prototype.internal_send_command;return f.RedisClient.prototype.internal_send_command=function(u){if(u){var a=u.callback;if(!a||!a.pubsubBound){var h=this.address,p=process.hrtime(),d=new Date;u.callback=k.channel.bindToContext(function(m,b){var v=process.hrtime(p),_=v[0]*1e3+v[1]/1e6|0;k.channel.publish("redis",{duration:_,address:h,commandObj:u,err:m,result:b,time:d}),typeof a=="function"&&a.apply(this,arguments)}),u.callback.pubsubBound=!0}}return c.call(this,u)},f};R.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:S};function T(){k.channel.registerMonkeyPatch("redis",R.redis)}R.enable=T},6661:function(o,R,y){"use strict";var k=this&&this.__assign||Object.assign||function(c){for(var u,a=1,h=arguments.length;a<h;a++){u=arguments[a];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p])}return c};Object.defineProperty(R,"__esModule",{value:!0});var S=y(4953),T=function(c){var u=c.Connection.prototype.makeRequest;return c.Connection.prototype.makeRequest=function(){function h(d){var m=process.hrtime(),b={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return S.channel.bindToContext(function(v,_,E){var N=process.hrtime(m);b=k({},b,{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!v&&{rowCount:_,rows:E},query:{text:this.parametersByName.statement.value},error:v,duration:Math.ceil(N[0]*1e3+N[1]/1e6)}),S.channel.publish("tedious",b),d.call(this,v,_,E)})}var p=arguments[0];arguments[0].callback=h(p.callback),u.apply(this,arguments)},c};R.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:T};function f(){S.channel.registerMonkeyPatch("tedious",R.tedious)}R.enable=f},4650:function(o,R,y){"use strict";var k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])};return function(h,p){a(h,p);function d(){this.constructor=h}h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),S=this&&this.__rest||function(a,h){var p={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&h.indexOf(d)<0&&(p[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,d=Object.getOwnPropertySymbols(a);m<d.length;m++)h.indexOf(d[m])<0&&(p[d[m]]=a[d[m]]);return p};Object.defineProperty(R,"__esModule",{value:!0});var T=y(4953),f=function(a){var h=a.Logger.prototype.log,p,d=function(m,b,v){var _;return p===a.config.npm.levels?_="npm":p===a.config.syslog.levels?_="syslog":_="unknown",T.channel.publish("winston",{level:m,message:b,meta:v,levelKind:_}),b};return a.Logger.prototype.log=function(){return p=this.levels,!this.filters||this.filters.length===0?this.filters=[d]:this.filters[this.filters.length-1]!==d&&(this.filters=this.filters.filter(function(b){return b!==d}),this.filters.push(d)),h.apply(this,arguments)},a},c=function(a){var h=function(v,_){var E;return v.config.npm.levels[_]!=null?E="npm":v.config.syslog.levels[_]!=null?E="syslog":E="unknown",E},p=function(v){k(_,v);function _(E,N){var D=v.call(this,N)||this;return D.winston=E,D}return _.prototype.log=function(E,N){var D=E.message,L=E.level,I=E.meta,q=S(E,["message","level","meta"]);L=typeof Symbol.for=="function"?E[Symbol.for("level")]:L,D=E instanceof Error?E:D;var A=h(this.winston,L);I=I||{};for(var U in q)q.hasOwnProperty(U)&&(I[U]=q[U]);T.channel.publish("winston",{message:D,level:L,levelKind:A,meta:I}),N()},_}(a.Transport);function d(){var v=arguments[0].levels||a.config.npm.levels,_;for(var E in v)v.hasOwnProperty(E)&&(_=_===void 0||v[E]>v[_]?E:_);this.add(new p(a,{level:_}))}var m=a.createLogger;a.createLogger=function(){var _=arguments[0].levels||a.config.npm.levels,E;for(var N in _)_.hasOwnProperty(N)&&(E=E===void 0||_[N]>_[E]?N:E);var D=m.apply(this,arguments);D.add(new p(a,{level:E}));var L=D.configure;return D.configure=function(){L.apply(this,arguments),d.apply(this,arguments)},D};var b=a.createLogger;return a.configure=function(){b.apply(this,arguments),d.apply(this,arguments)},a.add(new p(a)),a};R.winston3={versionSpecifier:"3.x",patch:c},R.winston2={versionSpecifier:"2.x",patch:f};function u(){T.channel.registerMonkeyPatch("winston",R.winston2),T.channel.registerMonkeyPatch("winston",R.winston3)}R.enable=u},4694:o=>{function R(y){var k=new Error("Cannot find module '"+y+"'");throw k.code="MODULE_NOT_FOUND",k}R.keys=()=>[],R.resolve=R,R.id=4694,o.exports=R},420:o=>{function R(y){var k=new Error("Cannot find module '"+y+"'");throw k.code="MODULE_NOT_FOUND",k}R.keys=()=>[],R.resolve=R,R.id=420,o.exports=R},4953:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(7424),S=y(7424);R.makePatchingRequire=S.makePatchingRequire;var T=function(u){return!0},f=function(){function u(){this.version=y(5236).i8,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return u.prototype.shouldPublish=function(a){var h=this.subscribers[a];return h?h.some(function(p){var d=p.filter;return!d||d(!1)}):!1},u.prototype.publish=function(a,h){if(!this.currentlyPublishing){var p=this.subscribers[a];if(p){var d={timestamp:Date.now(),data:h};this.currentlyPublishing=!0,p.forEach(function(m){var b=m.listener,v=m.filter;try{v&&v(!0)&&b(d)}catch(_){}}),this.currentlyPublishing=!1}}},u.prototype.subscribe=function(a,h,p){p===void 0&&(p=T),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:h,filter:p})},u.prototype.unsubscribe=function(a,h,p){p===void 0&&(p=T);var d=this.subscribers[a];if(d){for(var m=0;m<d.length;++m)if(d[m].listener===h&&d[m].filter===p)return d.splice(m,1),!0}return!1},u.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(h){return h},Object.getOwnPropertyNames(this.knownPatches).forEach(function(h){return delete a.knownPatches[h]})},u.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},u.prototype.addContextPreservation=function(a){var h=this.contextPreservationFunction;this.contextPreservationFunction=function(p){return a(h(p))}},u.prototype.registerMonkeyPatch=function(a,h){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(h)},u.prototype.getPatchesObject=function(){return this.knownPatches},u}();if(!global.diagnosticsSource){global.diagnosticsSource=new f;var c=y(2282);c.prototype.require=k.makePatchingRequire(global.diagnosticsSource.getPatchesObject())}R.channel=global.diagnosticsSource},7424:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(5622),S=y(6625),T=y(2282),f=Object.keys(process.binding("natives")),c=T.prototype.require;function u(a){var h={};return function(d){var m=c.apply(this,arguments);if(a[d]){var b=T._resolveFilename(d,this);if(h.hasOwnProperty(b))return h[b];var v=void 0;if(f.indexOf(d)<0)try{v=c.call(this,k.join(d,"package.json")).version}catch(I){return m}else v=process.version.substring(1);var _=v.indexOf("-");_>=0&&(v=v.substring(0,_));for(var E=m,N=0,D=a[d];N<D.length;N++){var L=D[N];S.satisfies(v,L.versionSpecifier)&&(E=L.patch(E,b))}return h[b]=E}return m}}R.makePatchingRequire=u},5236:o=>{"use strict";o.exports={i8:"0.2.0"}},9867:(o,R,y)=>{"use strict";var k=y(6372),S=k.wrap,T=k.unwrap,f="wrap@before";function c(d,m,b){var v=!!d[m]&&d.propertyIsEnumerable(m);Object.defineProperty(d,m,{configurable:!0,enumerable:v,writable:!0,value:b})}function u(d,m){for(var b=m.length,v=0;v<b;v++){var _=m[v],E=d[f];if(typeof E=="function")E(_);else if(Array.isArray(E))for(var N=E.length,D=0;D<N;D++)E[D](_)}}function a(d,m){var b;return b=d._events&&d._events[m],Array.isArray(b)||(b?b=[b]:b=[]),b}function h(d,m,b){var v=a(d,m),_=v.filter(function(E){return b.indexOf(E)===-1});_.length>0&&u(d,_)}function p(d,m){if(!!d){var b=d;if(typeof d=="function")b=m(d);else if(Array.isArray(d)){b=[];for(var v=0;v<d.length;v++)b[v]=m(d[v])}return b}}o.exports=function(m,b,v){if(!m||!m.on||!m.addListener||!m.removeListener||!m.emit)throw new Error("can only wrap real EEs");if(!b)throw new Error("must have function to run on listener addition");if(!v)throw new Error("must have function to wrap listeners when emitting");function _(N){return function(L,I){var q=a(this,L).slice();try{var A=N.call(this,L,I);return h(this,L,q),A}finally{this.on.__wrapped||S(this,"on",_),this.addListener.__wrapped||S(this,"addListener",_)}}}function E(N){return function(L){if(!this._events||!this._events[L])return N.apply(this,arguments);var I=this._events[L];function q(A){return function(){this._events[L]=I;try{return A.apply(this,arguments)}finally{I=this._events[L],this._events[L]=p(I,v)}}}S(this,"removeListener",q);try{return this._events[L]=p(I,v),N.apply(this,arguments)}finally{T(this,"removeListener"),this._events[L]=I}}}m[f]?typeof m[f]=="function"?c(m,f,[m[f],b]):Array.isArray(m[f])&&m[f].push(b):c(m,f,b),m.__wrapped||(S(m,"addListener",_),S(m,"on",_),S(m,"emit",E),c(m,"__unwrap",function(){T(m,"addListener"),T(m,"on"),T(m,"emit"),delete m[f],delete m.__wrapped}),c(m,"__wrapped",!0))}},4063:o=>{"use strict";o.exports=function R(y,k){if(y===k)return!0;if(y&&k&&typeof y=="object"&&typeof k=="object"){if(y.constructor!==k.constructor)return!1;var S,T,f;if(Array.isArray(y)){if(S=y.length,S!=k.length)return!1;for(T=S;T--!=0;)if(!R(y[T],k[T]))return!1;return!0}if(y.constructor===RegExp)return y.source===k.source&&y.flags===k.flags;if(y.valueOf!==Object.prototype.valueOf)return y.valueOf()===k.valueOf();if(y.toString!==Object.prototype.toString)return y.toString()===k.toString();if(f=Object.keys(y),S=f.length,S!==Object.keys(k).length)return!1;for(T=S;T--!=0;)if(!Object.prototype.hasOwnProperty.call(k,f[T]))return!1;for(T=S;T--!=0;){var c=f[T];if(!R(y[c],k[c]))return!1}return!0}return y!==y&&k!==k}},5035:o=>{"use strict";o.exports=function(R,y){y||(y={}),typeof y=="function"&&(y={cmp:y});var k=typeof y.cycles=="boolean"?y.cycles:!1,S=y.cmp&&function(f){return function(c){return function(u,a){var h={key:u,value:c[u]},p={key:a,value:c[a]};return f(h,p)}}}(y.cmp),T=[];return function f(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var u,a;if(Array.isArray(c)){for(a="[",u=0;u<c.length;u++)u&&(a+=","),a+=f(c[u])||"null";return a+"]"}if(c===null)return"null";if(T.indexOf(c)!==-1){if(k)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=T.push(c)-1,p=Object.keys(c).sort(S&&S(c));for(a="",u=0;u<p.length;u++){var d=p[u],m=f(c[d]);!m||(a&&(a+=","),a+=JSON.stringify(d)+":"+m)}return T.splice(h,1),"{"+a+"}"}}(R)}},6030:(o,R,y)=>{const{Readable:k}=y(2413),S=new WeakMap;async function*T(c){for(const u of c)"stream"in u?yield*u.stream():yield u}class f{constructor(u=[],a={type:""}){let h=0;const p=u.map(m=>{let b;return m instanceof Buffer?b=m:ArrayBuffer.isView(m)?b=Buffer.from(m.buffer,m.byteOffset,m.byteLength):m instanceof ArrayBuffer?b=Buffer.from(m):m instanceof f?b=m:b=Buffer.from(typeof m=="string"?m:String(m)),h+=b.length||b.size||0,b}),d=a.type===void 0?"":String(a.type).toLowerCase();S.set(this,{type:/[^\u0020-\u007E]/.test(d)?"":d,size:h,parts:p})}get size(){return S.get(this).size}get type(){return S.get(this).type}async text(){return Buffer.from(await this.arrayBuffer()).toString()}async arrayBuffer(){const u=new Uint8Array(this.size);let a=0;for await(const h of this.stream())u.set(h,a),a+=h.length;return u.buffer}stream(){return k.from(T(S.get(this).parts))}slice(u=0,a=this.size,h=""){const{size:p}=this;let d=u<0?Math.max(p+u,0):Math.min(u,p),m=a<0?Math.max(p+a,0):Math.min(a,p);const b=Math.max(m-d,0),v=S.get(this).parts.values(),_=[];let E=0;for(const D of v){const L=ArrayBuffer.isView(D)?D.byteLength:D.size;if(d&&L<=d)d-=L,m-=L;else{const I=D.slice(d,Math.min(L,m));if(_.push(I),E+=ArrayBuffer.isView(I)?I.byteLength:I.size,d=0,E>=b)break}}const N=new f([],{type:h});return Object.assign(S.get(N),{size:b,parts:_}),N}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](u){return typeof u=="object"&&typeof u.stream=="function"&&u.stream.length===0&&typeof u.constructor=="function"&&/^(Blob|File)$/.test(u[Symbol.toStringTag])}}Object.defineProperties(f.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),o.exports=f},2261:(o,R,y)=>{var k;o.exports=function(){if(!k)try{k=y(8104)("follow-redirects")}catch(S){k=function(){}}k.apply(null,arguments)}},938:(o,R,y)=>{var k=y(8835),S=k.URL,T=y(8605),f=y(7211),c=y(2413).Writable,u=y(2357),a=y(2261),h=Object.create(null);["abort","aborted","connect","error","socket","timeout"].forEach(function(I){h[I]=function(q,A,U){this._redirectable.emit(I,q,A,U)}});var p=L("ERR_FR_REDIRECTION_FAILURE",""),d=L("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),m=L("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),b=L("ERR_STREAM_WRITE_AFTER_END","write after end");function v(I,q){c.call(this),this._sanitizeOptions(I),this._options=I,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],q&&this.on("response",q);var A=this;this._onNativeResponse=function(U){A._processResponse(U)},this._performRequest()}v.prototype=Object.create(c.prototype),v.prototype.abort=function(){this._currentRequest.removeAllListeners(),this._currentRequest.on("error",E),this._currentRequest.abort(),this.emit("abort"),this.removeAllListeners()},v.prototype.write=function(I,q,A){if(this._ending)throw new b;if(!(typeof I=="string"||typeof I=="object"&&"length"in I))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof q=="function"&&(A=q,q=null),I.length===0){A&&A();return}this._requestBodyLength+I.length<=this._options.maxBodyLength?(this._requestBodyLength+=I.length,this._requestBodyBuffers.push({data:I,encoding:q}),this._currentRequest.write(I,q,A)):(this.emit("error",new m),this.abort())},v.prototype.end=function(I,q,A){if(typeof I=="function"?(A=I,I=q=null):typeof q=="function"&&(A=q,q=null),!I)this._ended=this._ending=!0,this._currentRequest.end(null,null,A);else{var U=this,O=this._currentRequest;this.write(I,q,function(){U._ended=!0,O.end(null,null,A)}),this._ending=!0}},v.prototype.setHeader=function(I,q){this._options.headers[I]=q,this._currentRequest.setHeader(I,q)},v.prototype.removeHeader=function(I){delete this._options.headers[I],this._currentRequest.removeHeader(I)},v.prototype.setTimeout=function(I,q){var A=this;q&&this.on("timeout",q);function U(){A._timeout&&clearTimeout(A._timeout),A._timeout=setTimeout(function(){A.emit("timeout"),O()},I)}function O(){clearTimeout(this._timeout),q&&A.removeListener("timeout",q),this.socket||A._currentRequest.removeListener("socket",U)}return this.socket?U():this._currentRequest.once("socket",U),this.once("response",O),this.once("error",O),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(I){v.prototype[I]=function(q,A){return this._currentRequest[I](q,A)}}),["aborted","connection","socket"].forEach(function(I){Object.defineProperty(v.prototype,I,{get:function(){return this._currentRequest[I]}})}),v.prototype._sanitizeOptions=function(I){if(I.headers||(I.headers={}),I.host&&(I.hostname||(I.hostname=I.host),delete I.host),!I.pathname&&I.path){var q=I.path.indexOf("?");q<0?I.pathname=I.path:(I.pathname=I.path.substring(0,q),I.search=I.path.substring(q))}},v.prototype._performRequest=function(){var I=this._options.protocol,q=this._options.nativeProtocols[I];if(!q){this.emit("error",new TypeError("Unsupported protocol "+I));return}if(this._options.agents){var A=I.substr(0,I.length-1);this._options.agent=this._options.agents[A]}var U=this._currentRequest=q.request(this._options,this._onNativeResponse);this._currentUrl=k.format(this._options),U._redirectable=this;for(var O in h)O&&U.on(O,h[O]);if(this._isRedirect){var F=0,x=this,H=this._requestBodyBuffers;(function B(z){if(U===x._currentRequest)if(z)x.emit("error",z);else if(F<H.length){var V=H[F++];U.finished||U.write(V.data,V.encoding,B)}else x._ended&&U.end()})()}},v.prototype._processResponse=function(I){var q=I.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:I.headers,statusCode:q});var A=I.headers.location;if(A&&this._options.followRedirects!==!1&&q>=300&&q<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",E),this._currentRequest.abort(),I.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new d);return}((q===301||q===302)&&this._options.method==="POST"||q===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],D(/^content-/i,this._options.headers));var U=D(/^host$/i,this._options.headers)||k.parse(this._currentUrl).hostname,O=k.resolve(this._currentUrl,A);a("redirecting to",O),this._isRedirect=!0;var F=k.parse(O);if(Object.assign(this._options,F),F.hostname!==U&&D(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var x={headers:I.headers};try{this._options.beforeRedirect.call(null,this._options,x)}catch(B){this.emit("error",B);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(B){var H=new p("Redirected request failed: "+B.message);H.cause=B,this.emit("error",H)}}else I.responseUrl=this._currentUrl,I.redirects=this._redirects,this.emit("response",I),this._requestBodyBuffers=[]};function _(I){var q={maxRedirects:21,maxBodyLength:10*1024*1024},A={};return Object.keys(I).forEach(function(U){var O=U+":",F=A[O]=I[U],x=q[U]=Object.create(F);function H(z,V,J){if(typeof z=="string"){var le=z;try{z=N(new S(le))}catch(oe){z=k.parse(le)}}else S&&z instanceof S?z=N(z):(J=V,V=z,z={protocol:O});return typeof V=="function"&&(J=V,V=null),V=Object.assign({maxRedirects:q.maxRedirects,maxBodyLength:q.maxBodyLength},z,V),V.nativeProtocols=A,u.equal(V.protocol,O,"protocol mismatch"),a("options",V),new v(V,J)}function B(z,V,J){var le=x.request(z,V,J);return le.end(),le}Object.defineProperties(x,{request:{value:H,configurable:!0,enumerable:!0,writable:!0},get:{value:B,configurable:!0,enumerable:!0,writable:!0}})}),q}function E(){}function N(I){var q={protocol:I.protocol,hostname:I.hostname.startsWith("[")?I.hostname.slice(1,-1):I.hostname,hash:I.hash,search:I.search,pathname:I.pathname,path:I.pathname+I.search,href:I.href};return I.port!==""&&(q.port=Number(I.port)),q}function D(I,q){var A;for(var U in q)I.test(U)&&(A=q[U],delete q[U]);return A}function L(I,q){function A(U){Error.captureStackTrace(this,this.constructor),this.message=U||q}return A.prototype=new Error,A.prototype.constructor=A,A.prototype.name="Error ["+I+"]",A.prototype.code=I,A}o.exports=_({http:T,https:f}),o.exports.wrap=_},9967:o=>{var R={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewThread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestFiles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"files"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerViewedState"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ResolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnresolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnresolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unresolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmarkFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:14561}};R.loc.source={body:`# /*---------------------------------------------------------------------------------------------
#  *  Copyright (c) Microsoft Corporation. All rights reserved.
#  *  Licensed under the MIT License. See License.txt in the project root for license information.
#  *--------------------------------------------------------------------------------------------*/

fragment Merged on MergedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	mergeRef {
		name
	}
	commit {
		oid
		commitUrl
	}
	url
}

fragment HeadRefDeleted on HeadRefDeletedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	headRefName
}

fragment Ref on Ref {
	name
	repository {
		owner {
			login
		}
		url
	}
	target {
		oid
	}
}

fragment Comment on IssueComment {
	id
	databaseId
	authorAssociation
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	url
	body
	bodyHTML
	updatedAt
	createdAt
	viewerCanUpdate
	viewerCanReact
	viewerCanDelete
}

fragment Commit on PullRequestCommit {
	id
	commit {
		author {
			user {
				login
				avatarUrl
				url
				email
			}
		}
		committer {
			avatarUrl
			name
		}
		oid
		message
		authoredDate
	}
	url
}

fragment AssignedEvent on AssignedEvent {
	actor {
		login
		avatarUrl
		url
	}
	user {
		login
		avatarUrl
		url
	}
}

fragment Review on PullRequestReview {
	id
	databaseId
	authorAssociation
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	state
	body
	bodyHTML
	submittedAt
	updatedAt
	createdAt
}

fragment Reactable on Reactable {
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
}

fragment ReviewThread on PullRequestReviewThread {
	id
	isResolved
	viewerCanResolve
	viewerCanUnresolve
	path
	diffSide
	line
	originalLine
	isOutdated
	comments(first: 100) {
		nodes {
			...ReviewComment
		}
	}
}

query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Merged
					...Comment
					...Review
					...Commit
					...AssignedEvent
					...HeadRefDeleted
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Comment
					...AssignedEvent
				}
			}
		}
	}
}

fragment ReviewComment on PullRequestReviewComment {
	id
	databaseId
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	path
	originalPosition
	body
	bodyHTML
	diffHunk
	position
	state
	pullRequestReview {
		databaseId
	}
	commit {
		oid
	}
	replyTo {
		databaseId
	}
	createdAt
	originalCommit {
		oid
	}
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
	viewerCanUpdate
	viewerCanDelete
}

query GetPendingReviewId($pullRequestId: ID!, $author: String!) {
	node(id: $pullRequestId) {
		... on PullRequest {
			reviews(first: 1, author: $author, states: [PENDING]) {
				nodes {
					id
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			reviewThreads(first: $first) {
				nodes {
					id
					isResolved
					viewerCanResolve
					viewerCanUnresolve
					path
					diffSide
					line
					originalLine
					isOutdated
					comments(first: 100) {
						nodes {
							...ReviewComment
						}
					}
				}
			}
		}
	}
}

query PullRequest($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			headRef {
				...Ref
			}
			headRefName
			headRefOid
			headRepository {
				owner {
					login
				}
				url
			}
			baseRef {
				...Ref
			}
			baseRefName
			baseRefOid
			baseRepository {
				owner {
					login
				}
				url
			}
			labels(first: 50) {
				nodes {
					name
				}
			}
			merged
			mergeable
			id
			databaseId
			isDraft
			milestone {
				title
				dueOn
				createdAt
				id
			}
			assignees(first: 10) {
				nodes {
					login
					name
					avatarUrl
					url
					email
				}
			}
			suggestedReviewers {
				isAuthor
				isCommenter
				reviewer {
					login
					avatarUrl
					name
					url
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestFiles($owner: String!, $name: String!, $number: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			files(first: 100, after: $after) {
				nodes {
					path
					viewerViewedState
				}
				pageInfo {
					hasNextPage
					endCursor
				}
			}
		}
	}
}

query Issue($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
		}
	}
}

query IssueWithComments($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
			comments(first: 50) {
				nodes {
					author {
						login
						url
						avatarUrl
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					body
					databaseId
				}
			}
		}
	}
}

query GetUser($login: String!) {
	user(login: $login) {
		login
		avatarUrl(size: 50)
		bio
		name
		company
		location
		contributionsCollection {
			commitContributionsByRepository(maxRepositories: 50) {
				contributions(first: 1) {
					nodes {
						occurredAt
					}
				}
				repository {
					nameWithOwner
				}
			}
		}
		url
	}
}

query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			mergeable
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestState($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			title
			number
			state
		}
	}
}

mutation AddComment($input: AddPullRequestReviewCommentInput!) {
	addPullRequestReviewComment(input: $input) {
		comment {
			...ReviewComment
		}
	}
}

mutation AddReviewThread($input: AddPullRequestReviewThreadInput!) {
	addPullRequestReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {
	updatePullRequestReviewComment(input: $input) {
		pullRequestReviewComment {
			...ReviewComment
		}
	}
}

mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {
	markPullRequestReadyForReview(input: $input) {
		pullRequest {
			isDraft
		}
	}
}

mutation StartReview($input: AddPullRequestReviewInput!) {
	addPullRequestReview(input: $input) {
		pullRequestReview {
			id
		}
	}
}

mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {
		pullRequestReview {
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
			...Review
		}
	}
}

mutation DeleteReview($input: DeletePullRequestReviewInput!) {
	deletePullRequestReview(input: $input) {
		pullRequestReview {
			databaseId
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation AddReaction($input: AddReactionInput!) {
	addReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation DeleteReaction($input: RemoveReactionInput!) {
	removeReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation UpdatePullRequest($input: UpdatePullRequestInput!) {
	updatePullRequest(input: $input) {
		pullRequest {
			body
			bodyHTML
			title
		}
	}
}

mutation AddIssueComment($input: AddCommentInput!) {
	addComment(input: $input) {
		commentEdge {
			node {
				...Comment
			}
		}
	}
}

mutation EditIssueComment($input: UpdateIssueCommentInput!) {
	updateIssueComment(input: $input) {
		issueComment {
			...Comment
		}
	}
}

query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		mentionableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		assignableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		issues(
			first: 100
			states: OPEN
			filterBy: { assignee: $assignee, milestone: null }
			orderBy: { direction: DESC, field: UPDATED_AT }
		) {
			edges {
				node {
					... on Issue {
						number
						url
						state
						body
						bodyHTML
						title
						assignees(first: 10) {
							nodes {
								login
								url
								email
							}
						}
						author {
							login
							url
							avatarUrl(size: 50)
							... on User {
								email
							}
							... on Organization {
								email
							}
						}
						createdAt
						updatedAt
						labels(first: 50) {
							nodes {
								name
								color
							}
						}
						id
						databaseId
						milestone {
							title
							dueOn
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query MaxIssue($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {
			edges {
				node {
					... on Issue {
						number
					}
				}
			}
		}
	}
}

query GetMilestones($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {
			nodes {
				dueOn
				title
				createdAt
				id
				issues(
					first: 100
					filterBy: { assignee: $assignee }
					orderBy: { direction: DESC, field: UPDATED_AT }
					states: OPEN
				) {
					edges {
						node {
							... on Issue {
								number
								url
								state
								body
								bodyHTML
								title
								assignees(first: 10) {
									nodes {
										avatarUrl
										email
										login
										url
									}
								}
								author {
									login
									url
									avatarUrl(size: 50)
									... on User {
										email
									}
									... on Organization {
										email
									}
								}
								createdAt
								updatedAt
								labels(first: 50) {
									nodes {
										name
										color
									}
								}
								id
								databaseId
								milestone {
									title
									dueOn
								}
							}
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query Issues($query: String!) {
	search(first: 100, type: ISSUE, query: $query) {
		issueCount
		pageInfo {
			hasNextPage
			endCursor
		}
		edges {
			node {
				... on Issue {
					number
					url
					state
					body
					bodyHTML
					title
					assignees(first: 10) {
						nodes {
							avatarUrl
							email
							login
							url
						}
					}
					author {
						login
						url
						avatarUrl(size: 50)
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					createdAt
					updatedAt
					labels(first: 50) {
						nodes {
							name
							color
						}
					}
					id
					databaseId
					milestone {
						title
						dueOn
						id
						createdAt
					}
					repository {
						name
						owner {
							login
						}
						url
					}
				}
			}
		}
	}
}

query GetViewerPermission($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		viewerPermission
	}
}

query GetRepositoryForkDetails($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		isFork
		parent {
			name
			owner
		}
	}
}

query GetChecks($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			commits(last: 1) {
				nodes {
					commit {
						statusCheckRollup {
							state
							contexts(first: 100) {
								nodes {
									... on StatusContext {
										id
										state
										targetUrl
										description
										context
										avatarUrl
									}
									... on CheckRun {
										id
										conclusion
										title
										detailsUrl
										name
										resourcePath
										checkSuite {
											app {
												logoUrl
												url
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

mutation ResolveReviewThread($input: ResolveReviewThreadInput!) {
	resolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation UnresolveReviewThread($input: UnresolveReviewThreadInput!) {
	unresolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation MarkFileAsViewed($input: MarkFileAsViewedInput!) {
	markFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}

mutation UnmarkFileAsViewed($input: UnmarkFileAsViewedInput!) {
	unmarkFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}`,name:"GraphQL request",locationOffset:{line:1,column:1}};var y={};function k(u){return u.filter(function(a){if(a.kind!=="FragmentDefinition")return!0;var h=a.name.value;return y[h]?!1:(y[h]=!0,!0)})}function S(u,a){if(u.kind==="FragmentSpread")a.add(u.name.value);else if(u.kind==="VariableDefinition"){var h=u.type;h.kind==="NamedType"&&a.add(h.name.value)}u.selectionSet&&u.selectionSet.selections.forEach(function(p){S(p,a)}),u.variableDefinitions&&u.variableDefinitions.forEach(function(p){S(p,a)}),u.definitions&&u.definitions.forEach(function(p){S(p,a)})}var T={};(function(){R.definitions.forEach(function(a){if(a.name){var h=new Set;S(a,h),T[a.name.value]=h}})})();function f(u,a){for(var h=0;h<u.definitions.length;h++){var p=u.definitions[h];if(p.name&&p.name.value==a)return p}}function c(u,a){var h={kind:u.kind,definitions:[f(u,a)]};u.hasOwnProperty("loc")&&(h.loc=u.loc);var p=T[a]||new Set,d=new Set,m=new Set;for(p.forEach(function(v){m.add(v)});m.size>0;){var b=m;m=new Set,b.forEach(function(v){if(!d.has(v)){d.add(v);var _=T[v]||new Set;_.forEach(function(E){m.add(E)})}})}return d.forEach(function(v){var _=f(u,v);_&&h.definitions.push(_)}),h}o.exports=R,o.exports.TimelineEvents=c(R,"TimelineEvents"),o.exports.IssueTimelineEvents=c(R,"IssueTimelineEvents"),o.exports.GetPendingReviewId=c(R,"GetPendingReviewId"),o.exports.PullRequestComments=c(R,"PullRequestComments"),o.exports.PullRequest=c(R,"PullRequest"),o.exports.PullRequestFiles=c(R,"PullRequestFiles"),o.exports.Issue=c(R,"Issue"),o.exports.IssueWithComments=c(R,"IssueWithComments"),o.exports.GetUser=c(R,"GetUser"),o.exports.PullRequestMergeability=c(R,"PullRequestMergeability"),o.exports.PullRequestState=c(R,"PullRequestState"),o.exports.AddComment=c(R,"AddComment"),o.exports.AddReviewThread=c(R,"AddReviewThread"),o.exports.EditComment=c(R,"EditComment"),o.exports.ReadyForReview=c(R,"ReadyForReview"),o.exports.StartReview=c(R,"StartReview"),o.exports.SubmitReview=c(R,"SubmitReview"),o.exports.DeleteReview=c(R,"DeleteReview"),o.exports.AddReaction=c(R,"AddReaction"),o.exports.DeleteReaction=c(R,"DeleteReaction"),o.exports.UpdatePullRequest=c(R,"UpdatePullRequest"),o.exports.AddIssueComment=c(R,"AddIssueComment"),o.exports.EditIssueComment=c(R,"EditIssueComment"),o.exports.GetMentionableUsers=c(R,"GetMentionableUsers"),o.exports.GetAssignableUsers=c(R,"GetAssignableUsers"),o.exports.IssuesWithoutMilestone=c(R,"IssuesWithoutMilestone"),o.exports.MaxIssue=c(R,"MaxIssue"),o.exports.GetMilestones=c(R,"GetMilestones"),o.exports.Issues=c(R,"Issues"),o.exports.GetViewerPermission=c(R,"GetViewerPermission"),o.exports.GetRepositoryForkDetails=c(R,"GetRepositoryForkDetails"),o.exports.GetChecks=c(R,"GetChecks"),o.exports.ResolveReviewThread=c(R,"ResolveReviewThread"),o.exports.UnresolveReviewThread=c(R,"UnresolveReviewThread"),o.exports.MarkFileAsViewed=c(R,"MarkFileAsViewed"),o.exports.UnmarkFileAsViewed=c(R,"UnmarkFileAsViewed")},972:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=f;var k=T(y(7706)),S=T(y(8554));function T(c){return c&&c.__esModule?c:{default:c}}function f(c){var u=c.prototype.toJSON;typeof u=="function"||(0,k.default)(0),c.prototype.inspect=u,S.default&&(c.prototype[S.default]=u)}},1868:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=u;var k=S(y(8554));function S(v){return v&&v.__esModule?v:{default:v}}function T(v){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(E){return typeof E}:T=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},T(v)}var f=10,c=2;function u(v){return a(v,[])}function a(v,_){switch(T(v)){case"string":return JSON.stringify(v);case"function":return v.name?"[function ".concat(v.name,"]"):"[function]";case"object":return v===null?"null":h(v,_);default:return String(v)}}function h(v,_){if(_.indexOf(v)!==-1)return"[Circular]";var E=[].concat(_,[v]),N=m(v);if(N!==void 0){var D=N.call(v);if(D!==v)return typeof D=="string"?D:a(D,E)}else if(Array.isArray(v))return d(v,E);return p(v,E)}function p(v,_){var E=Object.keys(v);if(E.length===0)return"{}";if(_.length>c)return"["+b(v)+"]";var N=E.map(function(D){var L=a(v[D],_);return D+": "+L});return"{ "+N.join(", ")+" }"}function d(v,_){if(v.length===0)return"[]";if(_.length>c)return"[Array]";for(var E=Math.min(f,v.length),N=v.length-E,D=[],L=0;L<E;++L)D.push(a(v[L],_));return N===1?D.push("... 1 more item"):N>1&&D.push("... ".concat(N," more items")),"["+D.join(", ")+"]"}function m(v){var _=v[String(k.default)];if(typeof _=="function")return _;if(typeof v.inspect=="function")return v.inspect}function b(v){var _=Object.prototype.toString.call(v).replace(/^\[object /,"").replace(/]$/,"");if(_==="Object"&&typeof v.constructor=="function"){var E=v.constructor.name;if(typeof E=="string"&&E!=="")return E}return _}},7706:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=y;function y(k,S){var T=Boolean(k);if(!T)throw new Error(S!=null?S:"Unexpected invariant triggered.")}},8554:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,k=y;R.default=k},1807:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.isNode=c,R.Token=R.Location=void 0;var k=S(y(972));function S(u){return u&&u.__esModule?u:{default:u}}var T=function(){function u(h,p,d){this.start=h.start,this.end=p.end,this.startToken=h,this.endToken=p,this.source=d}var a=u.prototype;return a.toJSON=function(){return{start:this.start,end:this.end}},u}();R.Location=T,(0,k.default)(T);var f=function(){function u(h,p,d,m,b,v,_){this.kind=h,this.start=p,this.end=d,this.line=m,this.column=b,this.value=_,this.prev=v,this.next=null}var a=u.prototype;return a.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},u}();R.Token=f,(0,k.default)(f);function c(u){return u!=null&&typeof u.kind=="string"}},849:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.dedentBlockStringValue=y,R.getBlockStringIndentation=S,R.printBlockString=T;function y(f){var c=f.split(/\r\n|[\n\r]/g),u=S(f);if(u!==0)for(var a=1;a<c.length;a++)c[a]=c[a].slice(u);for(var h=0;h<c.length&&k(c[h]);)++h;for(var p=c.length;p>h&&k(c[p-1]);)--p;return c.slice(h,p).join(`
`)}function k(f){for(var c=0;c<f.length;++c)if(f[c]!==" "&&f[c]!=="	")return!1;return!0}function S(f){for(var c,u=!0,a=!0,h=0,p=null,d=0;d<f.length;++d)switch(f.charCodeAt(d)){case 13:f.charCodeAt(d+1)===10&&++d;case 10:u=!1,a=!0,h=0;break;case 9:case 32:++h;break;default:a&&!u&&(p===null||h<p)&&(p=h),a=!1}return(c=p)!==null&&c!==void 0?c:0}function T(f){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=f.indexOf(`
`)===-1,h=f[0]===" "||f[0]==="	",p=f[f.length-1]==='"',d=f[f.length-1]==="\\",m=!a||p||d||u,b="";return m&&!(a&&h)&&(b+=`
`+c),b+=c?f.replace(/\n/g,`
`+c):f,m&&(b+=`
`),'"""'+b.replace(/"""/g,'\\"""')+'"""'}},3033:(o,R,y)=>{"use strict";var k;k={value:!0},R.S=f;var S=y(285),T=y(849);function f(_){return(0,S.visit)(_,{leave:u})}var c=80,u={Name:function(E){return E.value},Variable:function(E){return"$"+E.name},Document:function(E){return h(E.definitions,`

`)+`
`},OperationDefinition:function(E){var N=E.operation,D=E.name,L=d("(",h(E.variableDefinitions,", "),")"),I=h(E.directives," "),q=E.selectionSet;return!D&&!I&&!L&&N==="query"?q:h([N,h([D,L]),I,q]," ")},VariableDefinition:function(E){var N=E.variable,D=E.type,L=E.defaultValue,I=E.directives;return N+": "+D+d(" = ",L)+d(" ",h(I," "))},SelectionSet:function(E){var N=E.selections;return p(N)},Field:function(E){var N=E.alias,D=E.name,L=E.arguments,I=E.directives,q=E.selectionSet,A=d("",N,": ")+D,U=A+d("(",h(L,", "),")");return U.length>c&&(U=A+d(`(
`,m(h(L,`
`)),`
)`)),h([U,h(I," "),q]," ")},Argument:function(E){var N=E.name,D=E.value;return N+": "+D},FragmentSpread:function(E){var N=E.name,D=E.directives;return"..."+N+d(" ",h(D," "))},InlineFragment:function(E){var N=E.typeCondition,D=E.directives,L=E.selectionSet;return h(["...",d("on ",N),h(D," "),L]," ")},FragmentDefinition:function(E){var N=E.name,D=E.typeCondition,L=E.variableDefinitions,I=E.directives,q=E.selectionSet;return"fragment ".concat(N).concat(d("(",h(L,", "),")")," ")+"on ".concat(D," ").concat(d("",h(I," ")," "))+q},IntValue:function(E){var N=E.value;return N},FloatValue:function(E){var N=E.value;return N},StringValue:function(E,N){var D=E.value,L=E.block;return L?(0,T.printBlockString)(D,N==="description"?"":"  "):JSON.stringify(D)},BooleanValue:function(E){var N=E.value;return N?"true":"false"},NullValue:function(){return"null"},EnumValue:function(E){var N=E.value;return N},ListValue:function(E){var N=E.values;return"["+h(N,", ")+"]"},ObjectValue:function(E){var N=E.fields;return"{"+h(N,", ")+"}"},ObjectField:function(E){var N=E.name,D=E.value;return N+": "+D},Directive:function(E){var N=E.name,D=E.arguments;return"@"+N+d("(",h(D,", "),")")},NamedType:function(E){var N=E.name;return N},ListType:function(E){var N=E.type;return"["+N+"]"},NonNullType:function(E){var N=E.type;return N+"!"},SchemaDefinition:a(function(_){var E=_.directives,N=_.operationTypes;return h(["schema",h(E," "),p(N)]," ")}),OperationTypeDefinition:function(E){var N=E.operation,D=E.type;return N+": "+D},ScalarTypeDefinition:a(function(_){var E=_.name,N=_.directives;return h(["scalar",E,h(N," ")]," ")}),ObjectTypeDefinition:a(function(_){var E=_.name,N=_.interfaces,D=_.directives,L=_.fields;return h(["type",E,d("implements ",h(N," & ")),h(D," "),p(L)]," ")}),FieldDefinition:a(function(_){var E=_.name,N=_.arguments,D=_.type,L=_.directives;return E+(v(N)?d(`(
`,m(h(N,`
`)),`
)`):d("(",h(N,", "),")"))+": "+D+d(" ",h(L," "))}),InputValueDefinition:a(function(_){var E=_.name,N=_.type,D=_.defaultValue,L=_.directives;return h([E+": "+N,d("= ",D),h(L," ")]," ")}),InterfaceTypeDefinition:a(function(_){var E=_.name,N=_.interfaces,D=_.directives,L=_.fields;return h(["interface",E,d("implements ",h(N," & ")),h(D," "),p(L)]," ")}),UnionTypeDefinition:a(function(_){var E=_.name,N=_.directives,D=_.types;return h(["union",E,h(N," "),D&&D.length!==0?"= "+h(D," | "):""]," ")}),EnumTypeDefinition:a(function(_){var E=_.name,N=_.directives,D=_.values;return h(["enum",E,h(N," "),p(D)]," ")}),EnumValueDefinition:a(function(_){var E=_.name,N=_.directives;return h([E,h(N," ")]," ")}),InputObjectTypeDefinition:a(function(_){var E=_.name,N=_.directives,D=_.fields;return h(["input",E,h(N," "),p(D)]," ")}),DirectiveDefinition:a(function(_){var E=_.name,N=_.arguments,D=_.repeatable,L=_.locations;return"directive @"+E+(v(N)?d(`(
`,m(h(N,`
`)),`
)`):d("(",h(N,", "),")"))+(D?" repeatable":"")+" on "+h(L," | ")}),SchemaExtension:function(E){var N=E.directives,D=E.operationTypes;return h(["extend schema",h(N," "),p(D)]," ")},ScalarTypeExtension:function(E){var N=E.name,D=E.directives;return h(["extend scalar",N,h(D," ")]," ")},ObjectTypeExtension:function(E){var N=E.name,D=E.interfaces,L=E.directives,I=E.fields;return h(["extend type",N,d("implements ",h(D," & ")),h(L," "),p(I)]," ")},InterfaceTypeExtension:function(E){var N=E.name,D=E.interfaces,L=E.directives,I=E.fields;return h(["extend interface",N,d("implements ",h(D," & ")),h(L," "),p(I)]," ")},UnionTypeExtension:function(E){var N=E.name,D=E.directives,L=E.types;return h(["extend union",N,h(D," "),L&&L.length!==0?"= "+h(L," | "):""]," ")},EnumTypeExtension:function(E){var N=E.name,D=E.directives,L=E.values;return h(["extend enum",N,h(D," "),p(L)]," ")},InputObjectTypeExtension:function(E){var N=E.name,D=E.directives,L=E.fields;return h(["extend input",N,h(D," "),p(L)]," ")}};function a(_){return function(E){return h([E.description,_(E)],`
`)}}function h(_){var E,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(E=_==null?void 0:_.filter(function(D){return D}).join(N))!==null&&E!==void 0?E:""}function p(_){return d(`{
`,m(h(_,`
`)),`
}`)}function d(_,E){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return E!=null&&E!==""?_+E+N:""}function m(_){return d("  ",_.replace(/\n/g,`
  `))}function b(_){return _.indexOf(`
`)!==-1}function v(_){return _!=null&&_.some(b)}},285:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.visit=u,R.visitInParallel=a,R.getVisitFn=h,R.BREAK=R.QueryDocumentKeys=void 0;var k=T(y(1868)),S=y(1807);function T(p){return p&&p.__esModule?p:{default:p}}var f={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};R.QueryDocumentKeys=f;var c=Object.freeze({});R.BREAK=c;function u(p,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f,b=void 0,v=Array.isArray(p),_=[p],E=-1,N=[],D=void 0,L=void 0,I=void 0,q=[],A=[],U=p;do{E++;var O=E===_.length,F=O&&N.length!==0;if(O){if(L=A.length===0?void 0:q[q.length-1],D=I,I=A.pop(),F){if(v)D=D.slice();else{for(var x={},H=0,B=Object.keys(D);H<B.length;H++){var z=B[H];x[z]=D[z]}D=x}for(var V=0,J=0;J<N.length;J++){var le=N[J][0],oe=N[J][1];v&&(le-=V),v&&oe===null?(D.splice(le,1),V++):D[le]=oe}}E=b.index,_=b.keys,N=b.edits,v=b.inArray,b=b.prev}else{if(L=I?v?E:_[E]:void 0,D=I?I[L]:U,D==null)continue;I&&q.push(L)}var we=void 0;if(!Array.isArray(D)){if(!(0,S.isNode)(D))throw new Error("Invalid AST Node: ".concat((0,k.default)(D),"."));var Z=h(d,D.kind,O);if(Z){if(we=Z.call(d,D,L,I,q,A),we===c)break;if(we===!1){if(!O){q.pop();continue}}else if(we!==void 0&&(N.push([L,we]),!O))if((0,S.isNode)(we))D=we;else{q.pop();continue}}}if(we===void 0&&F&&N.push([L,D]),O)q.pop();else{var ne;b={inArray:v,index:E,keys:_,edits:N,prev:b},v=Array.isArray(D),_=v?D:(ne=m[D.kind])!==null&&ne!==void 0?ne:[],E=-1,N=[],I&&A.push(I),I=D}}while(b!==void 0);return N.length!==0&&(U=N[N.length-1][1]),U}function a(p){var d=new Array(p.length);return{enter:function(b){for(var v=0;v<p.length;v++)if(d[v]==null){var _=h(p[v],b.kind,!1);if(_){var E=_.apply(p[v],arguments);if(E===!1)d[v]=b;else if(E===c)d[v]=c;else if(E!==void 0)return E}}},leave:function(b){for(var v=0;v<p.length;v++)if(d[v]==null){var _=h(p[v],b.kind,!0);if(_){var E=_.apply(p[v],arguments);if(E===c)d[v]=c;else if(E!==void 0&&E!==!1)return E}}else d[v]===b&&(d[v]=null)}}}function h(p,d,m){var b=p[d];if(b){if(!m&&typeof b=="function")return b;var v=m?b.leave:b.enter;if(typeof v=="function")return v}else{var _=m?p.leave:p.enter;if(_){if(typeof _=="function")return _;var E=_[d];if(typeof E=="function")return E}}}},9593:(o,R,y)=>{"use strict";const k=y(4411),S=Symbol("max"),T=Symbol("length"),f=Symbol("lengthCalculator"),c=Symbol("allowStale"),u=Symbol("maxAge"),a=Symbol("dispose"),h=Symbol("noDisposeOnSet"),p=Symbol("lruList"),d=Symbol("cache"),m=Symbol("updateAgeOnGet"),b=()=>1;class v{constructor(A){if(typeof A=="number"&&(A={max:A}),A||(A={}),A.max&&(typeof A.max!="number"||A.max<0))throw new TypeError("max must be a non-negative number");const U=this[S]=A.max||Infinity,O=A.length||b;if(this[f]=typeof O!="function"?b:O,this[c]=A.stale||!1,A.maxAge&&typeof A.maxAge!="number")throw new TypeError("maxAge must be a number");this[u]=A.maxAge||0,this[a]=A.dispose,this[h]=A.noDisposeOnSet||!1,this[m]=A.updateAgeOnGet||!1,this.reset()}set max(A){if(typeof A!="number"||A<0)throw new TypeError("max must be a non-negative number");this[S]=A||Infinity,N(this)}get max(){return this[S]}set allowStale(A){this[c]=!!A}get allowStale(){return this[c]}set maxAge(A){if(typeof A!="number")throw new TypeError("maxAge must be a non-negative number");this[u]=A,N(this)}get maxAge(){return this[u]}set lengthCalculator(A){typeof A!="function"&&(A=b),A!==this[f]&&(this[f]=A,this[T]=0,this[p].forEach(U=>{U.length=this[f](U.value,U.key),this[T]+=U.length})),N(this)}get lengthCalculator(){return this[f]}get length(){return this[T]}get itemCount(){return this[p].length}rforEach(A,U){U=U||this;for(let O=this[p].tail;O!==null;){const F=O.prev;I(this,A,O,U),O=F}}forEach(A,U){U=U||this;for(let O=this[p].head;O!==null;){const F=O.next;I(this,A,O,U),O=F}}keys(){return this[p].toArray().map(A=>A.key)}values(){return this[p].toArray().map(A=>A.value)}reset(){this[a]&&this[p]&&this[p].length&&this[p].forEach(A=>this[a](A.key,A.value)),this[d]=new Map,this[p]=new k,this[T]=0}dump(){return this[p].map(A=>E(this,A)?!1:{k:A.key,v:A.value,e:A.now+(A.maxAge||0)}).toArray().filter(A=>A)}dumpLru(){return this[p]}set(A,U,O){if(O=O||this[u],O&&typeof O!="number")throw new TypeError("maxAge must be a number");const F=O?Date.now():0,x=this[f](U,A);if(this[d].has(A)){if(x>this[S])return D(this,this[d].get(A)),!1;const z=this[d].get(A).value;return this[a]&&(this[h]||this[a](A,z.value)),z.now=F,z.maxAge=O,z.value=U,this[T]+=x-z.length,z.length=x,this.get(A),N(this),!0}const H=new L(A,U,x,F,O);return H.length>this[S]?(this[a]&&this[a](A,U),!1):(this[T]+=H.length,this[p].unshift(H),this[d].set(A,this[p].head),N(this),!0)}has(A){if(!this[d].has(A))return!1;const U=this[d].get(A).value;return!E(this,U)}get(A){return _(this,A,!0)}peek(A){return _(this,A,!1)}pop(){const A=this[p].tail;return A?(D(this,A),A.value):null}del(A){D(this,this[d].get(A))}load(A){this.reset();const U=Date.now();for(let O=A.length-1;O>=0;O--){const F=A[O],x=F.e||0;if(x===0)this.set(F.k,F.v);else{const H=x-U;H>0&&this.set(F.k,F.v,H)}}}prune(){this[d].forEach((A,U)=>_(this,U,!1))}}const _=(q,A,U)=>{const O=q[d].get(A);if(O){const F=O.value;if(E(q,F)){if(D(q,O),!q[c])return}else U&&(q[m]&&(O.value.now=Date.now()),q[p].unshiftNode(O));return F.value}},E=(q,A)=>{if(!A||!A.maxAge&&!q[u])return!1;const U=Date.now()-A.now;return A.maxAge?U>A.maxAge:q[u]&&U>q[u]},N=q=>{if(q[T]>q[S])for(let A=q[p].tail;q[T]>q[S]&&A!==null;){const U=A.prev;D(q,A),A=U}},D=(q,A)=>{if(A){const U=A.value;q[a]&&q[a](U.key,U.value),q[T]-=U.length,q[d].delete(U.key),q[p].removeNode(A)}};class L{constructor(A,U,O,F,x){this.key=A,this.value=U,this.length=O,this.now=F,this.maxAge=x||0}}const I=(q,A,U,O)=>{let F=U.value;E(q,F)&&(D(q,U),q[c]||(F=void 0)),F&&A.call(O,F.value,F.key,q)};o.exports=v},7468:(o,R,y)=>{const k=y(9930),{defaults:S}=y(8644),{inline:T}=y(9709),{findClosingBracket:f,escape:c}=y(621);o.exports=class li{constructor(a,h){if(this.options=h||S,this.links=a,this.rules=T.normal,this.options.renderer=this.options.renderer||new k,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=T.pedantic:this.options.gfm&&(this.options.breaks?this.rules=T.breaks:this.rules=T.gfm)}static get rules(){return T}static output(a,h,p){return new li(h,p).output(a)}output(a){let h="",p,d,m,b,v,_;for(;a;){if(v=this.rules.escape.exec(a)){a=a.substring(v[0].length),h+=c(v[1]);continue}if(v=this.rules.tag.exec(a)){!this.inLink&&/^<a /i.test(v[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(v[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(v[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(v[0])&&(this.inRawBlock=!1),a=a.substring(v[0].length),h+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(v[0]):c(v[0]):v[0]);continue}if(v=this.rules.link.exec(a)){const E=f(v[2],"()");if(E>-1){const D=(v[0].indexOf("!")===0?5:4)+v[1].length+E;v[2]=v[2].substring(0,E),v[0]=v[0].substring(0,D).trim(),v[3]=""}a=a.substring(v[0].length),this.inLink=!0,m=v[2],this.options.pedantic?(p=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(m),p?(m=p[1],b=p[3]):b=""):b=v[3]?v[3].slice(1,-1):"",m=m.trim().replace(/^<([\s\S]*)>$/,"$1"),h+=this.outputLink(v,{href:li.escapes(m),title:li.escapes(b)}),this.inLink=!1;continue}if((v=this.rules.reflink.exec(a))||(v=this.rules.nolink.exec(a))){if(a=a.substring(v[0].length),p=(v[2]||v[1]).replace(/\s+/g," "),p=this.links[p.toLowerCase()],!p||!p.href){h+=v[0].charAt(0),a=v[0].substring(1)+a;continue}this.inLink=!0,h+=this.outputLink(v,p),this.inLink=!1;continue}if(v=this.rules.strong.exec(a)){a=a.substring(v[0].length),h+=this.renderer.strong(this.output(v[4]||v[3]||v[2]||v[1]));continue}if(v=this.rules.em.exec(a)){a=a.substring(v[0].length),h+=this.renderer.em(this.output(v[6]||v[5]||v[4]||v[3]||v[2]||v[1]));continue}if(v=this.rules.code.exec(a)){a=a.substring(v[0].length),h+=this.renderer.codespan(c(v[2].trim(),!0));continue}if(v=this.rules.br.exec(a)){a=a.substring(v[0].length),h+=this.renderer.br();continue}if(v=this.rules.del.exec(a)){a=a.substring(v[0].length),h+=this.renderer.del(this.output(v[1]));continue}if(v=this.rules.autolink.exec(a)){a=a.substring(v[0].length),v[2]==="@"?(d=c(this.mangle(v[1])),m="mailto:"+d):(d=c(v[1]),m=d),h+=this.renderer.link(m,null,d);continue}if(!this.inLink&&(v=this.rules.url.exec(a))){if(v[2]==="@")d=c(v[0]),m="mailto:"+d;else{do _=v[0],v[0]=this.rules._backpedal.exec(v[0])[0];while(_!==v[0]);d=c(v[0]),v[1]==="www."?m="http://"+d:m=d}a=a.substring(v[0].length),h+=this.renderer.link(m,null,d);continue}if(v=this.rules.text.exec(a)){a=a.substring(v[0].length),this.inRawBlock?h+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(v[0]):c(v[0]):v[0]):h+=this.renderer.text(c(this.smartypants(v[0])));continue}if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0))}return h}static escapes(a){return a&&a.replace(li.rules._escapes,"$1")}outputLink(a,h){const p=h.href,d=h.title?c(h.title):null;return a[0].charAt(0)!=="!"?this.renderer.link(p,d,this.output(a[1])):this.renderer.image(p,d,c(a[1]))}smartypants(a){return this.options.smartypants?a.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):a}mangle(a){if(!this.options.mangle)return a;const h=a.length;let p="",d=0,m;for(;d<h;d++)m=a.charCodeAt(d),Math.random()>.5&&(m="x"+m.toString(16)),p+="&#"+m+";";return p}}},1092:(o,R,y)=>{const{defaults:k}=y(8644),{block:S}=y(9709),{rtrim:T,splitCells:f,escape:c}=y(621);o.exports=class oc{constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||k,this.rules=S.normal,this.options.pedantic?this.rules=S.pedantic:this.options.gfm&&(this.rules=S.gfm)}static get rules(){return S}static lex(a,h){return new oc(h).lex(a)}lex(a){return a=a.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(a,!0)}token(a,h){a=a.replace(/^ +$/gm,"");let p,d,m,b,v,_,E,N,D,L,I,q,A,U,O,F;for(;a;){if((m=this.rules.newline.exec(a))&&(a=a.substring(m[0].length),m[0].length>1&&this.tokens.push({type:"space"})),m=this.rules.code.exec(a)){const x=this.tokens[this.tokens.length-1];a=a.substring(m[0].length),x&&x.type==="paragraph"?x.text+=`
`+m[0].trimRight():(m=m[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?m:T(m,`
`)}));continue}if(m=this.rules.fences.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"code",lang:m[2]?m[2].trim():m[2],text:m[3]||""});continue}if(m=this.rules.heading.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"heading",depth:m[1].length,text:m[2]});continue}if((m=this.rules.nptable.exec(a))&&(_={type:"table",header:f(m[1].replace(/^ *| *\| *$/g,"")),align:m[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:m[3]?m[3].replace(/\n$/,"").split(`
`):[]},_.header.length===_.align.length)){for(a=a.substring(m[0].length),I=0;I<_.align.length;I++)/^ *-+: *$/.test(_.align[I])?_.align[I]="right":/^ *:-+: *$/.test(_.align[I])?_.align[I]="center":/^ *:-+ *$/.test(_.align[I])?_.align[I]="left":_.align[I]=null;for(I=0;I<_.cells.length;I++)_.cells[I]=f(_.cells[I],_.header.length);this.tokens.push(_);continue}if(m=this.rules.hr.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"hr"});continue}if(m=this.rules.blockquote.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"blockquote_start"}),m=m[0].replace(/^ *> ?/gm,""),this.token(m,h),this.tokens.push({type:"blockquote_end"});continue}if(m=this.rules.list.exec(a)){for(a=a.substring(m[0].length),b=m[2],U=b.length>1,E={type:"list_start",ordered:U,start:U?+b:"",loose:!1},this.tokens.push(E),m=m[0].match(this.rules.item),N=[],p=!1,A=m.length,I=0;I<A;I++)_=m[I],L=_.length,_=_.replace(/^ *([*+-]|\d+\.) */,""),~_.indexOf(`
 `)&&(L-=_.length,_=this.options.pedantic?_.replace(/^ {1,4}/gm,""):_.replace(new RegExp("^ {1,"+L+"}","gm"),"")),I!==A-1&&(v=S.bullet.exec(m[I+1])[0],(b.length>1?v.length===1:v.length>1||this.options.smartLists&&v!==b)&&(a=m.slice(I+1).join(`
`)+a,I=A-1)),d=p||/\n\n(?!\s*$)/.test(_),I!==A-1&&(p=_.charAt(_.length-1)===`
`,d||(d=p)),d&&(E.loose=!0),O=/^\[[ xX]\] /.test(_),F=void 0,O&&(F=_[1]!==" ",_=_.replace(/^\[[ xX]\] +/,"")),D={type:"list_item_start",task:O,checked:F,loose:d},N.push(D),this.tokens.push(D),this.token(_,!1),this.tokens.push({type:"list_item_end"});if(E.loose)for(A=N.length,I=0;I<A;I++)N[I].loose=!0;this.tokens.push({type:"list_end"});continue}if(m=this.rules.html.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(m[1]==="pre"||m[1]==="script"||m[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(m[0]):c(m[0]):m[0]});continue}if(h&&(m=this.rules.def.exec(a))){a=a.substring(m[0].length),m[3]&&(m[3]=m[3].substring(1,m[3].length-1)),q=m[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[q]||(this.tokens.links[q]={href:m[2],title:m[3]});continue}if((m=this.rules.table.exec(a))&&(_={type:"table",header:f(m[1].replace(/^ *| *\| *$/g,"")),align:m[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:m[3]?m[3].replace(/\n$/,"").split(`
`):[]},_.header.length===_.align.length)){for(a=a.substring(m[0].length),I=0;I<_.align.length;I++)/^ *-+: *$/.test(_.align[I])?_.align[I]="right":/^ *:-+: *$/.test(_.align[I])?_.align[I]="center":/^ *:-+ *$/.test(_.align[I])?_.align[I]="left":_.align[I]=null;for(I=0;I<_.cells.length;I++)_.cells[I]=f(_.cells[I].replace(/^ *\| *| *\| *$/g,""),_.header.length);this.tokens.push(_);continue}if(m=this.rules.lheading.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"heading",depth:m[2].charAt(0)==="="?1:2,text:m[1]});continue}if(h&&(m=this.rules.paragraph.exec(a))){a=a.substring(m[0].length),this.tokens.push({type:"paragraph",text:m[1].charAt(m[1].length-1)===`
`?m[1].slice(0,-1):m[1]});continue}if(m=this.rules.text.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"text",text:m[0]});continue}if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0))}return this.tokens}}},9170:(o,R,y)=>{const k=y(9930),S=y(1846),T=y(7468),f=y(1477),{defaults:c}=y(8644),{merge:u,unescape:a}=y(621);o.exports=class uc{constructor(p){this.tokens=[],this.token=null,this.options=p||c,this.options.renderer=this.options.renderer||new k,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new S}static parse(p,d){return new uc(d).parse(p)}parse(p){this.inline=new T(p.links,this.options),this.inlineText=new T(p.links,u({},this.options,{renderer:new f})),this.tokens=p.reverse();let d="";for(;this.next();)d+=this.tok();return d}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let p=this.token.text;for(;this.peek().type==="text";)p+=`
`+this.next().text;return this.inline.output(p)}tok(){let p="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,a(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let d="",m,b,v,_;for(v="",m=0;m<this.token.header.length;m++)v+=this.renderer.tablecell(this.inline.output(this.token.header[m]),{header:!0,align:this.token.align[m]});for(d+=this.renderer.tablerow(v),m=0;m<this.token.cells.length;m++){for(b=this.token.cells[m],v="",_=0;_<b.length;_++)v+=this.renderer.tablecell(this.inline.output(b[_]),{header:!1,align:this.token.align[_]});p+=this.renderer.tablerow(v)}return this.renderer.table(d,p)}case"blockquote_start":{for(p="";this.next().type!=="blockquote_end";)p+=this.tok();return this.renderer.blockquote(p)}case"list_start":{p="";const d=this.token.ordered,m=this.token.start;for(;this.next().type!=="list_end";)p+=this.tok();return this.renderer.list(p,d,m)}case"list_item_start":{p="";const d=this.token.loose,m=this.token.checked,b=this.token.task;if(this.token.task)if(d)if(this.peek().type==="text"){const v=this.peek();v.text=this.renderer.checkbox(m)+" "+v.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(m)});else p+=this.renderer.checkbox(m);for(;this.next().type!=="list_item_end";)p+=!d&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(p,b,m)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const d='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(d);else throw new Error(d)}}}}},9930:(o,R,y)=>{const{defaults:k}=y(8644),{cleanUrl:S,escape:T}=y(621);o.exports=class{constructor(c){this.options=c||k}code(c,u,a){const h=(u||"").match(/\S*/)[0];if(this.options.highlight){const p=this.options.highlight(c,h);p!=null&&p!==c&&(a=!0,c=p)}return h?'<pre><code class="'+this.options.langPrefix+T(h,!0)+'">'+(a?c:T(c,!0))+`</code></pre>
`:"<pre><code>"+(a?c:T(c,!0))+"</code></pre>"}blockquote(c){return`<blockquote>
`+c+`</blockquote>
`}html(c){return c}heading(c,u,a,h){return this.options.headerIds?"<h"+u+' id="'+this.options.headerPrefix+h.slug(a)+'">'+c+"</h"+u+`>
`:"<h"+u+">"+c+"</h"+u+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(c,u,a){const h=u?"ol":"ul",p=u&&a!==1?' start="'+a+'"':"";return"<"+h+p+`>
`+c+"</"+h+`>
`}listitem(c){return"<li>"+c+`</li>
`}checkbox(c){return"<input "+(c?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(c){return"<p>"+c+`</p>
`}table(c,u){return u&&(u="<tbody>"+u+"</tbody>"),`<table>
<thead>
`+c+`</thead>
`+u+`</table>
`}tablerow(c){return`<tr>
`+c+`</tr>
`}tablecell(c,u){const a=u.header?"th":"td";return(u.align?"<"+a+' align="'+u.align+'">':"<"+a+">")+c+"</"+a+`>
`}strong(c){return"<strong>"+c+"</strong>"}em(c){return"<em>"+c+"</em>"}codespan(c){return"<code>"+c+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(c){return"<del>"+c+"</del>"}link(c,u,a){if(c=S(this.options.sanitize,this.options.baseUrl,c),c===null)return a;let h='<a href="'+T(c)+'"';return u&&(h+=' title="'+u+'"'),h+=">"+a+"</a>",h}image(c,u,a){if(c=S(this.options.sanitize,this.options.baseUrl,c),c===null)return a;let h='<img src="'+c+'" alt="'+a+'"';return u&&(h+=' title="'+u+'"'),h+=this.options.xhtml?"/>":">",h}text(c){return c}}},1846:o=>{o.exports=class{constructor(){this.seen={}}slug(y){let k=y.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(k)){const S=k;do this.seen[S]++,k=S+"-"+this.seen[S];while(this.seen.hasOwnProperty(k))}return this.seen[k]=0,k}}},1477:o=>{o.exports=class{strong(y){return y}em(y){return y}codespan(y){return y}del(y){return y}html(y){return y}text(y){return y}link(y,k,S){return""+S}image(y,k,S){return""+S}br(){return""}}},8644:o=>{function R(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function y(k){o.exports.defaults=k}o.exports={defaults:R(),getDefaults:R,changeDefaults:y}},621:o=>{const R=/[&<>"']/,y=/[&<>"']/g,k=/[<>"']|&(?!#?\w+;)/,S=/[<>"']|&(?!#?\w+;)/g,T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f=F=>T[F];function c(F,x){if(x){if(R.test(F))return F.replace(y,f)}else if(k.test(F))return F.replace(S,f);return F}const u=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function a(F){return F.replace(u,(x,H)=>(H=H.toLowerCase(),H==="colon"?":":H.charAt(0)==="#"?H.charAt(1)==="x"?String.fromCharCode(parseInt(H.substring(2),16)):String.fromCharCode(+H.substring(1)):""))}const h=/(^|[^\[])\^/g;function p(F,x){F=F.source||F,x=x||"";const H={replace:(B,z)=>(z=z.source||z,z=z.replace(h,"$1"),F=F.replace(B,z),H),getRegex:()=>new RegExp(F,x)};return H}const d=/[^\w:]/g,m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function b(F,x,H){if(F){let B;try{B=decodeURIComponent(a(H)).replace(d,"").toLowerCase()}catch(z){return null}if(B.indexOf("javascript:")===0||B.indexOf("vbscript:")===0||B.indexOf("data:")===0)return null}x&&!m.test(H)&&(H=D(x,H));try{H=encodeURI(H).replace(/%25/g,"%")}catch(B){return null}return H}const v={},_=/^[^:]+:\/*[^/]*$/,E=/^([^:]+:)[\s\S]*$/,N=/^([^:]+:\/*[^/]*)[\s\S]*$/;function D(F,x){v[" "+F]||(_.test(F)?v[" "+F]=F+"/":v[" "+F]=A(F,"/",!0)),F=v[" "+F];const H=F.indexOf(":")===-1;return x.substring(0,2)==="//"?H?x:F.replace(E,"$1")+x:x.charAt(0)==="/"?H?x:F.replace(N,"$1")+x:F+x}const L={exec:function(){}};function I(F){let x=1,H,B;for(;x<arguments.length;x++){H=arguments[x];for(B in H)Object.prototype.hasOwnProperty.call(H,B)&&(F[B]=H[B])}return F}function q(F,x){const H=F.replace(/\|/g,(V,J,le)=>{let oe=!1,we=J;for(;--we>=0&&le[we]==="\\";)oe=!oe;return oe?"|":" |"}),B=H.split(/ \|/);let z=0;if(B.length>x)B.splice(x);else for(;B.length<x;)B.push("");for(;z<B.length;z++)B[z]=B[z].trim().replace(/\\\|/g,"|");return B}function A(F,x,H){const B=F.length;if(B===0)return"";let z=0;for(;z<B;){const V=F.charAt(B-z-1);if(V===x&&!H)z++;else if(V!==x&&H)z++;else break}return F.substr(0,B-z)}function U(F,x){if(F.indexOf(x[1])===-1)return-1;const H=F.length;let B=0,z=0;for(;z<H;z++)if(F[z]==="\\")z++;else if(F[z]===x[0])B++;else if(F[z]===x[1]&&(B--,B<0))return z;return-1}function O(F){F&&F.sanitize&&!F.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}o.exports={escape:c,unescape:a,edit:p,cleanUrl:b,resolveUrl:D,noopTest:L,merge:I,splitCells:q,rtrim:A,findClosingBracket:U,checkSanitizeDeprecation:O}},7228:(o,R,y)=>{const k=y(1092),S=y(9170),T=y(9930),f=y(1477),c=y(7468),u=y(1846),{merge:a,checkSanitizeDeprecation:h,escape:p}=y(621),{getDefaults:d,changeDefaults:m,defaults:b}=y(8644);function v(_,E,N){if(typeof _=="undefined"||_===null)throw new Error("marked(): input parameter is undefined or null");if(typeof _!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(_)+", string expected");if(N||typeof E=="function"){N||(N=E,E=null),E=a({},v.defaults,E||{}),h(E);const D=E.highlight;let L,I,q=0;try{L=k.lex(_,E)}catch(U){return N(U)}I=L.length;const A=function(U){if(U)return E.highlight=D,N(U);let O;try{O=S.parse(L,E)}catch(F){U=F}return E.highlight=D,U?N(U):N(null,O)};if(!D||D.length<3||(delete E.highlight,!I))return A();for(;q<L.length;q++)(function(U){return U.type!=="code"?--I||A():D(U.text,U.lang,function(O,F){if(O)return A(O);if(F==null||F===U.text)return--I||A();U.text=F,U.escaped=!0,--I||A()})})(L[q]);return}try{return E=a({},v.defaults,E||{}),h(E),S.parse(k.lex(_,E),E)}catch(D){if(D.message+=`
Please report this to https://github.com/markedjs/marked.`,(E||v.defaults).silent)return"<p>An error occurred:</p><pre>"+p(D.message+"",!0)+"</pre>";throw D}}v.options=v.setOptions=function(_){return a(v.defaults,_),m(v.defaults),v},v.getDefaults=d,v.defaults=b,v.Parser=S,v.parser=S.parse,v.Renderer=T,v.TextRenderer=f,v.Lexer=k,v.lexer=k.lex,v.InlineLexer=c,v.inlineLexer=c.output,v.Slugger=u,v.parse=v,o.exports=v},9709:(o,R,y)=>{const{noopTest:k,edit:S,merge:T}=y(621),f={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:k,table:k,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};f._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,f._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,f.def=S(f.def).replace("label",f._label).replace("title",f._title).getRegex(),f.bullet=/(?:[*+-]|\d{1,9}\.)/,f.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,f.item=S(f.item,"gm").replace(/bull/g,f.bullet).getRegex(),f.list=S(f.list).replace(/bull/g,f.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+f.def.source+")").getRegex(),f._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",f._comment=/<!--(?!-?>)[\s\S]*?-->/,f.html=S(f.html,"i").replace("comment",f._comment).replace("tag",f._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),f.paragraph=S(f._paragraph).replace("hr",f.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",f._tag).getRegex(),f.blockquote=S(f.blockquote).replace("paragraph",f.paragraph).getRegex(),f.normal=T({},f),f.gfm=T({},f.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),f.gfm.nptable=S(f.gfm.nptable).replace("hr",f.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",f._tag).getRegex(),f.gfm.table=S(f.gfm.table).replace("hr",f.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",f._tag).getRegex(),f.pedantic=T({},f.normal,{html:S(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",f._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:k,paragraph:S(f.normal._paragraph).replace("hr",f.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",f.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const c={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:k,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:k,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};c._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,c.em=S(c.em).replace(/punctuation/g,c._punctuation).getRegex(),c._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,c._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,c._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,c.autolink=S(c.autolink).replace("scheme",c._scheme).replace("email",c._email).getRegex(),c._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,c.tag=S(c.tag).replace("comment",f._comment).replace("attribute",c._attribute).getRegex(),c._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,c._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,c._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,c.link=S(c.link).replace("label",c._label).replace("href",c._href).replace("title",c._title).getRegex(),c.reflink=S(c.reflink).replace("label",c._label).getRegex(),c.normal=T({},c),c.pedantic=T({},c.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:S(/^!?\[(label)\]\((.*?)\)/).replace("label",c._label).getRegex(),reflink:S(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",c._label).getRegex()}),c.gfm=T({},c.normal,{escape:S(c.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),c.gfm.url=S(c.gfm.url,"i").replace("email",c.gfm._extended_email).getRegex(),c.breaks=T({},c.gfm,{br:S(c.br).replace("{2,}","*").getRegex(),text:S(c.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),o.exports={block:f,inline:c}},778:(o,R,y)=>{var k=y(2479);o.exports=k(S),o.exports.strict=k(T),S.proto=S(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return S(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return T(this)},configurable:!0})});function S(f){var c=function(){return c.called?c.value:(c.called=!0,c.value=f.apply(this,arguments))};return c.called=!1,c}function T(f){var c=function(){if(c.called)throw new Error(c.onceError);return c.called=!0,c.value=f.apply(this,arguments)},u=f.name||"Function wrapped with `once`";return c.onceError=u+" shouldn't be called more than once",c.called=!1,c}},6625:(o,R)=>{R=o.exports=ke;var y;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?y=function(){var G=Array.prototype.slice.call(arguments,0);G.unshift("SEMVER"),console.log.apply(console,G)}:y=function(){},R.SEMVER_SPEC_VERSION="2.0.0";var k=256,S=Number.MAX_SAFE_INTEGER||9007199254740991,T=16,f=R.re=[],c=R.src=[],u=0,a=u++;c[a]="0|[1-9]\\d*";var h=u++;c[h]="[0-9]+";var p=u++;c[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=u++;c[d]="("+c[a]+")\\.("+c[a]+")\\.("+c[a]+")";var m=u++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var b=u++;c[b]="(?:"+c[a]+"|"+c[p]+")";var v=u++;c[v]="(?:"+c[h]+"|"+c[p]+")";var _=u++;c[_]="(?:-("+c[b]+"(?:\\."+c[b]+")*))";var E=u++;c[E]="(?:-?("+c[v]+"(?:\\."+c[v]+")*))";var N=u++;c[N]="[0-9A-Za-z-]+";var D=u++;c[D]="(?:\\+("+c[N]+"(?:\\."+c[N]+")*))";var L=u++,I="v?"+c[d]+c[_]+"?"+c[D]+"?";c[L]="^"+I+"$";var q="[v=\\s]*"+c[m]+c[E]+"?"+c[D]+"?",A=u++;c[A]="^"+q+"$";var U=u++;c[U]="((?:<|>)?=?)";var O=u++;c[O]=c[h]+"|x|X|\\*";var F=u++;c[F]=c[a]+"|x|X|\\*";var x=u++;c[x]="[v=\\s]*("+c[F]+")(?:\\.("+c[F]+")(?:\\.("+c[F]+")(?:"+c[_]+")?"+c[D]+"?)?)?";var H=u++;c[H]="[v=\\s]*("+c[O]+")(?:\\.("+c[O]+")(?:\\.("+c[O]+")(?:"+c[E]+")?"+c[D]+"?)?)?";var B=u++;c[B]="^"+c[U]+"\\s*"+c[x]+"$";var z=u++;c[z]="^"+c[U]+"\\s*"+c[H]+"$";var V=u++;c[V]="(?:^|[^\\d])(\\d{1,"+T+"})(?:\\.(\\d{1,"+T+"}))?(?:\\.(\\d{1,"+T+"}))?(?:$|[^\\d])";var J=u++;c[J]="(?:~>?)";var le=u++;c[le]="(\\s*)"+c[J]+"\\s+",f[le]=new RegExp(c[le],"g");var oe="$1~",we=u++;c[we]="^"+c[J]+c[x]+"$";var Z=u++;c[Z]="^"+c[J]+c[H]+"$";var ne=u++;c[ne]="(?:\\^)";var te=u++;c[te]="(\\s*)"+c[ne]+"\\s+",f[te]=new RegExp(c[te],"g");var he="$1^",ge=u++;c[ge]="^"+c[ne]+c[x]+"$";var Se=u++;c[Se]="^"+c[ne]+c[H]+"$";var de=u++;c[de]="^"+c[U]+"\\s*("+q+")$|^$";var fe=u++;c[fe]="^"+c[U]+"\\s*("+I+")$|^$";var Ee=u++;c[Ee]="(\\s*)"+c[U]+"\\s*("+q+"|"+c[x]+")",f[Ee]=new RegExp(c[Ee],"g");var Me="$1$2$3",lt=u++;c[lt]="^\\s*("+c[x]+")\\s+-\\s+("+c[x]+")\\s*$";var $e=u++;c[$e]="^\\s*("+c[H]+")\\s+-\\s+("+c[H]+")\\s*$";var Ge=u++;c[Ge]="(<|>)?=?\\s*\\*";for(var Ie=0;Ie<u;Ie++)y(Ie,c[Ie]),f[Ie]||(f[Ie]=new RegExp(c[Ie]));R.parse=De;function De(G,Q){if((!Q||typeof Q!="object")&&(Q={loose:!!Q,includePrerelease:!1}),G instanceof ke)return G;if(typeof G!="string"||G.length>k)return null;var Y=Q.loose?f[A]:f[L];if(!Y.test(G))return null;try{return new ke(G,Q)}catch(ae){return null}}R.valid=_e;function _e(G,Q){var Y=De(G,Q);return Y?Y.version:null}R.clean=nt;function nt(G,Q){var Y=De(G.trim().replace(/^[=v]+/,""),Q);return Y?Y.version:null}R.SemVer=ke;function ke(G,Q){if((!Q||typeof Q!="object")&&(Q={loose:!!Q,includePrerelease:!1}),G instanceof ke){if(G.loose===Q.loose)return G;G=G.version}else if(typeof G!="string")throw new TypeError("Invalid Version: "+G);if(G.length>k)throw new TypeError("version is longer than "+k+" characters");if(!(this instanceof ke))return new ke(G,Q);y("SemVer",G,Q),this.options=Q,this.loose=!!Q.loose;var Y=G.trim().match(Q.loose?f[A]:f[L]);if(!Y)throw new TypeError("Invalid Version: "+G);if(this.raw=G,this.major=+Y[1],this.minor=+Y[2],this.patch=+Y[3],this.major>S||this.major<0)throw new TypeError("Invalid major version");if(this.minor>S||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>S||this.patch<0)throw new TypeError("Invalid patch version");Y[4]?this.prerelease=Y[4].split(".").map(function(ae){if(/^[0-9]+$/.test(ae)){var ce=+ae;if(ce>=0&&ce<S)return ce}return ae}):this.prerelease=[],this.build=Y[5]?Y[5].split("."):[],this.format()}ke.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ke.prototype.toString=function(){return this.version},ke.prototype.compare=function(G){return y("SemVer.compare",this.version,this.options,G),G instanceof ke||(G=new ke(G,this.options)),this.compareMain(G)||this.comparePre(G)},ke.prototype.compareMain=function(G){return G instanceof ke||(G=new ke(G,this.options)),Je(this.major,G.major)||Je(this.minor,G.minor)||Je(this.patch,G.patch)},ke.prototype.comparePre=function(G){if(G instanceof ke||(G=new ke(G,this.options)),this.prerelease.length&&!G.prerelease.length)return-1;if(!this.prerelease.length&&G.prerelease.length)return 1;if(!this.prerelease.length&&!G.prerelease.length)return 0;var Q=0;do{var Y=this.prerelease[Q],ae=G.prerelease[Q];if(y("prerelease compare",Q,Y,ae),Y===void 0&&ae===void 0)return 0;if(ae===void 0)return 1;if(Y===void 0)return-1;if(Y===ae)continue;return Je(Y,ae)}while(++Q)},ke.prototype.inc=function(G,Q){switch(G){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",Q);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",Q);break;case"prepatch":this.prerelease.length=0,this.inc("patch",Q),this.inc("pre",Q);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",Q),this.inc("pre",Q);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var Y=this.prerelease.length;--Y>=0;)typeof this.prerelease[Y]=="number"&&(this.prerelease[Y]++,Y=-2);Y===-1&&this.prerelease.push(0)}Q&&(this.prerelease[0]===Q?isNaN(this.prerelease[1])&&(this.prerelease=[Q,0]):this.prerelease=[Q,0]);break;default:throw new Error("invalid increment argument: "+G)}return this.format(),this.raw=this.version,this},R.inc=nn;function nn(G,Q,Y,ae){typeof Y=="string"&&(ae=Y,Y=void 0);try{return new ke(G,Y).inc(Q,ae).version}catch(ce){return null}}R.diff=rn;function rn(G,Q){if(Pr(G,Q))return null;var Y=De(G),ae=De(Q),ce="";if(Y.prerelease.length||ae.prerelease.length){ce="pre";var me="prerelease"}for(var pe in Y)if((pe==="major"||pe==="minor"||pe==="patch")&&Y[pe]!==ae[pe])return ce+pe;return me}R.compareIdentifiers=Je;var wn=/^[0-9]+$/;function Je(G,Q){var Y=wn.test(G),ae=wn.test(Q);return Y&&ae&&(G=+G,Q=+Q),G===Q?0:Y&&!ae?-1:ae&&!Y?1:G<Q?-1:1}R.rcompareIdentifiers=zt;function zt(G,Q){return Je(Q,G)}R.major=bn;function bn(G,Q){return new ke(G,Q).major}R.minor=ct;function ct(G,Q){return new ke(G,Q).minor}R.patch=os;function os(G,Q){return new ke(G,Q).patch}R.compare=Ft;function Ft(G,Q,Y){return new ke(G,Y).compare(new ke(Q,Y))}R.compareLoose=ci;function ci(G,Q){return Ft(G,Q,!0)}R.rcompare=Nr;function Nr(G,Q,Y){return Ft(Q,G,Y)}R.sort=It;function It(G,Q){return G.sort(function(Y,ae){return R.compare(Y,ae,Q)})}R.rsort=di;function di(G,Q){return G.sort(function(Y,ae){return R.rcompare(Y,ae,Q)})}R.gt=sn;function sn(G,Q,Y){return Ft(G,Q,Y)>0}R.lt=xt;function xt(G,Q,Y){return Ft(G,Q,Y)<0}R.eq=Pr;function Pr(G,Q,Y){return Ft(G,Q,Y)===0}R.neq=hi;function hi(G,Q,Y){return Ft(G,Q,Y)!==0}R.gte=Ot;function Ot(G,Q,Y){return Ft(G,Q,Y)>=0}R.lte=Mn;function Mn(G,Q,Y){return Ft(G,Q,Y)<=0}R.cmp=Ln;function Ln(G,Q,Y,ae){switch(Q){case"===":return typeof G=="object"&&(G=G.version),typeof Y=="object"&&(Y=Y.version),G===Y;case"!==":return typeof G=="object"&&(G=G.version),typeof Y=="object"&&(Y=Y.version),G!==Y;case"":case"=":case"==":return Pr(G,Y,ae);case"!=":return hi(G,Y,ae);case">":return sn(G,Y,ae);case">=":return Ot(G,Y,ae);case"<":return xt(G,Y,ae);case"<=":return Mn(G,Y,ae);default:throw new TypeError("Invalid operator: "+Q)}}R.Comparator=ft;function ft(G,Q){if((!Q||typeof Q!="object")&&(Q={loose:!!Q,includePrerelease:!1}),G instanceof ft){if(G.loose===!!Q.loose)return G;G=G.value}if(!(this instanceof ft))return new ft(G,Q);y("comparator",G,Q),this.options=Q,this.loose=!!Q.loose,this.parse(G),this.semver===kn?this.value="":this.value=this.operator+this.semver.version,y("comp",this)}var kn={};ft.prototype.parse=function(G){var Q=this.options.loose?f[de]:f[fe],Y=G.match(Q);if(!Y)throw new TypeError("Invalid comparator: "+G);this.operator=Y[1],this.operator==="="&&(this.operator=""),Y[2]?this.semver=new ke(Y[2],this.options.loose):this.semver=kn},ft.prototype.toString=function(){return this.value},ft.prototype.test=function(G){return y("Comparator.test",G,this.options.loose),this.semver===kn?!0:(typeof G=="string"&&(G=new ke(G,this.options)),Ln(G,this.operator,this.semver,this.options))},ft.prototype.intersects=function(G,Q){if(!(G instanceof ft))throw new TypeError("a Comparator is required");(!Q||typeof Q!="object")&&(Q={loose:!!Q,includePrerelease:!1});var Y;if(this.operator==="")return Y=new Ae(G.value,Q),Zn(this.value,Y,Q);if(G.operator==="")return Y=new Ae(this.value,Q),Zn(G.semver,Y,Q);var ae=(this.operator===">="||this.operator===">")&&(G.operator===">="||G.operator===">"),ce=(this.operator==="<="||this.operator==="<")&&(G.operator==="<="||G.operator==="<"),me=this.semver.version===G.semver.version,pe=(this.operator===">="||this.operator==="<=")&&(G.operator===">="||G.operator==="<="),Te=Ln(this.semver,"<",G.semver,Q)&&(this.operator===">="||this.operator===">")&&(G.operator==="<="||G.operator==="<"),Ne=Ln(this.semver,">",G.semver,Q)&&(this.operator==="<="||this.operator==="<")&&(G.operator===">="||G.operator===">");return ae||ce||me&&pe||Te||Ne},R.Range=Ae;function Ae(G,Q){if((!Q||typeof Q!="object")&&(Q={loose:!!Q,includePrerelease:!1}),G instanceof Ae)return G.loose===!!Q.loose&&G.includePrerelease===!!Q.includePrerelease?G:new Ae(G.raw,Q);if(G instanceof ft)return new Ae(G.value,Q);if(!(this instanceof Ae))return new Ae(G,Q);if(this.options=Q,this.loose=!!Q.loose,this.includePrerelease=!!Q.includePrerelease,this.raw=G,this.set=G.split(/\s*\|\|\s*/).map(function(Y){return this.parseRange(Y.trim())},this).filter(function(Y){return Y.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+G);this.format()}Ae.prototype.format=function(){return this.range=this.set.map(function(G){return G.join(" ").trim()}).join("||").trim(),this.range},Ae.prototype.toString=function(){return this.range},Ae.prototype.parseRange=function(G){var Q=this.options.loose;G=G.trim();var Y=Q?f[$e]:f[lt];G=G.replace(Y,fi),y("hyphen replace",G),G=G.replace(f[Ee],Me),y("comparator trim",G,f[Ee]),G=G.replace(f[le],oe),G=G.replace(f[te],he),G=G.split(/\s+/).join(" ");var ae=Q?f[de]:f[fe],ce=G.split(" ").map(function(me){return ls(me,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(ce=ce.filter(function(me){return!!me.match(ae)})),ce=ce.map(function(me){return new ft(me,this.options)},this),ce},Ae.prototype.intersects=function(G,Q){if(!(G instanceof Ae))throw new TypeError("a Range is required");return this.set.some(function(Y){return Y.every(function(ae){return G.set.some(function(ce){return ce.every(function(me){return ae.intersects(me,Q)})})})})},R.toComparators=us;function us(G,Q){return new Ae(G,Q).set.map(function(Y){return Y.map(function(ae){return ae.value}).join(" ").trim().split(" ")})}function ls(G,Q){return y("comp",G,Q),G=mi(G,Q),y("caret",G),G=gt(G,Q),y("tildes",G),G=cs(G,Q),y("xrange",G),G=vt(G,Q),y("stars",G),G}function Ce(G){return!G||G.toLowerCase()==="x"||G==="*"}function gt(G,Q){return G.trim().split(/\s+/).map(function(Y){return be(Y,Q)}).join(" ")}function be(G,Q){var Y=Q.loose?f[Z]:f[we];return G.replace(Y,function(ae,ce,me,pe,Te){y("tilde",G,ae,ce,me,pe,Te);var Ne;return Ce(ce)?Ne="":Ce(me)?Ne=">="+ce+".0.0 <"+(+ce+1)+".0.0":Ce(pe)?Ne=">="+ce+"."+me+".0 <"+ce+"."+(+me+1)+".0":Te?(y("replaceTilde pr",Te),Ne=">="+ce+"."+me+"."+pe+"-"+Te+" <"+ce+"."+(+me+1)+".0"):Ne=">="+ce+"."+me+"."+pe+" <"+ce+"."+(+me+1)+".0",y("tilde return",Ne),Ne})}function mi(G,Q){return G.trim().split(/\s+/).map(function(Y){return pi(Y,Q)}).join(" ")}function pi(G,Q){y("caret",G,Q);var Y=Q.loose?f[Se]:f[ge];return G.replace(Y,function(ae,ce,me,pe,Te){y("caret",G,ae,ce,me,pe,Te);var Ne;return Ce(ce)?Ne="":Ce(me)?Ne=">="+ce+".0.0 <"+(+ce+1)+".0.0":Ce(pe)?ce==="0"?Ne=">="+ce+"."+me+".0 <"+ce+"."+(+me+1)+".0":Ne=">="+ce+"."+me+".0 <"+(+ce+1)+".0.0":Te?(y("replaceCaret pr",Te),ce==="0"?me==="0"?Ne=">="+ce+"."+me+"."+pe+"-"+Te+" <"+ce+"."+me+"."+(+pe+1):Ne=">="+ce+"."+me+"."+pe+"-"+Te+" <"+ce+"."+(+me+1)+".0":Ne=">="+ce+"."+me+"."+pe+"-"+Te+" <"+(+ce+1)+".0.0"):(y("no pr"),ce==="0"?me==="0"?Ne=">="+ce+"."+me+"."+pe+" <"+ce+"."+me+"."+(+pe+1):Ne=">="+ce+"."+me+"."+pe+" <"+ce+"."+(+me+1)+".0":Ne=">="+ce+"."+me+"."+pe+" <"+(+ce+1)+".0.0"),y("caret return",Ne),Ne})}function cs(G,Q){return y("replaceXRanges",G,Q),G.split(/\s+/).map(function(Y){return ds(Y,Q)}).join(" ")}function ds(G,Q){G=G.trim();var Y=Q.loose?f[z]:f[B];return G.replace(Y,function(ae,ce,me,pe,Te,Ne){y("xRange",G,ae,ce,me,pe,Te,Ne);var Rt=Ce(me),Dt=Rt||Ce(pe),yt=Dt||Ce(Te),dt=yt;return ce==="="&&dt&&(ce=""),Rt?ce===">"||ce==="<"?ae="<0.0.0":ae="*":ce&&dt?(Dt&&(pe=0),Te=0,ce===">"?(ce=">=",Dt?(me=+me+1,pe=0,Te=0):(pe=+pe+1,Te=0)):ce==="<="&&(ce="<",Dt?me=+me+1:pe=+pe+1),ae=ce+me+"."+pe+"."+Te):Dt?ae=">="+me+".0.0 <"+(+me+1)+".0.0":yt&&(ae=">="+me+"."+pe+".0 <"+me+"."+(+pe+1)+".0"),y("xRange return",ae),ae})}function vt(G,Q){return y("replaceStars",G,Q),G.trim().replace(f[Ge],"")}function fi(G,Q,Y,ae,ce,me,pe,Te,Ne,Rt,Dt,yt,dt){return Ce(Y)?Q="":Ce(ae)?Q=">="+Y+".0.0":Ce(ce)?Q=">="+Y+"."+ae+".0":Q=">="+Q,Ce(Ne)?Te="":Ce(Rt)?Te="<"+(+Ne+1)+".0.0":Ce(Dt)?Te="<"+Ne+"."+(+Rt+1)+".0":yt?Te="<="+Ne+"."+Rt+"."+Dt+"-"+yt:Te="<="+Te,(Q+" "+Te).trim()}Ae.prototype.test=function(G){if(!G)return!1;typeof G=="string"&&(G=new ke(G,this.options));for(var Q=0;Q<this.set.length;Q++)if(hs(this.set[Q],G,this.options))return!0;return!1};function hs(G,Q,Y){for(var ae=0;ae<G.length;ae++)if(!G[ae].test(Q))return!1;if(Q.prerelease.length&&!Y.includePrerelease){for(ae=0;ae<G.length;ae++)if(y(G[ae].semver),G[ae].semver!==kn&&G[ae].semver.prerelease.length>0){var ce=G[ae].semver;if(ce.major===Q.major&&ce.minor===Q.minor&&ce.patch===Q.patch)return!0}return!1}return!0}R.satisfies=Zn;function Zn(G,Q,Y){try{Q=new Ae(Q,Y)}catch(ae){return!1}return Q.test(G)}R.maxSatisfying=gi;function gi(G,Q,Y){var ae=null,ce=null;try{var me=new Ae(Q,Y)}catch(pe){return null}return G.forEach(function(pe){me.test(pe)&&(!ae||ce.compare(pe)===-1)&&(ae=pe,ce=new ke(ae,Y))}),ae}R.minSatisfying=ms;function ms(G,Q,Y){var ae=null,ce=null;try{var me=new Ae(Q,Y)}catch(pe){return null}return G.forEach(function(pe){me.test(pe)&&(!ae||ce.compare(pe)===1)&&(ae=pe,ce=new ke(ae,Y))}),ae}R.minVersion=ps;function ps(G,Q){G=new Ae(G,Q);var Y=new ke("0.0.0");if(G.test(Y)||(Y=new ke("0.0.0-0"),G.test(Y)))return Y;Y=null;for(var ae=0;ae<G.set.length;++ae){var ce=G.set[ae];ce.forEach(function(me){var pe=new ke(me.semver.version);switch(me.operator){case">":pe.prerelease.length===0?pe.patch++:pe.prerelease.push(0),pe.raw=pe.format();case"":case">=":(!Y||sn(Y,pe))&&(Y=pe);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+me.operator)}})}return Y&&G.test(Y)?Y:null}R.validRange=qn;function qn(G,Q){try{return new Ae(G,Q).range||"*"}catch(Y){return null}}R.ltr=Ir;function Ir(G,Q,Y){return Un(G,Q,"<",Y)}R.gtr=fs;function fs(G,Q,Y){return Un(G,Q,">",Y)}R.outside=Un;function Un(G,Q,Y,ae){G=new ke(G,ae),Q=new Ae(Q,ae);var ce,me,pe,Te,Ne;switch(Y){case">":ce=sn,me=Mn,pe=xt,Te=">",Ne=">=";break;case"<":ce=xt,me=Ot,pe=sn,Te="<",Ne="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Zn(G,Q,ae))return!1;for(var Rt=0;Rt<Q.set.length;++Rt){var Dt=Q.set[Rt],yt=null,dt=null;if(Dt.forEach(function(Qt){Qt.semver===kn&&(Qt=new ft(">=0.0.0")),yt=yt||Qt,dt=dt||Qt,ce(Qt.semver,yt.semver,ae)?yt=Qt:pe(Qt.semver,dt.semver,ae)&&(dt=Qt)}),yt.operator===Te||yt.operator===Ne||(!dt.operator||dt.operator===Te)&&me(G,dt.semver))return!1;if(dt.operator===Ne&&pe(G,dt.semver))return!1}return!0}R.prerelease=Dr;function Dr(G,Q){var Y=De(G,Q);return Y&&Y.prerelease.length?Y.prerelease:null}R.intersects=gs;function gs(G,Q,Y){return G=new Ae(G,Y),Q=new Ae(Q,Y),G.intersects(Q)}R.coerce=vs;function vs(G){if(G instanceof ke)return G;if(typeof G!="string")return null;var Q=G.match(f[V]);return Q==null?null:De(Q[1]+"."+(Q[2]||"0")+"."+(Q[3]||"0"))}},6372:o=>{"use strict";function R(a){return typeof a=="function"}var y=console.error.bind(console);function k(a,h,p){var d=!!a[h]&&a.propertyIsEnumerable(h);Object.defineProperty(a,h,{configurable:!0,enumerable:d,writable:!0,value:p})}function S(a){a&&a.logger&&(R(a.logger)?y=a.logger:y("new logger isn't a function, not replacing"))}function T(a,h,p){if(!a||!a[h]){y("no original function "+h+" to wrap");return}if(!p){y("no wrapper function"),y(new Error().stack);return}if(!R(a[h])||!R(p)){y("original object and wrapper must be functions");return}var d=a[h],m=p(d,h);return k(m,"__original",d),k(m,"__unwrap",function(){a[h]===m&&k(a,h,d)}),k(m,"__wrapped",!0),k(a,h,m),m}function f(a,h,p){if(a)Array.isArray(a)||(a=[a]);else{y("must provide one or more modules to patch"),y(new Error().stack);return}if(!(h&&Array.isArray(h))){y("must provide one or more functions to wrap on modules");return}a.forEach(function(d){h.forEach(function(m){T(d,m,p)})})}function c(a,h){if(!a||!a[h]){y("no function to unwrap."),y(new Error().stack);return}if(!a[h].__unwrap)y("no original to unwrap to -- has "+h+" already been unwrapped?");else return a[h].__unwrap()}function u(a,h){if(a)Array.isArray(a)||(a=[a]);else{y("must provide one or more modules to patch"),y(new Error().stack);return}if(!(h&&Array.isArray(h))){y("must provide one or more functions to unwrap on modules");return}a.forEach(function(p){h.forEach(function(d){c(p,d)})})}S.wrap=T,S.massWrap=f,S.unwrap=c,S.massUnwrap=u,o.exports=S},6200:(o,R,y)=>{"use strict";const k=y(1669),S=y(1003),T=/\s/,f=/\r|\n/,c=/^(Host|Match)$/i,u=1,a=2;function h(d,m){return m.hasOwnProperty(d.param)&&m[d.param]===d.value}class p extends Array{compute(m){const b={},v=(_,E)=>{_==="IdentityFile"?(b[_]||(b[_]=[])).push(E):b[_]==null&&(b[_]=E)};for(const _ of this)_.type===u&&(_.param==="Host"?S(_.value,m)&&(v(_.param,_.value),_.config.filter(E=>E.type===u).forEach(E=>v(E.param,E.value))):_.param==="Match"||v(_.param,_.value));return b}find(m={}){if(typeof m=="function")return super.find(m);if(!(m&&("Host"in m||"Match"in m)))throw new Error("Can only find by Host or Match");return super.find(b=>h(b,m))}remove(m={}){if(!(m&&("Host"in m||"Match"in m)))throw new Error("Can only remove by Host or Match");const b=typeof m=="function"?super.findIndex(m):super.findIndex(v=>h(v,m));if(b>=0)return this.splice(b,1)}toString(){return this.constructor.stringify(this)}append(m){let b="  ";e:for(const E of this)if(c.test(E.param)){for(const N of E.config)if(N.before){b=N.before;break e}}if(this.length>0){let E=this[this.length-1];E.config&&(E=E.config[E.config.length-1]),E.after=`
`}let v=this,_=this;for(const E in m){const N={type:u,param:E,separator:" ",value:m[E],before:"",after:`
`};c.test(E)?(v=_,v.push(N),v=N.config=new p):(N.before=v===_?"":b,v.push(N))}return _}static stringify(m){let b="";const v=(E,N)=>Array.isArray(E)?E.map(D=>v(D,T.test(D))).join(" "):N?`"${E}"`:E,_=E=>{if(b+=E.before,E.type===a)b+=E.content;else if(E.type===u){const N=E.quoted||/IdentityFile/i.test(E.param)&&T.test(E.value),D=v(E.value,N);b+=`${E.param}${E.separator}${D}`}b+=E.after,E.config&&E.config.forEach(_)};return m.forEach(_),b}static get DIRECTIVE(){return u}static get COMMENT(){return a}static parse(m){let b=0,v=N(),_=new p,E=_;function N(){return m[b++]}function D(){let H="";for(;T.test(v);)H+=v,v=N();return H}function L(){let H="";for(;f.test(v);)H+=v,v=N();return H}function I(){let H="";for(;v&&/[^ \t=]/.test(v);)H+=v,v=N();return H}function q(){let H=D();return v==="="&&(H+=v,v=N()),H+D()}function A(){let H="",B=!1,z=!1;for(;v&&!f.test(v);)z?(H+=v==='"'?v:`\\${v}`,z=!1):v==='"'&&(!H||B)?B=!B:v==="\\"?z=!0:H+=v,v=N();if(B||z)throw new Error(`Unexpected line break at ${H}`);return H.trim()}function U(){const H=a;let B="";for(;v&&!f.test(v);)B+=v,v=N();return{type:H,content:B}}function O(){const H=[];let B="",z=!1,V=!1;for(;v&&!f.test(v);)V?(B+=v==='"'?v:`\\${v}`,V=!1):v==='"'?z=!z:v==="\\"?V=!0:z?B+=v:/[ \t]/.test(v)?B&&(H.push(B),B=""):B+=v,v=N();if(z||V)throw new Error(`Unexpected line break at ${H.concat(B).join(" ")}`);return H.push(B),H.length>1?H:H[0]}function F(){const H=u,B=I(),z=B.toLowerCase()=="host",V={type:H,param:B,separator:q(),quoted:!z&&v==='"',value:z?O():A()};return V.quoted||delete V.quoted,V}function x(){const H=D(),B=v==="#"?U():F(),z=L();return B.before=H,B.after=z,B}for(;v;){let H=x();H.type===u&&c.test(H.param)?(_=E,_.push(H),_=H.config=new p):_.push(H)}return E}}p.find=k.deprecate((d,m)=>{const b=d.find(m);return b?[b,d.indexOf(b)]:null},"SSHConfig.find() is deprected. Use SSHConfig.prototype.find() instead."),o.exports=p},1003:o=>{"use strict";function R(k,S){return k=k.replace(/\./g,"\\.").replace(/\+/g,"\\+").replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+k+")$").test(S)}function y(k,S){const T=Array.isArray(k)?k:k.split(/,/);let f=!1;for(const c of T){if(c[0]=="!"&&R(c.slice(1),S))return!1;R(c,S)&&(f=!0)}return f}o.exports=y},465:o=>{function R(y){try{return Error.prototype.toString.call(y)}catch(k){try{return"<error: "+k+">"}catch(S){return"<error>"}}}o.exports=function(k,S){var T=[];T.push(R(k));for(var f=0;f<S.length;f++){var c=S[f],u;try{u=c.toString()}catch(a){try{u="<error: "+a+">"}catch(h){u="<error>"}}T.push("    at "+u)}return T.join(`
`)}},2512:(o,R,y)=>{if(global._stackChain)if(global._stackChain.version===y(9414).i8)o.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else o.exports=global._stackChain=y(7898)},9414:o=>{"use strict";o.exports={i8:"1.3.7"}},7898:(o,R,y)=>{var k=y(465);function S(){this.extend=new c,this.filter=new c,this.format=new u,this.version=y(9414).i8}var T=!1;S.prototype.callSite=function d(m){m||(m={}),T=!0;var b={};Error.captureStackTrace(b,d);var v=b.stack;return T=!1,v=v.slice(m.slice||0),m.extend&&(v=this.extend._modify(b,v)),m.filter&&(v=this.filter._modify(b,v)),v};var f=new S;function c(){this._modifiers=[]}c.prototype._modify=function(d,m){for(var b=0,v=this._modifiers.length;b<v;b++)m=this._modifiers[b](d,m);return m},c.prototype.attach=function(d){this._modifiers.push(d)},c.prototype.deattach=function(d){var m=this._modifiers.indexOf(d);return m===-1?!1:(this._modifiers.splice(m,1),!0)};function u(){this._formater=k,this._previous=void 0}u.prototype.replace=function(d){d?this._formater=d:this.restore()},u.prototype.restore=function(){this._formater=k,this._previous=void 0},u.prototype._backup=function(){this._previous=this._formater},u.prototype._roolback=function(){this._previous===k?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&f.format.replace(Error.prepareStackTrace);var a=!1;function h(d,m){if(T)return m;if(a)return k(d,m);var b=m.concat();b=f.extend._modify(d,b),b=f.filter._modify(d,b),b=b.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:m,mutated:b}),a=!0;var v=f.format._formater(d,b);return a=!1,v}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return h},set:function(d){d===h?f.format._roolback():(f.format._backup(),f.format.replace(d))}});function p(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:p,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),o.exports=f},2130:(o,R,y)=>{"use strict";const k=y(2087),S=y(3867),T=y(2146),{env:f}=process;let c;T("no-color")||T("no-colors")||T("color=false")||T("color=never")?c=0:(T("color")||T("colors")||T("color=true")||T("color=always"))&&(c=1),"FORCE_COLOR"in f&&(f.FORCE_COLOR==="true"?c=1:f.FORCE_COLOR==="false"?c=0:c=f.FORCE_COLOR.length===0?1:Math.min(parseInt(f.FORCE_COLOR,10),3));function u(p){return p===0?!1:{level:p,hasBasic:!0,has256:p>=2,has16m:p>=3}}function a(p,d){if(c===0)return 0;if(T("color=16m")||T("color=full")||T("color=truecolor"))return 3;if(T("color=256"))return 2;if(p&&!d&&c===void 0)return 0;const m=c||0;if(f.TERM==="dumb")return m;if(process.platform==="win32"){const b=k.release().split(".");return Number(b[0])>=10&&Number(b[2])>=10586?Number(b[2])>=14931?3:2:1}if("CI"in f)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(b=>b in f)||f.CI_NAME==="codeship"?1:m;if("TEAMCITY_VERSION"in f)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(f.TEAMCITY_VERSION)?1:0;if(f.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in f){const b=parseInt((f.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(f.TERM_PROGRAM){case"iTerm.app":return b>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(f.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(f.TERM)||"COLORTERM"in f?1:m}function h(p){const d=a(p,p&&p.isTTY);return u(d)}o.exports={supportsColor:h,stdout:u(a(!0,S.isatty(1))),stderr:u(a(!0,S.isatty(2)))}},2146:o=>{"use strict";o.exports=(R,y=process.argv)=>{const k=R.startsWith("-")?"":R.length===1?"-":"--",S=y.indexOf(k+R),T=y.indexOf("--");return S!==-1&&(T===-1||S<T)}},7121:(o,R,y)=>{"use strict";y.d(R,{Z:()=>f});function k(c){var u,a=c.Symbol;return typeof a=="function"?a.observable?u=a.observable:(u=a("observable"),a.observable=u):u="@@observable",u}o=y.hmd(o);var S;typeof self!="undefined"?S=self:typeof window!="undefined"?S=window:typeof global!="undefined"?S=global:S=o;var T=k(S);const f=T},4802:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var k=y(6363);R.ExperimentationService=k.ExperimentationService},6363:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const k=y(4067),S=y(4234),T=y(5975);class f extends T.ExperimentationServiceAutoPolling{constructor(u){super(u.telemetry,u.filterProviders||[],u.refetchInterval!=null?u.refetchInterval:0,u.featuresTelemetryPropertyName,u.assignmentContextTelemetryPropertyName,u.telemetryEventName,u.storageKey,u.keyValueStorage);this.options=u,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new k.TasApiFeatureProvider(new S.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}R.ExperimentationService=f,f.REFRESH_RATE_IN_MINUTES=30},5975:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const k=y(3663),S=y(3334);class T extends k.ExperimentationServiceBase{constructor(c,u,a,h,p,d,m,b){super(c,h,p,d,m,b);if(this.telemetry=c,this.filterProviders=u,this.refreshRateMs=a,this.featuresTelemetryPropertyName=h,this.assignmentContextTelemetryPropertyName=p,this.telemetryEventName=d,this.storageKey=m,this.storage=b,a<1e3&&a!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");a>0&&(this.pollingService=new S.PollingService(a),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(c=!1){if(this.pollingService){this.pollingService.StopPolling();let u=await super.getFeaturesAsync(c);return this.pollingService.StartPolling(),u}else return await super.getFeaturesAsync(c)}}R.ExperimentationServiceAutoPolling=T},3663:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const k=y(7002);class S{constructor(f,c,u,a,h,p){this.telemetry=f,this.featuresTelemetryPropertyName=c,this.assignmentContextTelemetryPropertyName=u,this.telemetryEventName=a,this.storageKey=h,this.storage=p,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(p=new k.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(f){this._features=f,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(f=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async u=>await u.getFeatures()));let c=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(c,f),this.features}updateFeatures(f,c=!1){let u={features:[],assignmentContext:"",configs:[]};for(let a of f){for(let h of a.features)u.features.includes(h)||u.features.push(h);for(let h of a.configs){const p=u.configs.find(d=>d.Id===h.Id);p?p.Parameters=Object.assign(Object.assign({},p.Parameters),h.Parameters):u.configs.push(h)}u.assignmentContext+=a.assignmentContext}(c||!this.featuresConsumed)&&(this.features=u),this.storage&&this.storage.setValue(this.storageKey,u)}async loadCachedFeatureData(){let f;this.storage&&(f=await this.storage.getValue(this.storageKey),f!==void 0&&f.configs===void 0&&(f.configs=[])),this.features.features.length===0&&(this.features=f||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(f){return this.featuresConsumed=!0,this.PostEventToTelemetry(f),this.features.features.includes(f)}async isCachedFlightEnabled(f){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(f),this.features.features.includes(f)}async isFlightEnabledAsync(f){const c=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(f),c.features.includes(f)}getTreatmentVariable(f,c){var u;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${f}.${c}`),(u=this.features.configs.find(h=>h.Id===f))===null||u===void 0?void 0:u.Parameters[c]}async getTreatmentVariableAsync(f,c){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(f,c)}PostEventToTelemetry(f){this.cachedTelemetryEvents.includes(f)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",f]])),this.cachedTelemetryEvents.push(f))}invokeInit(){this.init()}addFeatureProvider(...f){if(!(f==null||this.featureProviders==null))for(let c of f)this.featureProviders.push(c)}}R.ExperimentationServiceBase=S},69:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});class y{constructor(S){this.telemetry=S,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let S=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,S}}R.BaseFeatureProvider=y},4e3:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const k=y(69);class S extends k.BaseFeatureProvider{constructor(f,c){super(f);this.telemetry=f,this.filterProviders=c,this.cachedTelemetryEvents=[]}getFilters(){let f=new Map;for(let c of this.filterProviders){let u=c.getFilters();for(let a of u.keys()){let h=u.get(a);f.set(a,h)}}return f}PostEventToTelemetry(f){if(this.cachedTelemetryEvents.includes(f))return;const c=JSON.stringify(f);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",c]])),this.cachedTelemetryEvents.push(f)}}R.FilteredFeatureProvider=S},4067:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const k=y(4e3);class S extends k.FilteredFeatureProvider{constructor(f,c,u){super(c,u);this.httpClient=f,this.telemetry=c,this.filterProviders=u}async fetch(){let f=this.getFilters(),c={};for(let d of f.keys()){const m=f.get(d);c[d]=m}let u=await this.httpClient.get({headers:c});f.keys.length>0&&this.PostEventToTelemetry(c);let a=u.data,h=a.Configs,p=[];for(let d of h)if(!!d.Parameters)for(let m of Object.keys(d.Parameters)){const b=m+(d.Parameters[m]?"":"cf");p.includes(b)||p.push(b)}return{features:p,assignmentContext:a.AssignmentContext,configs:h}}}R.TasApiFeatureProvider=S},4234:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const k=y(9669);class S{constructor(f){this.endpoint=f}get(f){return k.default.get(this.endpoint,Object.assign(Object.assign({},f),{proxy:!1}))}}R.AxiosHttpClient=S},7002:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});class y{constructor(){this.storage=new Map}async getValue(S,T){return this.storage.has(S)?await Promise.resolve(this.storage.get(S)):await Promise.resolve(T||void 0)}setValue(S,T){this.storage.set(S,T)}}R.MemoryKeyValueStorage=y},3334:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});class y{constructor(S){this.fetchInterval=S}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(S){this.onTick=S}StartPolling(S=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(S&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}R.PollingService=y},6149:(o,R,y)=>{o.exports=y(5468)},5468:(o,R,y)=>{"use strict";var k,S=y(1631),T=y(4016),f=y(8605),c=y(7211),u=y(8614),a=y(2357),h=y(1669);k=p,R.httpsOverHttp=d,k=m,k=b;function p(L){var I=new v(L);return I.request=f.request,I}function d(L){var I=new v(L);return I.request=f.request,I.createSocket=_,I.defaultPort=443,I}function m(L){var I=new v(L);return I.request=c.request,I}function b(L){var I=new v(L);return I.request=c.request,I.createSocket=_,I.defaultPort=443,I}function v(L){var I=this;I.options=L||{},I.proxyOptions=I.options.proxy||{},I.maxSockets=I.options.maxSockets||f.Agent.defaultMaxSockets,I.requests=[],I.sockets=[],I.on("free",function(A,U,O,F){for(var x=E(U,O,F),H=0,B=I.requests.length;H<B;++H){var z=I.requests[H];if(z.host===x.host&&z.port===x.port){I.requests.splice(H,1),z.request.onSocket(A);return}}A.destroy(),I.removeSocket(A)})}h.inherits(v,u.EventEmitter),v.prototype.addRequest=function(I,q,A,U){var O=this,F=N({request:I},O.options,E(q,A,U));if(O.sockets.length>=this.maxSockets){O.requests.push(F);return}O.createSocket(F,function(x){x.on("free",H),x.on("close",B),x.on("agentRemove",B),I.onSocket(x);function H(){O.emit("free",x,F)}function B(z){O.removeSocket(x),x.removeListener("free",H),x.removeListener("close",B),x.removeListener("agentRemove",B)}})},v.prototype.createSocket=function(I,q){var A=this,U={};A.sockets.push(U);var O=N({},A.proxyOptions,{method:"CONNECT",path:I.host+":"+I.port,agent:!1,headers:{host:I.host+":"+I.port}});I.localAddress&&(O.localAddress=I.localAddress),O.proxyAuth&&(O.headers=O.headers||{},O.headers["Proxy-Authorization"]="Basic "+new Buffer(O.proxyAuth).toString("base64")),D("making CONNECT request");var F=A.request(O);F.useChunkedEncodingByDefault=!1,F.once("response",x),F.once("upgrade",H),F.once("connect",B),F.once("error",z),F.end();function x(V){V.upgrade=!0}function H(V,J,le){process.nextTick(function(){B(V,J,le)})}function B(V,J,le){if(F.removeAllListeners(),J.removeAllListeners(),V.statusCode!==200){D("tunneling socket could not be established, statusCode=%d",V.statusCode),J.destroy();var oe=new Error("tunneling socket could not be established, statusCode="+V.statusCode);oe.code="ECONNRESET",I.request.emit("error",oe),A.removeSocket(U);return}if(le.length>0){D("got illegal response body from proxy"),J.destroy();var oe=new Error("got illegal response body from proxy");oe.code="ECONNRESET",I.request.emit("error",oe),A.removeSocket(U);return}return D("tunneling connection has established"),A.sockets[A.sockets.indexOf(U)]=J,q(J)}function z(V){F.removeAllListeners(),D(`tunneling socket could not be established, cause=%s
`,V.message,V.stack);var J=new Error("tunneling socket could not be established, cause="+V.message);J.code="ECONNRESET",I.request.emit("error",J),A.removeSocket(U)}},v.prototype.removeSocket=function(I){var q=this.sockets.indexOf(I);if(q!==-1){this.sockets.splice(q,1);var A=this.requests.shift();A&&this.createSocket(A,function(U){A.request.onSocket(U)})}};function _(L,I){var q=this;v.prototype.createSocket.call(q,L,function(A){var U=L.request.getHeader("host"),O=N({},q.options,{socket:A,servername:U?U.replace(/:.*$/,""):L.host}),F=T.connect(0,O);q.sockets[q.sockets.indexOf(A)]=F,I(F)})}function E(L,I,q){return typeof L=="string"?{host:L,port:I,localAddress:q}:L}function N(L){for(var I=1,q=arguments.length;I<q;++I){var A=arguments[I];if(typeof A=="object")for(var U=Object.keys(A),O=0,F=U.length;O<F;++O){var x=U[O];A[x]!==void 0&&(L[x]=A[x])}}return L}var D;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?D=function(){var L=Array.prototype.slice.call(arguments);typeof L[0]=="string"?L[0]="TUNNEL: "+L[0]:L.unshift("TUNNEL:"),console.error.apply(console,L)}:D=function(){},k=D},4398:(o,R,y)=>{"use strict";var k;k={value:!0},process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var S=y(5747),T=y(2087),f=y(5622),c=y(7549),u=y(9574),a=function(){function h(p,d,m,b){var v=this;this.extensionId=p,this.extensionVersion=d,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!b;var _=process.env.VSCODE_LOGS||"";_&&p&&process.env.VSCODE_LOG_LEVEL==="trace"&&(_=f.join(_,p+".txt"),this.logStream=S.createWriteStream(_,{flags:"a",encoding:"utf8",autoClose:!0})),this.updateUserOptIn(m),this.configListener=c.workspace.onDidChangeConfiguration(function(){return v.updateUserOptIn(m)})}return h.prototype.updateUserOptIn=function(p){var d=c.workspace.getConfiguration(h.TELEMETRY_CONFIG_ID);this.userOptIn!==d.get(h.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=d.get(h.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(p):this.dispose())},h.prototype.createAppInsightsClient=function(p){u.defaultClient?(this.appInsightsClient=new u.TelemetryClient(p),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(u.setup(p).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=u.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),c&&c.env&&(this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId]=c.env.machineId,this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId]=c.env.sessionId),p&&p.indexOf("AIF-")===0&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1",this.firstParty=!0)},h.prototype.getCommonProperties=function(){var p=Object.create(null);if(p["common.os"]=T.platform(),p["common.platformversion"]=(T.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),p["common.extname"]=this.extensionId,p["common.extversion"]=this.extensionVersion,c&&c.env){switch(p["common.vscodemachineid"]=c.env.machineId,p["common.vscodesessionid"]=c.env.sessionId,p["common.vscodeversion"]=c.version,c.env.uiKind){case c.UIKind.Web:p["common.uikind"]="web";break;case c.UIKind.Desktop:p["common.uikind"]="desktop";break;default:p["common.uikind"]="unknown"}p["common.remotename"]=this.cleanRemoteName(c.env.remoteName)}return p},h.prototype.cleanRemoteName=function(p){if(!p)return"none";var d="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(function(m){p.indexOf(m+"+")===0&&(d=m)}),d},h.prototype.shouldSendErrorTelemetry=function(){return this.firstParty?this.cleanRemoteName(c.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===c.ExtensionKind.Workspace||c.env.uiKind===c.UIKind.Web):!0},Object.defineProperty(h.prototype,"extension",{get:function(){return this._extension===void 0&&(this._extension=c.extensions.getExtension(this.extensionId)),this._extension},enumerable:!0,configurable:!0}),h.prototype.cloneAndChange=function(p,d){if(p===null||typeof p!="object"||typeof d!="function")return p;var m={};for(var b in p)m[b]=d(b,p[b]);return m},h.prototype.anonymizeFilePaths=function(p,d){if(p==null)return"";var m=[new RegExp(c.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")];this.extension&&m.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));var b=p;if(d){for(var v=[],_=0,E=m;_<E.length;_++)for(var N=E[_];;){var D=N.exec(p);if(!D)break;v.push([D.index,N.lastIndex])}var L=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,I=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g,q=0;b="";for(var A=function(){var x=I.exec(p);if(!x)return"break";!L.test(x[0])&&v.every(function(H){var B=H[0],z=H[1];return x.index<B||x.index>=z})&&(b+=p.substring(q,x.index)+"<REDACTED: user-file-path>",q=I.lastIndex)};;){var U=A();if(U==="break")break}q<p.length&&(b+=p.substr(q))}for(var O=0,F=m;O<F.length;O++){var N=F[O];b=b.replace(N,"")}return b},h.prototype.sendTelemetryEvent=function(p,d,m){var b=this;if(this.userOptIn&&p&&this.appInsightsClient){var v=this.cloneAndChange(d,function(_,E){return b.anonymizeFilePaths(E,b.firstParty)});this.appInsightsClient.trackEvent({name:this.extensionId+"/"+p,properties:v,measurements:m}),this.logStream&&this.logStream.write("telemetry/"+p+" "+JSON.stringify({properties:d,measurements:m})+`
`)}},h.prototype.sendTelemetryErrorEvent=function(p,d,m,b){var v=this;if(this.userOptIn&&p&&this.appInsightsClient){var _=this.cloneAndChange(d,function(E,N){return v.shouldSendErrorTelemetry()?v.anonymizeFilePaths(N,v.firstParty):b===void 0||b.indexOf(E)!==-1?"REDACTED":v.anonymizeFilePaths(N,v.firstParty)});this.appInsightsClient.trackEvent({name:this.extensionId+"/"+p,properties:_,measurements:m}),this.logStream&&this.logStream.write("telemetry/"+p+" "+JSON.stringify({properties:d,measurements:m})+`
`)}},h.prototype.sendTelemetryException=function(p,d,m){var b=this;if(this.shouldSendErrorTelemetry()&&this.userOptIn&&p&&this.appInsightsClient){var v=this.cloneAndChange(d,function(_,E){return b.anonymizeFilePaths(E,b.firstParty)});this.appInsightsClient.trackException({exception:p,properties:v,measurements:m}),this.logStream&&this.logStream.write("telemetry/"+p.name+" "+p.message+" "+JSON.stringify({properties:d,measurements:m})+`
`)}},h.prototype.dispose=function(){var p=this;this.configListener.dispose();var d=new Promise(function(b){if(!p.logStream)return b(void 0);p.logStream.on("finish",b),p.logStream.end()}),m=new Promise(function(b){p.appInsightsClient?p.appInsightsClient.flush({callback:function(){p.appInsightsClient=void 0,b(void 0)}}):b(void 0)});return Promise.all([m,d])},h.TELEMETRY_CONFIG_ID="telemetry",h.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",h}();R.Z=a},9035:(o,R,y)=>{"use strict";var k;k={value:!0};var S=y(5654);R.X7=S.getExperimentationService,k=S.getExperimentationServiceAsync;var T=y(2560);R.aU=T.TargetPopulation},5708:(o,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});class y{constructor(S){this.mementoGlobalStorage=S}async getValue(S,T){return await this.mementoGlobalStorage.get(S)||T}setValue(S,T){this.mementoGlobalStorage.update(S,T)}}R.MementoKeyValueStorage=y},2560:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const k=y(7549);class S{constructor(u,a,h){this.extensionName=u,this.extensionVersion=a,this.targetPopulation=h}static trimVersionSuffix(u){const a=/\-[a-zA-Z0-9]+$/;return u.split(a)[0]}getFilterValue(u){switch(u){case T.ApplicationVersion:return S.trimVersionSuffix(k.version);case T.Build:return k.env.appName;case T.ClientId:return k.env.machineId;case T.ExtensionName:return this.extensionName;case T.ExtensionVersion:return S.trimVersionSuffix(this.extensionVersion);case T.Language:return k.env.language;case T.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let u=new Map,a=Object.values(T);for(let h of a)u.set(h,this.getFilterValue(h));return u}}R.VSCodeFilterProvider=S;var T;(function(c){c.Market="X-MSEdge-Market",c.CorpNet="X-FD-Corpnet",c.ApplicationVersion="X-VSCode-AppVersion",c.Build="X-VSCode-Build",c.ClientId="X-MSEdge-ClientId",c.ExtensionName="X-VSCode-ExtensionName",c.ExtensionVersion="X-VSCode-ExtensionVersion",c.Language="X-VSCode-Language",c.TargetPopulation="X-VSCode-TargetPopulation"})(T=R.Filters||(R.Filters={}));var f;(function(c){c.Team="team",c.Internal="internal",c.Insiders="insider",c.Public="public"})(f=R.TargetPopulation||(R.TargetPopulation={}))},5654:(o,R,y)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const k=y(2560),S=y(4802),T=y(5708),f="https://default.exp-tas.com/vscode/ab",c="query-expfeature",u="VSCode.ABExp.Features",a="abexp.assignmentcontext",h="VSCode.ABExp.FeatureData",p=1e3*60*30;function d(b,v,_,E,N,...D){if(!N)throw new Error("Memento storage was not provided.");const I=[new k.VSCodeFilterProvider(b,v,_),...D],q=new T.MementoKeyValueStorage(N);return new S.ExperimentationService({filterProviders:I,telemetry:E,storageKey:h,keyValueStorage:q,featuresTelemetryPropertyName:u,assignmentContextTelemetryPropertyName:a,telemetryEventName:c,endpoint:f,refetchInterval:p})}R.getExperimentationService=d;async function m(b,v,_,E,N,...D){const L=d(b,v,_,E,N,...D);return await L.initializePromise,L}R.getExperimentationServiceAsync=m},2479:o=>{o.exports=R;function R(y,k){if(y&&k)return R(y)(k);if(typeof y!="function")throw new TypeError("need wrapper function");return Object.keys(y).forEach(function(T){S[T]=y[T]}),S;function S(){for(var T=new Array(arguments.length),f=0;f<T.length;f++)T[f]=arguments[f];var c=y.apply(this,T),u=T[T.length-1];return typeof c=="function"&&c!==u&&Object.keys(u).forEach(function(a){c[a]=u[a]}),c}}},9602:o=>{"use strict";o.exports=function(R){R.prototype[Symbol.iterator]=function*(){for(let y=this.head;y;y=y.next)yield y.value}}},4411:(o,R,y)=>{"use strict";o.exports=k,k.Node=c,k.create=k;function k(u){var a=this;if(a instanceof k||(a=new k),a.tail=null,a.head=null,a.length=0,u&&typeof u.forEach=="function")u.forEach(function(d){a.push(d)});else if(arguments.length>0)for(var h=0,p=arguments.length;h<p;h++)a.push(arguments[h]);return a}k.prototype.removeNode=function(u){if(u.list!==this)throw new Error("removing node which does not belong to this list");var a=u.next,h=u.prev;return a&&(a.prev=h),h&&(h.next=a),u===this.head&&(this.head=a),u===this.tail&&(this.tail=h),u.list.length--,u.next=null,u.prev=null,u.list=null,a},k.prototype.unshiftNode=function(u){if(u!==this.head){u.list&&u.list.removeNode(u);var a=this.head;u.list=this,u.next=a,a&&(a.prev=u),this.head=u,this.tail||(this.tail=u),this.length++}},k.prototype.pushNode=function(u){if(u!==this.tail){u.list&&u.list.removeNode(u);var a=this.tail;u.list=this,u.prev=a,a&&(a.next=u),this.tail=u,this.head||(this.head=u),this.length++}},k.prototype.push=function(){for(var u=0,a=arguments.length;u<a;u++)T(this,arguments[u]);return this.length},k.prototype.unshift=function(){for(var u=0,a=arguments.length;u<a;u++)f(this,arguments[u]);return this.length},k.prototype.pop=function(){if(!!this.tail){var u=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,u}},k.prototype.shift=function(){if(!!this.head){var u=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,u}},k.prototype.forEach=function(u,a){a=a||this;for(var h=this.head,p=0;h!==null;p++)u.call(a,h.value,p,this),h=h.next},k.prototype.forEachReverse=function(u,a){a=a||this;for(var h=this.tail,p=this.length-1;h!==null;p--)u.call(a,h.value,p,this),h=h.prev},k.prototype.get=function(u){for(var a=0,h=this.head;h!==null&&a<u;a++)h=h.next;if(a===u&&h!==null)return h.value},k.prototype.getReverse=function(u){for(var a=0,h=this.tail;h!==null&&a<u;a++)h=h.prev;if(a===u&&h!==null)return h.value},k.prototype.map=function(u,a){a=a||this;for(var h=new k,p=this.head;p!==null;)h.push(u.call(a,p.value,this)),p=p.next;return h},k.prototype.mapReverse=function(u,a){a=a||this;for(var h=new k,p=this.tail;p!==null;)h.push(u.call(a,p.value,this)),p=p.prev;return h},k.prototype.reduce=function(u,a){var h,p=this.head;if(arguments.length>1)h=a;else if(this.head)p=this.head.next,h=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=0;p!==null;d++)h=u(h,p.value,d),p=p.next;return h},k.prototype.reduceReverse=function(u,a){var h,p=this.tail;if(arguments.length>1)h=a;else if(this.tail)p=this.tail.prev,h=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;p!==null;d--)h=u(h,p.value,d),p=p.prev;return h},k.prototype.toArray=function(){for(var u=new Array(this.length),a=0,h=this.head;h!==null;a++)u[a]=h.value,h=h.next;return u},k.prototype.toArrayReverse=function(){for(var u=new Array(this.length),a=0,h=this.tail;h!==null;a++)u[a]=h.value,h=h.prev;return u},k.prototype.slice=function(u,a){a=a||this.length,a<0&&(a+=this.length),u=u||0,u<0&&(u+=this.length);var h=new k;if(a<u||a<0)return h;u<0&&(u=0),a>this.length&&(a=this.length);for(var p=0,d=this.head;d!==null&&p<u;p++)d=d.next;for(;d!==null&&p<a;p++,d=d.next)h.push(d.value);return h},k.prototype.sliceReverse=function(u,a){a=a||this.length,a<0&&(a+=this.length),u=u||0,u<0&&(u+=this.length);var h=new k;if(a<u||a<0)return h;u<0&&(u=0),a>this.length&&(a=this.length);for(var p=this.length,d=this.tail;d!==null&&p>a;p--)d=d.prev;for(;d!==null&&p>u;p--,d=d.prev)h.push(d.value);return h},k.prototype.splice=function(u,a,...h){u>this.length&&(u=this.length-1),u<0&&(u=this.length+u);for(var p=0,d=this.head;d!==null&&p<u;p++)d=d.next;for(var m=[],p=0;d&&p<a;p++)m.push(d.value),d=this.removeNode(d);d===null&&(d=this.tail),d!==this.head&&d!==this.tail&&(d=d.prev);for(var p=0;p<h.length;p++)d=S(this,d,h[p]);return m},k.prototype.reverse=function(){for(var u=this.head,a=this.tail,h=u;h!==null;h=h.prev){var p=h.prev;h.prev=h.next,h.next=p}return this.head=a,this.tail=u,this};function S(u,a,h){var p=a===u.head?new c(h,null,a,u):new c(h,a,a.next,u);return p.next===null&&(u.tail=p),p.prev===null&&(u.head=p),u.length++,p}function T(u,a){u.tail=new c(a,u.tail,null,u),u.head||(u.head=u.tail),u.length++}function f(u,a){u.head=new c(a,null,u.head,u),u.tail||(u.tail=u.head),u.length++}function c(u,a,h,p){if(!(this instanceof c))return new c(u,a,h,p);this.list=p,this.value=u,a?(a.next=this,this.prev=a):this.prev=null,h?(h.prev=this,this.next=h):this.next=null}try{y(9602)(k)}catch(u){}},9329:(o,R,y)=>{o.exports=y(516).Observable},516:(o,R)=>{"use strict";var y;y={value:!0},R.Observable=void 0;function k(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}function S(O,F){for(var x=0;x<F.length;x++){var H=F[x];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(O,H.key,H)}}function T(O,F,x){return F&&S(O.prototype,F),x&&S(O,x),O}var f=function(){return typeof Symbol=="function"},c=function(O){return f()&&Boolean(Symbol[O])},u=function(O){return c(O)?Symbol[O]:"@@"+O};f()&&!c("observable")&&(Symbol.observable=Symbol("observable"));var a=u("iterator"),h=u("observable"),p=u("species");function d(O,F){var x=O[F];if(x!=null){if(typeof x!="function")throw new TypeError(x+" is not a function");return x}}function m(O){var F=O.constructor;return F!==void 0&&(F=F[p],F===null&&(F=void 0)),F!==void 0?F:U}function b(O){return O instanceof U}function v(O){v.log?v.log(O):setTimeout(function(){throw O})}function _(O){Promise.resolve().then(function(){try{O()}catch(F){v(F)}})}function E(O){var F=O._cleanup;if(F!==void 0&&(O._cleanup=void 0,!!F))try{if(typeof F=="function")F();else{var x=d(F,"unsubscribe");x&&x.call(F)}}catch(H){v(H)}}function N(O){O._observer=void 0,O._queue=void 0,O._state="closed"}function D(O){var F=O._queue;if(!!F){O._queue=void 0,O._state="ready";for(var x=0;x<F.length&&(L(O,F[x].type,F[x].value),O._state!=="closed");++x);}}function L(O,F,x){O._state="running";var H=O._observer;try{var B=d(H,F);switch(F){case"next":B&&B.call(H,x);break;case"error":if(N(O),B)B.call(H,x);else throw x;break;case"complete":N(O),B&&B.call(H);break}}catch(z){v(z)}O._state==="closed"?E(O):O._state==="running"&&(O._state="ready")}function I(O,F,x){if(O._state!=="closed"){if(O._state==="buffering"){O._queue.push({type:F,value:x});return}if(O._state!=="ready"){O._state="buffering",O._queue=[{type:F,value:x}],_(function(){return D(O)});return}L(O,F,x)}}var q=function(){function O(F,x){k(this,O),this._cleanup=void 0,this._observer=F,this._queue=void 0,this._state="initializing";var H=new A(this);try{this._cleanup=x.call(void 0,H)}catch(B){H.error(B)}this._state==="initializing"&&(this._state="ready")}return T(O,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(N(this),E(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),O}(),A=function(){function O(F){k(this,O),this._subscription=F}return T(O,[{key:"next",value:function(x){I(this._subscription,"next",x)}},{key:"error",value:function(x){I(this._subscription,"error",x)}},{key:"complete",value:function(){I(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),O}(),U=function(){function O(F){if(k(this,O),!(this instanceof O))throw new TypeError("Observable cannot be called as a function");if(typeof F!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=F}return T(O,[{key:"subscribe",value:function(x){return(typeof x!="object"||x===null)&&(x={next:x,error:arguments[1],complete:arguments[2]}),new q(x,this._subscriber)}},{key:"forEach",value:function(x){var H=this;return new Promise(function(B,z){if(typeof x!="function"){z(new TypeError(x+" is not a function"));return}function V(){J.unsubscribe(),B()}var J=H.subscribe({next:function(le){try{x(le,V)}catch(oe){z(oe),J.unsubscribe()}},error:z,complete:B})})}},{key:"map",value:function(x){var H=this;if(typeof x!="function")throw new TypeError(x+" is not a function");var B=m(this);return new B(function(z){return H.subscribe({next:function(V){try{V=x(V)}catch(J){return z.error(J)}z.next(V)},error:function(V){z.error(V)},complete:function(){z.complete()}})})}},{key:"filter",value:function(x){var H=this;if(typeof x!="function")throw new TypeError(x+" is not a function");var B=m(this);return new B(function(z){return H.subscribe({next:function(V){try{if(!x(V))return}catch(J){return z.error(J)}z.next(V)},error:function(V){z.error(V)},complete:function(){z.complete()}})})}},{key:"reduce",value:function(x){var H=this;if(typeof x!="function")throw new TypeError(x+" is not a function");var B=m(this),z=arguments.length>1,V=!1,J=arguments[1],le=J;return new B(function(oe){return H.subscribe({next:function(we){var Z=!V;if(V=!0,!Z||z)try{le=x(le,we)}catch(ne){return oe.error(ne)}else le=we},error:function(we){oe.error(we)},complete:function(){if(!V&&!z)return oe.error(new TypeError("Cannot reduce an empty sequence"));oe.next(le),oe.complete()}})})}},{key:"concat",value:function(){for(var x=this,H=arguments.length,B=new Array(H),z=0;z<H;z++)B[z]=arguments[z];var V=m(this);return new V(function(J){var le,oe=0;function we(Z){le=Z.subscribe({next:function(ne){J.next(ne)},error:function(ne){J.error(ne)},complete:function(){oe===B.length?(le=void 0,J.complete()):we(V.from(B[oe++]))}})}return we(x),function(){le&&(le.unsubscribe(),le=void 0)}})}},{key:"flatMap",value:function(x){var H=this;if(typeof x!="function")throw new TypeError(x+" is not a function");var B=m(this);return new B(function(z){var V=[],J=H.subscribe({next:function(oe){if(x)try{oe=x(oe)}catch(Z){return z.error(Z)}var we=B.from(oe).subscribe({next:function(Z){z.next(Z)},error:function(Z){z.error(Z)},complete:function(){var Z=V.indexOf(we);Z>=0&&V.splice(Z,1),le()}});V.push(we)},error:function(oe){z.error(oe)},complete:function(){le()}});function le(){J.closed&&V.length===0&&z.complete()}return function(){V.forEach(function(oe){return oe.unsubscribe()}),J.unsubscribe()}})}},{key:h,value:function(){return this}}],[{key:"from",value:function(x){var H=typeof this=="function"?this:O;if(x==null)throw new TypeError(x+" is not an object");var B=d(x,h);if(B){var z=B.call(x);if(Object(z)!==z)throw new TypeError(z+" is not an object");return b(z)&&z.constructor===H?z:new H(function(V){return z.subscribe(V)})}if(c("iterator")&&(B=d(x,a),B))return new H(function(V){_(function(){if(!V.closed){var J=!0,le=!1,oe=void 0;try{for(var we=B.call(x)[Symbol.iterator](),Z;!(J=(Z=we.next()).done);J=!0){var ne=Z.value;if(V.next(ne),V.closed)return}}catch(te){le=!0,oe=te}finally{try{!J&&we.return!=null&&we.return()}finally{if(le)throw oe}}V.complete()}})});if(Array.isArray(x))return new H(function(V){_(function(){if(!V.closed){for(var J=0;J<x.length;++J)if(V.next(x[J]),V.closed)return;V.complete()}})});throw new TypeError(x+" is not observable")}},{key:"of",value:function(){for(var x=arguments.length,H=new Array(x),B=0;B<x;B++)H[B]=arguments[B];var z=typeof this=="function"?this:O;return new z(function(V){_(function(){if(!V.closed){for(var J=0;J<H.length;++J)if(V.next(H[J]),V.closed)return;V.complete()}})})}},{key:p,get:function(){return this}}]),O}();R.Observable=U,f()&&Object.defineProperty(U,Symbol("extensions"),{value:{symbol:h,hostReportError:v},configurable:!0})},8921:o=>{"use strict";o.exports=require("@opentelemetry/tracing")},6591:o=>{"use strict";o.exports=require("applicationinsights-native-metrics")},2357:o=>{"use strict";o.exports=require("assert")},7303:o=>{"use strict";o.exports=require("async_hooks")},3129:o=>{"use strict";o.exports=require("child_process")},7082:o=>{"use strict";o.exports=require("console")},7619:o=>{"use strict";o.exports=require("constants")},6417:o=>{"use strict";o.exports=require("crypto")},881:o=>{"use strict";o.exports=require("dns")},8614:o=>{"use strict";o.exports=require("events")},5747:o=>{"use strict";o.exports=require("fs")},8605:o=>{"use strict";o.exports=require("http")},7211:o=>{"use strict";o.exports=require("https")},2282:o=>{"use strict";o.exports=require("module")},1631:o=>{"use strict";o.exports=require("net")},2087:o=>{"use strict";o.exports=require("os")},5622:o=>{"use strict";o.exports=require("path")},2413:o=>{"use strict";o.exports=require("stream")},8213:o=>{"use strict";o.exports=require("timers")},4016:o=>{"use strict";o.exports=require("tls")},3867:o=>{"use strict";o.exports=require("tty")},8835:o=>{"use strict";o.exports=require("url")},1669:o=>{"use strict";o.exports=require("util")},7549:o=>{"use strict";o.exports=require("vscode")},8761:o=>{"use strict";o.exports=require("zlib")}},Xa={};function ye(o){var R=Xa[o];if(R!==void 0)return R.exports;var y=Xa[o]={id:o,loaded:!1,exports:{}};return lc[o].call(y.exports,y,y.exports,ye),y.loaded=!0,y.exports}(()=>{ye.n=o=>{var R=o&&o.__esModule?()=>o.default:()=>o;return ye.d(R,{a:R}),R}})(),(()=>{ye.d=(o,R)=>{for(var y in R)ye.o(R,y)&&!ye.o(o,y)&&Object.defineProperty(o,y,{enumerable:!0,get:R[y]})}})(),(()=>{ye.hmd=o=>(o=Object.create(o),o.children||(o.children=[]),Object.defineProperty(o,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+o.id)}}),o)})(),(()=>{ye.o=(o,R)=>Object.prototype.hasOwnProperty.call(o,R)})(),(()=>{ye.r=o=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}})();var as={};(()=>{"use strict";ye.r(as),ye.d(as,{activate:()=>$g,deactivate:()=>Gg});var o=ye(7549),R=ye(4398),y=Object.defineProperty,k=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n),S;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(S||(S={}));const T="githubPullRequests",f="logLevel";class c{constructor(){k(this,"_outputChannel"),k(this,"_logLevel"),k(this,"_disposable"),this._outputChannel=o.window.createOutputChannel("GitHub Pull Request"),this._disposable=o.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}appendLine(e,n){switch(this._logLevel){case 2:return;case 1:const i=`${new Date().getTime()/1e3}s`,s=n?`${n}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${i}] ${s}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(n?`${n}> ${e}`:`${e}`));return}}debug(e,n){this._logLevel===1&&this.appendLine(e,n)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(o.workspace.getConfiguration(T).get(f)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const a=new c;var h=ye(5622),p=ye(7484),d=ye.n(p),m=ye(4110),b=ye.n(m),v=ye(660),_=ye.n(v),E=Object.defineProperty,N=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);d().extend(b(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),d().extend(_()),d().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function D(t,e){const n=Object.create(null);return t.filter(r=>{const i=e(r);return n[i]?!1:(n[i]=!0,!0)})}function L(t){return t.forEach(e=>e.dispose()),[]}function I(t){return{dispose:t}}function q(t){return I(()=>L(t))}function A(...t){return(e,n=null,r)=>{const i=q(t.map(s=>s(l=>e.call(n,l))));return r&&r.push(i),i}}function U(t,e){return(n,r=null,i)=>t(s=>e(s)&&n.call(r,s),null,i)}function O(t){return(e,n=null,r)=>{const i=t(s=>(i.dispose(),e.call(n,s)),null,r);return i}}function F(t){return/^[a-zA-Z]:\\/.test(t)}function x(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),F(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function H(t,e){return t.reduce((n,r)=>{const i=e(r);return n[i]=[...n[i]||[],r],n},Object.create(null))}function B(t){return!!t.errors}function z(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const n of t.errors)if(!n.field||!n.value||!n.code){e=!1;break}}else e=!1;return e}function V(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:t.stderr?`${t.stderr}. Please check git output for more details`:"Error";let e=t.message,n;if(t.message==="Validation Failed"&&z(t))n=t.errors.map(r=>`Value "${r.value}" cannot be set for field ${r.field} (code: ${r.code})`).join(", ");else if(B(t)&&t.errors)return t.errors.map(r=>typeof r=="string"?r:r.message).join(", ");return n&&(e=`${e}: ${n}`),e}const J=(t,e)=>e(t);async function le(t,e=J){let n;return new Promise((r,i)=>n=t(s=>{try{Promise.resolve(e(s,r,i)).catch(i)}catch(l){i(l)}})).then(r=>(n.dispose(),r),r=>{throw n.dispose(),r})}function oe(t){const e=dayjs(t),n=Date.now();return e.diff(n,"month"),e.diff(n,"month")<1?e.fromNow():e.diff(n,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var we;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(we||(we={}));function Z(t,e){return t<e?-1:t>e?1:0}function ne(t,e,n=0,r=t.length,i=0,s=e.length){for(;n<r&&i<s;n++,i++){const w=t.charCodeAt(n),C=e.charCodeAt(i);if(w<C)return-1;if(w>C)return 1}const l=r-n,g=s-i;return l<g?-1:l>g?1:0}function te(t,e){return he(t,e,0,t.length,0,e.length)}function he(t,e,n=0,r=t.length,i=0,s=e.length){for(;n<r&&i<s;n++,i++){let w=t.charCodeAt(n),C=e.charCodeAt(i);if(w===C)continue;const P=w-C;if(!(P===32&&Se(C))&&!(P===-32&&Se(w)))return ge(w)&&ge(C)?P:ne(t.toLowerCase(),e.toLowerCase(),n,r,i,s)}const l=r-n,g=s-i;return l<g?-1:l>g?1:0}function ge(t){return t>=97&&t<=122}function Se(t){return t>=65&&t<=90}class de{constructor(){N(this,"_value",""),N(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const n=e.charCodeAt(0),r=this._value.charCodeAt(this._pos);return n-r}value(){return this._value[this._pos]}}class fe{constructor(e=!0){this._caseSensitive=e,N(this,"_value"),N(this,"_from"),N(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?ne(e,this._value,0,e.length,this._from,this._to):he(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Ee{constructor(e=!0,n=!0){this._splitOnBackslash=e,this._caseSensitive=n,N(this,"_value"),N(this,"_from"),N(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const n=this._value.charCodeAt(this._to);if(n===47||this._splitOnBackslash&&n===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?ne(e,this._value,0,e.length,this._from,this._to):he(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var Me;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(Me||(Me={}));class lt{constructor(e){this._ignorePathCasing=e,N(this,"_pathIterator"),N(this,"_value"),N(this,"_states",[]),N(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Ee(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return te(e,this._value.scheme);if(this._states[this._stateIdx]===2)return te(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Z(e,this._value.query);if(this._states[this._stateIdx]===5)return Z(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class $e{constructor(){N(this,"segment"),N(this,"value"),N(this,"key"),N(this,"left"),N(this,"mid"),N(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class Ge{constructor(e){N(this,"_iter"),N(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new Ge(new lt(e))}static forPaths(){return new Ge(new Ee)}static forStrings(){return new Ge(new de)}static forConfigKeys(){return new Ge(new fe)}clear(){this._root=void 0}set(e,n){const r=this._iter.reset(e);let i;for(this._root||(this._root=new $e,this._root.segment=r.value()),i=this._root;;){const l=r.cmp(i.segment);if(l>0)i.left||(i.left=new $e,i.left.segment=r.value()),i=i.left;else if(l<0)i.right||(i.right=new $e,i.right.segment=r.value()),i=i.right;else if(r.hasNext())r.next(),i.mid||(i.mid=new $e,i.mid.segment=r.value()),i=i.mid;else break}const s=i.value;return i.value=n,i.key=e,s}get(e){var n;return(n=this._getNode(e))==null?void 0:n.value}_getNode(e){const n=this._iter.reset(e);let r=this._root;for(;r;){const i=n.cmp(r.segment);if(i>0)r=r.left;else if(i<0)r=r.right;else if(n.hasNext())n.next(),r=r.mid;else break}return r}has(e){const n=this._getNode(e);return!((n==null?void 0:n.value)===void 0&&(n==null?void 0:n.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,n){const r=this._iter.reset(e),i=[];let s=this._root;for(;s;){const l=r.cmp(s.segment);if(l>0)i.push([1,s]),s=s.left;else if(l<0)i.push([-1,s]),s=s.right;else if(r.hasNext())r.next(),i.push([0,s]),s=s.mid;else{for(n?(s.left=void 0,s.mid=void 0,s.right=void 0):s.value=void 0;i.length>0&&s.isEmpty();){let[g,w]=i.pop();switch(g){case 1:w.left=void 0;break;case 0:w.mid=void 0;break;case-1:w.right=void 0;break}s=w}break}}}findSubstr(e){const n=this._iter.reset(e);let r=this._root,i;for(;r;){const s=n.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(n.hasNext())n.next(),i=r.value||i,r=r.mid;else break}return r&&r.value||i}findSuperstr(e){const n=this._iter.reset(e);let r=this._root;for(;r;){const i=n.cmp(r.segment);if(i>0)r=r.left;else if(i<0)r=r.right;else if(n.hasNext())n.next(),r=r.mid;else return r.mid?this._entries(r.mid):void 0}}forEach(e){for(const[n,r]of this)e(r,n)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var Ie=Object.defineProperty,De=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n),_e;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(_e||(_e={}));var nt;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(nt||(nt={}));const ke=class{constructor(){De(this,"_providers",new Map),De(this,"_onDidOpenRepository",new o.EventEmitter),De(this,"onDidOpenRepository",this._onDidOpenRepository.event),De(this,"_onDidCloseRepository",new o.EventEmitter),De(this,"onDidCloseRepository",this._onDidCloseRepository.event),De(this,"_onDidChangeState",new o.EventEmitter),De(this,"onDidChangeState",this._onDidChangeState.event),De(this,"_onDidPublish",new o.EventEmitter),De(this,"onDidPublish",this._onDidPublish.event),De(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}registerGitProvider(t){a.appendLine("Registering git provider");const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(n=>this._onDidCloseRepository.fire(n))),this._disposables.push(t.onDidOpenRepository(n=>{a.appendLine(`Repository ${n.rootUri} has been opened`),this._onDidOpenRepository.fire(n)})),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(n=>this._onDidChangeState.fire(n))),t.onDidPublish&&this._disposables.push(t.onDidPublish(n=>this._onDidPublish.fire(n))),t.repositories.forEach(n=>{this._onDidOpenRepository.fire(n)}),{dispose:()=>{const n=t==null?void 0:t.repositories;n&&n.length>0&&n.forEach(r=>this._onDidCloseRepository.fire(r)),this._providers.delete(e)}}}getGitProvider(t){const e=Ge.forUris();return this._providers.forEach(n=>{const r=n.repositories;if(r&&r.length>0)for(const i of r)e.set(i.rootUri,n)}),e.findSubstr(t)}_nextHandle(){return ke._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let nn=ke;De(nn,"_handlePool",0);const rn=new Map;function wn(t,e){rn.set(t,e)}function Je(t){rn.delete(t)}function zt(t){for(const e of rn.values())if(e.hasCommentThread(t))return e;a.appendLine(`Unable to find handler for comment thread ${t.threadId}`)}function bn(t){return JSON.parse(t)}function ct(t){try{return JSON.parse(t.query)}catch(e){}}function os(t){try{return JSON.parse(t.query)}catch(e){}}const Ft=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],ci=o.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function Nr(t,e){try{const{commit:n,baseCommit:r,headCommit:i,isBase:s}=JSON.parse(t.query),l=t.scheme==="review"?n:s?r:i,{size:g,object:w}=await e.getObjectDetails(l,t.fsPath),{mimetype:C}=await e.detectObjectType(w);if(C==="text/plain")return;if(Ft.indexOf(C)>-1){const P=await e.buffer(l,t.fsPath);return o.Uri.parse(`data:${C};label:${h.basename(t.fsPath)};description:${l};size:${g};base64,${P.toString("base64")}`)}}catch(n){return}}function It(t,e,n,r,i,s,l){const g={path:e||t.path,ref:n,commit:r,base:s.base,isOutdated:i,rootPath:l.path};let w=t.path;return s.replaceFileExtension&&(w=`${w}.git`),t.with({scheme:"review",path:w,query:JSON.stringify(g)})}function di(t,e,n,r){const i={prNumber:e,fileName:n,status:r};return t.with({scheme:"filechange",query:JSON.stringify(i)})}function sn(t){try{return t.query?JSON.parse(t.query):void 0}catch(e){}}function xt(t,e,n,r,i,s,l){const g={baseCommit:n,headCommit:r,isBase:s,fileName:i,prNumber:e.number,status:l,remoteName:e.githubRepository.remote.remoteName},w=t.path;return t.with({scheme:"pr",path:w,query:JSON.stringify(g)})}class Pr extends o.EventEmitter{handleUri(e){this.fire(e)}}const hi=new Pr,Ot="GitHub.vscode-pull-request-github",Mn="git",Ln="ghpr",ft="initialize",kn="statechange",Ae="github:focusedReview";var us=ye(4063),ls=ye.n(us),Ce;(function(t){t.LEFT="LEFT",t.RIGHT="RIGHT"})(Ce||(Ce={}));var gt;(function(t){t.DISMISSED="DISMISSED",t.VIEWED="VIEWED",t.UNVIEWED="UNVIEWED"})(gt||(gt={}));var be;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(be||(be={}));class mi{constructor(e,n,r,i,s,l,g,w){this.baseCommit=e,this.status=n,this.fileName=r,this.previousFileName=i,this.patch=s,this.diffHunks=l,this.isPartial=g,this.blobUrl=w}}class pi{constructor(e,n,r,i,s){this.baseCommit=e,this.blobUrl=n,this.status=r,this.fileName=i,this.previousFileName=s}}var cs=Object.defineProperty,ds=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?cs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n),vt;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})(vt||(vt={}));class fi{constructor(e,n,r,i,s,l=!0){this.type=e,this.oldLineNumber=n,this.newLineNumber=r,this.positionInHunk=i,this._raw=s,this.endwithLineBreak=l}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function hs(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class Zn{constructor(e,n,r,i,s){this.oldLineNumber=e,this.oldLength=n,this.newLineNumber=r,this.newLength=i,this.positionInHunk=s,ds(this,"diffLines",[])}}const gi=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function ms(t){let e=0,n=0;for(;(n=t.indexOf("\r",n))!==-1;)n++,e++;return e}function*ps(t){let e=0;for(;e!==-1&&e<t.length;){const n=e;e=t.indexOf(`
`,e);let i=(e!==-1?e:t.length)-n;e!==-1&&(e>0&&t[e-1]==="\r"&&i--,e++),yield t.substr(n,i)}}function*qn(t){const e=ps(t);let n=e.next(),r,i=-1,s=-1,l=-1;for(;!n.done;){const g=n.value;if(gi.test(g)){r&&(yield r,r=void 0),i===-1&&(i=0);const w=gi.exec(g),C=s=Number(w[1]),P=Number(w[3])||1,M=l=Number(w[5]),$=Number(w[7])||1;r=new Zn(C,P,M,$,i),r.diffLines.push(new fi(3,-1,-1,i,g))}else if(r){const w=hs(g);if(w===3)r.diffLines&&r.diffLines.length&&(r.diffLines[r.diffLines.length-1].endwithLineBreak=!1);else{r.diffLines.push(new fi(w,w!==1?s:-1,w!==2?l:-1,i,g));const C=1+ms(g);switch(w){case 0:s+=C,l+=C;break;case 2:s+=C;break;case 1:l+=C;break}}}i!==-1&&++i,n=e.next()}r&&(yield r)}function Ir(t){const e=qn(t);let n=e.next();const r=[],i=[];for(;!n.done;){const s=n.value;r.push(s);for(let l=0;l<s.diffLines.length;l++){const g=s.diffLines[l];if(!(g.type===2||g.type===3))if(g.type===1)i.push(g.text);else{const w=g.text;i.push(w)}}n=e.next()}return r}function fs(t,e){const n=t.split(/\r?\n/),r=qn(e);let i=r.next();const s=[],l=[];let g=0;for(;!i.done;){const w=i.value;s.push(w);const C=w.oldLineNumber;for(let P=g+1;P<C;P++)l.push(n[P-1]);g=C+w.oldLength-1;for(let P=0;P<w.diffLines.length;P++){const M=w.diffLines[P];if(!(M.type===2||M.type===3))if(M.type===1)l.push(M.text);else{const $=M.text;l.push($)}}i=r.next()}if(g<n.length)for(let w=g+1;w<=n.length;w++)l.push(n[w-1]);return l.join(`
`)}function Un(t){switch(t){case"removed":return be.DELETE;case"added":return be.ADD;case"renamed":return be.RENAME;case"modified":return be.MODIFY;default:return be.UNKNOWN}}async function Dr(t,e,n){const r=[];for(let i=0;i<t.length;i++){const s=t[i],l=Un(s.status);if(!s.patch){r.push(new pi(n,s.blob_url,l,s.filename,s.previous_filename));continue}let g=!1;switch(l){case be.DELETE:case be.MODIFY:try{await e.getObjectDetails(n,s.filename),g=!0}catch(P){}break;case be.RENAME:try{await e.getObjectDetails(n,s.previous_filename),g=!0}catch(P){}break}const w=Ir(s.patch),C=!g&&l!==be.ADD;r.push(new mi(n,l,s.filename,s.previous_filename,s.patch,w,C,s.blob_url))}return r}var gs=ye(5747),vs=ye(2087),G=ye(6200),Q=Object.defineProperty,Y=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const ae=/^(?:([^@:]+)@)?([^:/]+):?(.+)$/,ce=/^([a-z-]+):\/\//,me=(t,e=Te.current)=>{const n=Ne(t);return n&&e(n)},pe=class{static fromConfig(t){return dt(Rt,yt(t))}};let Te=pe;Y(Te,"default",dt(Rt,Dt())),Y(Te,"current",pe.default);const Ne=t=>{const e=ce.exec(t);if(e){const[l,g]=e;if(g==="ssh")t=t.slice(l.length);else return}const n=ae.exec(t);if(!n)return;const[,r,i,s]=n;return{User:r,Host:i,path:s}};function Rt(t){return{...t,Hostname:t.Host}}function Dt(t=(0,h.join)((0,vs.homedir)(),".ssh","config")){try{const e=(0,gs.readFileSync)(t).toString();return yt(e)}catch(e){a.appendLine(`${t}: ${e.message}`)}}function yt(t){const e=(0,G.parse)(t);return n=>e.compute(n.Host)}function dt(...t){const e=t.filter(n=>!!n);return n=>e.reduce((r,i)=>({...r,...i(r)}),n)}var Qt=Object.defineProperty,Ar=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Qt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n),Ja;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(Ja||(Ja={}));class _n{constructor(e){if(Ar(this,"type",4),Ar(this,"host",""),Ar(this,"owner",""),Ar(this,"repositoryName",""),Ar(this,"url"),!this.parseSshProtocol(e))try{this.url=o.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(n){a.appendLine(`Failed to parse '${e}'`),o.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const n=me(e);if(!n)return!1;const{Hostname:r,HostName:i,path:s}=n;return this.host=i||r,this.owner=this.getOwnerName(s)||"",this.repositoryName=this.getRepositoryName(s)||"",this.type=2,!0}getHostName(e){const n=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return n&&n.length>=2?n[1].toLocaleLowerCase()==="www.github.com"?"github.com":n[1]:""}getRepositoryName(e){let n=e.replace(/\\/g,"/");n.endsWith("/")&&(n=n.substr(0,n.length-1));const r=n.lastIndexOf("/"),i=n.substr(r+1);if(!(i===""||i==="/"))return i.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let n=e.replace(/\\/g,"/");n.endsWith("/")&&(n=n.substr(0,n.length-1));const r=n.split("/");if(r.length>1)return r[r.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return o.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(n){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const n=this.normalizeUri();if(!n)return!1;const r=e.normalizeUri();return r?n.toString().toLocaleLowerCase()===r.toString().toLocaleLowerCase():!1}}var cc=Object.defineProperty,dc=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?cc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Za{constructor(e,n,r,i){this.ref=e,this.label=n,this.sha=r,dc(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new _n(i)}}var Ze;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})(Ze||(Ze={}));function ys(t){return t.event===4}function hc(t){return t.event===0}function mc(t){return t.event===3}function Vg(t){return t.event===9}function Bg(t){return t.event===7}function jg(t){return t.event===8}function pc(t){return!!t.conclusion}var rt;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(rt||(rt={}));var an;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(an||(an={}));var Ve;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(Ve||(Ve={}));var En;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})(En||(En={}));var ws=ye(6417),fc=ye.n(ws),gc=Object.defineProperty,vc=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?gc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const eo=class{static initialize(t){eo.icons={reactions:{THUMBS_UP:t.asAbsolutePath(h.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath(h.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath(h.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath(h.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath(h.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath(h.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath(h.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath(h.join("resources","icons","reactions","rocket.png"))}}}};let Wt=eo;vc(Wt,"icons");function vi(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var yc=ye(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function to(t){return Object.prototype.toString.call(t)==="[object Object]"}function no(t){var e,n;return to(t)===!1?!1:(e=t.constructor,e===void 0?!0:(n=e.prototype,!(to(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}function wc(t){return t?Object.keys(t).reduce((e,n)=>(e[n.toLowerCase()]=t[n],e),{}):{}}function ro(t,e){const n=Object.assign({},t);return Object.keys(e).forEach(r=>{no(e[r])?r in t?n[r]=ro(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function io(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function bs(t,e,n){if(typeof e=="string"){let[i,s]=e.split(" ");n=Object.assign(s?{method:i,url:s}:{url:i},n)}else n=Object.assign({},e);n.headers=wc(n.headers),io(n),io(n.headers);const r=ro(t||{},n);return t&&t.mediaType.previews.length&&(r.mediaType.previews=t.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=r.mediaType.previews.map(i=>i.replace(/-preview/,"")),r}function bc(t,e){const n=/\?/.test(t)?"&":"?",r=Object.keys(e);return r.length===0?t:t+n+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}const kc=/\{[^}]+\}/g;function _c(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function Ec(t){const e=t.match(kc);return e?e.map(_c).reduce((n,r)=>n.concat(r),[]):[]}function so(t,e){return Object.keys(t).filter(n=>!e.includes(n)).reduce((n,r)=>(n[r]=t[r],n),{})}function ao(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function er(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Fr(t,e,n){return e=t==="+"||t==="#"?ao(e):er(e),n?er(n)+"="+e:e}function tr(t){return t!=null}function ks(t){return t===";"||t==="&"||t==="?"}function Rc(t,e,n,r){var i=t[n],s=[];if(tr(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(Fr(e,i,ks(e)?n:""));else if(r==="*")Array.isArray(i)?i.filter(tr).forEach(function(l){s.push(Fr(e,l,ks(e)?n:""))}):Object.keys(i).forEach(function(l){tr(i[l])&&s.push(Fr(e,i[l],l))});else{const l=[];Array.isArray(i)?i.filter(tr).forEach(function(g){l.push(Fr(e,g))}):Object.keys(i).forEach(function(g){tr(i[g])&&(l.push(er(g)),l.push(Fr(e,i[g].toString())))}),ks(e)?s.push(er(n)+"="+l.join(",")):l.length!==0&&s.push(l.join(","))}else e===";"?tr(i)&&s.push(er(n)):i===""&&(e==="&"||e==="?")?s.push(er(n)+"="):i===""&&s.push("");return s}function Cc(t){return{expand:Sc.bind(null,t)}}function Sc(t,e){var n=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let g="";const w=[];if(n.indexOf(i.charAt(0))!==-1&&(g=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(C){var P=/([^:\*]*)(?::(\d+)|(\*))?/.exec(C);w.push(Rc(e,g,P[1],P[2]||P[3]))}),g&&g!=="+"){var l=",";return g==="?"?l="&":g!=="#"&&(l=g),(w.length!==0?g:"")+w.join(l)}else return w.join(",")}else return ao(s)})}function oo(t){let e=t.method.toUpperCase(),n=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},t.headers),i,s=so(t,["method","baseUrl","url","headers","request","mediaType"]);const l=Ec(n);n=Cc(n).expand(s),/^http/.test(n)||(n=t.baseUrl+n);const g=Object.keys(t).filter(P=>l.includes(P)).concat("baseUrl"),w=so(s,g);if(!/application\/octet-stream/i.test(r.accept)&&(t.mediaType.format&&(r.accept=r.accept.split(/,/).map(P=>P.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const P=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=P.concat(t.mediaType.previews).map(M=>{const $=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${M}-preview${$}`}).join(",")}return["GET","HEAD"].includes(e)?n=bc(n,w):"data"in w?i=w.data:Object.keys(w).length?i=w:r["content-length"]=0,!r["content-type"]&&typeof i!="undefined"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i=="undefined"&&(i=""),Object.assign({method:e,url:n,headers:r},typeof i!="undefined"?{body:i}:null,t.request?{request:t.request}:null)}function Tc(t,e,n){return oo(bs(t,e,n))}function uo(t,e){const n=bs(t,e),r=Tc.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:uo.bind(null,n),merge:bs.bind(null,n),parse:oo})}const Nc=`octokit-endpoint.js/6.0.11 ${vi()}`,Pc=uo(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Nc},mediaType:{format:"",previews:[]}});var Oe=ye(2413),$n=ye(8605),nr=ye(8835),yi=ye(7211),Ct=ye(8761);const Ic=Oe.Readable,on=Symbol("buffer"),_s=Symbol("type");class rr{constructor(){this[_s]="";const e=arguments[0],n=arguments[1],r=[];let i=0;if(e){const l=e,g=Number(l.length);for(let w=0;w<g;w++){const C=l[w];let P;C instanceof Buffer?P=C:ArrayBuffer.isView(C)?P=Buffer.from(C.buffer,C.byteOffset,C.byteLength):C instanceof ArrayBuffer?P=Buffer.from(C):C instanceof rr?P=C[on]:P=Buffer.from(typeof C=="string"?C:String(C)),i+=P.length,r.push(P)}}this[on]=Buffer.concat(r);let s=n&&n.type!==void 0&&String(n.type).toLowerCase();s&&!/[^\u0020-\u007E]/.test(s)&&(this[_s]=s)}get size(){return this[on].length}get type(){return this[_s]}text(){return Promise.resolve(this[on].toString())}arrayBuffer(){const e=this[on],n=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(n)}stream(){const e=new Ic;return e._read=function(){},e.push(this[on]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,n=arguments[0],r=arguments[1];let i,s;n===void 0?i=0:n<0?i=Math.max(e+n,0):i=Math.min(n,e),r===void 0?s=e:r<0?s=Math.max(e+r,0):s=Math.min(r,e);const l=Math.max(s-i,0),w=this[on].slice(i,i+l),C=new rr([],{type:arguments[2]});return C[on]=w,C}}Object.defineProperties(rr.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(rr.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function wt(t,e,n){Error.call(this,t),this.message=t,this.type=e,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}wt.prototype=Object.create(Error.prototype),wt.prototype.constructor=wt,wt.prototype.name="FetchError";let Es;try{Es=require("encoding").convert}catch(t){}const un=Symbol("Body internals"),lo=Oe.PassThrough;function it(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.size;let i=r===void 0?0:r;var s=n.timeout;let l=s===void 0?0:s;t==null?t=null:co(t)?t=Buffer.from(t.toString()):xr(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Oe||(t=Buffer.from(String(t)))),this[un]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=l,t instanceof Oe&&t.on("error",function(g){const w=g.name==="AbortError"?g:new wt(`Invalid response body while trying to fetch ${e.url}: ${g.message}`,"system",g);e[un].error=w})}it.prototype={get body(){return this[un].body},get bodyUsed(){return this[un].disturbed},arrayBuffer(){return ir.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return ir.call(this).then(function(e){return Object.assign(new rr([],{type:t.toLowerCase()}),{[on]:e})})},json(){var t=this;return ir.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(n){return it.Promise.reject(new wt(`invalid json response body at ${t.url} reason: ${n.message}`,"invalid-json"))}})},text(){return ir.call(this).then(function(t){return t.toString()})},buffer(){return ir.call(this)},textConverted(){var t=this;return ir.call(this).then(function(e){return Dc(e,t.headers)})}},Object.defineProperties(it.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),it.mixIn=function(t){for(const e of Object.getOwnPropertyNames(it.prototype))if(!(e in t)){const n=Object.getOwnPropertyDescriptor(it.prototype,e);Object.defineProperty(t,e,n)}};function ir(){var t=this;if(this[un].disturbed)return it.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[un].disturbed=!0,this[un].error)return it.Promise.reject(this[un].error);let e=this.body;if(e===null)return it.Promise.resolve(Buffer.alloc(0));if(xr(e)&&(e=e.stream()),Buffer.isBuffer(e))return it.Promise.resolve(e);if(!(e instanceof Oe))return it.Promise.resolve(Buffer.alloc(0));let n=[],r=0,i=!1;return new it.Promise(function(s,l){let g;t.timeout&&(g=setTimeout(function(){i=!0,l(new wt(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(w){w.name==="AbortError"?(i=!0,l(w)):l(new wt(`Invalid response body while trying to fetch ${t.url}: ${w.message}`,"system",w))}),e.on("data",function(w){if(!(i||w===null)){if(t.size&&r+w.length>t.size){i=!0,l(new wt(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}r+=w.length,n.push(w)}}),e.on("end",function(){if(!i){clearTimeout(g);try{s(Buffer.concat(n,r))}catch(w){l(new wt(`Could not create Buffer from response body for ${t.url}: ${w.message}`,"system",w))}}})})}function Dc(t,e){if(typeof Es!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const n=e.get("content-type");let r="utf-8",i,s;return n&&(i=/charset=([^;]*)/i.exec(n)),s=t.slice(0,1024).toString(),!i&&s&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(s)),!i&&s&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(s),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(s),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&s&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(s)),i&&(r=i.pop(),(r==="gb2312"||r==="gbk")&&(r="gb18030")),Es(t,"UTF-8",r).toString()}function co(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function xr(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function ho(t){let e,n,r=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return r instanceof Oe&&typeof r.getBoundary!="function"&&(e=new lo,n=new lo,r.pipe(e),r.pipe(n),t[un].body=e,r=n),r}function mo(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":co(t)?"application/x-www-form-urlencoded;charset=UTF-8":xr(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof Oe?null:"text/plain;charset=UTF-8"}function po(t){const e=t.body;return e===null?0:xr(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function Ac(t,e){const n=e.body;n===null?t.end():xr(n)?n.stream().pipe(t):Buffer.isBuffer(n)?(t.write(n),t.end()):n.pipe(t)}it.Promise=global.Promise;const fo=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Rs=/[^\t\x20-\x7e\x80-\xff]/;function Or(t){if(t=`${t}`,fo.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function go(t){if(t=`${t}`,Rs.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function sr(t,e){e=e.toLowerCase();for(const n in t)if(n.toLowerCase()===e)return n}const je=Symbol("map");class Mt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[je]=Object.create(null),e instanceof Mt){const n=e.raw(),r=Object.keys(n);for(const i of r)for(const s of n[i])this.append(i,s);return}if(e!=null)if(typeof e=="object"){const n=e[Symbol.iterator];if(n!=null){if(typeof n!="function")throw new TypeError("Header pairs must be iterable");const r=[];for(const i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");r.push(Array.from(i))}for(const i of r){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(const r of Object.keys(e)){const i=e[r];this.append(r,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,Or(e);const n=sr(this[je],e);return n===void 0?null:this[je][n].join(", ")}forEach(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=Cs(this),i=0;for(;i<r.length;){var s=r[i];const l=s[0],g=s[1];e.call(n,g,l,this),r=Cs(this),i++}}set(e,n){e=`${e}`,n=`${n}`,Or(e),go(n);const r=sr(this[je],e);this[je][r!==void 0?r:e]=[n]}append(e,n){e=`${e}`,n=`${n}`,Or(e),go(n);const r=sr(this[je],e);r!==void 0?this[je][r].push(n):this[je][e]=[n]}has(e){return e=`${e}`,Or(e),sr(this[je],e)!==void 0}delete(e){e=`${e}`,Or(e);const n=sr(this[je],e);n!==void 0&&delete this[je][n]}raw(){return this[je]}keys(){return Ts(this,"key")}values(){return Ts(this,"value")}[Symbol.iterator](){return Ts(this,"key+value")}}Mt.prototype.entries=Mt.prototype[Symbol.iterator],Object.defineProperty(Mt.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Mt.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function Cs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[je]).sort().map(e==="key"?function(r){return r.toLowerCase()}:e==="value"?function(r){return t[je][r].join(", ")}:function(r){return[r.toLowerCase(),t[je][r].join(", ")]})}const Ss=Symbol("internal");function Ts(t,e){const n=Object.create(Ns);return n[Ss]={target:t,kind:e,index:0},n}const Ns=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==Ns)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[Ss];const e=t.target,n=t.kind,r=t.index,i=Cs(e,n),s=i.length;return r>=s?{value:void 0,done:!0}:(this[Ss].index=r+1,{value:i[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(Ns,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function Fc(t){const e=Object.assign({__proto__:null},t[je]),n=sr(t[je],"Host");return n!==void 0&&(e[n]=e[n][0]),e}function xc(t){const e=new Mt;for(const n of Object.keys(t))if(!fo.test(n))if(Array.isArray(t[n]))for(const r of t[n])Rs.test(r)||(e[je][n]===void 0?e[je][n]=[r]:e[je][n].push(r));else Rs.test(t[n])||(e[je][n]=[t[n]]);return e}const Rn=Symbol("Response internals"),Oc=$n.STATUS_CODES;class Kt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};it.call(this,e,n);const r=n.status||200,i=new Mt(n.headers);if(e!=null&&!i.has("Content-Type")){const s=mo(e);s&&i.append("Content-Type",s)}this[Rn]={url:n.url,status:r,statusText:n.statusText||Oc[r],headers:i,counter:n.counter}}get url(){return this[Rn].url||""}get status(){return this[Rn].status}get ok(){return this[Rn].status>=200&&this[Rn].status<300}get redirected(){return this[Rn].counter>0}get statusText(){return this[Rn].statusText}get headers(){return this[Rn].headers}clone(){return new Kt(ho(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}it.mixIn(Kt.prototype),Object.defineProperties(Kt.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Kt.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const ln=Symbol("Request internals"),Ps=nr.parse,Mc=nr.format,Lc="destroy"in Oe.Readable.prototype;function wi(t){return typeof t=="object"&&typeof t[ln]=="object"}function qc(t){const e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}class Hn{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;wi(e)?r=Ps(e.url):(e&&e.href?r=Ps(e.href):r=Ps(`${e}`),e={});let i=n.method||e.method||"GET";if(i=i.toUpperCase(),(n.body!=null||wi(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=n.body!=null?n.body:wi(e)&&e.body!==null?ho(e):null;it.call(this,s,{timeout:n.timeout||e.timeout||0,size:n.size||e.size||0});const l=new Mt(n.headers||e.headers||{});if(s!=null&&!l.has("Content-Type")){const w=mo(s);w&&l.append("Content-Type",w)}let g=wi(e)?e.signal:null;if("signal"in n&&(g=n.signal),g!=null&&!qc(g))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[ln]={method:i,redirect:n.redirect||e.redirect||"follow",headers:l,parsedURL:r,signal:g},this.follow=n.follow!==void 0?n.follow:e.follow!==void 0?e.follow:20,this.compress=n.compress!==void 0?n.compress:e.compress!==void 0?e.compress:!0,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent}get method(){return this[ln].method}get url(){return Mc(this[ln].parsedURL)}get headers(){return this[ln].headers}get redirect(){return this[ln].redirect}get signal(){return this[ln].signal}clone(){return new Hn(this)}}it.mixIn(Hn.prototype),Object.defineProperty(Hn.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Hn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Uc(t){const e=t[ln].parsedURL,n=new Mt(t[ln].headers);if(n.has("Accept")||n.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof Oe.Readable&&!Lc)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let r=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(r="0"),t.body!=null){const s=po(t);typeof s=="number"&&(r=String(s))}r&&n.set("Content-Length",r),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),!n.has("Connection")&&!i&&n.set("Connection","close"),Object.assign({},e,{method:t.method,headers:Fc(n),agent:i})}function Mr(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}Mr.prototype=Object.create(Error.prototype),Mr.prototype.constructor=Mr,Mr.prototype.name="AbortError";const vo=Oe.PassThrough,$c=nr.resolve;function Cn(t,e){if(!Cn.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return it.Promise=Cn.Promise,new Cn.Promise(function(n,r){const i=new Hn(t,e),s=Uc(i),l=(s.protocol==="https:"?yi:$n).request,g=i.signal;let w=null;const C=function(){let K=new Mr("The user aborted a request.");r(K),i.body&&i.body instanceof Oe.Readable&&i.body.destroy(K),!(!w||!w.body)&&w.body.emit("error",K)};if(g&&g.aborted){C();return}const P=function(){C(),j()},M=l(s);let $;g&&g.addEventListener("abort",P);function j(){M.abort(),g&&g.removeEventListener("abort",P),clearTimeout($)}i.timeout&&M.once("socket",function(W){$=setTimeout(function(){r(new wt(`network timeout at: ${i.url}`,"request-timeout")),j()},i.timeout)}),M.on("error",function(W){r(new wt(`request to ${i.url} failed, reason: ${W.message}`,"system",W)),j()}),M.on("response",function(W){clearTimeout($);const K=xc(W.headers);if(Cn.isRedirect(W.statusCode)){const re=K.get("Location"),ve=re===null?null:$c(i.url,re);switch(i.redirect){case"error":r(new wt(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),j();return;case"manual":if(ve!==null)try{K.set("Location",ve)}catch(qe){r(qe)}break;case"follow":if(ve===null)break;if(i.counter>=i.follow){r(new wt(`maximum redirect reached at: ${i.url}`,"max-redirect")),j();return}const Le={headers:new Mt(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(W.statusCode!==303&&i.body&&po(i)===null){r(new wt("Cannot follow redirect with body being a readable stream","unsupported-redirect")),j();return}(W.statusCode===303||(W.statusCode===301||W.statusCode===302)&&i.method==="POST")&&(Le.method="GET",Le.body=void 0,Le.headers.delete("content-length")),n(Cn(new Hn(ve,Le))),j();return}}W.once("end",function(){g&&g.removeEventListener("abort",P)});let X=W.pipe(new vo);const ee={url:i.url,status:W.statusCode,statusText:W.statusMessage,headers:K,size:i.size,timeout:i.timeout,counter:i.counter},ie=K.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||ie===null||W.statusCode===204||W.statusCode===304){w=new Kt(X,ee),n(w);return}const ue={flush:Ct.Z_SYNC_FLUSH,finishFlush:Ct.Z_SYNC_FLUSH};if(ie=="gzip"||ie=="x-gzip"){X=X.pipe(Ct.createGunzip(ue)),w=new Kt(X,ee),n(w);return}if(ie=="deflate"||ie=="x-deflate"){W.pipe(new vo).once("data",function(ve){(ve[0]&15)==8?X=X.pipe(Ct.createInflate()):X=X.pipe(Ct.createInflateRaw()),w=new Kt(X,ee),n(w)});return}if(ie=="br"&&typeof Ct.createBrotliDecompress=="function"){X=X.pipe(Ct.createBrotliDecompress()),w=new Kt(X,ee),n(w);return}w=new Kt(X,ee),n(w)}),Ac(M,i)})}Cn.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308},Cn.Promise=global.Promise;const Hc=Cn;class Gc extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Vc=ye(778),Bc=ye.n(Vc);const jc=Bc()(t=>console.warn(t));class Lr extends Error{constructor(e,n,r){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=n,Object.defineProperty(this,"code",{get(){return jc(new Gc("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),n}}),this.headers=r.headers||{};const i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}const zc="5.4.14";function Qc(t){return t.arrayBuffer()}function yo(t){(no(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},n,r;return(t.request&&t.request.fetch||Hc)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(s=>{r=s.url,n=s.status;for(const g of s.headers)e[g[0]]=g[1];if(n===204||n===205)return;if(t.method==="HEAD"){if(n<400)return;throw new Lr(s.statusText,n,{headers:e,request:t})}if(n===304)throw new Lr("Not modified",n,{headers:e,request:t});if(n>=400)return s.text().then(g=>{const w=new Lr(g,n,{headers:e,request:t});try{let C=JSON.parse(w.message);Object.assign(w,C);let P=C.errors;w.message=w.message+": "+P.map(JSON.stringify).join(", ")}catch(C){}throw w});const l=s.headers.get("content-type");return/application\/json/.test(l)?s.json():!l||/^text\/|charset=utf-8$/.test(l)?s.text():Qc(s)}).then(s=>({status:n,url:r,headers:e,data:s})).catch(s=>{throw s instanceof Lr?s:new Lr(s.message,500,{headers:e,request:t})})}function Is(t,e){const n=t.defaults(e);return Object.assign(function(i,s){const l=n.merge(i,s);if(!l.request||!l.request.hook)return yo(n.parse(l));const g=(w,C)=>yo(n.parse(n.merge(w,C)));return Object.assign(g,{endpoint:n,defaults:Is.bind(null,n)}),l.request.hook(g,l)},{endpoint:n,defaults:Is.bind(null,n)})}const bi=Is(Pc,{headers:{"user-agent":`octokit-request.js/${zc} ${vi()}`}}),Wc="4.6.1";class Kc extends Error{constructor(e,n){const r=n.data.errors[0].message;super(r);Object.assign(this,n.data),Object.assign(this,{headers:n.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const Yc=["method","baseUrl","url","headers","request","query","mediaType"],Xc=["query","method","url"],wo=/\/api\/v3\/?$/;function Jc(t,e,n){if(n){if(typeof e=="string"&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const l in n)if(!!Xc.includes(l))return Promise.reject(new Error(`[@octokit/graphql] "${l}" cannot be used as variable name`))}const r=typeof e=="string"?Object.assign({query:e},n):e,i=Object.keys(r).reduce((l,g)=>Yc.includes(g)?(l[g]=r[g],l):(l.variables||(l.variables={}),l.variables[g]=r[g],l),{}),s=r.baseUrl||t.endpoint.DEFAULTS.baseUrl;return wo.test(s)&&(i.url=s.replace(wo,"/api/graphql")),t(i).then(l=>{if(l.data.errors){const g={};for(const w of Object.keys(l.headers))g[w]=l.headers[w];throw new Kc(i,{headers:g,data:l.data})}return l.data.data})}function Ds(t,e){const n=t.defaults(e);return Object.assign((i,s)=>Jc(n,i,s),{defaults:Ds.bind(null,n),endpoint:bi.endpoint})}const Wg=Ds(bi,{headers:{"user-agent":`octokit-graphql.js/${Wc} ${vi()}`},method:"POST",url:"/graphql"});function Zc(t){return Ds(t,{method:"POST",url:"/graphql"})}async function ed(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function td(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function nd(t,e,n,r){const i=e.endpoint.merge(n,r);return i.headers.authorization=td(t),e(i)}const rd=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(ed.bind(null,e),{hook:nd.bind(null,e)})},bo="3.3.1";class As{constructor(e={}){const n=new yc.Collection,r={baseUrl:bi.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:n.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=[e.userAgent,`octokit-core.js/${bo} ${vi()}`].filter(Boolean).join(" "),e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=bi.defaults(r),this.graphql=Zc(this.request).defaults(r),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=n,e.authStrategy){const{authStrategy:s,...l}=e,g=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:l},e.auth));n.wrap("request",g.hook),this.auth=g}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=rd(e.auth);n.wrap("request",s.hook),this.auth=s}this.constructor.plugins.forEach(s=>{Object.assign(this,s(this,e))})}static defaults(e){return class extends this{constructor(...r){const i=r[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var n;const r=this.plugins;return n=class extends this{},n.plugins=r.concat(e.filter(s=>!r.includes(s))),n}}As.VERSION=bo,As.plugins=[];const id="1.0.3";function ko(t){t.hook.wrap("request",(e,n)=>{t.log.debug("request",n);const r=Date.now(),i=t.request.endpoint.parse(n),s=i.url.replace(n.baseUrl,"");return e(n).then(l=>(t.log.info(`${i.method} ${s} - ${l.status} in ${Date.now()-r}ms`),l)).catch(l=>{throw t.log.info(`${i.method} ${s} - ${l.status} in ${Date.now()-r}ms`),l})})}ko.VERSION=id;const sd="2.13.2";function ad(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const n=t.data.incomplete_results,r=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const s=Object.keys(t.data)[0],l=t.data[s];return t.data=l,typeof n!="undefined"&&(t.data.incomplete_results=n),typeof r!="undefined"&&(t.data.repository_selection=r),t.data.total_count=i,t}function Fs(t,e,n){const r=typeof e=="function"?e.endpoint(n):t.request.endpoint(e,n),i=typeof e=="function"?e:t.request,s=r.method,l=r.headers;let g=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!g)return{done:!0};const w=await i({method:s,url:g,headers:l}),C=ad(w);return g=((C.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:C}}})}}function _o(t,e,n,r){return typeof n=="function"&&(r=n,n=void 0),Eo(t,[],Fs(t,e,n)[Symbol.asyncIterator](),r)}function Eo(t,e,n,r){return n.next().then(i=>{if(i.done)return e;let s=!1;function l(){s=!0}return e=e.concat(r?r(i.value,l):i.value.data),s?e:Eo(t,e,n,r)})}const Kg=Object.assign(_o,{iterator:Fs}),od=null;function Yg(t){return typeof t=="string"?od.includes(t):!1}function Ro(t){return{paginate:Object.assign(_o.bind(null,t),{iterator:Fs.bind(null,t)})}}Ro.VERSION=sd;const ud={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},ld="4.12.0";function cd(t,e){const n={};for(const[r,i]of Object.entries(e))for(const[s,l]of Object.entries(i)){const[g,w,C]=l,[P,M]=g.split(/ /),$=Object.assign({method:P,url:M},w);n[r]||(n[r]={});const j=n[r];if(C){j[s]=dd(t,r,s,$,C);continue}j[s]=t.request.defaults($)}return n}function dd(t,e,n,r,i){const s=t.request.defaults(r);function l(...g){let w=s.endpoint.merge(...g);if(i.mapToData)return w=Object.assign({},w,{data:w[i.mapToData],[i.mapToData]:void 0}),s(w);if(i.renamed){const[C,P]=i.renamed;t.log.warn(`octokit.${e}.${n}() has been renamed to octokit.${C}.${P}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const C=s.endpoint.merge(...g);for(const[P,M]of Object.entries(i.renamedParameters))P in C&&(t.log.warn(`"${P}" parameter is deprecated for "octokit.${e}.${n}()". Use "${M}" instead`),M in C||(C[M]=C[P]),delete C[P]);return s(C)}return s(...g)}return Object.assign(l,s)}function Co(t){return cd(t,ud)}Co.VERSION=ld;const hd="18.2.0",md=As.plugin(ko,Co,Ro).defaults({userAgent:`octokit-rest.js/${hd}`});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xs=function(t,e){return xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},xs(t,e)};function cn(t,e){xs(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var se=function(){return se=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},se.apply(this,arguments)};function So(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Xg(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var g=t.length-1;g>=0;g--)(l=t[g])&&(s=(i<3?l(s):i>3?l(e,n,s):l(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function Jg(t,e){return function(n,r){e(n,r,t)}}function Zg(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Sn(t,e,n,r){function i(s){return s instanceof n?s:new n(function(l){l(s)})}return new(n||(n=Promise))(function(s,l){function g(P){try{C(r.next(P))}catch(M){l(M)}}function w(P){try{C(r.throw(P))}catch(M){l(M)}}function C(P){P.done?s(P.value):i(P.value).then(g,w)}C((r=r.apply(t,e||[])).next())})}function Tn(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,l;return l={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function g(C){return function(P){return w([C,P])}}function w(C){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=C[0]&2?i.return:C[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,C[1])).done)return s;switch(i=0,s&&(C=[C[0]&2,s.value]),C[0]){case 0:case 1:s=C;break;case 4:return n.label++,{value:C[1],done:!1};case 5:n.label++,i=C[1],C=[0];continue;case 7:C=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(C[0]===6||C[0]===2)){n=0;continue}if(C[0]===3&&(!s||C[1]>s[0]&&C[1]<s[3])){n.label=C[1];break}if(C[0]===6&&n.label<s[1]){n.label=s[1],s=C;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(C);break}s[2]&&n.ops.pop(),n.trys.pop();continue}C=e.call(t,n)}catch(P){C=[6,P],i=0}finally{r=s=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function ev(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function tv(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function To(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pd(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(g){l={error:g}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return s}function nv(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(pd(arguments[e]));return t}function Os(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],l=0,g=s.length;l<g;l++,i++)r[i]=s[l];return r}function ki(t){return this instanceof ki?(this.v=t,this):new ki(t)}function rv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l($){r[$]&&(i[$]=function(j){return new Promise(function(W,K){s.push([$,j,W,K])>1||g($,j)})})}function g($,j){try{w(r[$](j))}catch(W){M(s[0][3],W)}}function w($){$.value instanceof ki?Promise.resolve($.value.v).then(C,P):M(s[0][2],$)}function C($){g("next",$)}function P($){g("throw",$)}function M($,j){$(j),s.shift(),s.length&&g(s[0][0],s[0][1])}}function iv(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(l){return(n=!n)?{value:ki(t[i](l)),done:i==="return"}:s?s(l):l}:s}}function sv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof To=="function"?To(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(l){return new Promise(function(g,w){l=t[s](l),i(g,w,l.done,l.value)})}}function i(s,l,g,w){Promise.resolve(w).then(function(C){s({value:C,done:g})},l)}}function av(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ov(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function uv(t){return t&&t.__esModule?t:{default:t}}function lv(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function cv(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}var dn=ye(285),Ms="Invariant Violation",No=Object.setPrototypeOf,fd=No===void 0?function(t,e){return t.__proto__=e,t}:No,st=function(t){cn(e,t);function e(n){n===void 0&&(n=Ms);var r=t.call(this,typeof n=="number"?Ms+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return r.framesToPop=1,r.name=Ms,fd(r,e.prototype),r}return e}(Error);function Pe(t,e){if(!t)throw new st(e)}function Po(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=Po("warn"),t.error=Po("error")})(Pe||(Pe={}));var Io={env:{}};if(typeof process=="object")Io=process;else try{Function("stub","process = stub")(Io)}catch(t){}var dv=null;const hv=null;var gd=ye(5035),vd=ye.n(gd),Do=Object.prototype,Ao=Do.toString,yd=Do.hasOwnProperty,Ls=new Map;function Lt(t,e){try{return qs(t,e)}finally{Ls.clear()}}function qs(t,e){if(t===e)return!0;var n=Ao.call(t),r=Ao.call(e);if(n!==r)return!1;switch(n){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(Fo(t,e))return!0;var i=Object.keys(t),s=Object.keys(e),l=i.length;if(l!==s.length)return!1;for(var g=0;g<l;++g)if(!yd.call(e,i[g]))return!1;for(var g=0;g<l;++g){var w=i[g];if(!qs(t[w],e[w]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(Fo(t,e))return!0;for(var C=t.entries(),P=n==="[object Map]";;){var M=C.next();if(M.done)break;var $=M.value,j=$[0],W=$[1];if(!e.has(j)||P&&!qs(W,e.get(j)))return!1}return!0}}return!1}function Fo(t,e){var n=Ls.get(t);if(n){if(n.has(e))return!0}else Ls.set(t,n=new Set);return n.add(e),!1}const mv=null;function pv(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function fv(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function wd(t){return t.kind==="StringValue"}function bd(t){return t.kind==="BooleanValue"}function kd(t){return t.kind==="IntValue"}function _d(t){return t.kind==="FloatValue"}function Ed(t){return t.kind==="Variable"}function Rd(t){return t.kind==="ObjectValue"}function Cd(t){return t.kind==="ListValue"}function Sd(t){return t.kind==="EnumValue"}function Td(t){return t.kind==="NullValue"}function ar(t,e,n,r){if(kd(n)||_d(n))t[e.value]=Number(n.value);else if(bd(n)||wd(n))t[e.value]=n.value;else if(Rd(n)){var i={};n.fields.map(function(l){return ar(i,l.name,l.value,r)}),t[e.value]=i}else if(Ed(n)){var s=(r||{})[n.name.value];t[e.value]=s}else if(Cd(n))t[e.value]=n.values.map(function(l){var g={};return ar(g,e,l,r),g[e.value]});else if(Sd(n))t[e.value]=n.value;else if(Td(n))t[e.value]=null;else throw new st(17)}function Nd(t,e){var n=null;t.directives&&(n={},t.directives.forEach(function(i){n[i.name.value]={},i.arguments&&i.arguments.forEach(function(s){var l=s.name,g=s.value;return ar(n[i.name.value],l,g,e)})}));var r=null;return t.arguments&&t.arguments.length&&(r={},t.arguments.forEach(function(i){var s=i.name,l=i.value;return ar(r,s,l,e)})),xo(t.name.value,r,n)}var Pd=["connection","include","skip","client","rest","export"];function xo(t,e,n){if(n&&n.connection&&n.connection.key)if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var i=e,s={};return r.forEach(function(w){s[w]=i[w]}),n.connection.key+"("+JSON.stringify(s)+")"}else return n.connection.key;var l=t;if(e){var g=vd()(e);l+="("+g+")"}return n&&Object.keys(n).forEach(function(w){Pd.indexOf(w)===-1&&(n[w]&&Object.keys(n[w]).length?l+="@"+w+"("+JSON.stringify(n[w])+")":l+="@"+w)}),l}function Us(t,e){if(t.arguments&&t.arguments.length){var n={};return t.arguments.forEach(function(r){var i=r.name,s=r.value;return ar(n,i,s,e)}),n}return null}function qr(t){return t.alias?t.alias.value:t.name.value}function Nn(t){return t.kind==="Field"}function _i(t){return t.kind==="InlineFragment"}function Ei(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function Ri(t,e){return e===void 0&&(e=!1),se({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Id(t){return t!=null&&typeof t=="object"&&t.type==="json"}function Dd(t){throw new InvariantError(18)}function Oo(t,e){switch(e===void 0&&(e=Dd),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(l){return Oo(l,e)});case"ObjectValue":{for(var n={},r=0,i=t.fields;r<i.length;r++){var s=i[r];n[s.name.value]=Oo(s.value,e)}return n}default:return t.value}}function Ad(t,e){if(t.directives&&t.directives.length){var n={};return t.directives.forEach(function(r){n[r.name.value]=Us(r,e)}),n}return null}function $s(t,e){return e===void 0&&(e={}),Md(t.directives).every(function(n){var r=n.directive,i=n.ifArgument,s=!1;return i.value.kind==="Variable"?(s=e[i.value.name.value],Pe(s!==void 0,13)):s=i.value.value,r.name.value==="skip"?!s:s})}function Fd(t){var e=[];return(0,dn.visit)(t,{Directive:function(n){e.push(n.name.value)}}),e}function Ci(t,e){return Fd(e).some(function(n){return t.indexOf(n)>-1})}function xd(t){return t&&Ci(["client"],t)&&Ci(["export"],t)}function Od(t){var e=t.name.value;return e==="skip"||e==="include"}function Md(t){return t?t.filter(Od).map(function(e){var n=e.arguments,r=e.name.value;Pe(n&&n.length===1,14);var i=n[0];Pe(i.name&&i.name.value==="if",15);var s=i.value;return Pe(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),16),{directive:e,ifArgument:i}}):[]}function Mo(t,e){var n=e,r=[];t.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw new st(11);s.kind==="FragmentDefinition"&&r.push(s)}),typeof n=="undefined"&&(Pe(r.length===1,12),n=r[0].name.value);var i=se(se({},t),{definitions:Os([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],t.definitions)});return i}function Hs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.forEach(function(r){typeof r=="undefined"||r===null||Object.keys(r).forEach(function(i){t[i]=r[i]})}),t}function gv(t){Gn(t);var e=t.definitions.filter(function(n){return n.kind==="OperationDefinition"&&n.operation==="mutation"})[0];return invariant(e,1),e}function Gn(t){Pe(t&&t.kind==="Document",2);var e=t.definitions.filter(function(n){return n.kind!=="FragmentDefinition"}).map(function(n){if(n.kind!=="OperationDefinition")throw new st(3);return n});return Pe(e.length<=1,4),t}function or(t){return Gn(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function vv(t){var e=or(t);return invariant(e,5),e}function Gs(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function Si(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function Ld(t){var e=or(t);return Pe(e&&e.operation==="query",6),e}function qd(t){Pe(t.kind==="Document",7),Pe(t.definitions.length<=1,8);var e=t.definitions[0];return Pe(e.kind==="FragmentDefinition",9),e}function Vs(t){Gn(t);for(var e,n=0,r=t.definitions;n<r.length;n++){var i=r[n];if(i.kind==="OperationDefinition"){var s=i.operation;if(s==="query"||s==="mutation"||s==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw new st(10)}function Ti(t){t===void 0&&(t=[]);var e={};return t.forEach(function(n){e[n.name.value]=n}),e}function Bs(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(n){var r=n.defaultValue;return r}).map(function(n){var r=n.variable,i=n.defaultValue,s={};return ar(s,r.name,i),s});return Hs.apply(void 0,Os([{}],e))}return{}}function yv(t){var e=new Set;if(t.variableDefinitions)for(var n=0,r=t.variableDefinitions;n<r.length;n++){var i=r[n];e.add(i.variable.name.value)}return e}function Lo(t,e,n){var r=0;return t.forEach(function(i,s){e.call(this,i,s,t)&&(t[r++]=i)},n),t.length=r,t}var Ud={kind:"Field",name:{kind:"Name",value:"__typename"}};function qo(t,e){return t.selectionSet.selections.every(function(n){return n.kind==="FragmentSpread"&&qo(e[n.name.value],e)})}function Ni(t){return qo(or(t)||qd(t),Ti(Si(t)))?null:t}function js(t){return function(n){return t.some(function(r){return r.name&&r.name===n.name.value||r.test&&r.test(n)})}}function Uo(t,e){var n=Object.create(null),r=[],i=Object.create(null),s=[],l=Ni((0,dn.visit)(e,{Variable:{enter:function(g,w,C){C.kind!=="VariableDefinition"&&(n[g.name.value]=!0)}},Field:{enter:function(g){if(t&&g.directives){var w=t.some(function(C){return C.remove});if(w&&g.directives&&g.directives.some(js(t)))return g.arguments&&g.arguments.forEach(function(C){C.value.kind==="Variable"&&r.push({name:C.value.name.value})}),g.selectionSet&&Go(g.selectionSet).forEach(function(C){s.push({name:C.name.value})}),null}}},FragmentSpread:{enter:function(g){i[g.name.value]=!0}},Directive:{enter:function(g){if(js(t)(g))return null}}}));return l&&Lo(r,function(g){return!n[g.name]}).length&&(l=Bd(r,l)),l&&Lo(s,function(g){return!i[g.name]}).length&&(l=jd(s,l)),l}function $d(t){return(0,dn.visit)(Gn(t),{SelectionSet:{enter:function(e,n,r){if(!(r&&r.kind==="OperationDefinition")){var i=e.selections;if(!!i){var s=i.some(function(g){return Nn(g)&&(g.name.value==="__typename"||g.name.value.lastIndexOf("__",0)===0)});if(!s){var l=r;if(!(Nn(l)&&l.directives&&l.directives.some(function(g){return g.name.value==="export"})))return se(se({},e),{selections:Os(i,[Ud])})}}}}}})}var Hd={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(n){return n.name.value==="key"})),e}};function Gd(t){return Uo([Hd],Gn(t))}function $o(t,e,n){return n===void 0&&(n=!0),e&&e.selections&&e.selections.some(function(r){return Ho(t,r,n)})}function Ho(t,e,n){return n===void 0&&(n=!0),Nn(e)?e.directives?e.directives.some(js(t))||n&&$o(t,e.selectionSet,n):!1:!0}function wv(t,e){Gn(e);var n;return Ni(visit(e,{SelectionSet:{enter:function(r,i,s,l){var g=l.join("-");if(!n||g===n||!g.startsWith(n))if(r.selections){var w=r.selections.filter(function(C){return Ho(t,C)});return $o(t,r,!1)&&(n=g),__assign(__assign({},r),{selections:w})}else return null}}}))}function Vd(t){return function(n){return t.some(function(r){return n.value&&n.value.kind==="Variable"&&n.value.name&&(r.name===n.value.name.value||r.test&&r.test(n))})}}function Bd(t,e){var n=Vd(t);return Ni((0,dn.visit)(e,{OperationDefinition:{enter:function(r){return se(se({},r),{variableDefinitions:r.variableDefinitions.filter(function(i){return!t.some(function(s){return s.name===i.variable.name.value})})})}},Field:{enter:function(r){var i=t.some(function(l){return l.remove});if(i){var s=0;if(r.arguments.forEach(function(l){n(l)&&(s+=1)}),s===1)return null}}},Argument:{enter:function(r){if(n(r))return null}}}))}function jd(t,e){function n(r){if(t.some(function(i){return i.name===r.name.value}))return null}return Ni((0,dn.visit)(e,{FragmentSpread:{enter:n},FragmentDefinition:{enter:n}}))}function Go(t){var e=[];return t.selections.forEach(function(n){(Nn(n)||_i(n))&&n.selectionSet?Go(n.selectionSet).forEach(function(r){return e.push(r)}):n.kind==="FragmentSpread"&&e.push(n)}),e}function zd(t){var e=Vs(t),n=e.operation;if(n==="query")return t;var r=(0,dn.visit)(t,{OperationDefinition:{enter:function(i){return se(se({},i),{operation:"query"})}}});return r}function Qd(t){Gn(t);var e=Uo([{test:function(n){return n.name.value==="client"},remove:!0}],t);return e&&(e=(0,dn.visit)(e,{FragmentDefinition:{enter:function(n){if(n.selectionSet){var r=n.selectionSet.selections.every(function(i){return Nn(i)&&i.name.value==="__typename"});if(r)return null}}}})),e}var zs=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),Wd=Object.prototype.toString;function Kd(t){return Qs(t,new Map)}function Qs(t,e){switch(Wd.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var n=t.slice(0);return e.set(t,n),n.forEach(function(i,s){n[s]=Qs(i,e)}),n}case"[object Object]":{if(e.has(t))return e.get(t);var r=Object.create(Object.getPrototypeOf(t));return e.set(t,r),Object.keys(t).forEach(function(i){r[i]=Qs(t[i],e)}),r}default:return t}}function Yd(){return typeof process!="undefined"?"production":"development"}function Ws(t){return Yd()===t}function Vo(){return Ws("production")===!0}function Xd(){return Ws("development")===!0}function Ks(){return Ws("test")===!0}function Ys(t){try{return t()}catch(e){console.error&&console.error(e)}}function Vn(t){return t.errors&&t.errors.length}function Bo(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&Bo(t[e])}),t}function bv(t){if(Xd()||Ks()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return Bo(t)}return t}var Jd=Object.prototype.hasOwnProperty;function jo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xs(t)}function Xs(t){var e=t[0]||{},n=t.length;if(n>1){var r=[];e=Js(e,r);for(var i=1;i<n;++i)e=Qo(e,t[i],r)}return e}function zo(t){return t!==null&&typeof t=="object"}function Qo(t,e,n){return zo(e)&&zo(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=Js(t,n)),Object.keys(e).forEach(function(r){var i=e[r];if(Jd.call(t,r)){var s=t[r];i!==s&&(t[r]=Qo(Js(s,n),i,n))}else t[r]=i}),t):e}function Js(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=se({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var Wo=Object.create({});function kv(t,e){e===void 0&&(e="warn"),!Vo()&&!Wo[t]&&(Ks()||(Wo[t]=!0),e==="error"?console.error(t):console.warn(t))}function _v(t){return JSON.parse(JSON.stringify(t))}var Zd=ye(9329),eh=ye.n(Zd),th=eh();const bt=th;function nh(t){for(var e=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];if(e.indexOf(i)<0)throw new st(2)}return t}var Ev=function(t){cn(e,t);function e(n,r){var i=t.call(this,n)||this;return i.link=r,i}return e}(Error);function Pi(t){return t.request.length<=1}function Rv(t){var e=!1;return new Promise(function(n,r){t.subscribe({next:function(i){e||(e=!0,n(i))},error:r})})}var Cv=null;function Sv(t){return new Observable(function(e){t.then(function(n){e.next(n),e.complete()}).catch(e.error.bind(e))})}function Ko(t){return new bt(function(e){e.error(t)})}function rh(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?Gs(e.query):""),e}function ih(t,e){var n=se({},t),r=function(s){typeof s=="function"?n=se({},n,s(n)):n=se({},n,s)},i=function(){return se({},n)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:r}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return sh(e)}}),e}function sh(t){var e=t.query,n=t.variables,r=t.operationName;return JSON.stringify([r,e,n])}function Yo(t,e){return e?e(t):bt.of()}function Ur(t){return typeof t=="function"?new qt(t):t}function Xo(){return new qt(function(){return bt.of()})}function ah(t){return t.length===0?Xo():t.map(Ur).reduce(function(e,n){return e.concat(n)})}function Jo(t,e,n){var r=Ur(e),i=Ur(n||new qt(Yo));return Pi(r)&&Pi(i)?new qt(function(s){return t(s)?r.request(s)||bt.of():i.request(s)||bt.of()}):new qt(function(s,l){return t(s)?r.request(s,l)||bt.of():i.request(s,l)||bt.of()})}var oh=function(t,e){var n=Ur(t);if(Pi(n))return n;var r=Ur(e);return Pi(r)?new qt(function(i){return n.request(i,function(s){return r.request(s)||bt.of()})||bt.of()}):new qt(function(i,s){return n.request(i,function(l){return r.request(l,s)||bt.of()})||bt.of()})},qt=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,n,r){return this.concat(Jo(e,n,r||new t(Yo)))},t.prototype.concat=function(e){return oh(this,e)},t.prototype.request=function(e,n){throw new st(1)},t.empty=Xo,t.from=ah,t.split=Jo,t.execute=Ii,t}();function Ii(t,e){return t.request(ih(e.context,rh(nh(e))))||bt.of()}var uh=ye(7121),Be;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(Be||(Be={}));function Zo(t){return t<7}var $r=function(t){cn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[uh.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(bt);function ur(t){return Array.isArray(t)&&t.length>0}function lh(t){return t.hasOwnProperty("graphQLErrors")}var ch=function(t){var e="";return ur(t.graphQLErrors)&&t.graphQLErrors.forEach(function(n){var r=n?n.message:"Error message not found.";e+="GraphQL error: "+r+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},Pn=function(t){cn(e,t);function e(n){var r=n.graphQLErrors,i=n.networkError,s=n.errorMessage,l=n.extraInfo,g=t.call(this,s)||this;return g.graphQLErrors=r||[],g.networkError=i||null,s?g.message=s:g.message=ch(g),g.extraInfo=l,g.__proto__=e.prototype,g}return e}(Error),Bn;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(Bn||(Bn={}));var dh=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&ur(t.graphQLErrors))},hh=function(t){cn(e,t);function e(n){var r=n.queryManager,i=n.options,s=n.shouldSubscribe,l=s===void 0?!0:s,g=t.call(this,function(C){return g.onSubscribe(C)})||this;g.observers=new Set,g.subscriptions=new Set,g.isTornDown=!1,g.options=i,g.variables=i.variables||{},g.queryId=r.generateQueryId(),g.shouldSubscribe=l;var w=or(i.query);return g.queryName=w&&w.name&&w.name.value,g.queryManager=r,g}return e.prototype.result=function(){var n=this;return new Promise(function(r,i){var s={next:function(g){r(g),n.observers.delete(s),n.observers.size||n.queryManager.removeQuery(n.queryId),setTimeout(function(){l.unsubscribe()},0)},error:i},l=n.subscribe(s)})},e.prototype.currentResult=function(){var n=this.getCurrentResult();return n.data===void 0&&(n.data={}),n},e.prototype.getCurrentResult=function(){if(this.isTornDown){var n=this.lastResult;return{data:!this.lastError&&n&&n.data||void 0,error:this.lastError,loading:!1,networkStatus:Be.error}}var r=this.queryManager.getCurrentQueryResult(this),i=r.data,s=r.partial,l=this.queryManager.queryStore.get(this.queryId),g,w=this.options.fetchPolicy,C=w==="network-only"||w==="no-cache";if(l){var P=l.networkStatus;if(dh(l,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:P,error:new Pn({graphQLErrors:l.graphQLErrors,networkError:l.networkError})};l.variables&&(this.options.variables=se(se({},this.options.variables),l.variables),this.variables=this.options.variables),g={data:i,loading:Zo(P),networkStatus:P},l.graphQLErrors&&this.options.errorPolicy==="all"&&(g.errors=l.graphQLErrors)}else{var M=C||s&&w!=="cache-only";g={data:i,loading:M,networkStatus:M?Be.loading:Be.ready}}return s||this.updateLastResult(se(se({},g),{stale:!1})),se(se({},g),{partial:s})},e.prototype.isDifferentFromLastResult=function(n){var r=this.lastResultSnapshot;return!(r&&n&&r.networkStatus===n.networkStatus&&r.stale===n.stale&&Lt(r.data,n.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var n=this.queryManager.queryStore.get(this.queryId);n&&(n.networkError=null,n.graphQLErrors=[])},e.prototype.refetch=function(n){var r=this.options.fetchPolicy;return r==="cache-only"?Promise.reject(new st(1)):(r!=="no-cache"&&r!=="cache-and-network"&&(r="network-only"),Lt(this.variables,n)||(this.variables=se(se({},this.variables),n)),Lt(this.options.variables,this.variables)||(this.options.variables=se(se({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,se(se({},this.options),{fetchPolicy:r}),Bn.refetch))},e.prototype.fetchMore=function(n){var r=this;Pe(n.updateQuery,2);var i=se(se({},n.query?n:se(se(se({},this.options),n),{variables:se(se({},this.variables),n.variables)})),{fetchPolicy:"network-only"}),s=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(s,i,Bn.normal,this.queryId).then(function(l){return r.updateQuery(function(g){return n.updateQuery(g,{fetchMoreResult:l.data,variables:i.variables})}),r.queryManager.stopQuery(s),l},function(l){throw r.queryManager.stopQuery(s),l})},e.prototype.subscribeToMore=function(n){var r=this,i=this.queryManager.startGraphQLSubscription({query:n.document,variables:n.variables}).subscribe({next:function(s){var l=n.updateQuery;l&&r.updateQuery(function(g,w){var C=w.variables;return l(g,{subscriptionData:s,variables:C})})},error:function(s){if(n.onError){n.onError(s);return}}});return this.subscriptions.add(i),function(){r.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(n){var r=this.options.fetchPolicy;this.options=se(se({},this.options),n),n.pollInterval?this.startPolling(n.pollInterval):n.pollInterval===0&&this.stopPolling();var i=n.fetchPolicy;return this.setVariables(this.options.variables,r!==i&&(r==="cache-only"||r==="standby"||i==="network-only"),n.fetchResults)},e.prototype.setVariables=function(n,r,i){return r===void 0&&(r=!1),i===void 0&&(i=!0),this.isTornDown=!1,n=n||this.variables,!r&&Lt(n,this.variables)?this.observers.size&&i?this.result():Promise.resolve():(this.variables=this.options.variables=n,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(n){var r=this.queryManager,i=r.getQueryWithPreviousResult(this.queryId),s=i.previousResult,l=i.variables,g=i.document,w=Ys(function(){return n(s,{variables:l})});w&&(r.dataStore.markUpdateQueryResult(g,l,w),r.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(n){eu(this),this.options.pollInterval=n,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(n){var r=this.lastResult;return this.lastResult=n,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?n:Kd(n),r},e.prototype.onSubscribe=function(n){var r=this;try{var i=n._subscription._observer;i&&!i.error&&(i.error=mh)}catch(l){}var s=!this.observers.size;return this.observers.add(n),n.next&&this.lastResult&&n.next(this.lastResult),n.error&&this.lastError&&n.error(this.lastError),s&&this.setUpQuery(),function(){r.observers.delete(n)&&!r.observers.size&&r.tearDownQuery()}},e.prototype.setUpQuery=function(){var n=this,r=this,i=r.queryManager,s=r.queryId;this.shouldSubscribe&&i.addObservableQuery(s,this),this.options.pollInterval&&(eu(this),i.startPollingQuery(this.options,s));var l=function(g){n.updateLastResult(se(se({},n.lastResult),{errors:g.graphQLErrors,networkStatus:Be.error,loading:!1})),Zs(n.observers,"error",n.lastError=g)};i.observeQuery(s,this.options,{next:function(g){if(n.lastError||n.isDifferentFromLastResult(g)){var w=n.updateLastResult(g),C=n.options,P=C.query,M=C.variables,$=C.fetchPolicy;i.transform(P).hasClientExports?i.getLocalState().addExportedVariables(P,M).then(function(j){var W=n.variables;n.variables=n.options.variables=j,!g.loading&&w&&$!=="cache-only"&&i.transform(P).serverQuery&&!Lt(W,j)?n.refetch():Zs(n.observers,"next",g)}):Zs(n.observers,"next",g)}},error:l}).catch(l)},e.prototype.tearDownQuery=function(){var n=this.queryManager;this.isTornDown=!0,n.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(r){return r.unsubscribe()}),this.subscriptions.clear(),n.removeObservableQuery(this.queryId),n.stopQuery(this.queryId),this.observers.clear()},e}($r);function mh(t){}function Zs(t,e,n){var r=[];t.forEach(function(i){return i[e]&&r.push(i)}),r.forEach(function(i){return i[e](n)})}function eu(t){var e=t.options.fetchPolicy;Pe(e!=="cache-first"&&e!=="cache-only",3)}var ph=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,n,r){this.store[e]={mutation:n,variables:r||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,n){var r=this.store[e];r&&(r.loading=!1,r.error=n)},t.prototype.markMutationResult=function(e){var n=this.store[e];n&&(n.loading=!1,n.error=null)},t.prototype.reset=function(){this.store={}},t}(),fh=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var n=this.store[e.queryId];Pe(!n||n.document===e.document||Lt(n.document,e.document),19);var r=!1,i=null;e.storePreviousVariables&&n&&n.networkStatus!==Be.loading&&(Lt(n.variables,e.variables)||(r=!0,i=n.variables));var s;r?s=Be.setVariables:e.isPoll?s=Be.poll:e.isRefetch?s=Be.refetch:s=Be.loading;var l=[];n&&n.graphQLErrors&&(l=n.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:l,networkStatus:s,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=Be.fetchMore)},t.prototype.markQueryResult=function(e,n,r){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=ur(n.errors)?n.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=Be.ready,typeof r=="string"&&this.store[r]&&(this.store[r].networkStatus=Be.ready))},t.prototype.markQueryError=function(e,n,r){!this.store||!this.store[e]||(this.store[e].networkError=n,this.store[e].networkStatus=Be.error,typeof r=="string"&&this.markQueryResultClient(r,!0))},t.prototype.markQueryResultClient=function(e,n){var r=this.store&&this.store[e];r&&(r.networkError=null,r.previousVariables=null,n&&(r.networkStatus=Be.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var n=this;Object.keys(this.store).forEach(function(r){e.indexOf(r)<0?n.stopQuery(r):n.store[r].networkStatus=Be.loading})},t}();function gh(t){return t.charAt(0).toUpperCase()+t.slice(1)}var tu=function(){function t(e){var n=e.cache,r=e.client,i=e.resolvers,s=e.fragmentMatcher;this.cache=n,r&&(this.client=r),i&&this.addResolvers(i),s&&this.setFragmentMatcher(s)}return t.prototype.addResolvers=function(e){var n=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(r){n.resolvers=jo(n.resolvers,r)}):this.resolvers=jo(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var n=e.document,r=e.remoteResult,i=e.context,s=e.variables,l=e.onlyRunForcedResolvers,g=l===void 0?!1:l;return Sn(this,void 0,void 0,function(){return Tn(this,function(w){return n?[2,this.resolveDocument(n,r.data,i,s,this.fragmentMatcher,g).then(function(C){return se(se({},r),{data:C.result})})]:[2,r]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return Ci(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?Qd(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var n=this.cache,r=se(se({},e),{cache:n,getCacheKey:function(i){if(n.config)return n.config.dataIdFromObject(i);Pe(!1,6)}});return r},t.prototype.addExportedVariables=function(e,n,r){return n===void 0&&(n={}),r===void 0&&(r={}),Sn(this,void 0,void 0,function(){return Tn(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,n)||{},this.prepareContext(r),n).then(function(s){return se(se({},n),s.exportedVariables)})]:[2,se({},n)]})})},t.prototype.shouldForceResolvers=function(e){var n=!1;return(0,dn.visit)(e,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(n=r.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),n))return dn.BREAK}}}),n},t.prototype.buildRootValueFromCache=function(e,n){return this.cache.diff({query:zd(e),variables:n,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,n,r,i,s,l){return r===void 0&&(r={}),i===void 0&&(i={}),s===void 0&&(s=function(){return!0}),l===void 0&&(l=!1),Sn(this,void 0,void 0,function(){var g,w,C,P,M,$,j,W,K;return Tn(this,function(X){return g=Vs(e),w=Si(e),C=Ti(w),P=g.operation,M=P?gh(P):"Query",$=this,j=$.cache,W=$.client,K={fragmentMap:C,context:se(se({},r),{cache:j,client:W}),variables:i,fragmentMatcher:s,defaultOperationType:M,exportedVariables:{},onlyRunForcedResolvers:l},[2,this.resolveSelectionSet(g.selectionSet,n,K).then(function(ee){return{result:ee,exportedVariables:K.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,n,r){return Sn(this,void 0,void 0,function(){var i,s,l,g,w,C=this;return Tn(this,function(P){return i=r.fragmentMap,s=r.context,l=r.variables,g=[n],w=function(M){return Sn(C,void 0,void 0,function(){var $,j;return Tn(this,function(W){return $s(M,l)?Nn(M)?[2,this.resolveField(M,n,r).then(function(K){var X;typeof K!="undefined"&&g.push((X={},X[qr(M)]=K,X))})]:(_i(M)?$=M:($=i[M.name.value],Pe($,7)),$&&$.typeCondition&&(j=$.typeCondition.name.value,r.fragmentMatcher(n,j,s))?[2,this.resolveSelectionSet($.selectionSet,n,r).then(function(K){g.push(K)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(w)).then(function(){return Xs(g)})]})})},t.prototype.resolveField=function(e,n,r){return Sn(this,void 0,void 0,function(){var i,s,l,g,w,C,P,M,$,j=this;return Tn(this,function(W){return i=r.variables,s=e.name.value,l=qr(e),g=s!==l,w=n[l]||n[s],C=Promise.resolve(w),(!r.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(P=n.__typename||r.defaultOperationType,M=this.resolvers&&this.resolvers[P],M&&($=M[g?s:l],$&&(C=Promise.resolve($(n,Us(e,i),r.context,{field:e,fragmentMap:r.fragmentMap}))))),[2,C.then(function(K){if(K===void 0&&(K=w),e.directives&&e.directives.forEach(function(X){X.name.value==="export"&&X.arguments&&X.arguments.forEach(function(ee){ee.name.value==="as"&&ee.value.kind==="StringValue"&&(r.exportedVariables[ee.value.value]=K)})}),!e.selectionSet||K==null)return K;if(Array.isArray(K))return j.resolveSubSelectedArray(e,K,r);if(e.selectionSet)return j.resolveSelectionSet(e.selectionSet,K,r)})]})})},t.prototype.resolveSubSelectedArray=function(e,n,r){var i=this;return Promise.all(n.map(function(s){if(s===null)return null;if(Array.isArray(s))return i.resolveSubSelectedArray(e,s,r);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,s,r)}))},t}();function nu(t){var e=new Set,n=null;return new $r(function(r){return e.add(r),n=n||t.subscribe({next:function(i){e.forEach(function(s){return s.next&&s.next(i)})},error:function(i){e.forEach(function(s){return s.error&&s.error(i)})},complete:function(){e.forEach(function(i){return i.complete&&i.complete()})}}),function(){e.delete(r)&&!e.size&&n&&(n.unsubscribe(),n=null)}})}function vh(t,e){return new $r(function(n){var r=n.next,i=n.error,s=n.complete,l=0,g=!1,w={next:function(P){++l,new Promise(function(M){M(e(P))}).then(function(M){--l,r&&r.call(n,M),g&&w.complete()},function(M){--l,i&&i.call(n,M)})},error:function(P){i&&i.call(n,P)},complete:function(){g=!0,l||s&&s.call(n)}},C=t.subscribe(w);return function(){return C.unsubscribe()}})}var yh=Object.prototype.hasOwnProperty,wh=function(){function t(e){var n=e.link,r=e.queryDeduplication,i=r===void 0?!1:r,s=e.store,l=e.onBroadcast,g=l===void 0?function(){}:l,w=e.ssrMode,C=w===void 0?!1:w,P=e.clientAwareness,M=P===void 0?{}:P,$=e.localState,j=e.assumeImmutableResults;this.mutationStore=new ph,this.queryStore=new fh,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(zs?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=n,this.queryDeduplication=i,this.dataStore=s,this.onBroadcast=g,this.clientAwareness=M,this.localState=$||new tu({cache:s.getCache()}),this.ssrMode=C,this.assumeImmutableResults=!!j}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(n,r){e.stopQueryNoBroadcast(r)}),this.fetchQueryRejectFns.forEach(function(n){n(new st(8))})},t.prototype.mutate=function(e){var n=e.mutation,r=e.variables,i=e.optimisticResponse,s=e.updateQueries,l=e.refetchQueries,g=l===void 0?[]:l,w=e.awaitRefetchQueries,C=w===void 0?!1:w,P=e.update,M=e.errorPolicy,$=M===void 0?"none":M,j=e.fetchPolicy,W=e.context,K=W===void 0?{}:W;return Sn(this,void 0,void 0,function(){var X,ee,ie,ue=this;return Tn(this,function(re){switch(re.label){case 0:return Pe(n,9),Pe(!j||j==="no-cache",10),X=this.generateQueryId(),n=this.transform(n).document,this.setQuery(X,function(){return{document:n}}),r=this.getVariables(n,r),this.transform(n).hasClientExports?[4,this.localState.addExportedVariables(n,r,K)]:[3,2];case 1:r=re.sent(),re.label=2;case 2:return ee=function(){var ve={};return s&&ue.queries.forEach(function(Le,qe){var Ke=Le.observableQuery;if(Ke){var xe=Ke.queryName;xe&&yh.call(s,xe)&&(ve[qe]={updater:s[xe],query:ue.queryStore.get(qe)})}}),ve},this.mutationStore.initMutation(X,n,r),this.dataStore.markMutationInit({mutationId:X,document:n,variables:r,updateQueries:ee(),update:P,optimisticResponse:i}),this.broadcastQueries(),ie=this,[2,new Promise(function(ve,Le){var qe,Ke;ie.getObservableFromLink(n,se(se({},K),{optimisticResponse:i}),r,!1).subscribe({next:function(xe){if(Vn(xe)&&$==="none"){Ke=new Pn({graphQLErrors:xe.errors});return}ie.mutationStore.markMutationResult(X),j!=="no-cache"&&ie.dataStore.markMutationResult({mutationId:X,result:xe,document:n,variables:r,updateQueries:ee(),update:P}),qe=xe},error:function(xe){ie.mutationStore.markMutationError(X,xe),ie.dataStore.markMutationComplete({mutationId:X,optimisticResponse:i}),ie.broadcastQueries(),ie.setQuery(X,function(){return{document:null}}),Le(new Pn({networkError:xe}))},complete:function(){if(Ke&&ie.mutationStore.markMutationError(X,Ke),ie.dataStore.markMutationComplete({mutationId:X,optimisticResponse:i}),ie.broadcastQueries(),Ke){Le(Ke);return}typeof g=="function"&&(g=g(qe));var xe=[];ur(g)&&g.forEach(function(On){if(typeof On=="string")ie.queries.forEach(function(jt){var pt=jt.observableQuery;pt&&pt.queryName===On&&xe.push(pt.refetch())});else{var ui={query:On.query,variables:On.variables,fetchPolicy:"network-only"};On.context&&(ui.context=On.context),xe.push(ie.query(ui))}}),Promise.all(C?xe:[]).then(function(){ie.setQuery(X,function(){return{document:null}}),$==="ignore"&&qe&&Vn(qe)&&delete qe.errors,ve(qe)})}})})]}})})},t.prototype.fetchQuery=function(e,n,r,i){return Sn(this,void 0,void 0,function(){var s,l,g,w,C,P,M,$,j,W,K,X,ee,ie,ue,re,ve,Le,qe=this;return Tn(this,function(Ke){switch(Ke.label){case 0:return s=n.metadata,l=s===void 0?null:s,g=n.fetchPolicy,w=g===void 0?"cache-first":g,C=n.context,P=C===void 0?{}:C,M=this.transform(n.query).document,$=this.getVariables(M,n.variables),this.transform(M).hasClientExports?[4,this.localState.addExportedVariables(M,$,P)]:[3,2];case 1:$=Ke.sent(),Ke.label=2;case 2:if(n=se(se({},n),{variables:$}),W=w==="network-only"||w==="no-cache",K=W,W||(X=this.dataStore.getCache().diff({query:M,variables:$,returnPartialData:!0,optimistic:!1}),ee=X.complete,ie=X.result,K=!ee||w==="cache-and-network",j=ie),ue=K&&w!=="cache-only"&&w!=="standby",Ci(["live"],M)&&(ue=!0),re=this.idCounter++,ve=w!=="no-cache"?this.updateQueryWatch(e,M,n):void 0,this.setQuery(e,function(){return{document:M,lastRequestId:re,invalidated:!0,cancel:ve}}),this.invalidate(i),this.queryStore.initQuery({queryId:e,document:M,storePreviousVariables:ue,variables:$,isPoll:r===Bn.poll,isRefetch:r===Bn.refetch,metadata:l,fetchMoreForQueryId:i}),this.broadcastQueries(),ue){if(Le=this.fetchRequest({requestId:re,queryId:e,document:M,options:n,fetchMoreForQueryId:i}).catch(function(xe){throw lh(xe)?xe:(re>=qe.getQuery(e).lastRequestId&&(qe.queryStore.markQueryError(e,xe,i),qe.invalidate(e),qe.invalidate(i),qe.broadcastQueries()),new Pn({networkError:xe}))}),w!=="cache-and-network")return[2,Le];Le.catch(function(){})}return this.queryStore.markQueryResultClient(e,!ue),this.invalidate(e),this.invalidate(i),this.transform(M).hasForcedResolvers?[2,this.localState.runResolvers({document:M,remoteResult:{data:j},context:P,variables:$,onlyRunForcedResolvers:!0}).then(function(xe){return qe.markQueryResult(e,xe,n,i),qe.broadcastQueries(),xe})]:(this.broadcastQueries(),[2,{data:j}])}})})},t.prototype.markQueryResult=function(e,n,r,i){var s=r.fetchPolicy,l=r.variables,g=r.errorPolicy;s==="no-cache"?this.setQuery(e,function(){return{newData:{result:n.data,complete:!0}}}):this.dataStore.markQueryResult(n,this.getQuery(e).document,l,i,g==="ignore"||g==="all")},t.prototype.queryListenerForObserver=function(e,n,r){var i=this;function s(l,g){if(r[l])try{r[l](g)}catch(w){}}return function(l,g){if(i.invalidate(e,!1),!!l){var w=i.getQuery(e),C=w.observableQuery,P=w.document,M=C?C.options.fetchPolicy:n.fetchPolicy;if(M!=="standby"){var $=Zo(l.networkStatus),j=C&&C.getLastResult(),W=!!(j&&j.networkStatus!==l.networkStatus),K=n.returnPartialData||!g&&l.previousVariables||W&&n.notifyOnNetworkStatusChange||M==="cache-only"||M==="cache-and-network";if(!($&&!K)){var X=ur(l.graphQLErrors),ee=C&&C.options.errorPolicy||n.errorPolicy||"none";if(ee==="none"&&X||l.networkError)return s("error",new Pn({graphQLErrors:l.graphQLErrors,networkError:l.networkError}));try{var ie=void 0,ue=void 0;if(g)M!=="no-cache"&&M!=="network-only"&&i.setQuery(e,function(){return{newData:null}}),ie=g.result,ue=!g.complete;else{var re=C&&C.getLastError(),ve=ee!=="none"&&(re&&re.graphQLErrors)!==l.graphQLErrors;if(j&&j.data&&!ve)ie=j.data,ue=!1;else{var Le=i.dataStore.getCache().diff({query:P,variables:l.previousVariables||l.variables,returnPartialData:!0,optimistic:!0});ie=Le.result,ue=!Le.complete}}var qe=ue&&!(n.returnPartialData||M==="cache-only"),Ke={data:qe?j&&j.data:ie,loading:$,networkStatus:l.networkStatus,stale:qe};ee==="all"&&X&&(Ke.errors=l.graphQLErrors),s("next",Ke)}catch(xe){s("error",new Pn({networkError:xe}))}}}}}},t.prototype.transform=function(e){var n=this.transformCache;if(!n.has(e)){var r=this.dataStore.getCache(),i=r.transformDocument(e),s=Gd(r.transformForLink(i)),l=this.localState.clientQuery(i),g=this.localState.serverQuery(s),w={document:i,hasClientExports:xd(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:l,serverQuery:g,defaultVars:Bs(or(i))},C=function(P){P&&!n.has(P)&&n.set(P,w)};C(e),C(i),C(l),C(g)}return n.get(e)},t.prototype.getVariables=function(e,n){return se(se({},this.transform(e).defaultVars),n)},t.prototype.watchQuery=function(e,n){n===void 0&&(n=!0),Pe(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var r=se({},e);return new hh({queryManager:this,options:r,shouldSubscribe:n})},t.prototype.query=function(e){var n=this;return Pe(e.query,12),Pe(e.query.kind==="Document",13),Pe(!e.returnPartialData,14),Pe(!e.pollInterval,15),new Promise(function(r,i){var s=n.watchQuery(e,!1);n.fetchQueryRejectFns.set("query:"+s.queryId,i),s.result().then(r,i).then(function(){return n.fetchQueryRejectFns.delete("query:"+s.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,n){this.setQuery(e,function(r){var i=r.listeners;return i.add(n),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,n,r){var i=this,s=this.getQuery(e).cancel;s&&s();var l=function(){var g=null,w=i.getQuery(e).observableQuery;if(w){var C=w.getLastResult();C&&(g=C.data)}return g};return this.dataStore.getCache().watch({query:n,variables:r.variables,optimistic:!0,previousResult:l,callback:function(g){i.setQuery(e,function(){return{invalidated:!0,newData:g}})}})},t.prototype.addObservableQuery=function(e,n){this.setQuery(e,function(){return{observableQuery:n}})},t.prototype.removeObservableQuery=function(e){var n=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),n&&n()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(n){n(new st(16))});var e=[];return this.queries.forEach(function(n,r){var i=n.observableQuery;i&&e.push(r)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var n=this;e===void 0&&(e=!1);var r=[];return this.queries.forEach(function(i,s){var l=i.observableQuery;if(l){var g=l.options.fetchPolicy;l.resetLastResults(),g!=="cache-only"&&(e||g!=="standby")&&r.push(l.refetch()),n.setQuery(s,function(){return{newData:null}}),n.invalidate(s)}}),this.broadcastQueries(),Promise.all(r)},t.prototype.observeQuery=function(e,n,r){return this.addQueryListener(e,this.queryListenerForObserver(e,n,r)),this.fetchQuery(e,n)},t.prototype.startQuery=function(e,n,r){return this.addQueryListener(e,r),this.fetchQuery(e,n).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var n=this,r=e.query,i=e.fetchPolicy,s=e.variables;r=this.transform(r).document,s=this.getVariables(r,s);var l=function(w){return n.getObservableFromLink(r,{},w,!1).map(function(C){if((!i||i!=="no-cache")&&(n.dataStore.markSubscriptionResult(C,r,w),n.broadcastQueries()),Vn(C))throw new Pn({graphQLErrors:C.errors});return C})};if(this.transform(r).hasClientExports){var g=this.localState.addExportedVariables(r,s).then(l);return new $r(function(w){var C=null;return g.then(function(P){return C=P.subscribe(w)},w.error),function(){return C&&C.unsubscribe()}})}return l(s)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(n){return n.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,n){n===void 0&&(n=!0);var r=e.options,i=r.variables,s=r.query,l=r.fetchPolicy,g=r.returnPartialData,w=e.getLastResult(),C=this.getQuery(e.queryId).newData;if(C&&C.complete)return{data:C.result,partial:!1};if(l==="no-cache"||l==="network-only")return{data:void 0,partial:!1};var P=this.dataStore.getCache().diff({query:s,variables:i,previousResult:w?w.data:void 0,returnPartialData:!0,optimistic:n}),M=P.result,$=P.complete;return{data:$||g?M:void 0,partial:!$}},t.prototype.getQueryWithPreviousResult=function(e){var n;if(typeof e=="string"){var r=this.getQuery(e).observableQuery;Pe(r,17),n=r}else n=e;var i=n.options,s=i.variables,l=i.query;return{previousResult:this.getCurrentQueryResult(n,!1).data,variables:s,document:l}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(n,r){n.invalidated&&n.listeners.forEach(function(i){i&&i(e.queryStore.get(r),n.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,n,r,i){var s=this;i===void 0&&(i=this.queryDeduplication);var l,g=this.transform(e).serverQuery;if(g){var w=this,C=w.inFlightLinkObservables,P=w.link,M={query:g,variables:r,operationName:Gs(g)||void 0,context:this.prepareContext(se(se({},n),{forceFetch:!i}))};if(n=M.context,i){var $=C.get(g)||new Map;C.set(g,$);var j=JSON.stringify(r);if(l=$.get(j),!l){$.set(j,l=nu(Ii(P,M)));var W=function(){$.delete(j),$.size||C.delete(g),K.unsubscribe()},K=l.subscribe({next:W,error:W,complete:W})}}else l=nu(Ii(P,M))}else l=$r.of({data:{}}),n=this.prepareContext(n);var X=this.transform(e).clientQuery;return X&&(l=vh(l,function(ee){return s.localState.runResolvers({document:X,remoteResult:ee,context:n,variables:r})})),l},t.prototype.fetchRequest=function(e){var n=this,r=e.requestId,i=e.queryId,s=e.document,l=e.options,g=e.fetchMoreForQueryId,w=l.variables,C=l.errorPolicy,P=C===void 0?"none":C,M=l.fetchPolicy,$,j;return new Promise(function(W,K){var X=n.getObservableFromLink(s,l.context,w),ee="fetchRequest:"+i;n.fetchQueryRejectFns.set(ee,K);var ie=function(){n.fetchQueryRejectFns.delete(ee),n.setQuery(i,function(re){var ve=re.subscriptions;ve.delete(ue)})},ue=X.map(function(re){if(r>=n.getQuery(i).lastRequestId&&(n.markQueryResult(i,re,l,g),n.queryStore.markQueryResult(i,re,g),n.invalidate(i),n.invalidate(g),n.broadcastQueries()),P==="none"&&ur(re.errors))return K(new Pn({graphQLErrors:re.errors}));if(P==="all"&&(j=re.errors),g||M==="no-cache")$=re.data;else{var ve=n.dataStore.getCache().diff({variables:w,query:s,optimistic:!1,returnPartialData:!0}),Le=ve.result,qe=ve.complete;(qe||l.returnPartialData)&&($=Le)}}).subscribe({error:function(re){ie(),K(re)},complete:function(){ie(),W({data:$,errors:j,loading:!1,networkStatus:Be.ready,stale:!1})}});n.setQuery(i,function(re){var ve=re.subscriptions;ve.add(ue)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,n){var r=this.getQuery(e),i=se(se({},r),n(r));this.queries.set(e,i)},t.prototype.invalidate=function(e,n){n===void 0&&(n=!0),e&&this.setQuery(e,function(){return{invalidated:n}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var n=this.localState.prepareContext(e);return se(se({},n),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var n=this.queryStore.get(e);return n&&n.networkStatus!==Be.ready&&n.networkStatus!==Be.error},t.prototype.startPollingQuery=function(e,n,r){var i=this,s=e.pollInterval;if(Pe(s,18),!this.ssrMode){var l=this.pollingInfoByQueryId.get(n);l||this.pollingInfoByQueryId.set(n,l={}),l.interval=s,l.options=se(se({},e),{fetchPolicy:"network-only"});var g=function(){var C=i.pollingInfoByQueryId.get(n);C&&(i.checkInFlight(n)?w():i.fetchQuery(n,C.options,Bn.poll).then(w,w))},w=function(){var C=i.pollingInfoByQueryId.get(n);C&&(clearTimeout(C.timeout),C.timeout=setTimeout(g,C.interval))};r&&this.addQueryListener(n,r),w()}return n},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),bh=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,n,r,i,s){s===void 0&&(s=!1);var l=!Vn(e);s&&Vn(e)&&e.data&&(l=!0),!i&&l&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:n,variables:r})},t.prototype.markSubscriptionResult=function(e,n,r){Vn(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:n,variables:r})},t.prototype.markMutationInit=function(e){var n=this;if(e.optimisticResponse){var r;typeof e.optimisticResponse=="function"?r=e.optimisticResponse(e.variables):r=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(i){var s=n.cache;n.cache=i;try{n.markMutationResult({mutationId:e.mutationId,result:{data:r},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{n.cache=s}},e.mutationId)}},t.prototype.markMutationResult=function(e){var n=this;if(!Vn(e.result)){var r=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],i=e.updateQueries;i&&Object.keys(i).forEach(function(s){var l=i[s],g=l.query,w=l.updater,C=n.cache.diff({query:g.document,variables:g.variables,returnPartialData:!0,optimistic:!1}),P=C.result,M=C.complete;if(M){var $=Ys(function(){return w(P,{mutationResult:e.result,queryName:Gs(g.document)||void 0,queryVariables:g.variables})});$&&r.push({result:$,dataId:"ROOT_QUERY",query:g.document,variables:g.variables})}}),this.cache.performTransaction(function(s){r.forEach(function(g){return s.write(g)});var l=e.update;l&&Ys(function(){return l(s,e.result)})})}},t.prototype.markMutationComplete=function(e){var n=e.mutationId,r=e.optimisticResponse;r&&this.cache.removeOptimistic(n)},t.prototype.markUpdateQueryResult=function(e,n,r){this.cache.write({result:r,dataId:"ROOT_QUERY",variables:n,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),kh="2.6.10",_h=!1,Eh=function(){function t(e){var n=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=e.cache,i=e.ssrMode,s=i===void 0?!1:i,l=e.ssrForceFetchDelay,g=l===void 0?0:l,w=e.connectToDevTools,C=e.queryDeduplication,P=C===void 0?!0:C,M=e.defaultOptions,$=e.assumeImmutableResults,j=$===void 0?!1:$,W=e.resolvers,K=e.typeDefs,X=e.fragmentMatcher,ee=e.name,ie=e.version,ue=e.link;if(!ue&&W&&(ue=qt.empty()),!ue||!r)throw new st(4);this.link=ue,this.cache=r,this.store=new bh(r),this.disableNetworkFetches=s||g>0,this.queryDeduplication=P,this.defaultOptions=M||{},this.typeDefs=K,g&&setTimeout(function(){return n.disableNetworkFetches=!1},g),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var re=!1;(typeof w=="undefined"?re:w&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=kh,this.localState=new tu({cache:r,client:this,resolvers:W,fragmentMatcher:X}),this.queryManager=new wh({link:this.link,store:this.store,queryDeduplication:P,ssrMode:s,clientAwareness:{name:ee,version:ie},localState:this.localState,assumeImmutableResults:j,onBroadcast:function(){n.devToolsHookCb&&n.devToolsHookCb({action:{},state:{queries:n.queryManager.queryStore.getStore(),mutations:n.queryManager.mutationStore.getStore()},dataWithOptimisticResults:n.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=se(se({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=se(se({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=se(se({},this.defaultOptions.query),e)),Pe(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=se(se({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=se(se({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,n){return n===void 0&&(n=!1),this.cache.readQuery(e,n)},t.prototype.readFragment=function(e,n){return n===void 0&&(n=!1),this.cache.readFragment(e,n)},t.prototype.writeQuery=function(e){var n=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),n},t.prototype.writeFragment=function(e){var n=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),n},t.prototype.writeData=function(e){var n=this.cache.writeData(e);return this.queryManager.broadcastQueries(),n},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return Ii(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(n){return n()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(n){return n()}))})},t.prototype.onResetStore=function(e){var n=this;return this.resetStoreCallbacks.push(e),function(){n.resetStoreCallbacks=n.resetStoreCallbacks.filter(function(r){return r!==e})}},t.prototype.onClearStore=function(e){var n=this;return this.clearStoreCallbacks.push(e),function(){n.clearStoreCallbacks=n.clearStoreCallbacks.filter(function(r){return r!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const Tv=null;function Rh(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Di(t)},n={kind:"Document",definitions:[e]};return n}function Ch(t,e){var n={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Di(t)},r={kind:"Document",definitions:[n]};return r}function Di(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return Di(t[0]);var e=[];Object.keys(t).forEach(function(r){var i=Di(t[r]),s={kind:"Field",name:{kind:"Name",value:r},selectionSet:i||void 0};e.push(s)});var n={kind:"SelectionSet",selections:e};return n}var Sh={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},Th=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,n){return n===void 0&&(n=!1),this.read({query:e.query,variables:e.variables,optimistic:n})},t.prototype.readFragment=function(e,n){return n===void 0&&(n=!1),this.read({query:Mo(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:n})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Mo(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var n=e.id,r=e.data;if(typeof n!="undefined"){var i=null;try{i=this.read({rootId:n,optimistic:!1,query:Sh})}catch(g){}var s=i&&i.__typename||"__ClientData",l=Object.assign({__typename:s},r);this.writeFragment({id:n,fragment:Ch(l,s),data:l})}else this.writeQuery({query:Rh(r),data:r})},t}(),ru;(function(t){})(ru||(ru={}));var at=null,iu={},Nh=1,Ph=function(){return function(){function t(){this.id=["slot",Nh++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=at;e;e=e.parent)if(this.id in e.slots){var n=e.slots[this.id];if(n===iu)break;return e!==at&&(at.slots[this.id]=n),!0}return at&&(at.slots[this.id]=iu),!1},t.prototype.getValue=function(){if(this.hasValue())return at.slots[this.id]},t.prototype.withValue=function(e,n,r,i){var s,l=(s={__proto__:null},s[this.id]=e,s),g=at;at={parent:g,slots:l};try{return n.apply(i,r)}finally{at=g}},t.bind=function(e){var n=at;return function(){var r=at;try{return at=n,e.apply(this,arguments)}finally{at=r}}},t.noContext=function(e,n,r){if(at){var i=at;try{return at=null,e.apply(r,n)}finally{at=i}}else return e.apply(r,n)},t}()},ea="@wry/context:Slot",ta=Array,na=ta[ea]||function(){var t=Ph();try{Object.defineProperty(ta,ea,{value:ta[ea]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),ra=na.bind,Ih=na.noContext;function Nv(t,e){return setTimeout(ra(t),e)}function Pv(t){return function(){var e=t.apply(this,arguments),n=ra(e.next),r=ra(e.throw);return new Promise(function(i,s){function l(C,P){try{var M=C.call(e,P)}catch(j){return s(j)}var $=M.done?i:g;Dh(M.value)?M.value.then($,M.done?s:w):$(M.value)}var g=function(C){return l(n,C)},w=function(C){return l(r,C)};g()})}}function Dh(t){return t&&typeof t.then=="function"}var su=null;function Iv(t){if(su.indexOf(t)<0){var e=function(n,r){var i=n[r];n[r]=function(){return Ih(i,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),su.push(t)}return t}function Ah(){}var Fh=function(){function t(e,n){e===void 0&&(e=Infinity),n===void 0&&(n=Ah),this.max=e,this.dispose=n,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var n=this.getEntry(e);return n&&n.value},t.prototype.getEntry=function(e){var n=this.map.get(e);if(n&&n!==this.newest){var r=n.older,i=n.newer;i&&(i.older=r),r&&(r.newer=i),n.older=this.newest,n.older.newer=n,n.newer=null,this.newest=n,n===this.oldest&&(this.oldest=i)}return n},t.prototype.set=function(e,n){var r=this.getEntry(e);return r?r.value=n:(r={key:e,value:n,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var n=this.map.get(e);return n?(n===this.newest&&(this.newest=n.older),n===this.oldest&&(this.oldest=n.newer),n.newer&&(n.newer.older=n.older),n.older&&(n.older.newer=n.newer),this.map.delete(e),this.dispose(n.value,e),!0):!1},t}(),Ai=new na,xh=[],ia=[],Oh=100;function lr(t,e){if(!t)throw new Error(e||"assertion failure")}function Mh(t,e){var n=t.length;return n>0&&n===e.length&&t[n-1]===e[n-1]}function au(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function Lh(t){return t.slice(0)}var qh=function(){function t(e,n){this.fn=e,this.args=n,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(lr(!this.recomputing,"already recomputing"),!(!Uh(this)&&sa(this)))return cr(this)?$h(this):au(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,ou(this),aa(this))},t.prototype.dispose=function(){var e=this;hu(this).forEach(sa),aa(this),this.parents.forEach(function(n){n.setDirty(),mu(n,e)})},t.count=0,t}();function Uh(t){var e=Ai.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),cr(t)?lu(e,t):cu(e,t),e}function $h(t){var e=hu(t);return Ai.withValue(t,Hh,[t]),Vh(t)&&Gh(t),e.forEach(sa),au(t.value)}function Hh(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function cr(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function Gh(t){t.dirty=!1,!cr(t)&&uu(t)}function ou(t){t.parents.forEach(function(e){return lu(e,t)})}function uu(t){t.parents.forEach(function(e){return cu(e,t)})}function lu(t,e){if(lr(t.childValues.has(e)),lr(cr(e)),!t.dirtyChildren)t.dirtyChildren=ia.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),ou(t)}function cu(t,e){lr(t.childValues.has(e)),lr(!cr(e));var n=t.childValues.get(e);n.length===0?t.childValues.set(e,Lh(e.value)):Mh(n,e.value)||t.setDirty(),du(t,e),!cr(t)&&uu(t)}function du(t,e){var n=t.dirtyChildren;n&&(n.delete(e),n.size===0&&(ia.length<Oh&&ia.push(n),t.dirtyChildren=null))}function sa(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function hu(t){var e=xh;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(n,r){mu(t,r),e.push(r)})),lr(t.dirtyChildren===null),e}function mu(t,e){e.parents.delete(t),t.childValues.delete(e),du(t,e)}function Vh(t){if(typeof t.subscribe=="function")try{aa(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function aa(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var oa=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var n=this;return e.forEach(function(r){return n=n.getChildTrie(r)}),n.data||(n.data=Object.create(null))},t.prototype.getChildTrie=function(e){var n=this.weakness&&Bh(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),r=n.get(e);return r||n.set(e,r=new t(this.weakness)),r},t}();function Bh(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var jh=new oa(typeof WeakMap=="function");function zh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jh.lookupArray(t)}var ua=new Set;function Hr(t,e){e===void 0&&(e=Object.create(null));var n=new Fh(e.max||Math.pow(2,16),function(l){return l.dispose()}),r=!!e.disposable,i=e.makeCacheKey||zh;function s(){if(!(r&&!Ai.hasValue())){var l=i.apply(null,arguments);if(l===void 0)return t.apply(null,arguments);var g=Array.prototype.slice.call(arguments),w=n.get(l);w?w.args=g:(w=new qh(t,g),n.set(l,w),w.subscribe=e.subscribe,r&&(w.reportOrphan=function(){return n.delete(l)}));var C=w.recompute();return n.set(l,w),ua.add(n),Ai.hasValue()||(ua.forEach(function(P){return P.clean()}),ua.clear()),r?void 0:C}}return s.dirty=function(){var l=i.apply(null,arguments),g=l!==void 0&&n.get(l);g&&g.setDirty()},s}var pu=!1;function fu(){var t=!pu;return Ks()||(pu=!0),t}var Qh=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,n,r){var i=r.store.get(e.id),s=e.id==="ROOT_QUERY";if(!i)return s;var l=i.__typename,g=l===void 0?s&&"Query":l;return g&&g===n?!0:(fu(),"heuristic")},t}(),Dv=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,n,r){Pe(this.isReady,1);var i=r.store.get(e.id),s=e.id==="ROOT_QUERY";if(!i)return s;var l=i.__typename,g=l===void 0?s&&"Query":l;if(Pe(g,2),g===n)return!0;var w=this.possibleTypesMap[n];return!!(g&&w&&w.indexOf(g)>-1)},t.prototype.parseIntrospectionResult=function(e){var n={};return e.__schema.types.forEach(function(r){(r.kind==="UNION"||r.kind==="INTERFACE")&&(n[r.name]=r.possibleTypes.map(function(i){return i.name}))}),n},t}(),gu=Object.prototype.hasOwnProperty,dr=function(){function t(e){var n=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=Hr(function(r){return n.data[r]},{disposable:!0,makeCacheKey:function(r){return r}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,n){var r=this.data[e];n!==r&&(this.data[e]=n,this.depend.dirty(e))},t.prototype.delete=function(e){gu.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var n=this;e?(Object.keys(e).forEach(function(r){n.set(r,e[r])}),Object.keys(this.data).forEach(function(r){gu.call(e,r)||n.delete(r)})):Object.keys(this.data).forEach(function(r){n.delete(r)})},t}();function vu(t){return new dr(t)}var Wh=function(){function t(e){var n=this,r=e===void 0?{}:e,i=r.cacheKeyRoot,s=i===void 0?new oa(zs):i,l=r.freezeResults,g=l===void 0?!1:l,w=this,C=w.executeStoreQuery,P=w.executeSelectionSet,M=w.executeSubSelectedArray;this.freezeResults=g,this.executeStoreQuery=Hr(function($){return C.call(n,$)},{makeCacheKey:function($){var j=$.query,W=$.rootValue,K=$.contextValue,X=$.variableValues,ee=$.fragmentMatcher;if(K.store instanceof dr)return s.lookup(K.store,j,ee,JSON.stringify(X),W.id)}}),this.executeSelectionSet=Hr(function($){return P.call(n,$)},{makeCacheKey:function($){var j=$.selectionSet,W=$.rootValue,K=$.execContext;if(K.contextValue.store instanceof dr)return s.lookup(K.contextValue.store,j,K.fragmentMatcher,JSON.stringify(K.variableValues),W.id)}}),this.executeSubSelectedArray=Hr(function($){return M.call(n,$)},{makeCacheKey:function($){var j=$.field,W=$.array,K=$.execContext;if(K.contextValue.store instanceof dr)return s.lookup(K.contextValue.store,j,W,JSON.stringify(K.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(se(se({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var n=e.store,r=e.query,i=e.variables,s=e.previousResult,l=e.returnPartialData,g=l===void 0?!0:l,w=e.rootId,C=w===void 0?"ROOT_QUERY":w,P=e.fragmentMatcherFunction,M=e.config,$=Ld(r);i=Hs({},Bs($),i);var j={store:n,dataIdFromObject:M&&M.dataIdFromObject,cacheRedirects:M&&M.cacheRedirects||{}},W=this.executeStoreQuery({query:r,rootValue:{type:"id",id:C,generated:!0,typename:"Query"},contextValue:j,variableValues:i,fragmentMatcher:P}),K=W.missing&&W.missing.length>0;return K&&!g&&W.missing.forEach(function(X){if(!X.tolerable)throw new st(8)}),s&&Lt(s,W.result)&&(W.result=s),{result:W.result,complete:!K}},t.prototype.executeStoreQuery=function(e){var n=e.query,r=e.rootValue,i=e.contextValue,s=e.variableValues,l=e.fragmentMatcher,g=l===void 0?Kh:l,w=Vs(n),C=Si(n),P=Ti(C),M={query:n,fragmentMap:P,contextValue:i,variableValues:s,fragmentMatcher:g};return this.executeSelectionSet({selectionSet:w.selectionSet,rootValue:r,execContext:M})},t.prototype.executeSelectionSet=function(e){var n=this,r=e.selectionSet,i=e.rootValue,s=e.execContext,l=s.fragmentMap,g=s.contextValue,w=s.variableValues,C={result:null},P=[],M=g.store.get(i.id),$=M&&M.__typename||i.id==="ROOT_QUERY"&&"Query"||void 0;function j(W){var K;return W.missing&&(C.missing=C.missing||[],(K=C.missing).push.apply(K,W.missing)),W.result}return r.selections.forEach(function(W){var K;if(!!$s(W,w))if(Nn(W)){var X=j(n.executeField(M,$,W,s));typeof X!="undefined"&&P.push((K={},K[qr(W)]=X,K))}else{var ee=void 0;if(_i(W))ee=W;else if(ee=l[W.name.value],!ee)throw new st(9);var ie=ee.typeCondition&&ee.typeCondition.name.value,ue=!ie||s.fragmentMatcher(i,ie,g);if(ue){var re=n.executeSelectionSet({selectionSet:ee.selectionSet,rootValue:i,execContext:s});ue==="heuristic"&&re.missing&&(re=se(se({},re),{missing:re.missing.map(function(ve){return se(se({},ve),{tolerable:!0})})})),P.push(j(re))}}}),C.result=Xs(P),this.freezeResults,C},t.prototype.executeField=function(e,n,r,i){var s=i.variableValues,l=i.contextValue,g=r.name.value,w=Us(r,s),C={resultKey:qr(r),directives:Ad(r,s)},P=Yh(e,n,g,w,l,C);return Array.isArray(P.result)?this.combineExecResults(P,this.executeSubSelectedArray({field:r,array:P.result,execContext:i})):r.selectionSet?P.result==null?P:this.combineExecResults(P,this.executeSelectionSet({selectionSet:r.selectionSet,rootValue:P.result,execContext:i})):(yu(r,P.result),this.freezeResults,P)},t.prototype.combineExecResults=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r;return e.forEach(function(i){i.missing&&(r=r||[],r.push.apply(r,i.missing))}),{result:e.pop().result,missing:r}},t.prototype.executeSubSelectedArray=function(e){var n=this,r=e.field,i=e.array,s=e.execContext,l;function g(w){return w.missing&&(l=l||[],l.push.apply(l,w.missing)),w.result}return i=i.map(function(w){return w===null?null:Array.isArray(w)?g(n.executeSubSelectedArray({field:r,array:w,execContext:s})):r.selectionSet?g(n.executeSelectionSet({selectionSet:r.selectionSet,rootValue:w,execContext:s})):(yu(r,w),w)}),this.freezeResults,{result:i,missing:l}},t}();function yu(t,e){if(!t.selectionSet&&Ei(e))throw new st(10)}function Kh(){return!0}function Av(t){invariant(isIdValue(t),11)}function Yh(t,e,n,r,i,s){var l=s.resultKey,g=s.directives,w=n;(r||g)&&(w=xo(w,r,g));var C=void 0;if(t&&(C=t[w],typeof C=="undefined"&&i.cacheRedirects&&typeof e=="string")){var P=i.cacheRedirects[e];if(P){var M=P[n];M&&(C=M(t,r,{getCacheKey:function($){var j=i.dataIdFromObject($);return j&&Ri({id:j,typename:$.__typename})}}))}}return typeof C=="undefined"?{result:C,missing:[{object:t,fieldName:w,tolerable:!1}]}:(Id(C)&&(C=C.json),{result:C})}var Fi=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,n){this.data[e]=n},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function Fv(t){return new Fi(t)}var Xh=function(t){cn(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="WriteError",n}return e}(Error);function Jh(t,e){var n=new Xh(`Error writing result to store for query:
 `+JSON.stringify(e));return n.message+=`
`+t.message,n.stack=t.stack,n}var Zh=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var n=e.query,r=e.result,i=e.store,s=i===void 0?vu():i,l=e.variables,g=e.dataIdFromObject,w=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:r,document:n,store:s,variables:l,dataIdFromObject:g,fragmentMatcherFunction:w})},t.prototype.writeResultToStore=function(e){var n=e.dataId,r=e.result,i=e.document,s=e.store,l=s===void 0?vu():s,g=e.variables,w=e.dataIdFromObject,C=e.fragmentMatcherFunction,P=or(i);try{return this.writeSelectionSetToStore({result:r,dataId:n,selectionSet:P.selectionSet,context:{store:l,processedData:{},variables:Hs({},Bs(P),g),dataIdFromObject:w,fragmentMap:Ti(Si(i)),fragmentMatcherFunction:C}})}catch(M){throw Jh(M,i)}},t.prototype.writeSelectionSetToStore=function(e){var n=this,r=e.result,i=e.dataId,s=e.selectionSet,l=e.context,g=l.variables,w=l.store,C=l.fragmentMap;return s.selections.forEach(function(P){var M;if(!!$s(P,g))if(Nn(P)){var $=qr(P),j=r[$];if(typeof j!="undefined")n.writeFieldToStore({dataId:i,value:j,field:P,context:l});else{var W=!1,K=!1;P.directives&&P.directives.length&&(W=P.directives.some(function(Le){return Le.name&&Le.name.value==="defer"}),K=P.directives.some(function(Le){return Le.name&&Le.name.value==="client"})),!W&&!K&&l.fragmentMatcherFunction}}else{var X=void 0;_i(P)?X=P:(X=(C||{})[P.name.value],Pe(X,3));var ee=!0;if(l.fragmentMatcherFunction&&X.typeCondition){var ie=i||"self",ue=Ri({id:ie,typename:void 0}),re={store:new Fi((M={},M[ie]=r,M)),cacheRedirects:{}},ve=l.fragmentMatcherFunction(ue,X.typeCondition.name.value,re);!Vo()&&ve==="heuristic",ee=!!ve}ee&&n.writeSelectionSetToStore({result:r,selectionSet:X.selectionSet,dataId:i,context:l})}}),w},t.prototype.writeFieldToStore=function(e){var n,r=e.field,i=e.value,s=e.dataId,l=e.context,g=l.variables,w=l.dataIdFromObject,C=l.store,P,M,$=Nd(r,g);if(!r.selectionSet||i===null)P=i!=null&&typeof i=="object"?{type:"json",json:i}:i;else if(Array.isArray(i)){var j=s+"."+$;P=this.processArrayValue(i,j,r.selectionSet,l)}else{var W=s+"."+$,K=!0;if(la(W)||(W="$"+W),w){var X=w(i);Pe(!X||!la(X),4),(X||typeof X=="number"&&X===0)&&(W=X,K=!1)}bu(W,r,l.processedData)||this.writeSelectionSetToStore({dataId:W,result:i,selectionSet:r.selectionSet,context:l});var ee=i.__typename;P=Ri({id:W,typename:ee},K),M=C.get(s);var ie=M&&M[$];if(ie!==P&&Ei(ie)){var ue=ie.typename!==void 0,re=ee!==void 0,ve=ue&&re&&ie.typename!==ee;Pe(!K||ie.generated||ve,5),Pe(!ue||re,6),ie.generated&&(ve?K||C.delete(ie.id):wu(ie.id,P.id,C))}}M=C.get(s),(!M||!Lt(P,M[$]))&&C.set(s,se(se({},M),(n={},n[$]=P,n)))},t.prototype.processArrayValue=function(e,n,r,i){var s=this;return e.map(function(l,g){if(l===null)return null;var w=n+"."+g;if(Array.isArray(l))return s.processArrayValue(l,w,r,i);var C=!0;if(i.dataIdFromObject){var P=i.dataIdFromObject(l);P&&(w=P,C=!1)}return bu(w,r,i.processedData)||s.writeSelectionSetToStore({dataId:w,result:l,selectionSet:r,context:i}),Ri({id:w,typename:l.__typename},C)})},t}();function la(t){return t[0]==="$"}function wu(t,e,n){if(t===e)return!1;var r=n.get(t),i=n.get(e),s=!1;Object.keys(r).forEach(function(g){var w=r[g],C=i[g];Ei(w)&&la(w.id)&&Ei(C)&&!Lt(w,C)&&wu(w.id,C.id,n)&&(s=!0)}),n.delete(t);var l=se(se({},r),i);return Lt(l,i)?s:(n.set(e,l),!0)}function bu(t,e,n){if(!n)return!1;if(n[t]){if(n[t].indexOf(e)>=0)return!0;n[t].push(e)}else n[t]=[e];return!1}var em={fragmentMatcher:new Qh,dataIdFromObject:tm,addTypename:!0,resultCaching:!0,freezeResults:!1};function tm(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var nm=Object.prototype.hasOwnProperty,ku=function(t){cn(e,t);function e(n,r,i){var s=t.call(this,Object.create(null))||this;return s.optimisticId=n,s.parent=r,s.transaction=i,s}return e.prototype.toObject=function(){return se(se({},this.parent.toObject()),this.data)},e.prototype.get=function(n){return nm.call(this.data,n)?this.data[n]:this.parent.get(n)},e}(Fi),rm=function(t){cn(e,t);function e(n){n===void 0&&(n={});var r=t.call(this)||this;r.watches=new Set,r.typenameDocumentCache=new Map,r.cacheKeyRoot=new oa(zs),r.silenceBroadcast=!1,r.config=se(se({},em),n),r.config.customResolvers&&(r.config.cacheRedirects=r.config.customResolvers),r.config.cacheResolvers&&(r.config.cacheRedirects=r.config.cacheResolvers),r.addTypename=!!r.config.addTypename,r.data=r.config.resultCaching?new dr:new Fi,r.optimisticData=r.data,r.storeWriter=new Zh,r.storeReader=new Wh({cacheKeyRoot:r.cacheKeyRoot,freezeResults:n.freezeResults});var i=r,s=i.maybeBroadcastWatch;return r.maybeBroadcastWatch=Hr(function(l){return s.call(r,l)},{makeCacheKey:function(l){if(!l.optimistic&&!l.previousResult&&i.data instanceof dr)return i.cacheKeyRoot.lookup(l.query,JSON.stringify(l.variables))}}),r}return e.prototype.restore=function(n){return n&&this.data.replace(n),this},e.prototype.extract=function(n){return n===void 0&&(n=!1),(n?this.optimisticData:this.data).toObject()},e.prototype.read=function(n){if(typeof n.rootId=="string"&&typeof this.data.get(n.rootId)=="undefined")return null;var r=this.config.fragmentMatcher,i=r&&r.match;return this.storeReader.readQueryFromStore({store:n.optimistic?this.optimisticData:this.data,query:this.transformDocument(n.query),variables:n.variables,rootId:n.rootId,fragmentMatcherFunction:i,previousResult:n.previousResult,config:this.config})||null},e.prototype.write=function(n){var r=this.config.fragmentMatcher,i=r&&r.match;this.storeWriter.writeResultToStore({dataId:n.dataId,result:n.result,variables:n.variables,document:this.transformDocument(n.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:i}),this.broadcastWatches()},e.prototype.diff=function(n){var r=this.config.fragmentMatcher,i=r&&r.match;return this.storeReader.diffQueryAgainstStore({store:n.optimistic?this.optimisticData:this.data,query:this.transformDocument(n.query),variables:n.variables,returnPartialData:n.returnPartialData,previousResult:n.previousResult,fragmentMatcherFunction:i,config:this.config})},e.prototype.watch=function(n){var r=this;return this.watches.add(n),function(){r.watches.delete(n)}},e.prototype.evict=function(n){throw new st(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(n){for(var r=[],i=0,s=this.optimisticData;s instanceof ku;)s.optimisticId===n?++i:r.push(s),s=s.parent;if(i>0){for(this.optimisticData=s;r.length>0;){var l=r.pop();this.performTransaction(l.transaction,l.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(n,r){var i=this,s=i.data,l=i.silenceBroadcast;this.silenceBroadcast=!0,typeof r=="string"&&(this.data=this.optimisticData=new ku(r,this.optimisticData,n));try{n(this)}finally{this.silenceBroadcast=l,this.data=s}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(n,r){return this.performTransaction(n,r)},e.prototype.transformDocument=function(n){if(this.addTypename){var r=this.typenameDocumentCache.get(n);return r||(r=$d(n),this.typenameDocumentCache.set(n,r),this.typenameDocumentCache.set(r,r)),r}return n},e.prototype.broadcastWatches=function(){var n=this;this.silenceBroadcast||this.watches.forEach(function(r){return n.maybeBroadcastWatch(r)})},e.prototype.maybeBroadcastWatch=function(n){n.callback(this.diff({query:n.query,variables:n.variables,previousResult:n.previousResult&&n.previousResult(),optimistic:n.optimistic}))},e}(Th);function im(t){return new qt(function(e,n){var r=So(e,[]);return new bt(function(i){var s;return Promise.resolve(r).then(function(l){return t(l,e.getContext())}).then(e.setContext).then(function(){s=n(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}).catch(i.error.bind(i)),function(){s&&s.unsubscribe()}})})}var sm=ye(3033),am={includeQuery:!0,includeExtensions:!1},om={accept:"*/*","content-type":"application/json"},um={method:"POST"},lm={http:am,headers:om,options:um},_u=function(t,e,n){var r=new Error(n);throw r.name="ServerError",r.response=t,r.statusCode=t.status,r.result=e,r},cm=function(t){return function(e){return e.text().then(function(n){try{return JSON.parse(n)}catch(i){var r=i;return r.name="ServerParseError",r.response=e,r.statusCode=e.status,r.bodyText=n,Promise.reject(r)}}).then(function(n){return e.status>=300&&_u(e,n,"Response not successful: Received status code "+e.status),!Array.isArray(n)&&!n.hasOwnProperty("data")&&!n.hasOwnProperty("errors")&&_u(e,n,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(r){return r.operationName}):t.operationName)+"'."),n})}},dm=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new st(1)}},hm=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},mm=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=se({},e.options,{headers:e.headers,credentials:e.credentials}),s=e.http;n.forEach(function(M){i=se({},i,M.options,{headers:se({},i.headers,M.headers)}),M.credentials&&(i.credentials=M.credentials),s=se({},s,M.http)});var l=t.operationName,g=t.extensions,w=t.variables,C=t.query,P={operationName:l,variables:w};return s.includeExtensions&&(P.extensions=g),s.includeQuery&&(P.query=(0,sm.S)(C)),{options:i,body:P}},ca=function(t,e){var n;try{n=JSON.stringify(t)}catch(i){var r=new st(2);throw r.parseError=i,r}return n},pm=function(t,e){var n=t.getContext(),r=n.uri;return r||(typeof e=="function"?e(t):e||"/graphql")},Eu=function(t){t===void 0&&(t={});var e=t.uri,n=e===void 0?"/graphql":e,r=t.fetch,i=t.includeExtensions,s=t.useGETForQueries,l=So(t,["uri","fetch","includeExtensions","useGETForQueries"]);dm(r),r||(r=fetch);var g={http:{includeExtensions:i},options:l.fetchOptions,credentials:l.credentials,headers:l.headers};return new qt(function(w){var C=pm(w,n),P=w.getContext(),M={};if(P.clientAwareness){var $=P.clientAwareness,j=$.name,W=$.version;j&&(M["apollographql-client-name"]=j),W&&(M["apollographql-client-version"]=W)}var K=se({},M,P.headers),X={http:P.http,options:P.fetchOptions,credentials:P.credentials,headers:K},ee=mm(w,lm,g,X),ie=ee.options,ue=ee.body,re;if(!ie.signal){var ve=hm(),Le=ve.controller,qe=ve.signal;re=Le,re&&(ie.signal=qe)}var Ke=function(jt){return jt.kind==="OperationDefinition"&&jt.operation==="mutation"};if(s&&!w.query.definitions.some(Ke)&&(ie.method="GET"),ie.method==="GET"){var xe=fm(C,ue),On=xe.newURI,ui=xe.parseError;if(ui)return Ko(ui);C=On}else try{ie.body=ca(ue,"Payload")}catch(jt){return Ko(jt)}return new bt(function(jt){return r(C,ie).then(function(pt){return w.setContext({response:pt}),pt}).then(cm(w)).then(function(pt){return jt.next(pt),jt.complete(),pt}).catch(function(pt){pt.name!=="AbortError"&&(pt.result&&pt.result.errors&&pt.result.data&&jt.next(pt.result),jt.error(pt))}),function(){re&&re.abort()}})})};function fm(t,e){var n=[],r=function(M,$){n.push(M+"="+encodeURIComponent($))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var i=void 0;try{i=ca(e.variables,"Variables map")}catch(M){return{parseError:M}}r("variables",i)}if(e.extensions){var s=void 0;try{s=ca(e.extensions,"Extensions map")}catch(M){return{parseError:M}}r("extensions",s)}var l="",g=t,w=t.indexOf("#");w!==-1&&(l=t.substr(w),g=t.substr(0,w));var C=g.indexOf("?")===-1?"?":"&",P=g+C+n.join("&")+l;return{newURI:P}}var xv=function(t){cn(e,t);function e(n){return t.call(this,Eu(n).request)||this}return e}(qt),gm=ye(5175),xi=ye(1669),vm=ye(6030);class Oi extends Error{constructor(e,n){super(e);Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class hn extends Oi{constructor(e,n,r){super(e,n);r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}const Mi=Symbol.toStringTag,Ru=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[Mi]==="URLSearchParams",In=t=>typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[Mi]);function da(t){return typeof t=="object"&&typeof t.append=="function"&&typeof t.set=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.delete=="function"&&typeof t.keys=="function"&&typeof t.values=="function"&&typeof t.entries=="function"&&typeof t.constructor=="function"&&t[Mi]==="FormData"}const ym=t=>typeof t=="object"&&t[Mi]==="AbortSignal",hr=`\r
`,ha="-".repeat(2),wm=Buffer.byteLength(hr),Cu=t=>`${ha}${t}${ha}${hr.repeat(2)}`;function Su(t,e,n){let r="";return r+=`${ha}${t}${hr}`,r+=`Content-Disposition: form-data; name="${e}"`,In(n)&&(r+=`; filename="${n.name}"${hr}`,r+=`Content-Type: ${n.type||"application/octet-stream"}`),`${r}${hr.repeat(2)}`}const bm=()=>(0,ws.randomBytes)(8).toString("hex");async function*km(t,e){for(const[n,r]of t)yield Su(e,n,r),In(r)?yield*r.stream():yield r,yield hr;yield Cu(e)}function _m(t,e){let n=0;for(const[r,i]of t)n+=Buffer.byteLength(Su(e,r,i)),In(i)?n+=i.size:n+=Buffer.byteLength(String(i)),n+=wm;return n+=Buffer.byteLength(Cu(e)),n}const St=Symbol("Body internals");class ma{constructor(e,{size:n=0}={}){let r=null;e===null?e=null:Ru(e)?e=Buffer.from(e.toString()):In(e)||Buffer.isBuffer(e)||(xi.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Oe||(da(e)?(r=`NodeFetchFormDataBoundary${bm()}`,e=Oe.Readable.from(km(e,r))):e=Buffer.from(String(e)))),this[St]={body:e,boundary:r,disturbed:!1,error:null},this.size=n,e instanceof Oe&&e.on("error",i=>{const s=i instanceof Oi?i:new hn(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[St].error=s})}get body(){return this[St].body}get bodyUsed(){return this[St].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:n,byteLength:r}=await Li(this);return e.slice(n,n+r)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[St].body&&this[St].body.type||"",n=await this.buffer();return new vm([n],{type:e})}async json(){const e=await Li(this);return JSON.parse(e.toString())}async text(){return(await Li(this)).toString()}buffer(){return Li(this)}}Object.defineProperties(ma.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function Li(t){if(t[St].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[St].disturbed=!0,t[St].error)throw t[St].error;let{body:e}=t;if(e===null)return Buffer.alloc(0);if(In(e)&&(e=e.stream()),Buffer.isBuffer(e))return e;if(!(e instanceof Oe))return Buffer.alloc(0);const n=[];let r=0;try{for await(const i of e){if(t.size>0&&r+i.length>t.size){const s=new hn(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}r+=i.length,n.push(i)}}catch(i){throw i instanceof Oi?i:new hn(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?Buffer.from(n.join("")):Buffer.concat(n,r)}catch(i){throw new hn(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new hn(`Premature close of server response while trying to fetch ${t.url}`)}const Tu=(t,e)=>{let n,r,{body:i}=t;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Oe&&typeof i.getBoundary!="function"&&(n=new Oe.PassThrough({highWaterMark:e}),r=new Oe.PassThrough({highWaterMark:e}),i.pipe(n),i.pipe(r),t[St].body=n,i=r),i},Nu=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Ru(t)?"application/x-www-form-urlencoded;charset=UTF-8":In(t)?t.type||null:Buffer.isBuffer(t)||xi.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:da(t)?`multipart/form-data; boundary=${e[St].boundary}`:t instanceof Oe?null:"text/plain;charset=UTF-8",Em=t=>{const{body:e}=t;return e===null?0:In(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"?e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null:da(e)?_m(t[St].boundary):null},Rm=(t,{body:e})=>{e===null?t.end():In(e)?e.stream().pipe(t):Buffer.isBuffer(e)?(t.write(e),t.end()):e.pipe(t)},qi=typeof $n.validateHeaderName=="function"?$n.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){const e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},pa=typeof $n.validateHeaderValue=="function"?$n.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){const n=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}};class Dn extends URLSearchParams{constructor(e){let n=[];if(e instanceof Dn){const r=e.raw();for(const[i,s]of Object.entries(r))n.push(...s.map(l=>[i,l]))}else if(e!=null)if(typeof e=="object"&&!xi.types.isBoxedPrimitive(e)){const r=e[Symbol.iterator];if(r==null)n.push(...Object.entries(e));else{if(typeof r!="function")throw new TypeError("Header pairs must be iterable");n=[...e].map(i=>{if(typeof i!="object"||xi.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([r,i])=>(qi(r),pa(r,String(i)),[String(r).toLowerCase(),String(i)])):void 0,super(n),new Proxy(this,{get(r,i,s){switch(i){case"append":case"set":return(l,g)=>(qi(l),pa(l,String(g)),URLSearchParams.prototype[i].call(s,String(l).toLowerCase(),String(g)));case"delete":case"has":case"getAll":return l=>(qi(l),URLSearchParams.prototype[i].call(s,String(l).toLowerCase()));case"keys":return()=>(r.sort(),new Set(URLSearchParams.prototype.keys.call(r)).keys());default:return Reflect.get(r,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const n=this.getAll(e);if(n.length===0)return null;let r=n.join(", ");return/^content-encoding$/i.test(e)&&(r=r.toLowerCase()),r}forEach(e){for(const n of this.keys())e(this.get(n),n)}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,n)=>(e[n]=this.getAll(n),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,n)=>{const r=this.getAll(n);return n==="host"?e[n]=r[0]:e[n]=r.length>1?r:r[0],e},{})}}Object.defineProperties(Dn.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function Cm(t=[]){return new Dn(t.reduce((e,n,r,i)=>(r%2==0&&e.push(i.slice(r,r+2)),e),[]).filter(([e,n])=>{try{return qi(e),pa(e,String(n)),!0}catch{return!1}}))}const Sm=new Set([301,302,303,307,308]),Pu=t=>Sm.has(t),mn=Symbol("Response internals");class Yt extends ma{constructor(e=null,n={}){super(e,n);const r=n.status||200,i=new Dn(n.headers);if(e!==null&&!i.has("Content-Type")){const s=Nu(e);s&&i.append("Content-Type",s)}this[mn]={url:n.url,status:r,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get url(){return this[mn].url||""}get status(){return this[mn].status}get ok(){return this[mn].status>=200&&this[mn].status<300}get redirected(){return this[mn].counter>0}get statusText(){return this[mn].statusText}get headers(){return this[mn].headers}get highWaterMark(){return this[mn].highWaterMark}clone(){return new Yt(Tu(this,this.highWaterMark),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(e,n=302){if(!Pu(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Yt(null,{headers:{location:new URL(e).toString()},status:n})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(Yt.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const Tm=t=>{if(t.search)return t.search;const e=t.href.length-1,n=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-n.length]==="?"?"?":""},pn=Symbol("Request internals"),Ui=t=>typeof t=="object"&&typeof t[pn]=="object";class Gr extends ma{constructor(e,n={}){let r;Ui(e)?r=new URL(e.url):(r=new URL(e),e={});let i=n.method||e.method||"GET";if(i=i.toUpperCase(),(n.body!=null||Ui(e))&&e.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const s=n.body?n.body:Ui(e)&&e.body!==null?Tu(e):null;super(s,{size:n.size||e.size||0});const l=new Dn(n.headers||e.headers||{});if(s!==null&&!l.has("Content-Type")){const w=Nu(s,this);w&&l.append("Content-Type",w)}let g=Ui(e)?e.signal:null;if("signal"in n&&(g=n.signal),g!==null&&!ym(g))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[pn]={method:i,redirect:n.redirect||e.redirect||"follow",headers:l,parsedURL:r,signal:g},this.follow=n.follow===void 0?e.follow===void 0?20:e.follow:n.follow,this.compress=n.compress===void 0?e.compress===void 0?!0:e.compress:n.compress,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent,this.highWaterMark=n.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||e.insecureHTTPParser||!1}get method(){return this[pn].method}get url(){return(0,nr.format)(this[pn].parsedURL)}get headers(){return this[pn].headers}get redirect(){return this[pn].redirect}get signal(){return this[pn].signal}clone(){return new Gr(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Gr.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});const Nm=t=>{const{parsedURL:e}=t[pn],n=new Dn(t[pn].headers);n.has("Accept")||n.set("Accept","*/*");let r=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(r="0"),t.body!==null){const g=Em(t);typeof g=="number"&&!Number.isNaN(g)&&(r=String(g))}r&&n.set("Content-Length",r),n.has("User-Agent")||n.set("User-Agent","node-fetch"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(e)),!n.has("Connection")&&!i&&n.set("Connection","close");const s=Tm(e);return{path:e.pathname+s,pathname:e.pathname,hostname:e.hostname,protocol:e.protocol,port:e.port,hash:e.hash,search:e.search,query:e.query,href:e.href,method:t.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i}};class Pm extends Oi{constructor(e,n="aborted"){super(e,n)}}const Im=new Set(["data:","http:","https:"]);async function fa(t,e){return new Promise((n,r)=>{const i=new Gr(t,e),s=Nm(i);if(!Im.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){const j=gm(i.url),W=new Yt(j,{headers:{"Content-Type":j.typeFull}});n(W);return}const l=(s.protocol==="https:"?yi:$n).request,{signal:g}=i;let w=null;const C=()=>{const j=new Pm("The operation was aborted.");r(j),i.body&&i.body instanceof Oe.Readable&&i.body.destroy(j),!(!w||!w.body)&&w.body.emit("error",j)};if(g&&g.aborted){C();return}const P=()=>{C(),$()},M=l(s);g&&g.addEventListener("abort",P);const $=()=>{M.abort(),g&&g.removeEventListener("abort",P)};M.on("error",j=>{r(new hn(`request to ${i.url} failed, reason: ${j.message}`,"system",j)),$()}),M.on("response",j=>{M.setTimeout(0);const W=Cm(j.rawHeaders);if(Pu(j.statusCode)){const ue=W.get("Location"),re=ue===null?null:new URL(ue,i.url);switch(i.redirect){case"error":r(new hn(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),$();return;case"manual":if(re!==null)try{W.set("Location",re)}catch(ve){r(ve)}break;case"follow":{if(re===null)break;if(i.counter>=i.follow){r(new hn(`maximum redirect reached at: ${i.url}`,"max-redirect")),$();return}const ve={headers:new Dn(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,size:i.size};if(j.statusCode!==303&&i.body&&e.body instanceof Oe.Readable){r(new hn("Cannot follow redirect with body being a readable stream","unsupported-redirect")),$();return}(j.statusCode===303||(j.statusCode===301||j.statusCode===302)&&i.method==="POST")&&(ve.method="GET",ve.body=void 0,ve.headers.delete("content-length")),n(fa(new Gr(re,ve))),$();return}default:}}j.once("end",()=>{g&&g.removeEventListener("abort",P)});let K=(0,Oe.pipeline)(j,new Oe.PassThrough,ue=>{r(ue)});process.version<"v12.10"&&j.on("aborted",P);const X={url:i.url,status:j.statusCode,statusText:j.statusMessage,headers:W,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},ee=W.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||ee===null||j.statusCode===204||j.statusCode===304){w=new Yt(K,X),n(w);return}const ie={flush:Ct.Z_SYNC_FLUSH,finishFlush:Ct.Z_SYNC_FLUSH};if(ee==="gzip"||ee==="x-gzip"){K=(0,Oe.pipeline)(K,Ct.createGunzip(ie),ue=>{r(ue)}),w=new Yt(K,X),n(w);return}if(ee==="deflate"||ee==="x-deflate"){(0,Oe.pipeline)(j,new Oe.PassThrough,re=>{r(re)}).once("data",re=>{(re[0]&15)==8?K=(0,Oe.pipeline)(K,Ct.createInflate(),ve=>{r(ve)}):K=(0,Oe.pipeline)(K,Ct.createInflateRaw(),ve=>{r(ve)}),w=new Yt(K,X),n(w)});return}if(ee==="br"){K=(0,Oe.pipeline)(K,Ct.createBrotliDecompress(),ue=>{r(ue)}),w=new Yt(K,X),n(w);return}w=new Yt(K,X),n(w)}),Rm(M,i)})}let Vr;const Dm={};function Am(t){Vr=t.globalState}const Iu=(t,e)=>{if(!Vr)throw new Error("Persistent store not initialized.");return Vr.get(t+":"+e,Dm)},Du=(t,e,n)=>{if(!Vr)throw new Error("Persistent store not initialized.");return Vr.update(t+":"+e,n)};var Fm=ye(6149);const Au=xm();function xm(t=process.env.HTTPS_PROXY){if(!t)return yi.globalAgent;try{const{hostname:e,port:n,username:r,password:i}=new nr.URL(t),s=r&&i&&`${r}:${i}`;return(0,Fm.httpsOverHttp)({proxy:{host:e,port:n,proxyAuth:s}})}catch(e){return o.window.showErrorMessage(`HTTPS_PROXY environment variable ignored: ${e.message}`),yi.globalAgent}}var Om=Object.defineProperty,jn=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Om(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const Fu="Try again?",Mm="Cancel",xu="Sign in",Lm="Don't show again",Ou="prompt for sign in",Mu="login",Lu=["read:user","user:email","repo"];var Fe;(function(t){t.github="github",t["github-enterprise"]="github-enterprise"})(Fe||(Fe={}));class qm{constructor(e){this._telemetry=e,jn(this,"_githubAPI"),jn(this,"_sessionId"),jn(this,"_githubEnterpriseAPI"),jn(this,"_enterpriseSessionId"),jn(this,"_disposables"),jn(this,"_onDidInitialize",new o.EventEmitter),jn(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(o.authentication.onDidChangeSessions(()=>{this.isAuthenticated(Fe.github)||this.initialize(Fe.github),!this.isAuthenticated(Fe["github-enterprise"])&&zr()&&this.initialize(Fe["github-enterprise"])}))}async initialize(e){if(e===Fe["github-enterprise"]&&!zr()){a.debug("GitHub Enterprise provider selected without URI.","Authentication");return}const n=await o.authentication.getSession(e,Lu,{createIfNone:!1});if(n){e===Fe.github?this._sessionId=n.id:this._enterpriseSessionId=n.id;const r=await this.createHub(n.accessToken,e);e===Fe.github?this._githubAPI=r:this._githubEnterpriseAPI=r,await this.setCurrentUser(r),this._onDidInitialize.fire()}else a.debug(`No GitHub${ga(e)} token found.`,"Authentication")}async reset(){this._githubAPI=void 0,this._githubEnterpriseAPI=void 0,await this.initialize(Fe.github),zr()&&await this.initialize(Fe["github-enterprise"])}isAuthenticated(e){return e===Fe.github?!!this._githubAPI:!!this._githubEnterpriseAPI}getHub(e){return e===Fe.github?this._githubAPI:this._githubEnterpriseAPI}async getHubOrLogin(e){var n,r;return e===Fe.github?(n=this._githubAPI)!=null?n:await this.login(e):(r=this._githubEnterpriseAPI)!=null?r:await this.login(e)}async showSignInNotification(e){if(Iu(Ou,Mu)===!1)return;if(await o.window.showInformationMessage(`In order to use the Pull Requests functionality, you must sign in to GitHub${ga(e)}`,xu,Lm)===xu)return await this.login(e);Du(Ou,Mu,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async logout(){this._sessionId&&o.authentication.logout(Fe.github,this._sessionId),this._enterpriseSessionId&&o.authentication.logout(Fe["github-enterprise"],this._enterpriseSessionId)}async login(e){this._telemetry.sendTelemetryEvent("auth.start");const n=`Error signing in to GitHub${ga(e)}`;let r=!0,i;for(;r;){try{const s=await this.getSessionOrLogin(e);i=await this.createHub(s,e)}catch(s){a.appendLine(`${n}: ${s}`),s instanceof Error&&s.stack&&a.appendLine(s.stack)}i?r=!1:r=await o.window.showErrorMessage(n,Fu,Mm)===Fu}return i?(this._githubAPI=i,await this.setCurrentUser(i),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),i}isCurrentUser(e){var n,r,i,s;return((r=(n=this._githubAPI)==null?void 0:n.currentUser)==null?void 0:r.login)===e||((s=(i=this._githubEnterpriseAPI)==null?void 0:i.currentUser)==null?void 0:s.login)==e}getCurrentUser(e){const n=this.getHub(e);return(n==null?void 0:n.octokit)&&(n==null?void 0:n.currentUser)}async setCurrentUser(e){const n=await e.octokit.users.getAuthenticated({});e.currentUser=n.data}async getSessionOrLogin(e){const n=await o.authentication.getSession(e,Lu,{createIfNone:!0});return e===Fe.github?this._sessionId=n.id:this._enterpriseSessionId=n.id,n.accessToken}async createHub(e,n){let r="https://api.github.com",i;n===Fe["github-enterprise"]&&(i=_a()),i&&(r=`${i.scheme}://${i.authority}/api/v3`);const s=new md({request:{agent:Au},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`,baseUrl:r});i&&(r=`${i.scheme}://${i.authority}/api`);const l=new Eh({link:Um(r,e||""),cache:new rm,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),g={octokit:s,graphql:l};return await this.setCurrentUser(g),g}dispose(){this._disposables.forEach(e=>e.dispose())}}const Um=(t,e)=>im((n,{headers:r})=>({headers:{...r,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Eu({uri:`${t}/graphql`,fetch:fa}));function ga(t){return t===Fe.github?"":" Enterprise"}var $m=Object.defineProperty,qu=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?$m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class $i extends Error{constructor(e){super(e);this.message=e,qu(this,"name"),qu(this,"stack")}}class Hi{constructor(e,n,r){this.remoteName=e,this.url=n,this.gitProtocol=r}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}get authProviderId(){var e;return this.host===((e=_a())==null?void 0:e.authority)?Fe["github-enterprise"]:Fe.github}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function Uu(t,e,n){if(!e)return null;const r=new _n(e);return n&&r.update({type:n.type}),r.host?new Hi(t,e,r):null}function mr(t){return t.state.remotes.map(e=>Uu(e.name,e.fetchUrl||e.pushUrl)).filter(e=>!!e)}const Gi=new Uint8Array(256);let Vi=Gi.length;function Hm(){return Vi>Gi.length-16&&(fc().randomFillSync(Gi),Vi=0),Gi.slice(Vi,Vi+=16)}const Gm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vm(t){return typeof t=="string"&&Gm.test(t)}const Bm=Vm,ot=[];for(let t=0;t<256;++t)ot.push((t+256).toString(16).substr(1));function jm(t,e=0){const n=(ot[t[e+0]]+ot[t[e+1]]+ot[t[e+2]]+ot[t[e+3]]+"-"+ot[t[e+4]]+ot[t[e+5]]+"-"+ot[t[e+6]]+ot[t[e+7]]+"-"+ot[t[e+8]]+ot[t[e+9]]+"-"+ot[t[e+10]]+ot[t[e+11]]+ot[t[e+12]]+ot[t[e+13]]+ot[t[e+14]]+ot[t[e+15]]).toLowerCase();if(!Bm(n))throw TypeError("Stringified UUID is invalid");return n}const zm=jm;function Qm(t,e,n){t=t||{};const r=t.random||(t.rng||Hm)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return zm(r)}const $u=Qm;var Wm=Object.defineProperty,Ye=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Wm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const Bi=class{constructor(t,e,n,r,i){Ye(this,"commentId"),Ye(this,"id"),Ye(this,"parent"),Ye(this,"body"),Ye(this,"originalBody"),Ye(this,"mode"),Ye(this,"author"),Ye(this,"label"),Ye(this,"commentReactions"),Ye(this,"contextValue"),this.parent=t,this.body=new o.MarkdownString(e),this.mode=o.CommentMode.Preview,this.author={name:r.login,iconPath:r.avatarUrl?o.Uri.parse(`${r.avatarUrl}&s=64`):void 0},this.label=n?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=i?i._rawComment.body:void 0,this.commentReactions=i?i.reactions:void 0,this.id=Bi.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Bi&&t.id===this.id&&(t.mode=o.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Bi&&t.id===this.id&&(t.mode=o.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let Tt=Bi;Ye(Tt,"idPool",0);class et{constructor(e,n){Ye(this,"commentId"),Ye(this,"parent"),Ye(this,"body"),Ye(this,"mode"),Ye(this,"author"),Ye(this,"label"),Ye(this,"reactions"),Ye(this,"_rawComment"),Ye(this,"contextValue"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new o.MarkdownString(e.body),this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?o.Uri.parse(e.user.avatarUrl):void 0},op(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const r=[];e.canEdit&&r.push("canEdit"),e.canDelete&&r.push("canDelete"),this.contextValue=r.join(","),this.parent=n}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof et&&e.commentId===this.commentId&&(e.mode=o.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof et&&e.commentId===this.commentId&&(e.mode=o.CommentMode.Preview,e.body=e._rawComment.body),e))}}var Km=Object.defineProperty,zn=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Km(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);function va(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class Hu{constructor(){zn(this,"_webview"),zn(this,"_disposables",[]),zn(this,"_waitForReady"),zn(this,"_onIsReady",new o.EventEmitter),zn(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const n=this._onIsReady.event(()=>{n.dispose(),e()})})}initialize(){var e;const n=(e=this._webview)==null?void 0:e.onDidReceiveMessage(async r=>{await this._onDidReceiveMessage(r)},null,this._disposables);n&&this._disposables.push(n)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var n;await this._waitForReady,(n=this._webview)==null||n.postMessage({res:e})}async _replyMessage(e,n){var r;const i={seq:e.req,res:n};(r=this._webview)==null||r.postMessage(i)}async _throwError(e,n){var r;const i={seq:e.req,err:n};(r=this._webview)==null||r.postMessage(i)}dispose(){this._disposables.forEach(e=>e.dispose())}}class Gu extends Hu{constructor(){super(...arguments);zn(this,"viewType"),zn(this,"_view")}show(){this._view?this._view.show():o.commands.executeCommand(`${this.viewType}.focus`)}}var Ym=Object.defineProperty,fn=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Ym(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const Xt=class extends Hu{constructor(t,e,n,r,i=Xt._viewType){super();this._extensionUri=t,fn(this,"_panel"),fn(this,"_disposables",[]),fn(this,"_descriptionNode"),fn(this,"_item"),fn(this,"_folderRepositoryManager"),fn(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=r,this._panel=o.window.createWebviewPanel(i,n,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[o.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(s=>{if(this._folderRepositoryManager&&this._item){const l=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:l})}},null,this._disposables)}static async createOrShow(t,e,n,r=!1){const i=r?o.ViewColumn.Beside:o.window.activeTextEditor?o.window.activeTextEditor.viewColumn:o.ViewColumn.One;if(Xt.currentPanel)Xt.currentPanel._panel.reveal(i,!0);else{const s=`Issue #${n.number.toString()}`;Xt.currentPanel=new Xt(t,i||o.ViewColumn.Active,s,e)}await Xt.currentPanel.update(e,n)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[n,r,i]=e;if(!n)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=n,this._panel.title=`Pull Request #${t.number.toString()}`,a.debug("pr.initialize",Xt.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:r,repositoryDefaultBranch:i,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{o.window.showErrorMessage(V(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":o.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function n(i,s){return e=(await i.getLabels(s)).filter(g=>!s.item.labels.some(w=>w.name===g.name)),e.map(g=>({label:g.name}))}const r=await o.window.showQuickPick(n(this._folderRepositoryManager,this._item),{canPickMany:!0});if(r&&r.length){await this._item.addLabels(r.map(s=>s.label));const i=r.map(s=>e.find(l=>l.name===s.label));this._item.item.labels=this._item.item.labels.concat(...i),this._replyMessage(t,{added:i})}}catch(e){o.window.showErrorMessage(V(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(n=>n.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){o.window.showErrorMessage(V(e))}}webviewDebug(t){a.debug(t.args,Xt.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),o.window.showErrorMessage(`Editing description failed: ${V(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),o.window.showErrorMessage(`Editing title failed: ${V(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),o.window.showErrorMessage(V(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){o.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(n=>{this._replyMessage(t,{})}).catch(n=>{this._throwError(t,n),o.window.showErrorMessage(V(n))})})}close(t){o.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){Xt.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose();this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=va(),n=o.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(n).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let ji=Xt;fn(ji,"ID","PullRequestOverviewPanel"),fn(ji,"currentPanel"),fn(ji,"_viewType","IssueOverview");var Xm=Object.defineProperty,pr=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Xm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);function Jm(t){return!!t.id&&!!t.milestone}const Jt=class extends ji{constructor(t,e,n,r){super(t,e,n,r,Jt._viewType);pr(this,"_repositoryDefaultBranch"),pr(this,"_existingReviewers",[]),pr(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),Hl(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(r.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:Ve.Merged})}))}static async createOrShow(t,e,n,r=!1){const i=r?o.ViewColumn.Beside:o.window.activeTextEditor?o.window.activeTextEditor.viewColumn:o.ViewColumn.One;if(Jt.currentPanel)Jt.currentPanel._panel.reveal(i,!0);else{const s=`Pull Request #${n.number.toString()}`;Jt.currentPanel=new Jt(t,i||o.ViewColumn.Active,s,e)}await Jt.currentPanel.update(e,n)}set _currentPanel(t){Jt.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}static scrollToReview(){this.currentPanel&&this.currentPanel._postMessage({command:"pr.scrollToPendingReview"})}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t),this._folderRepositoryManager.getBranchNameForPullRequest(t)]).then(e=>{var n,r;const[i,s,l,g,w,C,P]=e;if(!i)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=i,this._repositoryDefaultBranch=l,this._panel.title=`Pull Request #${t.number.toString()}`;const M=t.equals(this._folderRepositoryManager.activePullRequest),$=C.hasWritePermission,j=C.mergeMethodsAvailability,W=$||this._item.canEdit(),K=o.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),X=Vu(j,K);this._existingReviewers=rl(w,s,i.author);const ee=this._folderRepositoryManager.getCurrentUser(this._item),ue=i.base&&i.head&&!i.base.repositoryCloneUrl.equals(i.head.repositoryCloneUrl)&&ka();a.debug("pr.initialize",Jt.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:i.number,title:i.title,url:i.html_url,createdAt:i.createdAt,body:i.body,bodyHTML:i.bodyHTML,labels:i.item.labels,author:{login:i.author.login,name:i.author.name,avatarUrl:i.userAvatar,url:i.author.url},state:i.state,events:s,isCurrentlyCheckedOut:M,isRemoteBaseDeleted:i.isRemoteBaseDeleted,base:i.base.label,isRemoteHeadDeleted:i.isRemoteHeadDeleted,isLocalHeadDeleted:!P,head:(r=(n=i.head)==null?void 0:n.label)!=null?r:"",repositoryDefaultBranch:l,canEdit:W,hasWritePermission:$,status:g||{statuses:[]},mergeable:i.item.mergeable,reviewers:this._existingReviewers,isDraft:i.isDraft,mergeMethodsAvailability:j,defaultMergeMethod:X,isIssue:!1,milestone:i.milestone,assignees:i.assignees,continueOnGitHub:ue,isAuthor:ee.login===i.author.login}})}).catch(e=>{o.window.showErrorMessage(V(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergeability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-milestone":return this.removeMilestone(t);case"pr.add-milestone":return this.addMilestone(t);case"pr.add-assignees":return this.addAssignees(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.remove-assignee":return this.removeAssignee(t);case"pr.copy-prlink":return this.copyPrLink();case"pr.openOnGitHub":return ei(this._item,this._item._telemetry)}}async getReviewersQuickPickItems(t){if(!t)return[];const n=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],r=new Set([this._item.author.login,...this._existingReviewers.map(s=>s.reviewer.login)]),i=[];for(const s of t){const{login:l,name:g,isAuthor:w,isCommenter:C}=s;if(r.has(l))continue;const P=w&&C?"Recently edited and reviewed changes to these files":w?"Recently edited these files":C?"Recently reviewed changes to these files":"Suggested reviewer";i.push({label:l,description:g,detail:P,reviewer:s}),r.add(l)}for(const s of n)r.has(s.login)||i.push({label:s.login,description:s.name,reviewer:s});return i}getAssigneesQuickPickItems(t,e){var n,r;if(!e)return[];const i=new Set([...(r=(n=this._item.assignees)==null?void 0:n.map(l=>l.login))!=null?r:[]]),s=[];for(const l of e){const{login:g,name:w,isAuthor:C,isCommenter:P}=l;if(i.has(g))continue;const M=C&&P?"Recently edited and reviewed changes to these files":C?"Recently edited these files":P?"Recently reviewed changes to these files":"Suggested reviewer";s.push({label:g,description:w,detail:M,assignee:l}),i.add(g)}for(const l of t)i.has(l.login)||s.push({label:l.login,description:l.name,assignee:l});return s}async addReviewers(t){try{const e=await o.window.showQuickPick(this.getReviewersQuickPickItems(this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0});if(e){await this._item.requestReview(e.map(r=>r.label));const n=e.map(r=>({reviewer:r.reviewer,state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(n),this._replyMessage(t,{added:n})}}catch(e){o.window.showErrorMessage(V(e))}}async addMilestone(t){try{async function e(r){const i=await r.getMilestones();return i.items.length?i.items.map(s=>({label:s.milestone.title,id:s.milestone.id,milestone:s.milestone})):[{label:"No milestones created for this repository."}]}const n=await o.window.showQuickPick(e(this._folderRepositoryManager),{canPickMany:!1});n&&Jm(n)&&(await this._item.updateMilestone(n.id),this._replyMessage(t,{added:n.milestone}))}catch(e){o.window.showErrorMessage(V(e))}}async removeMilestone(t){try{await this._item.updateMilestone("null"),this._replyMessage(t,{})}catch(e){o.window.showErrorMessage(V(e))}}async addAssignees(t){var e;try{const r=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],i=await o.window.showQuickPick(this.getAssigneesQuickPickItems(r,[]),{canPickMany:!0,matchOnDescription:!0});if(i){const s=i.map(l=>l.assignee);this._item.assignees=(e=this._item.assignees)==null?void 0:e.concat(s),await this._item.updateAssignees(s.map(l=>l.login)),this._replyMessage(t,{added:s})}}catch(n){o.window.showErrorMessage(V(n))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(n=>n.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){o.window.showErrorMessage(V(e))}}async removeAssignee(t){var e,n,r;try{await this._item.deleteAssignees(t.args);const i=(n=(e=this._item.assignees)==null?void 0:e.findIndex(s=>s.login===t.args))!=null?n:-1;(r=this._item.assignees)==null||r.splice(i,1),this._replyMessage(t,{})}catch(i){o.window.showErrorMessage(V(i))}}async applyPatch(t){try{const e=t.args.comment,r=/```diff\n([\s\S]*)\n```/g.exec(e.body),i=h.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),s=new TextEncoder,l=o.Uri.parse(i);await o.workspace.fs.writeFile(l,s.encode(r[1])),await this._folderRepositoryManager.repository.apply(i,!0),await o.workspace.fs.delete(l)}catch(e){a.appendLine(`Applying patch failed: ${e}`),o.window.showErrorMessage(`Applying patch failed: ${V(e)}`)}}async openDiff(t){try{const e=t.args.comment;return gn.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){a.appendLine(`Open diff view failed: ${V(e)}`,Jt.ID)}}checkoutPullRequest(t){o.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:n,method:r}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,n,r).then(i=>{o.commands.executeCommand("pr.refreshList"),i.merged||o.window.showErrorMessage(`Merging PR failed: ${i.message}`),this._replyMessage(t,{state:i.merged?Ve.Merged:Ve.Open})}).catch(i=>{o.window.showErrorMessage(`Unable to merge pull request. ${V(i)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),n=[];if(this._item.isResolved()){const s=this._item.head.ref;!(this._repositoryDefaultBranch===this._item.head.ref)&&!this._item.isRemoteHeadDeleted&&n.push({label:`Delete remote branch ${this._item.remote.remoteName}/${s}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const s=o.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");n.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!s});const l=o.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&n.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!l})}if(o.env.remoteName==="codespaces"&&n.push({label:"Suspend Codespace",type:"suspend"}),!n.length){o.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const r=await o.window.showQuickPick(n,{canPickMany:!0,ignoreFocusOut:!0}),i=[];if(r){const s=this._item.equals(this._folderRepositoryManager.activePullRequest),l=r.map(async g=>{switch(g.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),i.push(g.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(s){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await o.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await o.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0),i.push(g.type);case"remote":return i.push(g.type),this._folderRepositoryManager.repository.removeRemote(e.remote);case"suspend":return i.push(g.type),o.commands.executeCommand("github.codespaces.disconnectSuspend")}});await Promise.all(l),this.refreshPanel(),o.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:i})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{o.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{o.window.showErrorMessage(`Unable to set PR ready for review. ${V(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(n=>t.user.login===n.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),o.commands.executeCommand("pr.refreshList")},e=>{o.window.showErrorMessage(`Approving pull request failed. ${V(e)}`),this._throwError(t,`${V(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{o.window.showErrorMessage(`Requesting changes failed. ${V(e)}`),this._throwError(t,`${V(e)}`)})}submitReview(t){this._item.submitReview(an.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{o.window.showErrorMessage(`Submitting review failed. ${V(e)}`),this._throwError(t,`${V(e)}`)})}async copyPrLink(){await o.env.clipboard.writeText(this._item.html_url),o.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let At=Jt;pr(At,"ID","PullRequestOverviewPanel"),pr(At,"currentPanel"),pr(At,"_viewType","PullRequestOverview");function Vu(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(r=>t[r])}var Zm=Object.defineProperty,Br=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Zm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class ep{constructor(e,n,r){this.pullRequestModel=e,this._folderReposManager=n,this._commentController=r,Br(this,"_pendingCommentThreadAdds",[]),Br(this,"_commentHandlerId"),Br(this,"_commentThreadCache",{}),Br(this,"_openPREditors",[]),Br(this,"_disposables",[]),this._commentHandlerId=$u(),wn(this._commentHandlerId,this),this.initializeThreadsInOpenEditors(),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangeReviewThreads(e=>this.onDidChangeReviewThreads(e))),this._disposables.push(o.window.onDidChangeVisibleTextEditors(async e=>{this.onDidChangeOpenEditors(e)})),this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(e=>{for(const n in this._commentThreadCache)this._commentThreadCache[n].forEach(r=>{Qu(r,e)})})),this._disposables.push(o.window.onDidChangeActiveTextEditor(e=>{this.refreshContextKey(e)}))}refreshContextKey(e){if(!e)return;const n=e.document.uri;if(n.scheme!=="pr")return;const r=ct(n);!r||r.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}getPREditors(e){return e.filter(n=>{if(n.document.uri.scheme!=="pr")return!1;const r=ct(n.document.uri);return!(!r||r.prNumber!==this.pullRequestModel.number)})}getCommentThreadCacheKey(e,n){return`${e}-${n?"original":"modified"}`}addThreadsForEditors(e){const n=this.pullRequestModel.reviewThreadsCache,r=H(n,i=>i.path);e.forEach(i=>{const{fileName:s,isBase:l}=ct(i.document.uri);r[s]&&(this._commentThreadCache[this.getCommentThreadCacheKey(s,l)]=r[s].filter(g=>g.diffSide===Ce.LEFT&&l||g.diffSide===Ce.RIGHT&&!l).map(g=>{const w=new o.Range(new o.Position(g.line-1,0),new o.Position(g.line-1,0));return jr(i.document.uri,w,g,this._commentController)}))})}initializeThreadsInOpenEditors(){const e=this.getPREditors(o.window.visibleTextEditors);this._openPREditors=e,this.addThreadsForEditors(e)}onDidChangeOpenEditors(e){const n=this.getPREditors(e),r=this._openPREditors.filter(s=>!n.includes(s)),i=n.filter(s=>!this._openPREditors.includes(s));this._openPREditors=n,r.forEach(s=>{const{fileName:l,isBase:g}=ct(s.document.uri),w=this.getCommentThreadCacheKey(l,g);(this._commentThreadCache[w]||[]).forEach(P=>P.dispose()),delete this._commentThreadCache[w]}),i.length&&this.addThreadsForEditors(i)}onDidChangeReviewThreads(e){e.added.forEach(n=>{const r=n.path,i=this._pendingCommentThreadAdds.findIndex(g=>{const w=this.gitRelativeRootPath(g.uri.path)===n.path,C=g.range.start.line+1===n.line;return w&&C});let s;if(i>-1)s=this._pendingCommentThreadAdds[i],s.threadId=n.id,s.comments=n.comments.map(g=>new et(g,s)),this._pendingCommentThreadAdds.splice(i,1);else{const w=this.getPREditors(o.window.visibleTextEditors).find(C=>{const P=ct(C.document.uri),M=n.diffSide===Ce.RIGHT&&!(P==null?void 0:P.isBase)||n.diffSide===Ce.LEFT&&(P==null?void 0:P.isBase);return(P==null?void 0:P.fileName)===r&&M});if(w){const C=new o.Range(new o.Position(n.line-1,0),new o.Position(n.line-1,0));s=jr(w.document.uri,C,n,this._commentController)}}if(!s)return;const l=this.getCommentThreadCacheKey(n.path,n.diffSide===Ce.LEFT);this._commentThreadCache[l]?this._commentThreadCache[l].push(s):this._commentThreadCache[l]=[s]}),e.changed.forEach(n=>{const r=this.getCommentThreadCacheKey(n.path,n.diffSide===Ce.LEFT),i=this._commentThreadCache[r].findIndex(s=>s.threadId===n.id);if(i>-1){const s=this._commentThreadCache[r][i];zu(s,n)}}),e.removed.forEach(async n=>{const r=this.getCommentThreadCacheKey(n.path,n.diffSide===Ce.LEFT),i=this._commentThreadCache[r].findIndex(s=>s.threadId===n.id);if(i>-1){const s=this._commentThreadCache[r][i];this._commentThreadCache[r].splice(i,1),s.dispose()}})}hasCommentThread(e){if(e.uri.scheme!=="pr")return!1;const n=ct(e.uri);return!(!n||n.prNumber!==this.pullRequestModel.number)}getCommentSide(e){const n=ct(e.uri);return(n==null?void 0:n.isBase)?Ce.LEFT:Ce.RIGHT}async createOrReplyComment(e,n,r,i){const s=e.comments.length,l=r?!1:i!==void 0?i:this.pullRequestModel.hasPendingReview,g=this.optimisticallyAddComment(e,n,l);try{if(s)await this.reply(e,n,r);else{const w=this.gitRelativeRootPath(e.uri.path),C=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(n,w,e.range.start.line+1,C,r)}r&&await this.pullRequestModel.submitReview()}catch(w){o.window.showErrorMessage(`Creating comment failed: ${w}`),e.comments=e.comments.map(C=>(C instanceof Tt&&C.id===g&&(C.mode=o.CommentMode.Editing),C))}}reply(e,n,r){const i=e.comments[0];if(i instanceof et)return this.pullRequestModel.createCommentReply(n,i._rawComment.graphNodeId,r);throw new Error("Cannot respond to temporary comment")}optimisticallyEditComment(e,n){const r=this._folderReposManager.getCurrentUser(this.pullRequestModel),i=new Tt(e,n.body instanceof o.MarkdownString?n.body.value:n.body,!!n.label,r,n);return e.comments=e.comments.map(s=>s instanceof et&&s.commentId===n.commentId?i:s),i.id}async editComment(e,n){if(n instanceof et){const r=this.optimisticallyEditComment(e,n);try{await this.pullRequestModel.editReviewComment(n._rawComment,n.body instanceof o.MarkdownString?n.body.value:n.body)}catch(i){o.window.showErrorMessage(`Editing comment failed ${i}`),e.comments=e.comments.map(s=>s instanceof Tt&&s.id===r?new et(n._rawComment,e):s)}}else this.createOrReplyComment(e,n.body instanceof o.MarkdownString?n.body.value:n.body,!1)}async deleteComment(e,n){n instanceof et?await this.pullRequestModel.deleteReviewComment(n.commentId):e.comments=e.comments.filter(r=>!(r instanceof Tt&&r.id===n.id)),await this.pullRequestModel.validateDraftMode()}gitRelativeRootPath(e){return h.relative(this._folderReposManager.repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,n){const r=e.comments.length,i=this.optimisticallyAddComment(e,n,!0);try{if(r)await this.reply(e,n,!1);else{const s=this.gitRelativeRootPath(e.uri.path),l=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(n,s,e.range.start.line+1,l)}this.setContextKey(!0)}catch(s){o.window.showErrorMessage(`Starting a review failed: ${s}`),e.comments=e.comments.map(l=>(l instanceof Tt&&l.id===i&&(l.mode=o.CommentMode.Editing),l))}}async openReview(){await At.createOrShow(this._folderReposManager.context.extensionUri,this._folderReposManager,this.pullRequestModel),At.scrollToReview(),this._folderReposManager.telemetry.sendTelemetryEvent("pr.openDescription")}optimisticallyAddComment(e,n,r){const i=this._folderReposManager.getCurrentUser(this.pullRequestModel),s=new Tt(e,n,r,i);return this.updateCommentThreadComments(e,[...e.comments,s]),s.id}updateCommentThreadComments(e,n){e.comments=n,vr(e)}async createCommentOnResolve(e,n){const r=await this.pullRequestModel.getPendingReviewId();await this.createOrReplyComment(e,n,!r)}async resolveReviewThread(e,n){try{n&&await this.createCommentOnResolve(e,n),await this.pullRequestModel.resolveReviewThread(e.threadId)}catch(r){o.window.showErrorMessage(`Resolving conversation failed: ${r}`)}}async unresolveReviewThread(e,n){try{n&&await this.createCommentOnResolve(e,n),await this.pullRequestModel.unresolveReviewThread(e.threadId)}catch(r){o.window.showErrorMessage(`Unresolving conversation failed: ${r}`)}}async toggleReaction(e,n){e.parent.uri.scheme==="pr"&&(e.reactions&&!e.reactions.find(r=>r.label===n.label&&!!r.authorHasReacted)?await this.pullRequestModel.addCommentReaction(e._rawComment.graphNodeId,n):await this.pullRequestModel.deleteCommentReaction(e._rawComment.graphNodeId,n))}setContextKey(e){o.commands.executeCommand("setContext","prInDraft",e)}dispose(){Object.keys(this._commentThreadCache).forEach(e=>{this._commentThreadCache[e].forEach(n=>n.dispose())}),Je(this._commentHandlerId),this._disposables.forEach(e=>e.dispose())}}var tp=Object.defineProperty,Bu=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?tp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class np{constructor(e){this.commentsController=e,Bu(this,"_prCommentHandlers",{}),Bu(this,"_prCommentingRangeProviders",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,n){const r=e.uri,i=ct(r);return!i||!this._prCommentingRangeProviders[i.prNumber]?void 0:this._prCommentingRangeProviders[i.prNumber].provideCommentingRanges.bind(this._prCommentingRangeProviders[i.prNumber])(e,n)}async toggleReaction(e,n){const r=e.parent.uri,i=ct(r);return!i||!this._prCommentHandlers[i.prNumber]||!this._prCommentHandlers[i.prNumber].handler.toggleReaction?void 0:this._prCommentHandlers[i.prNumber].handler.toggleReaction.bind(this._prCommentHandlers[i.prNumber].handler)(e,n)}registerCommentController(e,n,r){if(this._prCommentHandlers[e])return this._prCommentHandlers[e].refCount+=1,this._prCommentHandlers[e];const i=new ep(n,r,this.commentsController);return this._prCommentHandlers[e]={handler:i,refCount:1,dispose:()=>{!this._prCommentHandlers[e]||(this._prCommentHandlers[e].refCount-=1,this._prCommentHandlers[e].refCount===0&&(this._prCommentHandlers[e].handler.dispose(),delete this._prCommentHandlers[e]))}},this._prCommentHandlers[e]}registerCommentingRangeProvider(e,n){return this._prCommentingRangeProviders[e]=n,{dispose:()=>{delete this._prCommentingRangeProviders[e]}}}dispose(){Object.keys(this._prCommentHandlers).forEach(e=>{this._prCommentHandlers[e].handler.dispose()}),this._prCommentingRangeProviders={},this._prCommentHandlers={}}}var rp=ye(9967),ip=ye.n(rp),sp=Object.defineProperty,Ut=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?sp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const ju=20,fr="GraphQL";var _t;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(_t||(_t={}));const Re=class{constructor(t,e,n){this.remote=t,this._credentialStore=e,this._telemetry=n,Ut(this,"_initialized",!1),Ut(this,"_hub"),Ut(this,"_metadata"),Ut(this,"_toDispose",[]),Ut(this,"commentsController"),Ut(this,"commentsHandler"),Ut(this,"_pullRequestModels",new Map),Ut(this,"isGitHubDotCom"),Ut(this,"query",async r=>{const i=this.hub&&this.hub.graphql;if(!i)return a.debug(`Not available for query: ${r}`,fr),{data:null,loading:!1,networkStatus:Be.error,stale:!1};a.debug(`Request: ${JSON.stringify(r,null,2)}`,fr);const s=await i.query(r);return a.debug(`Response: ${JSON.stringify(s,null,2)}`,fr),s}),Ut(this,"mutate",async r=>{const i=this.hub&&this.hub.graphql;if(!i)return a.debug(`Not available for query: ${r}`,fr),{data:null,loading:!1,networkStatus:Be.error,stale:!1};a.debug(`Request: ${JSON.stringify(r,null,2)}`,fr);const s=await i.mutate(r);return a.debug(`Response: ${JSON.stringify(s,null,2)}`,fr),s}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new $i("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=o.comments.createCommentController(`github-browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new np(this.commentsController),this._toDispose.push(this.commentsHandler),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return ip()}async getMetadata(){var t;if(a.debug("Fetch metadata - enter",Re.ID),this._metadata)return a.debug(`Fetch metadata ${(t=this._metadata.owner)==null?void 0:t.login}/${this._metadata.name} - done`,Re.ID),this._metadata;const{octokit:e,remote:n}=await this.ensure(),r=await e.repos.get({owner:n.owner,repo:n.repositoryName});return a.debug(`Fetch metadata ${n.owner}/${n.repositoryName} - done`,Re.ID),this._metadata={...r.data,currentUser:e.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=Uu(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){a.appendLine(`Unable to resolve remote: ${t}`)}}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated(this.remote.authProviderId)?this._hub=this._credentialStore.getHub(this.remote.authProviderId):this._hub=await this._credentialStore.showSignInNotification(this.remote.authProviderId),this}async getDefaultBranch(){try{a.debug("Fetch default branch - enter",Re.ID);const{octokit:t,remote:e}=await this.ensure(),{data:n}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return a.debug("Fetch default branch - done",Re.ID),n.default_branch}catch(t){a.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,n,r,i;try{a.debug("Fetch repo permissions and available merge methods - enter",Re.ID);const{octokit:s,remote:l}=await this.ensure(),{data:g}=await s.repos.get({owner:l.owner,repo:l.repositoryName});return a.debug("Fetch repo permissions and available merge methods - done",Re.ID),{hasWritePermission:(e=(t=g.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(n=g.allow_merge_commit)!=null?n:!1,squash:(r=g.allow_squash_merge)!=null?r:!1,rebase:(i=g.allow_rebase_merge)!=null?i:!1}}}catch(s){a.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${s}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{a.debug("Fetch all pull requests - enter",Re.ID);const{octokit:e,remote:n}=await this.ensure(),r=await e.pulls.list({owner:n.owner,repo:n.repositoryName,per_page:ju,page:t||1}),i=!!r.headers.link&&r.headers.link.indexOf('rel="next"')>-1;if(!r.data)return a.appendLine(`Warning: no result data for ${n.owner}/${n.repositoryName} Status: ${r.status}`),{items:[],hasMorePages:!1};const s=r.data.map(l=>l.head.repo?this.createOrUpdatePullRequestModel(Qn(l,this)):(a.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(l=>l!==null);return a.debug("Fetch all pull requests - done",Re.ID),{items:s,hasMorePages:i}}catch(e){if(a.appendLine(`Fetching all pull requests failed: ${e}`,Re.ID),e.code===404)o.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{a.debug("Fetch pull requests for branch - enter",Re.ID);const{octokit:e,remote:n}=await this.ensure(),i=(await e.pulls.list({owner:n.owner,repo:n.repositoryName,head:`${n.owner}:${t}`})).data.map(s=>this.createOrUpdatePullRequestModel(Qn(s,this))).filter(s=>s!==null);return a.debug("Fetch pull requests for branch - done",Re.ID),i}catch(e){if(a.appendLine(`Fetching pull requests for branch failed: ${e}`,Re.ID),e.code===404)o.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const n=new Hi(e.repositoryName,e.repositoryUrl,new _n(e.repositoryUrl));t=new Re(n,this._credentialStore,this._telemetry)}return t}async getIssuesForUserByMilestone(t){var e;try{a.debug("Fetch all issues - enter",Re.ID);const{query:n,remote:r,schema:i}=await this.ensure(),{data:s}=await n({query:i.GetMilestones,variables:{owner:r.owner,name:r.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(r.authProviderId))==null?void 0:e.login}});a.debug("Fetch all issues - done",Re.ID);const l=[];let g=this;return s&&s.repository.milestones&&s.repository.milestones.nodes&&s.repository.milestones.nodes.forEach(w=>{const C=ya(w);if(C){const P=[];w.issues.edges.forEach(M=>{const $=ba(M.node,this);g=this.getRepoForIssue(g,$),P.push(new ut(g,g.remote,$))}),l.push({milestone:C,issues:P})}}),{items:l,hasMorePages:s.repository.milestones.pageInfo.hasNextPage}}catch(n){a.appendLine(`GithubRepository> Unable to fetch issues: ${n}`);return}}async getIssuesWithoutMilestone(t){var e;try{a.debug("Fetch issues without milestone- enter",Re.ID);const{query:n,remote:r,schema:i}=await this.ensure(),{data:s}=await n({query:i.IssuesWithoutMilestone,variables:{owner:r.owner,name:r.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(r.authProviderId))==null?void 0:e.login}});a.debug("Fetch issues without milestone - done",Re.ID);const l=[];let g=this;return s&&s.repository.issues.edges&&s.repository.issues.edges.forEach(w=>{if(w.node.id){const C=ba(w.node,this);g=this.getRepoForIssue(g,C),l.push(new ut(g,g.remote,C))}}),{items:l,hasMorePages:s.repository.issues.pageInfo.hasNextPage}}catch(n){a.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${n}`);return}}async getIssues(t,e){try{a.debug("Fetch issues with query - enter",Re.ID);const{query:n,schema:r}=await this.ensure(),{data:i}=await n({query:r.Issues,variables:{query:`${e} type:issue`}});a.debug("Fetch issues with query - done",Re.ID);const s=[];let l=this;return i&&i.search.edges&&i.search.edges.forEach(g=>{if(g.node.id){const w=ba(g.node,this);l=this.getRepoForIssue(l,w),s.push(new ut(l,l.remote,w))}}),{items:s,hasMorePages:i.search.pageInfo.hasNextPage}}catch(n){a.appendLine(`GithubRepository> Unable to fetch issues with query: ${n}`);return}}async getMaxIssue(){try{a.debug("Fetch max issue - enter",Re.ID);const{query:t,remote:e,schema:n}=await this.ensure(),{data:r}=await t({query:n.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return a.debug("Fetch max issue - done",Re.ID),r&&r.repository.issues.edges.length===1?r.repository.issues.edges[0].node.number:void 0}catch(t){a.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{a.debug("Fetch viewer permission - enter",Re.ID);const{query:t,remote:e,schema:n}=await this.ensure(),{data:r}=await t({query:n.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return a.debug("Fetch viewer permission - done",Re.ID),gp(r)}catch(t){return a.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),_t.Unknown}}async fork(){try{a.debug("Fork repository",Re.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){a.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{a.debug("Fetch viewer permission - enter",Re.ID);const{query:t,remote:e,schema:n}=await this.ensure(),{data:r}=await t({query:n.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return a.debug("Fetch viewer permission - done",Re.ID),r.repository}catch(t){a.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{a.debug(`Fetch pull request category ${t} - enter`,Re.ID);const{octokit:n,remote:r}=await this.ensure(),i=await n.users.getAuthenticated({}),s=await n.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:l,headers:g}=await n.search.issuesAndPullRequests({q:vp(s.data.full_name,i.data.login,t),per_page:ju,page:e||1}),w=[];l.items.forEach($=>{w.push(new Promise(async(j,W)=>{const K=await n.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:$.number});j(K)}))});const C=!!g.link&&g.link.indexOf('rel="next"')>-1,M=(await Promise.all(w)).map($=>$.data.head.repo?this.createOrUpdatePullRequestModel(Qn($.data,this)):(a.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter($=>$!==null);return a.debug(`Fetch pull request category ${t} - done`,Re.ID),{items:M,hasMorePages:C}}catch(n){if(a.appendLine(`GitHubRepository> Fetching all pull requests failed: ${n}`),n.code===404)o.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw n}}createOrUpdatePullRequestModel(t){let e=this._pullRequestModels.get(t.number);return e?e.update(t):(e=new gn(this._telemetry,this,this.remote,t),this._pullRequestModels.set(t.number,e)),e}async createPullRequest(t){const{octokit:e}=await this.ensure(),{data:n}=await e.pulls.create(t);return this.createOrUpdatePullRequestModel(Qn(n,this))}async getPullRequest(t){try{a.debug(`Fetch pull request ${t} - enter`,Re.ID);const{query:e,remote:n,schema:r}=await this.ensure(),{data:i}=await e({query:r.PullRequest,variables:{owner:n.owner,name:n.repositoryName,number:t}});return a.debug(`Fetch pull request ${t} - done`,Re.ID),this.createOrUpdatePullRequestModel(Ju(i,this))}catch(e){a.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{a.debug(`Fetch issue ${t} - enter`,Re.ID);const{query:n,remote:r,schema:i}=await this.ensure(),{data:s}=await n({query:e?i.IssueWithComments:i.Issue,variables:{owner:r.owner,name:r.repositoryName,number:t}});return a.debug(`Fetch issue ${t} - done`,Re.ID),new ut(this,r,Ju(s,this))}catch(n){a.appendLine(`GithubRepository> Unable to fetch PR: ${n}`);return}}async listBranches(t,e){const{octokit:n}=await this.ensure();a.debug(`List branches for ${t}/${e} - enter`,Re.ID);try{let r=[];const i=new Date().getTime();for await(const s of n.paginate.iterator("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100}))if(r.push(...s.data.map(l=>l.name)),new Date().getTime()-i>5e3)break;return a.debug(`List branches for ${t}/${e} - done`,Re.ID),r}catch(r){throw a.debug(`List branches for ${t}/${e} failed`,Re.ID),r}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(n){a.appendLine(`GithubRepository> Unable to delete branch: ${n}`);return}}async getMentionableUsers(){a.debug("Fetch mentionable users - enter",Re.ID);const{query:t,remote:e,schema:n}=await this.ensure();let r=null,i=!1;const s=[];do try{const l=await t({query:n.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:r}});s.push(...l.data.repository.mentionableUsers.nodes.map(g=>({login:g.login,avatarUrl:g.avatarUrl,name:g.name,url:g.url,email:g.email}))),i=l.data.repository.mentionableUsers.pageInfo.hasNextPage,r=l.data.repository.mentionableUsers.pageInfo.endCursor}catch(l){return a.debug(`Unable to fetch mentionable users: ${l}`,Re.ID),s}while(i);return s}async getAssignableUsers(){a.debug("Fetch assignable users - enter",Re.ID);const{query:t,remote:e,schema:n}=await this.ensure();let r=null,i=!1;const s=[];do try{const l=await t({query:n.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:r}});s.push(...l.data.repository.assignableUsers.nodes.map(g=>({login:g.login,avatarUrl:g.avatarUrl,name:g.name,url:g.url,email:g.email}))),i=l.data.repository.assignableUsers.pageInfo.hasNextPage,r=l.data.repository.assignableUsers.pageInfo.endCursor}catch(l){return a.debug(`Unable to fetch assignable users: ${l}`,Re.ID),l.graphQLErrors&&l.graphQLErrors.length>0&&l.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&o.window.showWarningMessage(`GitHub user features will not work. ${l.graphQLErrors[0].message}`),s}while(i);return s}async compareCommits(t,e){const{remote:n,octokit:r}=await this.ensure(),{data:i}=await r.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:t,head:e});return i}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}};let gr=Re;Ut(gr,"ID","GitHubRepository");function jr(t,e,n,r){const i=r.createCommentThread(t,e,[]);return i.threadId=n.id,i.comments=n.comments.map(s=>new et(s,i)),i.isResolved=n.isResolved,n.viewerCanResolve&&!n.isResolved?i.contextValue="canResolve":n.viewerCanUnresolve&&n.isResolved&&(i.contextValue="canUnresolve"),vr(i),i.collapsibleState=n.isResolved?o.CommentThreadCollapsibleState.Collapsed:o.CommentThreadCollapsibleState.Expanded,i}function zu(t,e){e.viewerCanResolve&&!e.isResolved?t.contextValue="canResolve":e.viewerCanUnresolve&&e.isResolved&&(t.contextValue="canUnresolve"),t.isResolved!==e.isResolved&&(t.isResolved=e.isResolved,t.collapsibleState=e.isResolved?o.CommentThreadCollapsibleState.Collapsed:o.CommentThreadCollapsibleState.Expanded),t.comments=e.comments.map(n=>new et(n,t)),vr(t)}function vr(t){if(t.isResolved){t.label="This thread has been marked as resolved";return}if(t.comments.length){const e=D(t.comments,n=>n.author.name).map(n=>`@${n.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function ap(t){return Wi().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const n=t.find(r=>r.label===e.label);return n?{label:n.label,authorHasReacted:n.viewerHasReacted,count:n.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function op(t,e){t.reactions=ap(e)}function Qu(t,e){e||(t.comments=t.comments.map(n=>(n instanceof et&&(n._rawComment.isDraft=!1),n.label=void 0,n)))}function An(t,e){var n;return{login:t.login,url:t.html_url,avatarUrl:Ea(t.avatar_url,(n=t.gravatar_id)!=null?n:void 0,e.remote.authProviderId)}}function Wu(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function Qn(t,e){const{number:n,body:r,title:i,html_url:s,user:l,state:g,assignees:w,created_at:C,updated_at:P,head:M,base:$,labels:j,node_id:W,id:K,draft:X}=t;return{id:K,graphNodeId:W,number:n,body:r!=null?r:"",title:i,url:s,user:An(l,e),state:g,merged:t.merged||!1,assignees:w?w.map(ie=>An(ie,e)):void 0,createdAt:C,updatedAt:P,head:Wu(M),base:Wu($),mergeable:t.mergeable?En.Mergeable:En.NotMergeable,labels:j.map(ie=>({name:"",color:"",...ie})),isDraft:X,suggestedReviewers:[]}}function up(t,e){const{number:n,body:r,title:i,html_url:s,user:l,state:g,assignees:w,created_at:C,updated_at:P,labels:M,node_id:$,id:j}=t;return{id:j,graphNodeId:$,number:n,body:r!=null?r:"",title:i,url:s,user:An(l,e),state:g,assignees:w?w.map(K=>An(K,e)):void 0,createdAt:C,updatedAt:P,labels:M.map(K=>{var X,ee;return typeof K=="string"?{name:K,color:""}:{name:(X=K.name)!=null?X:"",color:(ee=K.color)!=null?ee:""}}),suggestedReviewers:[]}}function lp(t,e){return{event:Ze.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:An(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function Ku(t){const e=[],n=qn(t.diffHunk);let r=n.next();for(;!r.done;){const i=r.value;e.push(i),r=n.next()}return e}function Ov(t,e){var n;const r={url:t.url,id:t.id,pullRequestReviewId:(n=t.pull_request_review_id)!=null?n:void 0,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:An(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},i=Ku(r);return r.diffHunks=i,r}function cp(t){switch(t){case"PullRequestCommit":return Ze.Committed;case"LabeledEvent":return Ze.Labeled;case"MilestonedEvent":return Ze.Milestoned;case"AssignedEvent":return Ze.Assigned;case"HeadRefDeletedEvent":return Ze.HeadRefDeleted;case"IssueComment":return Ze.Commented;case"PullRequestReview":return Ze.Reviewed;case"MergedEvent":return Ze.Merged;default:return Ze.Other}}function zi(t){return{id:t.id,isResolved:t.isResolved,viewerCanResolve:t.viewerCanResolve,viewerCanUnresolve:t.viewerCanUnresolve,path:t.path,line:t.line,originalLine:t.originalLine,diffSide:t.diffSide,isOutdated:t.isOutdated,comments:t.comments.nodes.map(e=>yr(e,t.isResolved))}}function yr(t,e){const n={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:Xu(t.reactionGroups),isResolved:e},r=Ku(n);return n.diffHunks=r,n}function Yu(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function Xu(t){const e=Wi().reduce((r,i)=>(r[i.title]=i,r),{});return t.filter(r=>r.users.totalCount>0).map(r=>({label:e[r.content].label,count:r.users.totalCount,icon:e[r.content].icon,viewerHasReacted:r.viewerHasReacted}))}function Qi(t,e,n){if(!!n)return{label:`${n.owner.login}:${t}`,ref:t,sha:e,repo:{cloneUrl:n.url}}}function $t(t,e){return t?{login:t.login,url:t.url,avatarUrl:Ea(t.avatarUrl,void 0,e.remote.authProviderId),email:t.email}:{login:"",url:""}}function ya(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function wa(t){switch(t){case"UNKNOWN":return En.Unknown;case"MERGEABLE":return En.Mergeable;case"CONFLICTING":return En.NotMergeable}}function Ju(t,e){var n,r,i,s,l,g;const w=t.repository.pullRequest;return{id:w.databaseId,graphNodeId:w.id,url:w.url,number:w.number,state:w.state,body:w.body,bodyHTML:w.bodyHTML,title:w.title,createdAt:w.createdAt,updatedAt:w.updatedAt,isRemoteHeadDeleted:!w.headRef,head:Qi((r=(n=w.headRef)==null?void 0:n.name)!=null?r:w.headRefName,w.headRefOid,w.headRepository),isRemoteBaseDeleted:!w.baseRef,base:Qi((s=(i=w.baseRef)==null?void 0:i.name)!=null?s:w.baseRefName,w.baseRefOid,w.baseRepository),user:$t(w.author,e),merged:w.merged,mergeable:wa(w.mergeable),labels:w.labels.nodes,isDraft:w.isDraft,suggestedReviewers:Zu(w.suggestedReviewers),comments:dp((l=w.comments)==null?void 0:l.nodes,e),milestone:ya(w.milestone),assignees:(g=w.assignees)==null?void 0:g.nodes.map(C=>$t(C,e))}}function dp(t,e){if(!t)return;const n=[];for(const r of t)n.push({author:$t(r.author,e),body:r.body,databaseId:r.databaseId});return n}function ba(t,e){var n,r,i,s;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:(n=t.assignees)==null?void 0:n.nodes.map(l=>$t(l,e)),user:$t(t.author,e),labels:t.labels.nodes,repositoryName:(r=t.repository)==null?void 0:r.name,repositoryOwner:(i=t.repository)==null?void 0:i.owner.login,repositoryUrl:(s=t.repository)==null?void 0:s.url}}function Mv(t,e){var n,r,i,s;const l=t;return{id:l.databaseId,graphNodeId:l.id,url:l.url,number:l.number,state:l.state,body:l.body,bodyHTML:l.bodyHTML,title:l.title,createdAt:l.createdAt,updatedAt:l.updatedAt,isRemoteHeadDeleted:!l.headRef,head:Qi((r=(n=l.headRef)==null?void 0:n.name)!=null?r:l.headRefName,l.headRefOid,l.headRepository),isRemoteBaseDeleted:!l.baseRef,base:Qi((s=(i=l.baseRef)==null?void 0:i.name)!=null?s:l.baseRefName,l.baseRefOid,l.baseRepository),user:$t(l.author,e),merged:l.merged,mergeable:wa(l.mergeable),labels:l.labels.nodes,isDraft:l.isDraft,suggestedReviewers:Zu(l.suggestedReviewers),milestone:ya(l.milestone)}}function Zu(t){return t?t.map(n=>({login:n.reviewer.login,avatarUrl:n.reviewer.avatarUrl,name:n.reviewer.name,url:n.reviewer.url,isAuthor:n.isAuthor,isCommenter:n.isCommenter})).sort(el):[]}function el(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function hp(t,e){return{event:Ze.Reviewed,comments:t.comments.nodes.map(n=>yr(n,!1)).filter(n=>!n.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:$t(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function tl(t,e){const n=[];return t.forEach(r=>{const i=cp(r.__typename);switch(i){case Ze.Commented:const s=r;n.push({htmlUrl:s.url,body:s.body,bodyHTML:s.bodyHTML,user:$t(s.author,e),event:i,canEdit:s.viewerCanUpdate,canDelete:s.viewerCanDelete,id:s.databaseId,graphNodeId:s.id,createdAt:s.createdAt});return;case Ze.Reviewed:const l=r;n.push({event:i,comments:[],submittedAt:l.submittedAt,body:l.body,bodyHTML:l.bodyHTML,htmlUrl:l.url,user:$t(l.author,e),authorAssociation:l.authorAssociation,state:l.state,id:l.databaseId});return;case Ze.Committed:const g=r;n.push({id:g.databaseId,event:i,sha:g.commit.oid,author:g.commit.author.user?$t(g.commit.author.user,e):{login:g.commit.committer.name},htmlUrl:g.url,message:g.commit.message,authoredDate:new Date(g.commit.authoredDate)});return;case Ze.Merged:const w=r;n.push({id:w.databaseId,event:i,user:$t(w.actor,e),createdAt:w.createdAt,mergeRef:w.mergeRef.name,sha:w.commit.oid,commitUrl:w.commit.commitUrl,url:w.url,graphNodeId:w.id});return;case Ze.Assigned:const C=r;n.push({id:C.databaseId,event:i,user:C.user,actor:C.actor});return;case Ze.HeadRefDeleted:const P=r;n.push({id:P.id,event:i,actor:P.actor,createdAt:P.createdAt,headRef:P.headRefName});return;default:break}}),n}function mp(t,e){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl?Ea(t.user.avatarUrl,void 0,e.remote.authProviderId):void 0,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:pp(t.user.contributionsCollection)}}function pp(t){const e=[];return t.commitContributionsByRepository.forEach(n=>{n.contributions.nodes.forEach(r=>{e.push({createdAt:new Date(r.occurredAt),repoNameWithOwner:n.repository.nameWithOwner})})}),e}function Wi(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:Wt.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:Wt.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:Wt.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:Wt.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:Wt.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:Wt.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:Wt.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:Wt.icons.reactions.EYES}]}function fp(t){const e=[];return t.forEach(n=>{var r,i;hc(n)&&e.push({login:n.author.login,name:n.author.name||""}),ys(n)&&e.push({login:n.user.login,name:(r=n.user.name)!=null?r:n.user.login}),mc(n)&&e.push({login:n.user.login,name:(i=n.user.name)!=null?i:n.user.login})}),e}function gp(t){return t&&t.repository.viewerPermission&&Object.values(_t).includes(t.repository.viewerPermission)?t.repository.viewerPermission:_t.Unknown}function nl(t,e){for(const n of t.repositories)if(e.path.toLowerCase()===n.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(n.rootUri.path.toLowerCase())&&e.path.substring(n.rootUri.path.length).startsWith("/"))return n}function rl(t,e,n){const r=e.filter(ys).filter(l=>l.state!=="PENDING");let i=[];const s=new Map;s.set(n.login,!0);for(let l=r.length-1;l>=0;l--){const g=r[l].user;s.get(g.login)||(s.set(g.login,!0),i.push({reviewer:g,state:r[l].state}))}return t.forEach(l=>{if(!s.get(l.login))i.push({reviewer:l,state:"REQUESTED"});else{const g=i.find(w=>w.reviewer.login===l.login);g.state="REQUESTED"}}),i=i.sort((l,g)=>l.state==="REQUESTED"&&g.state!=="REQUESTED"?1:g.state==="REQUESTED"&&l.state!=="REQUESTED"||l.reviewer.login.toLowerCase()<g.reviewer.login.toLowerCase()?-1:1),i}function vp(t,e,n){return`is:pull-request ${n.replace(/\$\{user\}/g,e)} type:pr repo:${t}`}function ka(){return o.env.remoteName==="codespaces"&&o.env.uiKind===o.UIKind.Web}function _a(){const t=o.workspace.getConfiguration("github-enterprise").get("uri","");if(t)return o.Uri.parse(t,!0)}function zr(){return!!_a()}function yp(t,e=200){return t?`https://www.gravatar.com/avatar/${t}?s=${e}&d=retro`:void 0}function Ea(t,e,n){var r;return n===Fe.github?t:e?yp(ws.createHash("md5").update((r=e==null?void 0:e.trim())==null?void 0:r.toLowerCase()).digest("hex")):void 0}var wp=Object.defineProperty,ht=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?wp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const Ki=class{constructor(t,e,n,r=!1){ht(this,"id"),ht(this,"graphNodeId"),ht(this,"number"),ht(this,"title"),ht(this,"html_url"),ht(this,"state",Ve.Open),ht(this,"author"),ht(this,"assignees"),ht(this,"createdAt"),ht(this,"updatedAt"),ht(this,"milestone"),ht(this,"githubRepository"),ht(this,"remote"),ht(this,"item"),ht(this,"bodyHTML"),this.githubRepository=t,this.remote=e,this.item=n,r||this.update(n)}get isOpen(){return this.state===Ve.Open}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=o.Uri.parse(`${t}&s=${64}`),n=e.toString;return e.toString=function(r){return n.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=Ve.Open:this.state=Ve.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees),this.item=t}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:n}=await this.githubRepository.ensure(),{data:r}=await e({mutation:n.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return r.updatePullRequest.pullRequest}catch(e){throw new Error(V(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){a.debug(`Fetch issue comments of PR #${this.number} - enter`,Ki.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),n=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return a.debug(`Fetch issue comments of PR #${this.number} - done`,Ki.ID),n.data}async createIssueComment(t){const{mutate:e,schema:n}=await this.githubRepository.ensure(),{data:r}=await e({mutation:n.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return Yu(r.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:n,schema:r}=await this.githubRepository.ensure(),{data:i}=await n({mutation:r.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return Yu(i.updateIssueComment.issueComment)}catch(n){throw new Error(V(n))}}async deleteIssueComment(t){try{const{octokit:e,remote:n}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:n.owner,repo:n.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(V(e))}}async addLabels(t){const{octokit:e,remote:n}=await this.githubRepository.ensure();await e.issues.addLabels({owner:n.owner,repo:n.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:n}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:n.owner,repo:n.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){a.debug(`Fetch timeline events of issue #${this.number} - enter`,Ki.ID);const t=this.githubRepository,{query:e,remote:n,schema:r}=await t.ensure();try{const{data:i}=await e({query:r.IssueTimelineEvents,variables:{owner:n.owner,name:n.repositoryName,number:this.number}}),s=i.repository.pullRequest.timelineItems.nodes;return tl(s,t)}catch(i){return console.log(i),[]}}};let ut=Ki;ht(ut,"ID","IssueModel");var bp=Object.defineProperty,ze=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?bp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const Ht=class extends ut{constructor(t,e,n,r,i){super(e,n,r,!0);ze(this,"isDraft"),ze(this,"localBranchName"),ze(this,"mergeBase"),ze(this,"suggestedReviewers"),ze(this,"_hasPendingReview",!1),ze(this,"_onDidChangePendingReviewState",new o.EventEmitter),ze(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),ze(this,"_reviewThreadsCache",[]),ze(this,"_reviewThreadsCacheInitialized",!1),ze(this,"_onDidChangeReviewThreads",new o.EventEmitter),ze(this,"onDidChangeReviewThreads",this._onDidChangeReviewThreads.event),ze(this,"fileChangeViewedState",{}),ze(this,"_onDidChangeFileViewedState",new o.EventEmitter),ze(this,"onDidChangeFileViewedState",this._onDidChangeFileViewedState.event),ze(this,"isActive"),ze(this,"_telemetry"),ze(this,"isRemoteHeadDeleted"),ze(this,"head"),ze(this,"isRemoteBaseDeleted"),ze(this,"base"),this._telemetry=t,this.isActive=!!i,this.update(r)}async initializeReviewThreadCache(){await this.getReviewThreads(),this._reviewThreadsCacheInitialized=!0}get reviewThreadsCache(){if(this._reviewThreadsCacheInitialized)return this._reviewThreadsCache;throw new Error("Cache has not been initialized yet")}get isMerged(){return this.state===Ve.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}updateState(t){t.toLowerCase()==="open"?this.state=Ve.Open:this.state=this.item.merged?Ve.Merged:Ve.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.isRemoteHeadDeleted!=null&&(this.isRemoteHeadDeleted=t.isRemoteHeadDeleted),t.head&&(this.head=new Za(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.isRemoteBaseDeleted!=null&&(this.isRemoteBaseDeleted=t.isRemoteBaseDeleted),t.base&&(this.base=new Za(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,o.window.showWarningMessage(t,"Open on GitHub").then(n=>{n&&n==="Open on GitHub"&&o.commands.executeCommand("vscode.open",o.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(an.Approve,t):this.createReview(an.Approve,t)).then(n=>(this._telemetry.sendTelemetryEvent("pr.approve"),n))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(an.RequestChanges,t):this.createReview(an.RequestChanges,t)).then(n=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),n))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),n=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),Qn(n.data,this.githubRepository)}async createReview(t,e){const{octokit:n,remote:r}=await this.githubRepository.ensure(),{data:i}=await n.pulls.createReview({owner:r.owner,repo:r.repositoryName,pull_number:this.number,event:t,body:e});return lp(i,this.githubRepository)}async submitReview(t,e){const n=await this.getPendingReviewId(),{mutate:r,schema:i}=await this.githubRepository.ensure();if(n){const{data:s}=await r({mutation:i.SubmitReview,variables:{id:n,event:t||an.Comment,body:e}});return this.hasPendingReview=!1,await this.updateDraftModeContext(),hp(s.submitPullRequestReview.pullRequestReview,this.githubRepository)}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async updateMilestone(t){const{mutate:e,schema:n}=await this.githubRepository.ensure(),r=t==="null"?null:t;try{await e({mutation:n.UpdatePullRequest,variables:{input:{pullRequestId:this.item.graphNodeId,milestoneId:r}}})}catch(i){a.appendLine(i)}}async updateAssignees(t){const{octokit:e,remote:n}=await this.githubRepository.ensure();await e.issues.addAssignees({owner:n.owner,repo:n.repositoryName,issue_number:this.number,assignees:t})}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),n=await this.githubRepository.getAuthenticatedUser();try{const{data:r}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:n}});return r.node.reviews.nodes.length>0?r.node.reviews.nodes[0].id:void 0}catch(r){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:n}=await this.githubRepository.ensure(),{data:r}=await e({mutation:n.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:i,databaseId:s}=r.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),this.getReviewThreads(),{deletedReviewId:s,deletedReviewComments:i.nodes.map(l=>yr(l,!1))}}async startReview(t){var e;const{mutate:n,schema:r}=await this.githubRepository.ensure(),{data:i}=await n({mutation:r.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,commitOID:t||((e=this.head)==null?void 0:e.sha)}}});if(!i)throw new Error("Failed to start review");return i.addPullRequestReview.pullRequestReview.id}async createReviewThread(t,e,n,r,i){if(!this.validatePullRequestModel("Creating comment failed"))return;const s=await this.getPendingReviewId(),{mutate:l,schema:g}=await this.githubRepository.ensure(),{data:w}=await l({mutation:g.AddReviewThread,variables:{input:{path:e,body:t,pullRequestId:this.graphNodeId,pullRequestReviewId:s,line:n,side:r}}});if(!w)throw new Error("Creating review thread failed.");i||(this.hasPendingReview=!0,await this.updateDraftModeContext());const C=w.addPullRequestReviewThread.thread,P=zi(C);return this._reviewThreadsCache.push(P),this._onDidChangeReviewThreads.fire({added:[P],changed:[],removed:[]}),P}async createCommentReply(t,e,n,r){var i;if(!this.validatePullRequestModel("Creating comment failed"))return;let s=await this.getPendingReviewId();s||(s=await this.startReview(r));const{mutate:l,schema:g}=await this.githubRepository.ensure(),{data:w}=await l({mutation:g.AddComment,variables:{input:{pullRequestReviewId:s,body:t,inReplyTo:e,commitOID:r||((i=this.head)==null?void 0:i.sha)}}});if(!w)throw new Error("Creating comment reply failed.");const{comment:C}=w.addPullRequestReviewComment,P=yr(C,!1);n&&(P.isDraft=!1);const M=this._reviewThreadsCache.find($=>$.comments.some(j=>j.graphNodeId===e));return M&&(M.comments.push(P),this._onDidChangeReviewThreads.fire({added:[],changed:[M],removed:[]})),P}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await o.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}async editReviewComment(t,e){const{mutate:n,schema:r}=await this.githubRepository.ensure(),{data:i}=await n({mutation:r.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});if(!i)throw new Error("Editing review comment failed.");const s=yr(i.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved),l=this._reviewThreadsCache.find(g=>g.comments.some(w=>w.graphNodeId===t.graphNodeId));if(l){const g=l.comments.findIndex(w=>w.graphNodeId===t.graphNodeId);l.comments.splice(g,1,s),this._onDidChangeReviewThreads.fire({added:[],changed:[l],removed:[]})}return s}async deleteReviewComment(t){try{const{octokit:e,remote:n}=await this.githubRepository.ensure(),r=Number(t);await e.pulls.deleteReviewComment({owner:n.owner,repo:n.repositoryName,comment_id:r});const i=this._reviewThreadsCache.findIndex(s=>s.comments.some(l=>l.id===r));if(i>-1){const s=this._reviewThreadsCache[i],l=s.comments.findIndex(g=>g.id===r);s.comments.splice(l,1),s.comments.length===0?(this._reviewThreadsCache.splice(i,1),this._onDidChangeReviewThreads.fire({added:[],changed:[],removed:[s]})):this._onDidChangeReviewThreads.fire({added:[],changed:[s],removed:[]})}}catch(e){throw new Error(V(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:n}=await t.ensure();return(await n.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(i=>An(i,t))}async requestReview(t){const{octokit:e,remote:n}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:n.owner,repo:n.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:n}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:n.owner,repo:n.repositoryName,pull_number:this.number,reviewers:[t]})}async deleteAssignees(t){const{octokit:e,remote:n}=await this.githubRepository.ensure();await e.issues.removeAssignees({owner:n.owner,repo:n.repositoryName,issue_number:this.number,assignees:[t]})}diffThreads(t){const e=[],n=[],r=[];t.forEach(i=>{const s=this._reviewThreadsCache.find(l=>l.id===i.id);s?ls()(i,s)||n.push(i):e.push(i)}),this._reviewThreadsCache.forEach(i=>{t.find(s=>s.id===i.id)||r.push(i)}),this._onDidChangeReviewThreads.fire({added:e,changed:n,removed:r})}async getReviewThreads(){const{remote:t,query:e,schema:n}=await this.githubRepository.ensure();try{const{data:r}=await e({query:n.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}}),i=r.repository.pullRequest.reviewThreads.nodes.map(s=>zi(s));return this.diffThreads(i),this._reviewThreadsCache=i,i}catch(r){return a.appendLine(`Failed to get pull request review comments: ${r}`),[]}}async getReviewComments(){const{remote:t,query:e,schema:n}=await this.githubRepository.ensure();try{const{data:r}=await e({query:n.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}});return r.repository.pullRequest.reviewThreads.nodes.map(s=>s.comments.nodes.map(l=>yr(l,s.isResolved),t)).reduce((s,l)=>s.concat(l),[]).sort((s,l)=>s.createdAt>l.createdAt?1:-1)}catch(r){return a.appendLine(`Failed to get pull request review comments: ${r}`),[]}}async getCommits(){try{a.debug(`Fetch commits of PR #${this.number} - enter`,Ht.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),n=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return a.debug(`Fetch commits of PR #${this.number} - done`,Ht.ID),n.data}catch(t){return o.window.showErrorMessage(`Fetching commits failed: ${V(t)}`),[]}}async getCommitChangedFiles(t){var e,n;try{a.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,Ht.ID);const{octokit:r,remote:i}=await this.githubRepository.ensure(),s=await r.repos.getCommit({owner:i.owner,repo:i.repositoryName,ref:t.sha});return a.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,Ht.ID),(n=(e=s.data.files)==null?void 0:e.filter(l=>!!l.patch))!=null?n:[]}catch(r){return o.window.showErrorMessage(`Fetching commit file changes failed: ${V(r)}`),[]}}async getFile(t,e){var n;const{octokit:r,remote:i}=await this.githubRepository.ensure(),s=await r.repos.getContent({owner:i.owner,repo:i.repositoryName,path:t,ref:e});if(Array.isArray(s.data))throw new Error(`Unexpected array response when getting file ${t}`);const l=(n=s.data.content)!=null?n:"";return Buffer.from(l,s.data.encoding).toString()}async getTimelineEvents(){a.debug(`Fetch timeline events of PR #${this.number} - enter`,Ht.ID);const{query:t,remote:e,schema:n}=await this.githubRepository.ensure();try{const{data:r}=await t({query:n.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),i=r.repository.pullRequest.timelineItems.nodes,s=tl(i,this.githubRepository);return await this.addReviewTimelineEventComments(s),s}catch(r){return console.log(r),[]}}async addReviewTimelineEventComments(t){const e=t.filter(ys),r=(await this.getReviewThreads()).reduce((C,P)=>C.concat(P.comments),[]),i=e.reduce((C,P)=>(C[P.id]=P,P.comments=[],C),{}),s=r.reduce((C,P)=>(C[P.id]=P,C),{}),l=[];let g=r.length;for(;g-- >0;){const C=r[g];if(!C.inReplyToId){l.unshift(C);continue}const P=s[C.inReplyToId];P.childComments=P.childComments||[],P.childComments=[C,...C.childComments||[],...P.childComments]}l.forEach(C=>{const P=i[C.pullRequestReviewId];P&&(P.comments=P.comments.concat(C).concat(C.childComments||[]))});const w=e.filter(C=>C.state.toLowerCase()==="pending")[0];w&&(w.comments=r.filter(C=>C.isDraft))}async getStatusChecks(){const{query:t,remote:e,schema:n}=await this.githubRepository.ensure(),i=(await t({query:n.GetChecks,variables:{owner:e.owner,name:e.repositoryName,number:this.number}})).data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return i?{state:i.state.toLowerCase(),statuses:i.contexts.nodes.map(s=>{var l,g,w,C;return pc(s)?{id:s.id,url:(l=s.checkSuite.app)==null?void 0:l.url,avatar_url:(g=s.checkSuite.app)==null?void 0:g.logoUrl,state:((w=s.conclusion)==null?void 0:w.toLowerCase())||"pending",description:s.title,context:s.name,target_url:s.detailsUrl}:{id:s.id,url:s.targetUrl,avatar_url:s.avatarUrl,state:(C=s.state)==null?void 0:C.toLowerCase(),description:s.description,context:s.context,target_url:s.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,n){const r=await e.getFileChangesInfo(),i=e.mergeBase||e.base.sha,l=(await Dr(r,t.repository,i)).find(P=>P.fileName===n.path||P.previousFileName===n.path);if(!l)throw new Error("Can't find matching file");let g,w;if(e.equals(t.activePullRequest)){const P=o.Uri.file(h.resolve(t.repository.rootUri.fsPath,l.fileName));g=l.status===be.DELETE?It(P,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):P,w=It(P,l.status===be.RENAME?l.previousFileName:l.fileName,void 0,l.status===be.ADD?"":i,!1,{base:!0},t.repository.rootUri)}else{const P=e.head.sha,M=l.status===be.RENAME?l.previousFileName:l.fileName;g=xt(o.Uri.file(h.resolve(t.repository.rootUri.fsPath,l.fileName)),e,l.baseCommit,P,l.fileName,!1,l.status),w=xt(o.Uri.file(h.resolve(t.repository.rootUri.fsPath,M)),e,l.baseCommit,P,l.fileName,!0,l.status)}const C=n.path.split("/");o.commands.executeCommand("vscode.diff",w,g,`${C[C.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){a.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,Ht.ID);const t=this.githubRepository,{octokit:e,remote:n}=await t.ensure();if(!this.base){const l=await e.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:this.number});this.update(Qn(l.data,t))}if(this.item.merged){const l=await e.pulls.listFiles({repo:n.repositoryName,owner:n.owner,pull_number:this.number});return this.mergeBase=this.base.sha,l.data}const{data:r}=await e.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=r.merge_base_commit.sha;const i=300;let s=[];return r.files.length>=i?(a.debug(`More than ${i} files changed, fetching all file changes of PR #${this.number}`,Ht.ID),s=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:n.repositoryName,per_page:100})):s=r.files,a.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${s.length} `,Ht.ID),s}async getMergeability(){try{a.debug(`Fetch pull request mergeability ${this.number} - enter`,Ht.ID);const{query:t,remote:e,schema:n}=await this.githubRepository.ensure(),{data:r}=await t({query:n.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return a.debug(`Fetch pull request mergeability ${this.number} - done`,Ht.ID),wa(r.repository.pullRequest.mergeable)}catch(t){return a.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),En.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:n}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),n.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure"),t}}updateCommentReactions(t,e){const n=this._reviewThreadsCache.find(r=>r.comments.some(i=>i.graphNodeId===t));if(n){const r=n.comments.find(i=>i.graphNodeId===t);r&&(r.reactions=Xu(e),this._onDidChangeReviewThreads.fire({added:[],changed:[n],removed:[]}))}}async addCommentReaction(t,e){const n=Wi().reduce((g,w)=>(g[w.label]=w.title,g),{}),{mutate:r,schema:i}=await this.githubRepository.ensure(),{data:s}=await r({mutation:i.AddReaction,variables:{input:{subjectId:t,content:n[e.label]}}});if(!s)throw new Error("Add comment reaction failed.");const l=s.addReaction.subject.reactionGroups;return this.updateCommentReactions(t,l),s}async deleteCommentReaction(t,e){const n=Wi().reduce((g,w)=>(g[w.label]=w.title,g),{}),{mutate:r,schema:i}=await this.githubRepository.ensure(),{data:s}=await r({mutation:i.DeleteReaction,variables:{input:{subjectId:t,content:n[e.label]}}});if(!s)throw new Error("Delete comment reaction failed.");const l=s.removeReaction.subject.reactionGroups;return this.updateCommentReactions(t,l),s}async resolveReviewThread(t){const{mutate:e,schema:n}=await this.githubRepository.ensure(),{data:r}=await e({mutation:n.ResolveReviewThread,variables:{input:{threadId:t}}});if(!r)throw new Error("Resolve review thread failed.");const i=this._reviewThreadsCache.findIndex(s=>s.id===t);if(i>-1){const s=zi(r.resolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,s),this._onDidChangeReviewThreads.fire({added:[],changed:[s],removed:[]})}}async unresolveReviewThread(t){const{mutate:e,schema:n}=await this.githubRepository.ensure(),{data:r}=await e({mutation:n.UnresolveReviewThread,variables:{input:{threadId:t}}});if(!r)throw new Error("Unresolve review thread failed.");const i=this._reviewThreadsCache.findIndex(s=>s.id===t);if(i>-1){const s=zi(r.unresolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,s),this._onDidChangeReviewThreads.fire({added:[],changed:[s],removed:[]})}}async getPullRequestFileViewState(){const{query:t,schema:e,remote:n}=await this.githubRepository.ensure(),r=[];let i=null,s=!1;do{const{data:l}=await t({query:e.PullRequestFiles,variables:{owner:n.owner,name:n.repositoryName,number:this.number,after:i}});l.repository.pullRequest.files.nodes.forEach(g=>{this.fileChangeViewedState[g.path]!==g.viewerViewedState&&r.push({fileName:g.path,viewed:g.viewerViewedState}),this.fileChangeViewedState[g.path]=g.viewerViewedState}),s=l.repository.pullRequest.files.pageInfo.hasNextPage,i=l.repository.pullRequest.files.pageInfo.endCursor}while(s);return r.length&&this._onDidChangeFileViewedState.fire({changed:r}),this.fileChangeViewedState}async markFileAsViewed(t){const{mutate:e,schema:n}=await this.githubRepository.ensure();await e({mutation:n.MarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=gt.VIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:gt.VIEWED}]})}async unmarkFileAsViewed(t){const{mutate:e,schema:n}=await this.githubRepository.ensure();await e({mutation:n.UnmarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=gt.UNVIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:gt.UNVIEWED}]})}};let gn=Ht;ze(gn,"ID","PullRequestModel");const Ra="github.pullRequest.pullNotification.show";function kp(t){t.globalState.setKeysForSync([Ra])}var _p=Object.defineProperty,il=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?_p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Ep extends Gu{constructor(e,n,r){super();this._extensionUri=e,this._folderRepositoryManager=n,this._item=r,il(this,"viewType","github:activePullRequest"),il(this,"_existingReviewers",[]),this.registerFolderRepositoryListener(),Hl(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(this._folderRepositoryManager.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:Ve.Merged})}))}registerFolderRepositoryListener(){this._disposables.push(this._folderRepositoryManager.onDidChangeActivePullRequest(e=>{if(this._folderRepositoryManager&&this._item){const n=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:n})}}))}resolveWebviewView(e,n,r){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":o.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e);case"pr.openOnGitHub":return ei(this._item,this._item._telemetry);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(e)}}async checkoutDefaultBranch(e){try{const n=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.checkoutDefaultBranch(n)}finally{this._replyMessage(e,{})}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){return Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests(),this._folderRepositoryManager.getBranchNameForPullRequest(e)]).then(n=>{var r,i;const[s,l,g,w,C]=n;if(!s)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(!this._view)return;this._item=s,this._view.title=`${s.title} #${e.number.toString()}`;const P=e.equals(this._folderRepositoryManager.activePullRequest),M=l.hasWritePermission,$=l.mergeMethodsAvailability,j=M||this._item.canEdit(),W=o.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),K=Vu($,W),X=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=rl(w!=null?w:[],g!=null?g:[],s.author);const ie=s.base&&s.head&&!s.base.repositoryCloneUrl.equals(s.head.repositoryCloneUrl)&&ka();this._postMessage({command:"pr.initialize",pullrequest:{number:s.number,title:s.title,url:s.html_url,createdAt:s.createdAt,body:s.body,bodyHTML:s.bodyHTML,labels:s.item.labels,author:{login:s.author.login,name:s.author.name,avatarUrl:s.userAvatar,url:s.author.url},state:s.state,isCurrentlyCheckedOut:P,isRemoteBaseDeleted:s.isRemoteBaseDeleted,base:s.base.label,isRemoteHeadDeleted:s.isRemoteHeadDeleted,isLocalHeadDeleted:!C,head:(i=(r=s.head)==null?void 0:r.label)!=null?i:"",canEdit:j,hasWritePermission:M,mergeable:s.item.mergeable,isDraft:s.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:$,defaultMergeMethod:K,isIssue:!1,isAuthor:X.login===s.author.login,reviewers:this._existingReviewers,continueOnGitHub:ie}})}).catch(n=>{o.window.showErrorMessage(V(n))})}close(e){o.commands.executeCommand("pr.close",this._item,e.args).then(n=>{n&&this._replyMessage(e,{value:n})})}createComment(e){this._item.createIssueComment(e.args).then(n=>{this._replyMessage(e,{value:n})})}updateReviewers(e){if(e){const n=this._existingReviewers.find(r=>e.user.login===r.reviewer.login);n?n.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(n=>{this.updateReviewers(n),this._replyMessage(e,{review:n,reviewers:this._existingReviewers}),o.commands.executeCommand("pr.refreshList")},n=>{o.window.showErrorMessage(`Approving pull request failed. ${V(n)}`),this._throwError(e,`${V(n)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(n=>{this.updateReviewers(n),this._replyMessage(e,{review:n,reviewers:this._existingReviewers})},n=>{o.window.showErrorMessage(`Requesting changes failed. ${V(n)}`),this._throwError(e,`${V(n)}`)})}submitReview(e){this._item.submitReview(an.Comment,e.args).then(n=>{this.updateReviewers(n),this._replyMessage(e,{review:n,reviewers:this._existingReviewers})},n=>{o.window.showErrorMessage(`Submitting review failed. ${V(n)}`),this._throwError(e,`${V(n)}`)})}async deleteBranch(e){const n=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const l=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${l}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(n){const l=o.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${n.branch}`,type:"local",picked:!!l});const g=o.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");n.remote&&n.createdForPullRequest&&!n.remoteInUse&&r.push({label:`Delete remote ${n.remote}, which is no longer used by any other branch`,type:"remote",picked:!!g})}if(o.env.remoteName==="codespaces"&&r.push({label:"Suspend Codespace",type:"suspend"}),!r.length){o.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const i=await o.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0}),s=[];if(i){const l=this._item.equals(this._folderRepositoryManager.activePullRequest),g=i.map(async w=>{switch(w.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),s.push(w.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(l){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await o.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await o.commands.executeCommand("git.cleanAll");else return;const C=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(C)}return await this._folderRepositoryManager.repository.deleteBranch(n.branch,!0),s.push(w.type);case"remote":return await this._folderRepositoryManager.repository.removeRemote(n.remote),s.push(w.type);case"suspend":return await o.commands.executeCommand("github.codespaces.disconnectSuspend"),s.push(w.type)}});await Promise.all(g),o.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:s})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(n=>{o.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:n})}).catch(n=>{o.window.showErrorMessage(`Unable to set PR ready for review. ${V(n)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:n,description:r,method:i}=e.args;if(await o.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:Ve.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,n,r,i).then(l=>{o.commands.executeCommand("pr.refreshList"),l.merged||o.window.showErrorMessage(`Merging PR failed: ${l.message}`),this._replyMessage(e,{state:l.merged?Ve.Merged:Ve.Open})}).catch(l=>{o.window.showErrorMessage(`Unable to merge pull request. ${V(l)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=va(),n=o.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(n).toString()}"></script>
	</body>
</html>`}}class Rp{constructor(e,n){this.reviewManager=e,this.folderRepositoryManager=n}provideTerminalLinks(e,n){var r;const i=e.line.indexOf("https://github.com");if(i===-1)return[];const s=e.line.substring(i),l=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),g=s.match(l);if(g&&g.length===4){const w=g[1],C=g[2],P=g[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex($=>$.remote.owner===w&&$.remote.repositoryName===C)>-1&&((r=this.reviewManager.repository.state.HEAD)==null?void 0:r.name)===P)return[{startIndex:i,length:e.line.length-i,tooltip:"Create a Pull Request",url:s}]}return[]}handleTerminalLink(e){const n=o.workspace.getConfiguration("githubPullRequests").get("terminalLinksHandler");if(n==="github"){o.env.openExternal(o.Uri.parse(e.url));return}if(n==="vscode"){this.reviewManager.createPullRequest();return}o.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?","Yes","No, continue to github.com").then(r=>{r==="Yes"?this.reviewManager.createPullRequest():o.env.openExternal(o.Uri.parse(e.url))})}}let sl=!1;const al=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(sl)return o.Uri.parse(e);if(await o.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return sl=!0,o.Uri.parse(e)}const n=t instanceof o.Uri?t:o.Uri.parse(t.host);return n.authority==="github.com"?o.Uri.parse("https://api.github.com"):o.Uri.parse(`${n.scheme}://${n.authority}`)}static getApiPath(t,e){return(t instanceof o.Uri?t:o.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var Cp=Object.defineProperty,Sp=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Cp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Ca{constructor(){Sp(this,"_servers",new Map().set("github.com",!0))}async isGitHub(e){if(e===null||e.path.endsWith(".wiki"))return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[n,r]=await Ca.getOptions(e,"HEAD","/rate_limit");let i=!1;try{const l=(await fa(n.toString(),r)).headers.get("x-github-request-id");return i=l!=null,i}catch(s){return a.appendLine(`No response from host ${e}: ${s.message}`,"GitHubServer"),i}finally{a.debug(`Host ${e} is associated with GitHub: ${i}`,"GitHubServer"),this._servers.set(e.authority,i)}}static async getOptions(e,n="GET",r,i){const s={"user-agent":"GitHub VSCode Pull Requests"};i&&(s.authorization=`token ${i}`);const l=o.Uri.joinPath(await al.getApiHost(e),al.getApiPath(e,r));return[l,{hostname:l.authority,port:443,method:n,headers:s,agent:Au}]}}var Tp=ye(9593),Np=ye.n(Tp),Yi=ye(7228);const ol=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function ul(t){return t.match(ol)}function Pp(t){return!!ul(t.body)}async function ll(t,e,n=!0){const r=t[2],i=t[3],s=t[5],l=Number(t[6])-1,g=t[8]?Number(t[8])-1:l;let w;for(const P of e.folderManagers){const M=P.getGitHubRemotes();for(const $ of M)if(r.toLowerCase()===$.owner.toLowerCase()&&i.toLowerCase()===$.repositoryName.toLowerCase()){w=P;break}if(w)break}if(!w)return;const C=o.Uri.joinPath(w.repository.rootUri,s);try{await o.workspace.fs.stat(C)}catch(P){return}return{file:C,start:l,end:g}}async function Ip(t,e){const n=ul(t.body);if(!n){o.window.showInformationMessage("Issue has no link.");return}const r=await ll(n,e,!1);if(!r)return o.env.openExternal(o.Uri.parse(n[0]));const i=await o.workspace.openTextDocument(r==null?void 0:r.file),s=i.lineAt(r.end<i.lineCount?r.end:i.lineCount-1),l=new o.Range(r.start,0,r.end,s.text.length);return o.window.showTextDocument(r.file,{selection:l})}var Dp=Object.defineProperty,cl=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Dp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const Lv=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Qr=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Sa=/\@([^\s]+)/,Ap=150,Xe="githubIssues",wr="queries",Fp="default",dl="workingIssueBranch",Ta="issueBranchTitle",hl="useBranchForIssues",xp="workingIssueFormatScm";function Na(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function Op(t,e,n,r){var i;const s=(i=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:i.get(n);if(s)return s;{let l,g,w;const C=e.getGitHubRemotes();for(const P of C){if(r)l=r.owner?r.owner:P.owner,g=r.name?r.name:P.repositoryName,w=r.issueNumber;else{const M=Na(n.match(Qr));M&&(!M.name||!M.owner)&&(l=P.owner,g=P.repositoryName)}if(l&&g&&w!==void 0){let M=await e.resolveIssue(l,g,w,!!r.commentNumber);if(M||(M=await e.resolvePullRequest(l,g,w)),M){let $;return t.resolvedIssues.has(e.repository.rootUri.path)?$=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,$=new(Np())(50)),$.set(n,M),M}}}}}function Mp(t,e){let n;return t.commitContributions.forEach(r=>{e.toLowerCase()===r.repoNameWithOwner.toLowerCase()&&(n=r.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),n}class Lp extends o.CompletionItem{constructor(){super(...arguments);cl(this,"login"),cl(this,"uri")}}function Pa(t,e){const n=new o.MarkdownString(void 0,!0);n.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&n.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const r=Mp(e,t.owner+"/"+t.repo);return(e.location||r)&&n.appendMarkdown(`  \r
\r
---`),e.location&&n.appendMarkdown(`  \r
$(location) ${e.location}`),r&&n.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${r}`),e.company&&n.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),n}function qp(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function Up(t,e){const n=qp(t);let r="ffffff";return n&&(.299*n.r+.587*n.g+.114*n.b)/255>.5&&(r="000000"),`<span style="color:#${r};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function ml(t,e,n){let r=t.search(e),i=0;for(;r>=0&&r<t.length;){let s;if(r===0||t.charAt(r-1)!=="&"){const g=t.substring(r).match(e);if(g){const w=await n(g);w&&(s=t.slice(0,r)+w,t=s+t.slice(r+g[0].length))}}i=s?s.length:r+1;const l=t.substring(i).search(e);r=l>0?i+l:l}return t}function pl(t,e){return ml(t,Qr,async n=>{const r=Na(n);if(r){const i=vl(r);return(!r.owner||!r.name)&&(r.owner=e.remote.owner,r.name=e.remote.repositoryName),`[${i}](https://github.com/${r.owner}/${r.name}/issues/${r.issueNumber})`}})}async function $p(t,e){return ml(t,ol,async n=>{const r=await ll(n,e);if(r){const i=await o.workspace.openTextDocument(r==null?void 0:r.file),s=i.lineAt(r.end<i.lineCount?r.end:i.lineCount-1),l=[r.file,{selection:{start:{line:r.start,character:0},end:{line:r.end,character:s.text.length}}}],g=o.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(l))}`);return`[${n[0]}](${g} "Open ${r.file.fsPath}")`}})}const Xi=200;async function Ia(t,e,n,r){const i=new o.MarkdownString(void 0,!0);i.isTrusted=!0;const s=new Date(t.createdAt),l=`${t.remote.owner}/${t.remote.repositoryName}`;i.appendMarkdown(`[${l}](https://github.com/${l}) on ${s.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const g=Yi.parse(t.title,{renderer:new Fa}).trim();i.appendMarkdown(`${Gp(t)} **${g}** [#${t.number}](${t.html_url})  
`);let w=Yi.parse(t.body,{renderer:new Fa});if(i.appendMarkdown(`  
`),w=w.length>Xi?w.substr(0,Xi)+"...":w,w=await pl(w,t),w=await $p(w,n),i.appendMarkdown(w+`  
`),i.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(C=>{i.appendMarkdown(`[${Up(C.color,C.name)}](https://github.com/${l}/labels/${encodeURIComponent(C.name)}) `)}),t.item.comments&&r){for(const C of t.item.comments)if(C.databaseId===r){i.appendMarkdown(`  \r
\r
---\r
`),i.appendMarkdown(`&nbsp;  
`),i.appendMarkdown(`![Avatar](${C.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${C.author.login}** commented`),i.appendMarkdown(`&nbsp;  
`);let P=Yi.parse(C.body.length>Xi?C.body.substr(0,Xi)+"...":C.body,{renderer:new Fa});P=await pl(P,t),i.appendMarkdown(P)}}return i}function Hp(t){switch(t.state){case Ve.Open:return t instanceof gn?"$(git-pull-request)":"$(issues)";case Ve.Closed:return t instanceof gn?"$(git-pull-request)":"$(issue-closed)";case Ve.Merged:return"$(git-merge)"}}function Gp(t){if(t instanceof gn)return Hp(t);switch(t.state){case Ve.Open:return'<span style="color:#22863a;">$(issues)</span>';case Ve.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const fl="HEAD",Vp=1,Bp=2,jp=3,gl=4,Ji=new Map([["upstream",Vp],["ups",Bp],["origin",jp]]);async function zp(t,e){var n,r,i;const s=((n=t.state.HEAD)==null?void 0:n.upstream)&&!Ji.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let l;const g=t.state.remotes.map(M=>({name:M.name,remote:M})).filter(M=>(M.name===s&&(l=M.remote),Ji.has(M.name))).sort((M,$)=>{var j,W;const K=(j=Ji.get(M.name))!=null?j:gl,X=(W=Ji.get($.name))!=null?W:gl;return K-X});s&&g.push({name:s,remote:l});const w=[fl];((r=t.state.HEAD)==null?void 0:r.name)&&t.state.HEAD.name!==fl&&w.unshift((i=t.state.HEAD)==null?void 0:i.name);let C,P;for(let M=0;M<w.length&&!C;M++)for(let $=0;$<g.length&&!C;$++){const j=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${g[$].name}/${w[M]}`,count:1})).filter(W=>W.remote&&W.name);j&&j.length>0&&(C=j[0],P=g[$].remote)}return P}async function Da(t,e){var n;let r,i;if(!e&&o.window.activeTextEditor)r=o.window.activeTextEditor.document,i=o.window.activeTextEditor.selection;else if(e)r=e.document,i=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from.",originalFile:void 0};const s=nl(t,r.uri);if(!s)return{permalink:void 0,error:"The current file isn't part of repository.",originalFile:r.uri};let l,g;try{const M=await s.log({maxEntries:1,path:r.uri.fsPath});if(M.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file.",originalFile:r.uri};l=M[0],g=M[0].hash}catch(M){g=(n=s.state.HEAD)==null?void 0:n.commit}const w=new Promise(M=>{var $;if(($=s.state.HEAD)==null?void 0:$.upstream)for(const j of s.state.remotes)s.state.HEAD.upstream.remote===j.name&&M(j);M(void 0)});let C=l?await Promise.race([zp(s,l),new Promise(M=>{setTimeout(()=>{M(w)},2e3)})]):await w;if((!C||!C.fetchUrl)&&(C=await w,!C||!C.fetchUrl))return{permalink:void 0,error:"There is no suitable remote.",originalFile:r.uri};const P=r.uri.path.substring(s.rootUri.path.length);return{permalink:`https://github.com/${new _n(C.fetchUrl).nameWithOwner}/blob/${g}${P}#L${i.start.line+1}-L${i.end.line+1}`,error:void 0,originalFile:r.uri}}function Qp(t){const e=/[~^:;'".,~#?%*[\]@\\{}]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const Wp=/\$\{(.*?)\}/g;async function Zi(t,e,n,r){return t.replace(Wp,(i,s)=>{switch(s){case"user":return r||i;case"issueNumber":return e?`${e.number}`:i;case"issueNumberLabel":return e?`${br(e,n)}`:i;case"issueTitle":return e?e.title:i;case"repository":return n?n.repo:i;case"owner":return n?n.owner:i;case"sanitizedIssueTitle":return e?Qp(e.title):i;default:return i}})}function br(t,e){const n={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(n.owner=t.remote.owner,n.name=t.remote.repositoryName),vl(n)}function vl(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function yl(t,e,n){var r;const i=await((r=e.currentIssue(t.repository.rootUri))==null?void 0:r.getCommitMessage());if(i)return t.repository.commit(i,{all:n})}const wl="Commit Staged",bl="Commit All";async function Kp(t,e,n){var r,i;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const s=[];switch(t.repository.state.indexChanges&&s.push(wl),t.repository.state.workingTreeChanges&&s.push(bl),await o.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...s)){case wl:{await yl(t,n,!1);break}case bl:{await yl(t,n,!0);break}default:return!1}}if((r=t.repository.state.HEAD)==null?void 0:r.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let s;return t.repository.state.remotes.length===1?s=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(s=await o.window.showQuickPick(t.repository.state.remotes.map(l=>l.name),{placeHolder:"Remote to push to"})),s?(await t.repository.push(s,(i=t.repository.state.HEAD)==null?void 0:i.name,!0),await e.createPullRequest(void 0),!0):(o.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function Aa(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await o.languages.getTokenInformationAtPosition(t,e)).type!==o.StandardTokenType.Comment)}async function kl(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:Aa(t,e)}function _l(t){const e=new nr.URLSearchParams(t.query).get("rootUri");return e?o.Uri.parse(e):void 0}class Fa extends Yi.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,n,r,i){return e+" "}hr(){return""}list(e,n,r){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,n){return e+" "+n}tablerow(e){return e}tablecell(e,n){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,n,r){return""}text(e){return e}link(e,n,r){return r+" "}}var Yp=Object.defineProperty,Xp=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Yp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const El="github-pr-remote",Rl="github-pr-owner-number",Cl=/branch\.(.+)\.github-pr-owner-number/,Jp=/branch\.(.+)\.remote/,He=class{static async checkoutFromFork(t,e,n){const r=await He.calculateUniqueBranchNameForPR(t,e);n||(a.appendLine(`Branch ${r} is from a fork. Create a remote first.`,He.ID),n=await He.createRemote(t,e.remote,e.head.repositoryCloneUrl));const i=`${e.head.ref}:${r}`;a.debug(`Fetch ${n}/${e.head.ref}:${r} - start`,He.ID),await t.fetch(n,i,1),a.debug(`Fetch ${n}/${e.head.ref}:${r} - done`,He.ID),await t.checkout(r),await t.setBranchUpstream(r,`refs/remotes/${n}/${e.head.ref}`),await this.unshallow(t),He.associateBranchWithPullRequest(t,e,r)}static async fetchAndCheckout(t,e,n){if(!n.validatePullRequestModel("Checkout pull request failed"))return;const r=He.getHeadRemoteForPullRequest(e,n),i=n.head.repositoryCloneUrl.owner!==n.base.repositoryCloneUrl.owner;if(!r||i)return He.checkoutFromFork(t,n,r&&r.remoteName);const s=n.head.ref,l=r.remoteName;let g;try{if(g=await t.getBranch(s),a.debug(`Checkout ${s}`,He.ID),await t.checkout(s),!g.upstream){const w=`refs/remotes/${l}/${s}`;await t.setBranchUpstream(s,w)}g.behind!==void 0&&g.behind>0&&g.ahead===0&&(a.debug("Pull from upstream",He.ID),await t.pull())}catch(w){a.appendLine(`Branch ${l}/${s} doesn't exist on local disk yet.`,He.ID);const C=`refs/remotes/${l}/${s}`;a.appendLine(`Fetch tracked branch ${C}`,He.ID),await t.fetch(l,s,1);const P=await t.getBranch(C);await t.createBranch(s,!0,P.commit),await t.setBranchUpstream(s,C),await this.unshallow(t)}await He.associateBranchWithPullRequest(t,n,s)}static async unshallow(t){try{await t.pull(!0)}catch(e){a.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`),await t.pull()}}static async checkoutExistingPullRequestBranch(t,e){const n=He.buildPullRequestMetadata(e),r=await t.getConfigs(),i=l=>r.filter(({key:g})=>l===g).map(({value:g})=>g)[0],s=r.map(l=>{const g=Cl.exec(l.key);return{branch:g&&g.length?g[1]:null,value:l.value}}).filter(l=>l.branch&&l.value===n);if(s&&s.length){const l=s[0].branch;await t.checkout(l);const g=i(`branch.${l}.remote`),w=i(`branch.${l}.merge`);await t.fetch(g,w);const C=await t.getBranch(s[0].branch);return C.behind!==void 0&&C.behind>0&&C.ahead===0&&(a.debug("Pull from upstream",He.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const n=He.buildPullRequestMetadata(e),r=await t.getConfigs(),i=r.map(s=>{const l=Cl.exec(s.key);return{branch:l&&l.length?l[1]:null,value:s.value}}).find(s=>!!s.branch&&s.value===n);if(i){const s=i.branch;try{const l=`branch.${s}.remote`,g=r.filter(M=>M.key===l).map(M=>M.value);let w;g.length&&(w=g[0]);let C=!1;if(w){const M=`remote.${w}.github-pr-remote`;r.filter(j=>j.key===M&&j.value).length&&(C=!0)}let P;return C&&(P=r.some(M=>!!(Jp.exec(M.key)&&M.key!==`branch.${s}.remote`&&M.value===w))),{branch:s,remote:w,createdForPullRequest:C,remoteInUse:P}}catch(l){return{branch:s}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,n,r,i]=e;return{owner:n,repositoryName:r,prNumber:Number(i)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${Rl}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const n=this.getMetadataKeyForBranch(e),r=await t.getConfig(n);return He.parsePullRequestMetadata(r)}catch(n){return}}static async createRemote(t,e,n){a.appendLine(`create remote for ${n}.`,He.ID);const r=mr(t);for(const s of r)if(new _n(s.url).equals(n))return s.remoteName;const i=He.getUniqueRemoteName(t,n.owner);return n.update({type:e.gitProtocol.type}),await t.addRemote(i,n.toString()),await t.setConfig(`remote.${i}.${El}`,"true"),i}static async isRemoteCreatedForPullRequest(t,e){try{a.debug(`Check if remote '${e}' is created for pull request - start`,He.ID);const n=await t.getConfig(`remote.${e}.${El}`);return a.debug(`Check if remote '${e}' is created for pull request - end`,He.ID),n==="true"}catch(n){return!1}}static async calculateUniqueBranchNameForPR(t,e){const n=`pr/${e.author.login}/${e.number}`;let r=n,i=1;for(;;)try{await t.getBranch(r),r=`${n}-${i++}`}catch(s){break}return r}static getUniqueRemoteName(t,e){let n=e,r=1;const i=mr(t);for(;i.find(s=>s.remoteName===n);)n=`${e}${r++}`;return n}static getHeadRemoteForPullRequest(t,e){return t.find(n=>n.gitProtocol&&n.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,n){a.appendLine(`associate ${n} with Pull Request #${e.number}`,He.ID);const r=`branch.${n}.${Rl}`;await t.setConfig(r,He.buildPullRequestMetadata(e))}};let Gt=He;Xp(Gt,"ID","PullRequestGitHelper");var Zp=Object.defineProperty,Ue=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Zp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class ef extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Sl extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class tf extends Error{constructor(e,n,r){super();this.branchName=e,this.upstreamRef=n,this.problem=r}get message(){const{upstreamRef:{remote:e,name:n},branchName:r,problem:i}=this;return`The upstream ref ${e}/${n} for branch ${r} ${i}.`}}const Vt="githubPullRequests",Wr="remotes",Tl="ReposManagerStateContext";var Nt;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(Nt||(Nt={}));const Nl="No Milestone";var Pl;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(Pl||(Pl={}));const Bt=class{constructor(t,e,n,r,i){this.context=t,this._repository=e,this.telemetry=n,this._git=r,this._credentialStore=i,Ue(this,"_subs"),Ue(this,"_activePullRequest"),Ue(this,"_activeIssue"),Ue(this,"_githubRepositories"),Ue(this,"_allGitHubRemotes",[]),Ue(this,"_mentionableUsers"),Ue(this,"_fetchMentionableUsersPromise"),Ue(this,"_assignableUsers"),Ue(this,"_fetchAssignableUsersPromise"),Ue(this,"_gitBlameCache",{}),Ue(this,"_githubManager"),Ue(this,"_repositoryPageInformation",new Map),Ue(this,"_onDidMergePullRequest",new o.EventEmitter),Ue(this,"onDidMergePullRequest",this._onDidMergePullRequest.event),Ue(this,"_onDidChangeActivePullRequest",new o.EventEmitter),Ue(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),Ue(this,"_onDidChangeActiveIssue",new o.EventEmitter),Ue(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),Ue(this,"_onDidLoadRepositories",new o.EventEmitter),Ue(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),Ue(this,"_onDidChangeRepositories",new o.EventEmitter),Ue(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),Ue(this,"_onDidChangeAssignableUsers",new o.EventEmitter),Ue(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),Ue(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new Ca,this._subs.push(o.workspace.onDidChangeConfiguration(async s=>{s.affectsConfiguration(`${Vt}.${Wr}`)&&await this.updateRepositories()})),this.setUpCompletionItemProvider()}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=mr(this.repository).filter(n=>n.host);return Promise.all(e.map(n=>this._githubManager.isGitHub(n.gitProtocol.normalizeUri()))).then(n=>e.filter((r,i,s)=>n[i])).catch(n=>(a.appendLine(`Resolving GitHub remotes failed: ${n}`),o.window.showErrorMessage(`Resolving GitHub remotes failed: ${V(n)}`),[]))}async getActiveGitHubRemotes(t){const e=o.workspace.getConfiguration(Vt).get(Wr);return e?(e.forEach(n=>{t.some(r=>r.remoteName===n)||a.appendLine(`No remote with name '${n}' found.`)}),a.debug(`Displaying configured remotes: ${e.join(", ")}`,Bt.ID),e.map(n=>t.find(r=>r.remoteName===n)).filter(n=>!!n)):(a.appendLine("Unable to read remotes setting"),Promise.resolve([]))}setUpCompletionItemProvider(){let t,e=[],n=[];o.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(r,i,s)=>{try{if(JSON.parse(r.uri.query).extensionId!==Ot)return;const g=r.getWordRangeAtPosition(i,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!g||g.isEmpty)return;let w=[];const C={};let P={},M,$;const j=o.window.visibleTextEditors;if(j.length){const ue=j.find(re=>re.document.uri.scheme==="pr");if(ue){const re=ct(ue.document.uri);M=re.prNumber,$=re.remoteName}else this._activePullRequest&&(M=this._activePullRequest.number,$=this._activePullRequest.remote.remoteName);if(t&&M&&M===t.number)return n}const W=new Promise(async ue=>{if(M&&$){if(a.debug("get Timeline Events and parse users",Bt.ID),t&&t.number===M)return e;const re=this._githubRepositories.find(ve=>ve.remote.remoteName===$);re&&(t=await re.getPullRequest(M),e=await t.getTimelineEvents()),w=fp(e),ue()}ue()}),K=new Promise(async ue=>{if(j.length)try{a.debug("git blame and parse users",Bt.ID);const re=h.resolve(j[0].document.uri.fsPath);let ve;this._gitBlameCache[re]?ve=this._gitBlameCache[re]:(ve=await this.repository.blame(re),this._gitBlameCache[re]=ve);const Le=ve.split(`
`);for(const qe of Le){const Ke=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(qe);if(Ke&&Ke.length===2){const xe=Ke[1].trim();C[xe]=!0}}}catch(re){a.debug(re,Bt.ID)}ue()}),X=new Promise(async ue=>{a.debug("get mentionable users",Bt.ID),P=await this.getMentionableUsers(),ue()});await Promise.all([W,K,X]),n=[];const ee={};a.debug("prepare user suggestions",Bt.ID),w.forEach(ue=>{ee[ue.login]||(ee[ue.login]=ue)});const ie={};for(const ue in P)for(const re of P[ue])if(!ee[re.login]&&!ie[re.login]){ie[re.login]=!0;let ve=2;(C[re.login]||re.name&&C[re.name])&&(ve=1),ee[re.login]&&(ve=0),n.push({label:re.login,insertText:re.login,filterText:`${re.login}`+(re.name&&re.name!==re.login?`_${re.name.toLowerCase().replace(" ","_")}`:""),sortText:`${ve}_${re.login}`,detail:re.name,kind:o.CompletionItemKind.User,login:re.login,uri:this.repository.rootUri})}for(const ue in ee)ie[ue]||n.push({label:ee[ue].login,insertText:`${ee[ue].login}`,filterText:`${ee[ue].login}`+(ee[ue].name&&ee[ue].name!==ee[ue].login?`_${ee[ue].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${ee[ue].login}`,detail:ee[ue].name,kind:o.CompletionItemKind.User,login:ee[ue].login,uri:this.repository.rootUri});return a.debug("done",Bt.ID),n}catch(l){return[]}},resolveCompletionItem:async(r,i)=>{try{const s=await this.getPullRequestDefaults(),l=await this.resolveUser(s.owner,s.repo,typeof r.label=="string"?r.label:r.label.label);l&&(r.documentation=Pa(s,l))}catch(s){}return r}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await o.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),a.appendLine("Found GitHub remote")):(await o.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),a.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){if(this._git.state==="uninitialized"){a.appendLine("Cannot updates repositories as git is uninitialized");return}const e=await this.getActiveRemotes(),n=this._credentialStore.isAuthenticated(Fe.github)||this._credentialStore.isAuthenticated(Fe["github-enterprise"]);o.commands.executeCommand("setContext","github:authenticated",n);const r=[],i=[];return e.filter(l=>this._credentialStore.isAuthenticated(l.authProviderId)).forEach(l=>{const g=this.createGitHubRepository(l,this._credentialStore);i.push(g.resolveRemote()),r.push(g)}),Promise.all(i).then(l=>{const g=this._githubRepositories;this._githubRepositories=r,g.forEach(C=>C.dispose());const w=g.length!==this._githubRepositories.length||!g.every(C=>this._githubRepositories.some(P=>P.remote.equals(C.remote)));return this._githubRepositories.length&&w&&this.checkIfMissingUpstream(),this.getMentionableUsers(w),this.getAssignableUsers(w),this._onDidLoadRepositories.fire(n||!e.length?Nt.RepositoriesLoaded:Nt.NeedsAuthentication),t||this._onDidChangeRepositories.fire(),Promise.resolve()})}async checkIfMissingUpstream(){var t;try{const n=await(await this.getOrigin()).getMetadata();if(n.fork&&n.parent){const r=new _n(n.parent.git_url);if(!this._githubRepositories.some(s=>s.remote.owner===r.owner&&s.remote.repositoryName===r.repositoryName)){const l=!this.repository.state.remotes.some(g=>g.name==="upstream")?"upstream":(t=n.parent.owner)==null?void 0:t.login;l&&await this.repository.addRemote(l,n.parent.clone_url)}}}catch(e){a.appendLine(`Missing upstream check failed: ${e}`)}}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}async getMentionableUsers(t){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;if(!this._fetchMentionableUsersPromise){const e={};return this._fetchMentionableUsersPromise=new Promise(n=>{const r=this._githubRepositories.map(async i=>{const s=await i.getMentionableUsers();e[i.remote.remoteName]=s});Promise.all(r).then(()=>{this._mentionableUsers=e,this._fetchMentionableUsersPromise=void 0,n(e)})})}return this._fetchMentionableUsersPromise}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},n=[];return this._fetchAssignableUsersPromise=new Promise(r=>{const i=this._githubRepositories.map(async s=>{const l=await s.getAssignableUsers();e[s.remote.remoteName]=l.sort(el),n.push(...l)});Promise.all(i).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,r(e),this._onDidChangeAssignableUsers.fire(n)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const n=this.repository.state.refs.filter(r=>r.type===_e.Head&&r.name!==void 0).map(r=>r.name).map(async r=>{const i=await Gt.getMatchingPullRequestMetadataForBranch(this.repository,r);if(i){const{owner:s,prNumber:l}=i,g=t.find(w=>w.remote.owner.toLocaleLowerCase()===s.toLocaleLowerCase());if(g){const w=await g.getPullRequest(l);if(w)return w.localBranchName=r,w}}return Promise.resolve(null)});return Promise.all(n).then(r=>r.filter(i=>i!==null))}async getLabels(t,e){const n=t?t.githubRepository:this._githubRepositories.find(w=>w.remote.owner===(e==null?void 0:e.owner)&&w.remote.repositoryName===(e==null?void 0:e.repo));if(!n)throw new Error("No matching repository found for getting labels.");const{remote:r,octokit:i}=await n.ensure();let s=!1,l=1,g=[];do{const w=await i.issues.listLabelsForRepo({owner:r.owner,repo:r.repositoryName,per_page:100,page:l});g=g.concat(w.data.map(C=>({name:C.name,color:C.color}))),g=g.sort((C,P)=>C.name.localeCompare(P.name)),s=!!w.headers.link&&w.headers.link.indexOf('rel="next"')>-1,l+=1}while(s);return g}async listBranches(t,e){if(this._githubRepositories.length)return this._githubRepositories[0].listBranches(t,e);throw new Error("No GitHub repositories found")}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let n;try{n=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(i){}if(!n)return;await Gt.isRemoteCreatedForPullRequest(this.repository,n)&&((await this.repository.getConfigs()).some(({key:l,value:g})=>/^branch.*\.remote$/.test(l)&&g===n)||await this.repository.removeRemote(n)),this.telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,n=0,r=rt.All,i){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const s=()=>this.totalFetchedPages.get(e)||0,l=M=>this.totalFetchedPages.set(e,M);for(const M of this._githubRepositories){const $=M.remote.url.toString()+e;this._repositoryPageInformation.get($)||this._repositoryPageInformation.set($,{pullRequestPage:0,hasMorePages:null})}let g=0;const w={hasMorePages:!1,items:[]},C=M=>{g++,M&&(w.items=w.items.concat(M.items),w.hasMorePages=M.hasMorePages)},P=this._githubRepositories.filter(M=>{const $=this._repositoryPageInformation.get(M.remote.url.toString()+e);return $&&(t.fetchNextPage===!1||$.hasMorePages!==!1)});for(let M=0;M<P.length;M++){const $=P[M],j=$.remote.url.toString()+e,W=this._repositoryPageInformation.get(j),K=async X=>{switch(n){case 0:return r===rt.All?$.getAllPullRequests(X):$.getPullRequestsForCategory(i||"",X);case 1:return $.getIssuesForUserByMilestone(W.pullRequestPage);case 2:return $.getIssuesWithoutMilestone(W.pullRequestPage);case 3:return $.getIssues(W.pullRequestPage,i)}};if(t.fetchNextPage?(W.pullRequestPage++,C(await K(W.pullRequestPage)),l(s()+1)):(W.pullRequestPage===0&&(W.pullRequestPage=1),(await Promise.all(Array.from({length:W.pullRequestPage}).map((ee,ie)=>K(ie+1)))).forEach(ee=>C(ee))),W.hasMorePages=w.hasMorePages,w.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&g>=s()))return s()===0&&l(g),{items:w.items,hasMorePages:W.hasMorePages,hasUnsearchedRepositories:M<P.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},n){const r=t.toString()+(n||"");return this.fetchPagedData(e,r,0,t,n)}async getMilestones(t={fetchNextPage:!1},e=!1,n){const r=await this.fetchPagedData(t,"issuesKey",1,rt.All,n);if(e){const i=await this.fetchPagedData(t,"issuesKey",2,rt.All,n);r.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:Nl},issues:i.items})}return r}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,rt.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(n=>n.getMaxIssue()));let e=0;for(const n of t)n!==void 0&&(e=Math.max(e,n));return e}async getPullRequestTemplates(){const t=await o.workspace.findFiles(new o.RelativePattern(this._repository.rootUri.path,"{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),e=await o.workspace.findFiles(new o.RelativePattern(this._repository.rootUri.path,"{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),n=await o.workspace.findFiles(new o.RelativePattern(this._repository.rootUri.path,"PULL_REQUEST_TEMPLATE/*.md")),r=await o.workspace.findFiles(new o.RelativePattern(this._repository.rootUri.path,"{docs,.github}/PULL_REQUEST_TEMPLATE/*.md"));return[...t,...e,...n,...r]}async getPullRequestDefaults(t){var e;if(!t&&!this.repository.state.HEAD)throw new Sl(this.repository);const n=await this.getOrigin(t),r=await n.getMetadata(),i=(e=o.workspace.getConfiguration(Vt).inspect(Wr))==null?void 0:e.defaultValue,s=o.workspace.getConfiguration(Vt).get(Wr),l=r.fork&&r.parent&&i===s?r.parent:await(this.findRepo(_r("upstream"))||n).getMetadata();return{owner:l.owner.login,repo:l.name,base:l.default_branch}}async getMetadata(t){const e=this.findRepo(_r(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:n}=await e.getBranch(t);if(n){const{message:r}=await e.getCommit(n);return r}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new ef(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const i=this.findRepo(_r(e.remote));if(!i){const s=(await this.getAllGitHubRemotes()).find(l=>l.remoteName===e.remote);if(s)return new gr(s,this._credentialStore,this.telemetry);throw a.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new tf(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return i}const[n,...r]=this._githubRepositories;return r.length&&(this.findRepo(_r("origin"))||this.findRepo(nf))||n}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,n;const r=this._githubRepositories.find(i=>i.remote.owner===t.owner&&i.remote.repositoryName===t.repo);if(!r)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{const i=await r.createPullRequest(t),s=t.head.indexOf(":"),l=t.head.slice(s+1);return await Gt.associateBranchWithPullRequest(this._repository,i,l),this.telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),i}catch(i){if(i.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await o.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await o.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await o.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((n=this._repository.state.HEAD)==null?void 0:n.upstream))return await o.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(r.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw a.appendLine(`GitHubRepository> Creating pull requests failed: ${i}`),this.telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString()}),new Error(V(i))}}async createIssue(t){try{const e=this._githubRepositories.find(s=>s.remote.owner===t.owner&&s.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:n}=await e.octokit.issues.create(t),r=up(n,e),i=new ut(e,e.remote,r);return this.telemetry.sendTelemetryEvent("issue.create.success"),i}catch(e){a.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this.telemetry.sendTelemetryErrorEvent("issue.create.failure"),o.window.showWarningMessage(`Creating issue failed: ${V(e)}`)}}async assignIssue(t,e){try{const n=this._githubRepositories.find(i=>i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName);if(!n)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await n.ensure();const r={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await n.octokit.issues.addAssignees(r),this.telemetry.sendTelemetryEvent("issue.assign.success")}catch(n){a.appendLine(`GitHubRepository> Assigning issue failed: ${n}`),this.telemetry.sendTelemetryErrorEvent("issue.assign.failure"),o.window.showWarningMessage(`Assigning issue failed: ${V(n)}`)}}getCurrentUser(t){return An(this._credentialStore.getCurrentUser(t.githubRepository.remote.authProviderId),t.githubRepository)}async mergePullRequest(t,e,n,r){const{octokit:i,remote:s}=await t.githubRepository.ensure(),l=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,g=this.repository.state.HEAD&&this.repository.state.HEAD.commit,w=t.head&&t.head.sha,C=this.repository.state.workingTreeChanges.length>0;if(l===w){if(g!==w){const{ahead:P}=this.repository.state.HEAD;if(P&&await o.window.showWarningMessage(`You have ${P} unpushed ${P>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(C&&await o.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await i.pulls.merge({commit_message:n,commit_title:e,merge_method:r||o.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:s.owner,repo:s.repositoryName,pull_number:t.number}).then(P=>(this.telemetry.sendTelemetryEvent("pr.merge.success"),this._onDidMergePullRequest.fire(),P.data)).catch(P=>{throw this.telemetry.sendTelemetryErrorEvent("pr.merge.failure"),P})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(i=>{const s=i.key,l=/^branch\.(.*)\.(.*)$/.exec(s);if(l&&l.length===3){const g=l[1];e.has(g)||e.set(g,{});const w=e.get(g);if(l[2]==="remote"&&(w.remote=i.value),l[2]==="github-pr-owner-number"){const C=Gt.parsePullRequestMetadata(i.value);w.metadata=C}e.set(g,w)}});const n=[];e.forEach((i,s)=>{if(i.metadata){const l=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(l?l.owner===i.metadata.owner&&l.repositoryName===i.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===i.metadata.prNumber:!1)||n.push({label:`${s}`,description:`${i.metadata.repositoryName}/${i.metadata.owner} #${i.metadata.prNumber}`,picked:!1,metadata:i.metadata})}});const r=await Promise.all(n.map(async i=>{const s=i.metadata,l=this._githubRepositories.find(P=>P.remote.owner.toLowerCase()===s.owner.toLowerCase()&&P.remote.repositoryName.toLowerCase()===s.repositoryName.toLowerCase());if(!l)return i;const{remote:g,query:w,schema:C}=await l.ensure();try{const{data:P}=await w({query:C.PullRequestState,variables:{owner:g.owner,name:g.repositoryName,number:s.prNumber}});i.legacy=P.repository.pullRequest.state!=="OPEN"}catch{}return i}));return r.forEach(i=>{i.legacy?i.picked=!0:i.description=`${i.description} is still Open`}),r}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(r=>{const i=r.key;let s=/^branch\.(.*)\.(.*)$/.exec(i);if(s&&s.length===3){const l=s[1];if(s[2]==="remote"){const g=r.value;e.has(g)||e.set(g,{branches:new Set}),e.get(g).branches.add(l)}}if(s=/^remote\.(.*)\.(.*)$/.exec(i),s&&s.length===3){const l=s[1];e.has(l)||e.set(l,{branches:new Set});const g=e.get(l);s[2]==="github-pr-remote"&&(g.createdForPullRequest=r.value==="true"),s[2]==="url"&&(g.url=r.value)}});const n=[];return e.forEach((r,i)=>{if(r.branches.size===0){let s=r.createdForPullRequest?"":"Not created by GitHub Pull Request extension";r.url&&(s=s?s+" "+r.url:r.url),n.push({label:i,description:s,picked:r.createdForPullRequest,remote:i})}}),n}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=o.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const n=await this.getBranchDeletionItems();e.items=n,e.selectedItems=n.filter(i=>i.picked),e.busy=!1;let r=!0;e.onDidAccept(async()=>{if(r){const i=e.selectedItems;if(i.length){e.busy=!0;try{await Promise.all(i.map(async l=>{await this.repository.deleteBranch(l.label,!0)})),e.busy=!1}catch(l){e.hide(),o.window.showErrorMessage(`Deleting branches failed: ${l}`)}}r=!1,e.busy=!0;const s=await this.getRemoteDeletionItems();s?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=s,e.selectedItems=s.filter(l=>l.picked)):e.hide()}else{const i=e.selectedItems;i.length&&(e.busy=!0,await Promise.all(i.map(async s=>{await this.repository.removeRemote(s.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fulfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;a.debug("Fulfill pull request missing info - start",Bt.ID);const e=t.githubRepository,{octokit:n,remote:r}=await e.ensure();if(!t.base){const{data:i}=await n.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:t.number});t.update(Qn(i,e))}if(!t.mergeBase){const{data:i}=await n.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=i.merge_base_commit.sha}}catch(e){o.window.showErrorMessage(`Fetching Pull Request merge base failed: ${V(e)}`)}a.debug("Fulfill pull request missing info - done",Bt.ID)}async resolveItem(t,e){let n=this._githubRepositories.find(r=>r.remote.owner.toLowerCase()===t.toLowerCase()&&r.remote.repositoryName.toLowerCase()===e.toLowerCase());return n||(n=this.createGitHubRepositoryFromOwnerName(t,e)),n}async resolvePullRequest(t,e,n){const r=await this.resolveItem(t,e);if(r)return r.getPullRequest(n)}async resolveIssue(t,e,n,r=!1){const i=await this.resolveItem(t,e);if(i)return i.getIssue(n,r)}async resolveUser(t,e,n){a.debug(`Fetch user ${n}`,Bt.ID);const r=this.createGitHubRepositoryFromOwnerName(t,e),{query:i,schema:s}=await r.ensure();try{const{data:l}=await i({query:s.GetUser,variables:{login:n}});return mp(l,r)}catch(l){console.log(l)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await Gt.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;for(const t of this.gitHubRepositories)if(t.remote.remoteName===this.repository.state.HEAD.upstream.remote){const e=await t.getPullRequestForBranch(this.repository.state.HEAD.upstream.name);if(e&&e.length>0)return{owner:t.remote.owner,repositoryName:t.remote.repositoryName,prNumber:e[0].number,model:e[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await Gt.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await Gt.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await Gt.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async checkoutDefaultBranch(t){try{const e=await this.repository.getBranch(t);e.upstream&&t===e.upstream.name?await this.repository.checkout(t):await o.commands.executeCommand("git.checkout")}catch(e){if(e.gitErrorCode&&e.gitErrorCode===nt.DirtyWorkTree){o.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}o.window.showErrorMessage(`Exiting failed: ${e}`)}}createGitHubRepository(t,e){return new gr(t,e,this.telemetry)}createGitHubRepositoryFromOwnerName(t,e){const n=`https://github.com/${t}/${e}`;return new gr(new Hi(e,n,new _n(n)),this._credentialStore,this.telemetry)}async findUpstreamForItem(t){let e,n;for(const i of this.gitHubRepositories){if(!e&&i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName){e=i;continue}const s=await i.getRepositoryForkDetails();if(s&&s.isFork&&s.parent.owner===t.remote.owner&&s.parent.name===t.remote.repositoryName){const l=await i.getViewerPermission();if(l===_t.Admin||l===_t.Maintain||l===_t.Write){n=i.remote;break}}}let r=!1;if(e&&!n){const i=await t.githubRepository.getViewerPermission();(i===_t.Read||i===_t.Triage||i===_t.Unknown)&&(r=!0)}return{needsFork:r,upstream:e,remote:n}}async forkWithProgress(t,e,n,r){t.report({message:`Forking ${n}...`});const i=await e.fork();if(t.report({increment:50}),!i){o.window.showErrorMessage(`Unable to create a fork of ${n}. Check that your GitHub credentials are correct.`);return}const s=r.state.remotes.length>1?"origin":r.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await r.renameRemote(s,"upstream"),await r.addRemote(s,i),await new Promise(l=>{if(this.gitHubRepositories.length===0){const g=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(g.dispose(),l())})}else l()}),t.report({increment:50}),s}async doFork(t,e,n){return o.window.withProgress({location:o.ProgressLocation.Notification,title:"Creating Fork"},async r=>{try{return this.forkWithProgress(r,t,e,n)}catch(i){o.window.showErrorMessage(`Creating fork failed: ${i}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,n="Fork",r="Don't Fork";switch(await o.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},n,r)){case n:return this.doFork(t,e,this.repository);case r:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let kr=Bt;Ue(kr,"ID","FolderRepositoryManager");function qv(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const nf=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},_r=t=>({remote:{remoteName:e}})=>e===t,Il=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};var rf=Object.defineProperty,Et=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?rf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class sf extends Gu{constructor(e,n,r,i){super();this._extensionUri=e,this._folderRepositoryManager=n,this._pullRequestDefaults=r,Et(this,"viewType","github:createPullRequest"),Et(this,"_onDone",new o.EventEmitter),Et(this,"onDone",this._onDone.event),Et(this,"_onDidChangeBaseRemote",new o.EventEmitter),Et(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),Et(this,"_onDidChangeBaseBranch",new o.EventEmitter),Et(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),Et(this,"_onDidChangeCompareRemote",new o.EventEmitter),Et(this,"onDidChangeCompareRemote",this._onDidChangeCompareRemote.event),Et(this,"_onDidChangeCompareBranch",new o.EventEmitter),Et(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),Et(this,"_firstLoad",!0),Et(this,"_compareBranch"),Et(this,"_compareRemote"),this._compareBranch=i}resolveWebviewView(e,n,r){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get compareBranch(){return this._compareBranch}set compareBranch(e){var n,r;e&&((e==null?void 0:e.name)!==this._compareBranch.name||((n=e==null?void 0:e.upstream)==null?void 0:n.remote)!==((r=this._compareBranch.upstream)==null?void 0:r.remote))&&(this._compareBranch=e,this.initializeParams(),this._onDidChangeCompareBranch.fire(this._compareBranch.name))}get compareRemote(){return this._compareRemote}set compareRemote(e){var n,r;e&&(e.owner!==((n=this._compareRemote)==null?void 0:n.owner)||e.repositoryName!==((r=this._compareRemote)==null?void 0:r.repositoryName))&&(this._compareRemote=e,this.initializeParams(),this._onDidChangeCompareRemote.fire(this._compareRemote))}show(e){e&&(this.compareBranch=e),super.show()}async getTitle(){var e,n,r,i,s;const l=await this._folderRepositoryManager.getOrigin(this.compareBranch);let g=!1;if((e=this.compareBranch)==null?void 0:e.upstream){const w=this._folderRepositoryManager.findRepo(_r(this.compareBranch.upstream.remote));if(w){const C=`${w.remote.owner}:${(n=this.compareBranch.name)!=null?n:""}`;try{(await l.compareCommits(`${this._pullRequestDefaults.owner}:${this._pullRequestDefaults.base}`,C)).total_commits>1&&(g=await l.getDefaultBranch()!==this.compareBranch.name)}catch(P){}}}return g?(i=(r=this.compareBranch)==null?void 0:r.name)!=null?i:"":((s=this.compareBranch)==null?void 0:s.name)?Il(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).title:""}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await o.workspace.fs.readFile(e[0])).toString()}catch(n){a.appendLine(`Reading pull request template failed: ${n}`);return}}async getDescription(){var e;const n=await this.getPullRequestTemplate();return n||(((e=this.compareBranch)==null?void 0:e.name)?Il(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body:"")}async initializeParams(e=!1){var n,r;if(!this.compareBranch)throw new Sl(this._folderRepositoryManager.repository);const i={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},s=await this._folderRepositoryManager.getOrigin(this.compareBranch),l={owner:s.remote.owner,repositoryName:s.remote.repositoryName},[g,w,C,P]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(),this.getDescription()]),M=g.map(j=>({owner:j.owner,repositoryName:j.repositoryName}));let $=w;l.owner!==i.owner&&($=await this._folderRepositoryManager.listBranches(l.owner,l.repositoryName)),this.compareBranch.name&&!$.includes(this.compareBranch.name)&&($.push(this.compareBranch.name),$.sort()),this._postMessage({command:e?"reset":"pr.initialize",params:{availableRemotes:M,defaultBaseRemote:i,defaultBaseBranch:this._pullRequestDefaults.base,defaultCompareRemote:l,defaultCompareBranch:(n=this.compareBranch.name)!=null?n:"",branchesForRemote:w,branchesForCompare:$,defaultTitle:C,defaultDescription:P,compareBranch:(r=this.compareBranch.name)!=null?r:"",isDraft:!1}})}async changeRemote(e,n){var r;const{owner:i,repositoryName:s}=e.args,l=this._folderRepositoryManager.findRepo(C=>i===C.remote.owner&&s===C.remote.repositoryName);if(!l)throw new Error("No matching GitHub repository found.");const g=await l.getDefaultBranch(),w=await this._folderRepositoryManager.listBranches(i,s);if(!n&&((r=this.compareBranch)==null?void 0:r.name)&&!w.includes(this.compareBranch.name)&&(w.push(this.compareBranch.name),w.sort()),n)this._onDidChangeBaseRemote.fire({owner:i,repositoryName:s}),this._onDidChangeBaseBranch.fire(g);else{const C=this.compareRemote;this.compareRemote={owner:i,repositoryName:s},C&&(this.compareRemote.repositoryName!==C.repositoryName||this.compareRemote.owner!==C.owner)&&(this.compareBranch=await this._folderRepositoryManager.repository.getBranch(g))}return this._replyMessage(e,{branches:w,defaultBranch:n?g:this.compareBranch})}async create(e){var n,r,i;try{let s,l;if(!((n=this.compareBranch)==null?void 0:n.name)){this._throwError(e,"Please create a branch.");return}if(this.compareBranch.type===_e.RemoteHead){const P=this.compareBranch.name.indexOf("/");s=this.compareBranch.name.substring(P+1),l=this.compareBranch.name.substring(0,P)}else s=this.compareBranch.name,l=(r=this.compareBranch.upstream)==null?void 0:r.remote;if(!l)if(await o.window.showInformationMessage(`There is no upstream branch for '${s}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch")await o.commands.executeCommand("git.publish"),this._folderRepositoryManager.repository.state.HEAD&&(this.compareBranch=this._folderRepositoryManager.repository.state.HEAD,l=(i=this.compareBranch.upstream)==null?void 0:i.remote);else{this._throwError(e,"No upstream for the compare branch.");return}const g=this._folderRepositoryManager.findRepo(_r(l));if(!g)throw new Error(`Unable to find GitHub repository matching '${l}'.`);const w=`${g.remote.owner}:${s}`,C=await this._folderRepositoryManager.createPullRequest({...e.args,head:w});C?(await this._replyMessage(e,{}),await Gt.associateBranchWithPullRequest(this._folderRepositoryManager.repository,C,s),this._onDone.fire(C)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(s){this._throwError(e,s.message)}}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":return o.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0),this._replyMessage(e,void 0);case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeRemote(e,!0);case"pr.changeBaseBranch":return this._onDidChangeBaseBranch.fire(e.args),this._replyMessage(e,void 0);case"pr.changeCompareRemote":return this.changeRemote(e,!1);case"pr.changeCompareBranch":return this.compareBranch=await this._folderRepositoryManager.repository.getBranch(e.args.name),this._replyMessage(e,void 0);default:o.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=va(),n=o.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(n).toString()}"></script>
	</body>
</html>`}}var af=Object.defineProperty,xa=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?af(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class of{constructor(){xa(this,"fileViewedState",new Map),xa(this,"_onDidChangeFileDecorations",new o.EventEmitter),xa(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileViewedState(e,n,r,i){this.fileViewedState.set(`${n}:${r}`,i),this._onDidChangeFileDecorations.fire(e)}provideFileDecoration(e,n){if(e.scheme!=="filechange"&&e.scheme!=="github")return;const r=sn(e);if(r){const i=`${r.prNumber}:${r.fileName}`;if(this.fileViewedState.get(i)===gt.VIEWED)return{propagate:!1,badge:"\u2713",tooltip:"Viewed"}}}}const Oa=new of;var uf=Object.defineProperty,Ma=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?uf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class lf{constructor(){Ma(this,"fileHasComments",new Map),Ma(this,"_onDidChangeFileDecorations",new o.EventEmitter),Ma(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,n,r,i){const s=`${n}:${r}`;this.fileHasComments.get(s)!==i&&(this.fileHasComments.set(`${n}:${r}`,i),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,n){const r=sn(e);if(r){const i=`${r.prNumber}:${r.fileName}`;if(this.fileHasComments.get(i))return{propagate:!1,tooltip:"Commented",badge:"\u{1F4AC}"}}}}const Dl=new lf;var cf=Object.defineProperty,es=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?cf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class kt{constructor(){es(this,"childrenDisposables"),es(this,"parent"),es(this,"label"),es(this,"accessibilityInformation")}getParent(){if(this.parent instanceof kt)return this.parent}async reveal(e,n){return this.parent.reveal(e||this,n)}refresh(e){return this.parent.refresh(e)}async getChildren(){return[]}dispose(){this.childrenDisposables&&(this.childrenDisposables.forEach(e=>e.dispose()),this.childrenDisposables=[])}}var df=Object.defineProperty,Qe=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?df(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);function Al(t){const e=o.window.activeTextEditor,n={preserveFocus:!0,viewColumn:o.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(n.selection=e.selection),{command:"vscode.open",arguments:[t,n],title:"Open File"}}async function La(t,e,n,r,i){let s=await Nr(e,t.repository)||e,l=await Nr(n,t.repository)||n;(s.scheme==="data"||l.scheme==="data")&&(i===be.ADD&&(s=ci),i===be.DELETE&&(l=ci));const g=n.path.split("/");return{command:"vscode.diff",arguments:[s,l,`${g[g.length-1]} (Pull Request)`,r],title:"Open Changed File in PR"}}class Kr extends kt{constructor(e,n,r,i,s,l,g,w){super();this.parent=e,this.pullRequest=n,this.status=r,this.fileName=i,this.previousFileName=s,this.blobUrl=l,this.filePath=g,this.parentFilePath=w,Qe(this,"description"),Qe(this,"iconPath"),Qe(this,"command"),Qe(this,"resourceUri"),Qe(this,"contextValue"),Qe(this,"childrenDisposables",[]),Qe(this,"_viewed");var C;const P=(C=this.pullRequest.fileChangeViewedState[i])!=null?C:gt.UNVIEWED;this.contextValue=`filechange:${be[r]}:${P===gt.VIEWED?"viewed":"unviewed"}`,this.label=h.basename(i),this.description=o.workspace.asRelativePath(h.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=o.ThemeIcon.File,this.resourceUri=di(o.Uri.parse(this.blobUrl),n.number,i,r),this.updateViewed(P),this.command={command:"pr.openFileOnGitHub",title:"Open File on GitHub",arguments:[this]},this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(M=>{const $=M.changed.find(j=>j.fileName===this.fileName);$&&(this.updateViewed($.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${be[this.status]}:${e===gt.VIEWED?"viewed":"unviewed"}`,Oa.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}getTreeItem(){return this}}class Fl extends kt{constructor(e,n,r,i,s,l,g,w,C,P){super();this.parent=e,this.pullRequest=n,this.status=r,this.fileName=i,this.blobUrl=s,this.filePath=l,this.parentFilePath=g,this.diffHunks=w,this.comments=C,this.sha=P,Qe(this,"description"),Qe(this,"iconPath"),Qe(this,"resourceUri"),Qe(this,"parentSha"),Qe(this,"contextValue"),Qe(this,"command"),Qe(this,"opts"),Qe(this,"childrenDisposables",[]),Qe(this,"_viewed");var M;const $=(M=this.pullRequest.fileChangeViewedState[i])!=null?M:gt.UNVIEWED;this.contextValue=`filechange:${be[r]}:${$===gt.VIEWED?"viewed":"unviewed"}`,this.label=h.basename(i),this.description=o.workspace.asRelativePath(h.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=o.ThemeIcon.File,this.opts={preserveFocus:!0},this.updateShowOptions(),this.resourceUri=di(o.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status),this.updateViewed($),this.childrenDisposables.push(this.pullRequest.onDidChangeReviewThreads(j=>{[...j.added,...j.removed].some(W=>W.path===this.fileName)&&this.updateShowOptions()})),this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(j=>{const W=j.changed.find(K=>K.fileName===this.fileName);W&&(this.updateViewed(W.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${be[this.status]}:${e===gt.VIEWED?"viewed":"unviewed"}`,Oa.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}updateShowOptions(){const e=this.pullRequest.reviewThreadsCache,r=(H(e,i=>i.path)[this.fileName]||[]).filter(i=>!i.isOutdated);Dl.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,r.length>0),r.length?(r.sort((i,s)=>i.line-s.line),this.opts.selection=new o.Range(r[0].line,0,r[0].line,0)):delete this.opts.selection}getTreeItem(){return this}openFileCommand(){return Al(this.filePath)}async openDiff(e){var n;const r=await La(e,this.parentFilePath,this.filePath,this.opts,this.status);o.commands.executeCommand(r.command,...(n=r.arguments)!=null?n:[])}}class ts extends Fl{constructor(e,n,r,i,s,l,g,w,C,P,M,$,j,W){super(n,r,i,s,g,w,C,$,j,W);this.folderRepositoryManager=e,this.parent=n,this.pullRequest=r,this.status=i,this.fileName=s,this.previousFileName=l,this.blobUrl=g,this.filePath=w,this.parentFilePath=C,this.isPartial=P,this.patch=M,this.diffHunks=$,this.comments=j,this.sha=W}getTreeItem(){return this}async resolve(){this.command=await La(this.folderRepositoryManager,this.parentFilePath,this.filePath,void 0,this.status)}}class Er extends Fl{constructor(e,n,r,i,s,l,g,w,C,P=[],M){super(e,r,i,s,l,g,w,C,P,M);this.parent=e,this.pullRequestManager=n,this.pullRequest=r,this.status=i,this.fileName=s,this.blobUrl=l,this.filePath=g,this.parentFilePath=w,this.diffHunks=C,this.comments=P,this.sha=M,Qe(this,"_useViewChangesCommand",!1)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===be.DELETE||this.status===be.ADD){const $=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===be.DELETE?[this.parentFilePath,$,`${this.fileName}`,{preserveFocus:!0}]:[$,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:n,commit:r,rootPath:i}=bn(this.filePath.query),s=`${r}^`,l={path:e,ref:n,commit:s,base:!0,isOutdated:!0,rootPath:i},g=this.filePath.with({query:JSON.stringify(l)}),w={preserveFocus:!0},C=this.pullRequest.reviewThreadsCache,M=(H(C,$=>$.path)[this.fileName]||[]).filter($=>$.isOutdated).sort(($,j)=>$.line-j.line);return M.length&&(w.selection=new o.Range(M[0].originalLine,0,M[0].originalLine,0)),{command:"vscode.diff",arguments:[g,this.filePath,`${this.fileName} from ${(r||"").substr(0,8)}`,w],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():o.workspace.getConfiguration().get("git.openDiffOnClick")?this.command=await La(this.pullRequestManager,this.parentFilePath,this.filePath,this.opts,this.status):this.command=this.openFileCommand()}}class hf extends kt{constructor(e,n,r,i,s,l){super();this.parent=e,this.fileName=n,this.previousFileName=r,this.status=i,this.baseBranch=s,this.headBranch=l,Qe(this,"description"),Qe(this,"iconPath"),Qe(this,"resourceUri"),Qe(this,"command"),this.label=n,this.iconPath=o.ThemeIcon.File,this.resourceUri=o.Uri.file(n).with({scheme:"github",query:JSON.stringify({status:i,fileName:n})});let g=o.Uri.file(n).with({scheme:"github",query:JSON.stringify({fileName:n,branch:s})}),w=o.Uri.file(n).with({scheme:"github",query:JSON.stringify({fileName:n,branch:l})});switch(i){case be.ADD:g=o.Uri.file(n).with({scheme:"github",query:JSON.stringify({fileName:n,branch:s,isEmpty:!0})});break;case be.RENAME:g=o.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:s,isEmpty:!0})});break;case be.DELETE:w=o.Uri.file(n).with({scheme:"github",query:JSON.stringify({fileName:n,branch:l,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[g,w,`${n} (Pull Request Preview)`]}}getTreeItem(){return this}}function qa(t){return t.filter(e=>e instanceof Er)}var mf=Object.defineProperty,Rr=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class pf{constructor(e,n,r,i,s,l,g){this.repository=e,this.baseOwner=n,this.baseBranchName=r,this._compareOwner=i,this.compareBranchName=s,this.compareHasUpstream=l,this.folderRepoManager=g,Rr(this,"_view"),Rr(this,"_onDidChangeTreeData",new o.EventEmitter),Rr(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Rr(this,"_contentProvider"),Rr(this,"_disposables",[]),Rr(this,"_gitHubRepository"),this._view=o.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(w=>w.remote.owner===this._compareOwner),this._disposables.push(this._view)}get view(){return this._view}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}async reveal(e,n){return this._view.reveal(e,n)}refresh(){this._onDidChangeTreeData.fire()}async updateHasUpstream(e){var n;if(((n=this.repository.state.HEAD)==null?void 0:n.name)===e){const r=await this.repository.getBranch(e);this.compareHasUpstream=!!r.upstream}else this.compareHasUpstream=!0}async updateCompareBranch(e){await this.updateHasUpstream(e),this.compareBranchName=e,this._onDidChangeTreeData.fire()}get compareOwner(){return this._compareOwner}set compareOwner(e){this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(n=>n.remote.owner===e),this._contentProvider&&this._gitHubRepository&&(this._contentProvider.gitHubRepository=this._gitHubRepository),this._compareOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){if(this.compareHasUpstream)o.commands.executeCommand("setContext","github:noUpstream",!1);else return o.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];if(!this._gitHubRepository)return[];this._contentProvider||(this._contentProvider=new ff(this._gitHubRepository),this._disposables.push(o.workspace.registerTextDocumentContentProvider("github",this._contentProvider)));const{octokit:e,remote:n}=await this._gitHubRepository.ensure();try{const{data:r}=await e.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${this.compareOwner}:${this.compareBranchName}`});return r.files.length?this._view.message=void 0:this._view.message=`There are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranchName}' branch`,r.files.map(i=>new hf(this,i.filename,i.previous_filename,Un(i.status),r.merge_base_commit.sha,this.compareBranchName))}catch(r){return a.appendLine(`Comparing changes failed: ${r}`),[]}}dispose(){this._disposables.forEach(e=>e.dispose())}}class ff{constructor(e){this.gitHubRepository=e}async provideTextDocumentContent(e,n){var r;const i=os(e);if(!i||i.isEmpty)return"";const{octokit:s,remote:l}=await this.gitHubRepository.ensure(),g=await s.repos.getContent({owner:l.owner,repo:l.repositoryName,path:i.fileName,ref:i.branch}),w=(r=g.data.content)!=null?r:"";return Buffer.from(w,g.data.encoding).toString()}}var gf=Object.defineProperty,Yr=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?gf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class vf{constructor(e){this.repository=e,Yr(this,"_disposables",[]),Yr(this,"_createPRViewProvider"),Yr(this,"_treeView"),Yr(this,"_onDidCreate",new o.EventEmitter),Yr(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async n=>{var r,i;o.commands.executeCommand("setContext","github:createPullRequest",!1),(r=this._createPRViewProvider)==null||r.dispose(),this._createPRViewProvider=void 0,(i=this._treeView)==null||i.dispose(),this._treeView=void 0,this._disposables.forEach(s=>s.dispose()),n&&this._onDidCreate.fire(n)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(n=>{var r;(r=this._treeView)==null||r.updateCompareBranch(n)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareRemote(n=>{this._treeView&&(this._treeView.compareOwner=n.owner)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(n=>{var r;(r=this._treeView)==null||r.updateBaseBranch(n)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(n=>{var r;(r=this._treeView)==null||r.updateBaseOwner(n.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(n=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.compareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,n){if(e.gitHubRepositories.some(r=>r.remote.owner===n.owner&&r.remote.repositoryName===n.repo))return n;{const r=await e.getOrigin(),i=await e.getMetadata(r.remote.remoteName);return{owner:i.owner.login,repo:i.name,base:i.default_branch}}}async create(e,n,r){var i;o.commands.executeCommand("setContext","github:createPullRequest",!0);const s=(i=r?await n.repository.getBranch(r):void 0)!=null?i:n.repository.state.HEAD;if(!this._createPRViewProvider){const l=await this.ensureDefaultsAreLocal(n,await n.getPullRequestDefaults(s));this._createPRViewProvider=new sf(e,n,l,s);const g=await n.getOrigin(s);this._treeView=new pf(this.repository,l.owner,l.base,g.remote.owner,s.name,!!s.upstream,n),this.registerListeners(!r),this._disposables.push(o.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(s)}}var yf=Object.defineProperty,xl=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?yf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Ol{constructor(e,n,r,i,s=`${e}:${n}`){this.owner=e,this.name=n,this.description=r,this.remote=i,this.label=s,xl(this,"detail"),xl(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}function Xr(t){return t===void 0||t===0?0:t-1}function Uv(t,e){for(let n=0;n<t.length;n++){const r=t[n];for(let i=0;i<r.diffLines.length;i++)if(r.diffLines[i].positionInHunk===e)return r.diffLines[i]}}function Ua(t,e){const n=qn(t);let r=n.next(),i=0;for(;!r.done;){const s=r.value;if(!(s.oldLineNumber>e))if(s.oldLineNumber+s.oldLength-1<e)i+=s.newLength-s.oldLength;else return i+=s.newLength-s.oldLength,e+i;r=n.next()}return e+i}function $a(t,e){const n=qn(t);let r=n.next(),i=0;for(;!r.done;){const s=r.value;if(!(s.newLineNumber>e))if(s.newLineNumber+s.newLength-1<e)i+=s.oldLength-s.newLength;else return i+=s.oldLength-s.newLength,e+i;r=n.next()}return e+i}function Ml(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r];let s,l;if(e){let g;for(let w=0;w<i.diffLines.length;w++){const C=i.diffLines[w];C.type===vt.Delete?(s!==void 0||(s=Xr(C.oldLineNumber)),g=Xr(C.oldLineNumber)):s!==void 0&&g!==void 0&&(n.push(new o.Range(s,0,g,0)),s=void 0,g=void 0)}s!==void 0&&g!==void 0&&(n.push(new o.Range(s,0,g,0)),s=void 0,g=void 0)}else i.newLineNumber&&(s=Xr(i.newLineNumber),l=Xr(i.newLength),n.push(new o.Range(s,0,s+l,0)))}return n}var wf=Object.defineProperty,Zt=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?wf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class bf{constructor(e,n,r,i){this._reviewManager=e,this._reposManager=n,this._repository=r,this._localFileChanges=i,Zt(this,"_localToDispose",[]),Zt(this,"_onDidChangeComments",new o.EventEmitter),Zt(this,"onDidChangeComments",this._onDidChangeComments.event),Zt(this,"_commentHandlerId"),Zt(this,"_commentController"),Zt(this,"_workspaceFileChangeCommentThreads",{}),Zt(this,"_reviewSchemeFileChangeCommentThreads",{}),Zt(this,"_obsoleteFileChangeCommentThreads",{}),Zt(this,"_visibleNormalTextEditors",[]),Zt(this,"_pendingCommentThreadAdds",[]),this._commentController=o.comments.createCommentController(`github-review-${n.activePullRequest.number}`,n.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=$u(),wn(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=o.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this._reposManager.activePullRequest.validateDraftMode(),await this.initializeCommentThreads(),await this.registerListeners()}createOutdatedCommentThread(e,n){const r=n.comments[0].originalCommitId,i=o.Uri.file(h.join(`commit~${r.substr(0,8)}`,e)),s=It(i,e,void 0,r,!0,{base:n.diffSide===Ce.LEFT},this._repository.rootUri),l=new o.Range(new o.Position(n.originalLine-1,0),new o.Position(n.originalLine-1,0));return jr(s,l,n,this._commentController)}async createWorkspaceCommentThread(e,n,r){let i=r.line;const s=await this._repository.diffWithHEAD(n);s&&(i=Ua(s,r.line));const l=new o.Range(new o.Position(i-1,0),new o.Position(i-1,0));return jr(e,l,r,this._commentController)}createReviewCommentThread(e,n,r){var i;if(!((i=this._reposManager.activePullRequest)==null?void 0:i.mergeBase))throw new Error("Cannot create review comment thread without an active pull request base.");const s=It(e,n,void 0,this._reposManager.activePullRequest.mergeBase,!1,{base:!0},this._repository.rootUri),l=new o.Range(new o.Position(r.line-1,0),new o.Position(r.line-1,0));return jr(s,l,r,this._commentController)}async initializeCommentThreads(){if(!this._reposManager.activePullRequest||!this._reposManager.activePullRequest.isResolved())return;const e=this._reposManager.activePullRequest.reviewThreadsCache,n=H(e,r=>r.path);Object.keys(n).forEach(r=>{const i=n[r],s=i[0];if(s){const l=h.join(this._repository.rootUri.path,s.path).replace(/\\/g,"/"),g=this._repository.rootUri.with({path:l});let w=[],C=[],P=[];const M=i.map(async $=>{$.isOutdated?P.push(this.createOutdatedCommentThread(r,$)):$.diffSide===Ce.RIGHT?w.push(await this.createWorkspaceCommentThread(g,r,$)):C.push(this.createReviewCommentThread(g,r,$))});Promise.all(M),this._workspaceFileChangeCommentThreads[r]=w,this._reviewSchemeFileChangeCommentThreads[r]=C,this._obsoleteFileChangeCommentThreads[r]=P}})}async registerListeners(){this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads,this._reviewSchemeFileChangeCommentThreads].forEach(n=>{for(const r in n)n[r].forEach(i=>{Qu(i,e),vr(i)})})})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangeReviewThreads(e=>{e.added.forEach(async n=>{const{path:r}=n,i=this._pendingCommentThreadAdds.findIndex(async g=>{const w=this.gitRelativeRootPath(g.uri.path);if(w!==n.path)return!1;const C=await this.getContentDiff(g.uri,w);return $a(C,g.range.start.line)+1===n.line});let s;if(i>-1)s=this._pendingCommentThreadAdds[i],s.threadId=n.id,s.comments=n.comments.map(g=>new et(g,s)),this._pendingCommentThreadAdds.splice(i,1);else{const g=h.join(this._repository.rootUri.path,r).replace(/\\/g,"/"),w=this._repository.rootUri.with({path:g});n.isOutdated?s=this.createOutdatedCommentThread(r,n):n.diffSide===Ce.RIGHT?s=await this.createWorkspaceCommentThread(w,r,n):s=this.createReviewCommentThread(w,r,n)}const l=n.isOutdated?this._obsoleteFileChangeCommentThreads:n.diffSide===Ce.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads;l[r]?l[r].push(s):l[r]=[s]}),e.changed.forEach(n=>{const r=n.isOutdated?this._obsoleteFileChangeCommentThreads:n.diffSide===Ce.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=r[n.path].findIndex(s=>s.threadId===n.id);if(i>-1){const s=r[n.path][i];zu(s,n)}}),e.removed.forEach(n=>{const r=n.isOutdated?this._obsoleteFileChangeCommentThreads:n.diffSide===Ce.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=r[n.path].findIndex(s=>s.threadId===n.id);if(i>-1){const s=r[n.path][i];r[n.path].splice(i,1),s.dispose()}})}))}visibleEditorsEqual(e,n){if(e=e.filter(r=>r.document.uri.scheme!=="comment"),n=n.filter(r=>r.document.uri.scheme!=="comment"),e=D(e,r=>r.document.uri.toString()),n=D(n,r=>r.document.uri.toString()),e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!n.find(s=>s.document.uri.toString()===e[r].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;const n=o.workspace.getWorkspaceFolder(e.uri);return n?!!(e.uri.scheme===n.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}async provideCommentingRanges(e,n){let r=e.uri.query&&e.uri.query!==""?bn(e.uri.query):void 0;if(r){const s=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(s)return Ml(s.diffHunks,r.base)}const i=o.workspace.getWorkspaceFolder(e.uri);if(!!i&&e.uri.scheme===i.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const s=this.gitRelativeRootPath(e.uri.path),l=qa(this._localFileChanges).find(w=>w.fileName===s),g=[];if(l){if(l.status===be.RENAME)return[];const w=await this.getContentDiff(e.uri,l.fileName),C=l.diffHunks;for(let P=0;P<C.length;P++){const M=C[P],$=Ua(w,M.newLineNumber),j=Ua(w,M.newLineNumber+M.newLength-1);$>0&&j>0&&g.push(new o.Range($-1,0,j-1,0))}}return g}}async getContentDiff(e,n){var r;const i=o.window.visibleTextEditors.find(s=>s.document.uri.toString()===e.toString());if(!((r=this._reposManager.activePullRequest)==null?void 0:r.head))throw new Error("Cannot get content diff without an active pull request head.");if(i&&i.document.isDirty){const s=i.document.getText(),g=(await this._repository.getObjectDetails(this._reposManager.activePullRequest.head.sha,n)).object,w=await this._repository.hashObject(s);return await this._repository.diffBlobs(g,w)}else return await this._repository.diffWith(this._reposManager.activePullRequest.head.sha,n)}findMatchedFileChangeForReviewDiffView(e,n){const r=bn(n.query),i=e.filter(s=>{if(s instanceof Kr||s.fileName!==r.path)return!1;if(s.filePath.scheme!=="review"&&s.sha===r.commit)return!0;try{if(JSON.parse(s.filePath.query).commit===r.commit)return!0}catch(l){}try{if(JSON.parse(s.parentFilePath.query).commit===r.commit)return!0}catch(l){}return!1});if(i&&i.length)return i[0]}gitRelativeRootPath(e){return h.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}getCommentSide(e){return e.uri.scheme==="review"&&bn(e.uri.query).base?Ce.LEFT:Ce.RIGHT}async startReview(e,n){const r=e.comments.length,i=this.optimisticallyAddComment(e,n,!0);try{if(r){const s=e.comments[0];if(s instanceof et)await this._reposManager.activePullRequest.createCommentReply(n,s._rawComment.graphNodeId,!1);else throw new Error("Cannot reply to temporary comment")}else{const s=this.gitRelativeRootPath(e.uri.path),l=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e);let g;if(l===Ce.RIGHT){const w=await this.getContentDiff(e.uri,s);g=$a(w,e.range.start.line)}else g=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(n,s,g+1,l)}}catch(s){o.window.showErrorMessage(`Starting review failed: ${s}`),e.comments=e.comments.map(l=>(l instanceof Tt&&l.id===i&&(l.mode=o.CommentMode.Editing),l))}}async openReview(){await this._reviewManager.openDescription(),At.scrollToReview()}optimisticallyAddComment(e,n,r){const i=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),s=new Tt(e,n,r,i);return this.updateCommentThreadComments(e,[...e.comments,s]),s.id}updateCommentThreadComments(e,n){e.comments=n,vr(e)}optimisticallyEditComment(e,n){const r=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),i=new Tt(e,n.body instanceof o.MarkdownString?n.body.value:n.body,!!n.label,r,n);return e.comments=e.comments.map(s=>s instanceof et&&s.commentId===n.commentId?i:s),i.id}async createOrReplyComment(e,n,r,i){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment without an active pull request.");const s=e.comments.length,l=r?!1:i!==void 0?i:this._reposManager.activePullRequest.hasPendingReview,g=this.optimisticallyAddComment(e,n,l);try{if(s){const w=e.comments[0];if(w instanceof et)await this._reposManager.activePullRequest.createCommentReply(n,w._rawComment.graphNodeId,r);else throw new Error("Cannot reply to temporary comment")}else{const w=this.gitRelativeRootPath(e.uri.path);this._pendingCommentThreadAdds.push(e);const C=this.getCommentSide(e);let P;if(C===Ce.RIGHT){const M=await this.getContentDiff(e.uri,w);P=$a(M,e.range.start.line)}else P=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(n,w,P+1,C,r)}r&&await this._reposManager.activePullRequest.submitReview()}catch(w){o.window.showErrorMessage(`Creating comment failed: ${w}`),e.comments=e.comments.map(C=>(C instanceof Tt&&C.id===g&&(C.mode=o.CommentMode.Editing),C))}}async createCommentOnResolve(e,n){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment on resolve without an active pull request.");const r=await this._reposManager.activePullRequest.getPendingReviewId();await this.createOrReplyComment(e,n,!r)}async resolveReviewThread(e,n){try{n&&await this.createCommentOnResolve(e,n),await this._reposManager.activePullRequest.resolveReviewThread(e.threadId)}catch(r){o.window.showErrorMessage(`Resolving conversation failed: ${r}`)}}async unresolveReviewThread(e,n){try{n&&await this.createCommentOnResolve(e,n),await this._reposManager.activePullRequest.unresolveReviewThread(e.threadId)}catch(r){o.window.showErrorMessage(`Unresolving conversation failed: ${r}`)}}async editComment(e,n){if(n instanceof et){const r=this.optimisticallyEditComment(e,n);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");await this._reposManager.activePullRequest.editReviewComment(n._rawComment,n.body instanceof o.MarkdownString?n.body.value:n.body)}catch(i){o.window.showErrorMessage(V(i)),e.comments=e.comments.map(s=>s instanceof Tt&&s.id===r?new et(n._rawComment,e):s)}}else this.createOrReplyComment(e,n.body instanceof o.MarkdownString?n.body.value:n.body,!1)}async deleteComment(e,n){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");n instanceof et?await this._reposManager.activePullRequest.deleteReviewComment(n.commentId):e.comments=e.comments.filter(i=>!(i instanceof Tt&&i.id===n.id)),e.comments.length===0?e.dispose():vr(e);const r=await this._reposManager.activePullRequest.validateDraftMode();r!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=r),this.update(this._localFileChanges)}catch(r){throw new Error(V(r))}}async update(e){await this._reposManager.activePullRequest.validateDraftMode(),this._localFileChanges=e}async toggleReaction(e,n){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");e.reactions&&!e.reactions.find(r=>r.label===n.label&&!!r.authorHasReacted)?await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,n):await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,n)}catch(r){throw new Error(V(r))}}dispose(){this._commentController&&this._commentController.dispose(),Je(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var kf=Object.defineProperty,We=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?kf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const Ll=class{constructor(t,e,n,r,i,s){this._context=t,this._repository=e,this._folderRepoManager=n,this._telemetry=r,this.changesInPrDataProvider=i,this._showPullRequest=s,We(this,"_localToDispose",[]),We(this,"_disposables"),We(this,"_comments",[]),We(this,"_localFileChanges",[]),We(this,"_obsoleteFileChanges",[]),We(this,"_lastCommitSha"),We(this,"_updateMessageShown",!1),We(this,"_validateStatusInProgress"),We(this,"_reviewCommentController"),We(this,"_statusBarItem"),We(this,"_prNumber"),We(this,"_previousRepositoryState"),We(this,"_webviewViewProvider"),We(this,"_createPullRequestHelper"),We(this,"_switchingToReviewMode"),We(this,"justSwitchedToRevieMode",!1),We(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:mr(this._repository)},this.registerListeners(),this.updateState(!0),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,n=this._repository.state.HEAD;if(!e&&!n)return;let r;!e||!n?r=!1:r=e.upstream?n.upstream&&e.upstream.name===n.upstream.name&&e.upstream.remote===n.upstream.remote:!n.upstream;const i=r&&e.ahead===n.ahead&&e.behind===n.behind&&e.commit===n.commit&&e.name===n.name&&e.remote===n.remote&&e.type===n.type,s=mr(this._repository),l=this._previousRepositoryState.remotes.length===s.length&&this._previousRepositoryState.remotes.every(g=>s.some(w=>g.equals(w)));(!i||!l)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:s},this.updateState(!!e))})),this._disposables.push(o.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),this._disposables.push(o.window.registerTerminalLinkProvider(new Rp(this,this._folderRepoManager)))}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=o.window.createStatusBarItem("github.pullrequest.status",o.StatusBarAlignment.Left),this._statusBarItem.name="GitHub Active Pull Request"),this._statusBarItem}get repository(){return this._repository}get localFileChanges(){return this._localFileChanges}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e;const n=this._repository.state.HEAD;if(n){const r=n.upstream?n.upstream.remote:null;if(r&&(await this._repository.fetch(r,(e=this._repository.state.HEAD)==null?void 0:e.name),!this._context.globalState.get(Ra,!1)&&!this._updateMessageShown&&(this._lastCommitSha&&t.head.sha!==this._lastCommitSha||n.behind!==void 0&&n.behind>0))){this._updateMessageShown=!0;const s="Pull",l="Never show again";await o.window.showInformationMessage("There are updates available for this pull request.",{},s,l)===s?(await o.commands.executeCommand("git.pull"),this._updateMessageShown=!1):l&&await this._context.globalState.update(Ra,!0)}}}async updateState(t=!1){if(!this.switchingToReviewMode)return this._validateStatusInProgress?(a.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async e=>await this.validateState(t)),this._validateStatusInProgress):(a.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateState(t),this._validateStatusInProgress)}async validateState(t){if(a.appendLine("Review> Validating state..."),await this._folderRepoManager.updateRepositories(t),!this._repository.state.HEAD){this.clear(!0);return}const e=this._repository.state.HEAD;let n=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!n){a.appendLine(`Review> no matching pull request metadata found for current branch ${e.name}`);const w=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();w&&(Gt.associateBranchWithPullRequest(this._repository,w.model,e.name),n=w)}if(!n){a.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${e.name}`),this.clear(!0);return}const r=e.commit!==this._lastCommitSha&&e.ahead===0&&e.behind===0;if(this._prNumber===n.prNumber&&!r){o.commands.executeCommand("pr.refreshList");return}if(!(e.upstream?e.upstream.remote:null)){a.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}a.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${n.prNumber}`),this.clear(!1),this._prNumber=n.prNumber,this._lastCommitSha=void 0;const{owner:s,repositoryName:l}=n;a.appendLine("Review> Resolving pull request");const g=await this._folderRepoManager.resolvePullRequest(s,l,n.prNumber);if(!g||!g.isResolved()){this._prNumber=void 0,a.appendLine("Review> This PR is no longer valid");return}if(this._folderRepoManager.activePullRequest=g,this._lastCommitSha=g.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(g)),a.appendLine("Review> Fetching pull request data"),await this.getPullRequestData(g),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,g,this._localFileChanges,this._comments,this.justSwitchedToRevieMode),this.justSwitchedToRevieMode=!1,a.appendLine("Review> register comments provider"),await this.registerCommentController(),this._webviewViewProvider)this._webviewViewProvider.updatePullRequest(g);else{this._webviewViewProvider=new Ep(this._context.extensionUri,this._folderRepoManager,g),this._context.subscriptions.push(o.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(o.commands.registerCommand("pr.refreshActivePullRequest",C=>{var P;(P=this._webviewViewProvider)==null||P.refresh()}));const w=this._context.workspaceState.get(Ae);if((!t||this._showPullRequest.shouldShow)&&w)this._webviewViewProvider.show();else if(!this._showPullRequest.shouldShow&&w){const C=this._showPullRequest.onChangedShowValue(P=>{var M;P&&((M=this._webviewViewProvider)==null||M.show()),C.dispose()});this._localToDispose.push(C)}}if(this.statusBarItem.text=`$(git-branch) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[g]},a.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),o.commands.executeCommand("pr.refreshList"),!t&&this._context.workspaceState.get(Ae)&&o.env.remoteName==="codespaces"&&this.localFileChanges.length>0){let w;for(const C of this.localFileChanges)if(C.status===be.MODIFY){w=C;break}w=w!=null?w:this.localFileChanges[0],w.openDiff(this._folderRepoManager)}this._validateStatusInProgress=void 0}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const r=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!r||!r.isResolved()){a.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(r),await this.getPullRequestData(r),await this._reviewCommentController.update(this._localFileChanges),Promise.resolve(void 0)}async getLocalChangeNodes(t,e,n){const r=[],i=t.mergeBase||t.base.sha,s=t.head.sha;for(let l=0;l<e.length;l++){const g=e[l];let w=[];if(g instanceof mi)w=g.diffHunks;else if(g.status!==be.RENAME)try{const W=await this._repository.diffBetween(t.base.sha,t.head.sha,g.fileName);w=Ir(W)}catch(W){a.appendLine(`Failed to parse patch for outdated comments: ${W}`)}const C=h.join(this._repository.rootUri.path,g.fileName).replace(/\\/g,"/"),P=this._repository.rootUri.with({path:C}),M=g.status===be.DELETE?It(P,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):P,$=It(P,g.status===be.RENAME?g.previousFileName:g.fileName,void 0,g.status===be.ADD?"":i,!1,{base:!0},this._repository.rootUri),j=new Er(this.changesInPrDataProvider,this._folderRepoManager,t,g.status,g.fileName,g.blobUrl,M,$,w,n.filter(W=>W.path===g.fileName),s);r.push(j)}return r}async getPullRequestData(t){try{this._comments=await t.getReviewComments(),await t.initializeReviewThreadCache(),await t.getPullRequestFileViewState();const e=this._comments.filter(g=>g.position),n=this._comments.filter(g=>!g.position),r=await t.getFileChangesInfo(),i=t.mergeBase||t.base.sha,s=await Dr(r,this._repository,i);this._localFileChanges=await this.getLocalChangeNodes(t,s,e);const l=H(n,g=>g.originalCommitId);this._obsoleteFileChanges=[];for(const g in l){const w=l[g],C=H(w,P=>P.path);for(const P in C){let M=[];try{const K=await this._repository.diffBetween(t.base.sha,g,P);M=Ir(K)}catch(K){a.appendLine(`Failed to parse patch for outdated comments: ${K}`)}const $=C[P],j=o.Uri.file(h.join(`commit~${g.substr(0,8)}`,P)),W=new Er(this.changesInPrDataProvider,this._folderRepoManager,t,be.MODIFY,P,void 0,It(j,P,void 0,$[0].originalCommitId,!0,{base:!1},this._repository.rootUri),It(j,P,void 0,$[0].originalCommitId,!0,{base:!0},this._repository.rootUri),M,$,g);this._obsoleteFileChanges.push(W)}}return Promise.resolve(void 0)}catch(e){a.appendLine(`Review> ${e}`)}}async registerCommentController(){this._reviewCommentController=new bf(this,this._folderRepoManager,this._repository,this._localFileChanges),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._comments=t}))}async switch(t){a.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(e){if(a.appendLine(`Review> checkout failed #${JSON.stringify(e)}`),this.switchingToReviewMode=!1,e.gitErrorCode&&(e.gitErrorCode===nt.LocalChangesOverwritten||e.gitErrorCode===nt.DirtyWorkTree)){o.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}o.window.showErrorMessage(V(e));return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fulfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),a.appendLine(`Review> switch to Pull Request #${t.number} - done`,Ll.ID)}finally{this.switchingToReviewMode=!1,this.justSwitchedToRevieMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._repository.status()}}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let n=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!n||t.name===void 0)return;const r=this._folderRepoManager.createGitHubRepository(n,this._folderRepoManager.credentialStore),i=await r.getViewerPermission();if(i===_t.Read||i===_t.Triage||i===_t.Unknown){const l=await this._folderRepoManager.tryOfferToFork(r);if(!l)return;n=this._folderRepoManager.getGitHubRemotes().find(g=>g.remoteName===l)}if(!n)return;const s=n;return new Promise(async l=>{const g=o.window.createInputBox();g.value=t.name,g.ignoreFocusOut=!0,g.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const w=async function(C){try{g.busy=!0,await this._reposManager.getBranch(s,C)?g.validationMessage=`Branch ${C} already exists in ${s.owner}/${s.repositoryName}`:g.validationMessage=void 0}catch(P){g.validationMessage=void 0}g.busy=!1};await w(t.name),g.onDidChangeValue(w.bind(this)),g.onDidAccept(async()=>{g.validationMessage=void 0,g.hide();try{await this._repository.push(s.remoteName,`${t.name}:${g.value}`,!0)}catch(P){throw P.gitErrorCode===nt.PushRejected&&(o.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),l(void 0)),P.gitErrorCode===nt.RemoteConnectionError&&(o.window.showWarningMessage(`Could not read from remote repository '${s.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),l(void 0)),P}const C=await this._repository.getBranch(t.name);(!C||!C.upstream)&&l(void 0),l(C)}),g.show()})}async getRemote(t,e,n){if(!t.length){o.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!n)return Ol.fromRemote(t[0]);if(t.length===1&&n&&n.owner===t[0].owner&&n.name===t[0].repositoryName)return n;let r=!1;const i=t.map(l=>{const g=Ol.fromRemote(l);if(n){const{owner:w,name:C}=n;g.picked=g.owner===w&&g.name===C,g.picked&&(r=!0)}return g});!r&&n&&i.unshift(n);const s=await o.window.showQuickPick(i,{ignoreFocusOut:!0,placeHolder:e});if(!!s)return s}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new vf(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState();const n=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Va(this._context,this._telemetry,e,n,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}async openDescription(){const t=this._folderRepoManager.activePullRequest;if(!t)return;const e=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Va(this._context,this._telemetry,t,e,this._folderRepoManager)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){o.workspace.getConfiguration(Vt).get("focusedMode")&&this._folderRepoManager.activePullRequest?(o.commands.executeCommand("setContext",Ae,!0),await this._context.workspaceState.update(Ae,!0)):(o.commands.executeCommand("setContext",Ae,!1),this._context.workspaceState.update(Ae,!1))}clear(t){this._updateMessageShown=!1,this._localToDispose.forEach(e=>e.dispose()),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),this._comments=[],o.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:n}=bn(t.query);let r=qa(this._localFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===n||(i.parentSha?i.parentSha:`${i.sha}^`)===n);if(r.length){const i=r[0],s=n===i.sha?vt.Delete:vt.Add;return i.diffHunks.map(g=>g.diffLines.filter(w=>w.type!==s).map(w=>w.text)).reduce((g,w)=>g.concat(...w),[]).join(`
`)}if(r=qa(this._obsoleteFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===n||(i.parentSha?i.parentSha:`${i.sha}^`)===n),r.length){const i=r[0],s=n===i.sha?vt.Delete:vt.Add,l=[],g=H(i.comments,w=>String(w.originalPosition));for(const w in g){if(!g[w][0].diffHunks)continue;const C=g[w][0].diffHunks.map(P=>P.diffLines.filter(M=>M.type!==s).map(M=>M.text)).reduce((P,M)=>P.concat(...M),[]);l.push(...C)}return l.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(n=>n._folderRepoManager.gitHubRepositories.some(r=>r.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(n=>n._folderRepoManager===e)}};let Wn=Ll;We(Wn,"ID","Review");class _f{constructor(){We(this,"_shouldShow",!1),We(this,"_onChangedShowValue",new o.EventEmitter),We(this,"onChangedShowValue",this._onChangedShowValue.event)}get shouldShow(){return this._shouldShow}set shouldShow(e){const n=this._shouldShow;this._shouldShow=e,n!==this._shouldShow&&this._onChangedShowValue.fire(this._shouldShow)}}var Ef=Object.defineProperty,Ha=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Ef(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Kn extends kt{constructor(e,n,r,i){super();this.parent=e,this.label=n,this.iconPath=r,this.pullRequestModel=i,Ha(this,"command"),Ha(this,"contextValue"),Ha(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${i.number}`,this.accessibilityInformation={label:`Pull request page of pull request number ${i.number}`,role:"button"}}getTreeItem(){return this}}var Rf=Object.defineProperty,ql=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Rf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Cf{constructor(){ql(this,"_onDidChange",new o.EventEmitter),ql(this,"_prFileChangeContentProviders",{})}get onDidChange(){return this._onDidChange.event}fireDidChange(e){this._onDidChange.fire(e)}async provideTextDocumentContent(e,n){const r=ct(e);if(r&&r.prNumber){const i=this._prFileChangeContentProviders[r.prNumber];if(i)return await i(e)}return""}registerTextDocumentContentProvider(e,n){return this._prFileChangeContentProviders[e]=n,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}}const Sf=new Cf;function Ul(){return Sf}var Tf=Object.defineProperty,Ga=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Tf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Yn extends kt{constructor(e,n){super();this.parent=e,this.label=n,Ga(this,"collapsibleState"),Ga(this,"children",[]),Ga(this,"pathToChild",new Map),this.collapsibleState=o.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(n=>{n instanceof Yn&&n.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof Yn&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],n=[];this.children.forEach(r=>{r instanceof Yn?(r.sort(),e.push(r)):n.push(r)}),e.sort((r,i)=>r.label<i.label?-1:1),n.sort((r,i)=>r.label<i.label?-1:1),this.children=[...e,...n]}addFile(e){const n=e.fileName.split("/");e.description="",this.addPathRecc(n,e)}addPathRecc(e,n){if(e.length<=0)return;if(e.length===1){this.children.push(n);return}const r=e[0],i=e.slice(1);let s=this.pathToChild.get(r);s||(s=new Yn(this,r),this.pathToChild.set(r,s),this.children.push(s)),s.addPathRecc(i,n)}getTreeItem(){return this}}var Nf=Object.defineProperty,Cr=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Nf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const $l=class extends kt{constructor(t,e,n,r){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=n,this._isLocal=r,Cr(this,"_fileChanges"),Cr(this,"_commentController"),Cr(this,"_disposables",[]),Cr(this,"_inMemPRContentProvider"),Cr(this,"_command")}get command(){return this._command}set command(t){this._command=t}async getChildren(){a.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,$l.ID);try{this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(r=>r.dispose()),this.childrenDisposables=[]);const t=new Kn(this,"Description",new o.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];await this.pullRequestModel.initializeReviewThreadCache(),await this.pullRequestModel.getPullRequestFileViewState(),this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=Ul().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this._commentController||await this.resolvePRCommentController(),await this.pullRequestModel.validateDraftMode();const e=[t];if(o.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"){const r=new Yn(this,"");this._fileChanges.forEach(i=>r.addFile(i)),r.finalize(),r.label===""?e.push(...r.children):e.push(r)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return a.appendLine(t),[]}}async resolvePRCommentController(){await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentingRangeProvider(this.pullRequestModel.number,this)),this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this.pullRequestModel,this._folderReposManager)),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(e=>{e instanceof ts&&e.comments.forEach(n=>n.isDraft=t)})}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getReviewComments(),e=await this.pullRequestModel.getFileChangesInfo(),n=this.pullRequestModel.mergeBase;return n?(await Dr(e,this._folderReposManager.repository,n)).map(i=>{const s=this.pullRequestModel.head.sha,l=i.status===be.RENAME?i.previousFileName:i.fileName;return i instanceof pi?new Kr(this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,xt(o.Uri.file(h.resolve(this._folderReposManager.repository.rootUri.fsPath,i.fileName)),this.pullRequestModel,i.baseCommit,s,i.fileName,!1,i.status),xt(o.Uri.file(h.resolve(this._folderReposManager.repository.rootUri.fsPath,l)),this.pullRequestModel,i.baseCommit,s,i.fileName,!0,i.status)):new ts(this._folderReposManager,this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,xt(o.Uri.file(h.resolve(this._folderReposManager.repository.rootUri.fsPath,i.fileName)),this.pullRequestModel,i.baseCommit,s,i.fileName,!1,i.status),xt(o.Uri.file(h.resolve(this._folderReposManager.repository.rootUri.fsPath,l)),this.pullRequestModel,i.baseCommit,s,i.fileName,!0,i.status),i.isPartial,i.patch,i.diffHunks,t.filter(w=>w.path===i.fileName&&w.position!==null))}):[]}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:n,author:r,isDraft:i,html_url:s}=this.pullRequestModel,{login:l}=r,g=t?"\u2713 ":"",w=t?"Current Branch * ":"",C=n.toString(),P=`${g}#${C}: ${i?"[DRAFT] ":""}${e}`,M=`${w}${e} by @${l}`,$=`by @${l}`;return{label:P,id:`${this.parent instanceof kt?this.parent.label:""}${s}`,tooltip:M,description:$,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new o.ThemeIcon("github"),accessibilityInformation:{label:`${i?"Draft ":""}Pull request number ${C}: ${e} by ${l}`}}}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const n=ct(t.uri);if(!n||n.prNumber!==this.pullRequestModel.number)return;const r=(await this.getFileChanges()).find(i=>i.fileName===n.fileName);return!r||r instanceof Kr?void 0:Ml(r.diffHunks,n.isBase)}}async provideDocumentContent(t){const e=ct(t);if(!e)return"";const n=(await this.getFileChanges()).find(r=>r.fileName===e.fileName);if(!n)return a.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&n.status===be.ADD||!e.isBase&&n.status===be.DELETE)return"";if(n instanceof Kr||n.isPartial)try{return e.isBase?this.pullRequestModel.getFile(n.previousFileName||n.fileName,e.baseCommit):this.pullRequestModel.getFile(n.fileName,e.headCommit)}catch(r){return a.appendLine(`PR> Fetching file content failed: ${r}`),o.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(i=>{i==="Open on GitHub"&&o.commands.executeCommand("vscode.open",o.Uri.parse(n.blobUrl))}),""}if(n instanceof ts)if(n.status===be.ADD||n.status===be.DELETE)if(e.isBase){const i=[];for(let s=0;s<n.diffHunks.length;s++)for(let l=0;l<n.diffHunks[s].diffLines.length;l++){const g=n.diffHunks[s].diffLines[l];g.type===vt.Add||(g.type===vt.Delete?i.push(g.text):g.type===vt.Control||i.push(g.text))}return i.join(`
`)}else{const i=[];for(let s=0;s<n.diffHunks.length;s++)for(let l=0;l<n.diffHunks[s].diffLines.length;l++){const g=n.diffHunks[s].diffLines[l];g.type===vt.Add?i.push(g.text):g.type===vt.Delete||g.type===vt.Control||i.push(g.text)}return i.join(`
`)}else{const i=n.status===be.RENAME?n.previousFileName:n.fileName,s=o.Uri.joinPath(this._folderReposManager.repository.rootUri,i),l=await this._folderReposManager.repository.show(e.baseCommit,s.fsPath);return e.isBase?l:fs(l,n.patch)}return""}dispose(){super.dispose(),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose()),this._disposables=[]}};let Sr=$l;Cr(Sr,"ID","PRNode");const ns=new o.EventEmitter,Hl=ns.event;function Jr(t,e){if(e)return e instanceof Sr?e.pullRequestModel:e;if(!t.activePullRequest)throw o.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function Va(t,e,n,r,i){const s=Jr(i,n);r==null||r.reveal(r,{select:!0,focus:!0}),await At.createOrShow(t.extensionUri,i,s),e.sendTelemetryEvent("pr.openDescription")}async function Zr(t,e,n){var r;if(t.length===1)return t[0];const i=t.map(s=>({label:e(s),itemValue:s}));return(r=await o.window.showQuickPick(i,n))==null?void 0:r.itemValue}async function ei(t,e){t instanceof Sr||t instanceof Kn?o.commands.executeCommand("vscode.open",o.Uri.parse(t.pullRequestModel.html_url)):o.commands.executeCommand("vscode.open",o.Uri.parse(t.html_url)),e.sendTelemetryEvent("pr.openInGitHub")}function Pf(t,e,n,r,i,s){t.subscriptions.push(o.commands.registerCommand("auth.signout",async()=>{i.logout()})),t.subscriptions.push(o.commands.registerCommand("pr.openPullRequestOnGitHub",async w=>{if(w)ei(w,r);else{const C=e.folderManagers.map(P=>P.activePullRequest).filter(P=>!!P);if(C.length>=1){const P=await Zr(C,M=>M.html_url);P&&ei(P,r)}}})),t.subscriptions.push(o.commands.registerCommand("review.suggestDiff",async w=>{try{const C=await Zr(e.folderManagers,ie=>h.basename(ie.repository.rootUri.fsPath));if(!C||!C.activePullRequest)return;const{indexChanges:P,workingTreeChanges:M}=C.repository.state;if(!P.length)if(M.length)if(await o.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await o.commands.executeCommand("git.stageAll");else return;else{o.window.showInformationMessage("There are no changes to suggest.");return}const $=await C.repository.diff(!0);let j="";w&&w.inputBox&&w.inputBox.value&&(j=`${w.inputBox.value}
`,w.inputBox.value="");const W=`${j}\`\`\`diff
${$}
\`\`\``;await C.activePullRequest.createIssueComment(W),await o.commands.executeCommand("git.unstageAll");const K=h.join(C.repository.rootUri.path,".git",`${C.activePullRequest.number}.diff`),X=new TextEncoder,ee=o.Uri.parse(K);await o.workspace.fs.writeFile(ee,X.encode($)),await C.repository.apply(K,!0),await o.workspace.fs.delete(ee)}catch(C){a.appendLine(`Applying patch failed: ${C}`),o.window.showErrorMessage(`Applying patch failed: ${V(C)}`)}})),t.subscriptions.push(o.commands.registerCommand("pr.openFileOnGitHub",async w=>{if(!(w instanceof Kr&&!await o.window.showInformationMessage(`${w.fileName} can't be opened locally. Do you want to open it on GitHub?`,"Open"))&&w.blobUrl)return o.commands.executeCommand("vscode.open",o.Uri.parse(w.blobUrl))})),t.subscriptions.push(o.commands.registerCommand("pr.copyCommitHash",w=>{o.env.clipboard.writeText(w.sha)})),t.subscriptions.push(o.commands.registerCommand("pr.openOriginalFile",async w=>{const C=e.getManagerForIssueModel(w.pullRequest);if(C){const P=await Nr(w.parentFilePath,C.repository);o.commands.executeCommand("vscode.open",P||w.parentFilePath)}})),t.subscriptions.push(o.commands.registerCommand("pr.openModifiedFile",w=>{o.commands.executeCommand("vscode.open",w.filePath)})),t.subscriptions.push(o.commands.registerCommand("pr.openDiffView",w=>{const C=e.getManagerForIssueModel(w.pullRequest);!C||w.openDiff(C)})),t.subscriptions.push(o.commands.registerCommand("pr.deleteLocalBranch",async w=>{const C=e.getManagerForIssueModel(w.pullRequestModel);if(!C)return;const P=Jr(C,w),M="delete branch (even if not merged)";let $=null;try{await C.deleteLocalPullRequest(P)}catch(j){if(j.gitErrorCode===nt.BranchNotFullyMerged){if(await o.window.showErrorMessage(`The branch '${P.localBranchName}' is not fully merged, are you sure you want to delete it? `,M)!==M)return;try{await C.deleteLocalPullRequest(P,!0)}catch(K){$=K}}else $=j}$?(r.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure"),await o.window.showErrorMessage(`Deleting local pull request branch failed: ${$}`)):(r.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),o.commands.executeCommand("pr.refreshList"))}));function l(w){if(w){const C=o.Uri.file(w).toString();for(const P of n)if(P.repository.rootUri.toString()===C)return P}return Zr(n,C=>h.basename(C.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function g(w){return!!(w==null?void 0:w.rootUri)}t.subscriptions.push(o.commands.registerCommand("pr.create",async w=>{var C,P;g(w)?(C=await l(w.rootUri.fsPath))==null||C.createPullRequest():(P=await l(w==null?void 0:w.repoPath))==null||P.createPullRequest(w==null?void 0:w.compareBranch)})),t.subscriptions.push(o.commands.registerCommand("pr.pick",async w=>{let C;w instanceof Sr||w instanceof Kn?C=w.pullRequestModel:C=w;const P=w instanceof gn;return r.sendTelemetryEvent("pr.checkout",{fromDescription:P.toString()}),o.window.withProgress({location:o.ProgressLocation.SourceControl,title:`Switching to Pull Request #${C.number}`},async()=>{var M;await((M=Wn.getReviewManagerForRepository(n,C.githubRepository))==null?void 0:M.switch(C))})})),t.subscriptions.push(o.commands.registerCommand("pr.exit",async w=>{let C;w instanceof Sr||w instanceof Kn?C=w.pullRequestModel:C=w;const P=w instanceof gn;return r.sendTelemetryEvent("pr.exit",{fromDescription:P.toString()}),o.window.withProgress({location:o.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async()=>{const M=await C.githubRepository.getDefaultBranch(),$=e.getManagerForIssueModel(C);$&&$.checkoutDefaultBranch(M)})})),t.subscriptions.push(o.commands.registerCommand("pr.merge",async w=>{const C=e.getManagerForIssueModel(w==null?void 0:w.pullRequestModel);if(!C)return;const P=Jr(C,w);return P.base&&P.head&&!P.base.repositoryCloneUrl.equals(P.head.repositoryCloneUrl)&&ka()?ei(P,r):o.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async j=>{let W;if(j==="Yes")try{return W=await C.mergePullRequest(P),W}catch(K){return o.window.showErrorMessage(`Unable to merge pull request. ${V(K)}`),W}})})),t.subscriptions.push(o.commands.registerCommand("pr.readyForReview",async w=>{const C=e.getManagerForIssueModel(w==null?void 0:w.pullRequestModel);if(!C)return;const P=Jr(C,w);return o.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async M=>{let $;if(M==="Yes")try{return $=await P.setReadyForReview(),o.commands.executeCommand("pr.refreshList"),$}catch(j){return o.window.showErrorMessage(`Unable to mark pull request as ready to review. ${V(j)}`),$}})})),t.subscriptions.push(o.commands.registerCommand("pr.close",async(w,C)=>{let P;if(w)P=w instanceof gn?w:w.pullRequestModel;else{const $=e.folderManagers.map(j=>j.activePullRequest).filter(j=>!!j);P=await Zr($,j=>`${j.number}: ${j.title}`,{placeHolder:"Pull request to close"})}if(!P)return;const M=P;return o.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async $=>{if($==="Yes")try{let j;C&&(j=await M.createIssueComment(C));const W=await M.close();return o.commands.executeCommand("pr.refreshList"),ns.fire(W),j}catch(j){o.window.showErrorMessage(`Unable to close pull request. ${V(j)}`),ns.fire()}ns.fire()})})),t.subscriptions.push(o.commands.registerCommand("pr.openDescription",async w=>{let C;if(w)C=w instanceof Kn?w.pullRequestModel:w;else{const $=e.folderManagers.map(j=>j.activePullRequest).filter(j=>!!j);$.length>=1&&(C=await Zr($,j=>j.title))}if(!C){a.appendLine("No pull request found.");return}const P=e.getManagerForIssueModel(C);if(!P)return;let M;if(w instanceof Kn)M=w;else{const $=Wn.getReviewManagerForFolderManager(n,P);if(!$)return;M=$.changesInPrDataProvider.getDescriptionNode(P)}await Va(t,r,C,M,P)})),t.subscriptions.push(o.commands.registerCommand("pr.refreshDescription",async()=>{At.currentPanel&&At.refresh()})),t.subscriptions.push(o.commands.registerCommand("pr.openDescriptionToTheSide",async w=>{const C=e.getManagerForIssueModel(w.pullRequestModel);if(!C)return;const P=w.pullRequestModel,M=Jr(C,P);w.reveal(w,{select:!0,focus:!0}),At.createOrShow(t.extensionUri,C,M,!0),r.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(o.commands.registerCommand("pr.signin",async()=>{await e.authenticate()})),t.subscriptions.push(o.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const w of e.folderManagers)await w.deleteLocalBranchesNRemotes()})),t.subscriptions.push(o.commands.registerCommand("pr.signinAndRefreshList",async()=>{await e.authenticate()&&o.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(o.commands.registerCommand("pr.configureRemotes",async()=>o.commands.executeCommand("workbench.action.openSettings",`@ext:${Ot} remotes`))),t.subscriptions.push(o.commands.registerCommand("pr.startReview",async w=>{r.sendTelemetryEvent("pr.startReview");const C=zt(w.thread);C&&C.startReview(w.thread,w.text)})),t.subscriptions.push(o.commands.registerCommand("pr.openReview",async w=>{r.sendTelemetryEvent("pr.openReview");const C=zt(w.thread);C&&await C.openReview(w.thread)})),t.subscriptions.push(o.commands.registerCommand("pr.resolveReviewThread",async w=>{r.sendTelemetryEvent("pr.resolveReviewThread");const C=zt(w.thread);C&&await C.resolveReviewThread(w.thread,w.text)})),t.subscriptions.push(o.commands.registerCommand("pr.unresolveReviewThread",async w=>{r.sendTelemetryEvent("pr.unresolveReviewThread");const C=zt(w.thread);C&&await C.unresolveReviewThread(w.thread,w.text)})),t.subscriptions.push(o.commands.registerCommand("pr.createComment",async w=>{r.sendTelemetryEvent("pr.createComment");const C=zt(w.thread);C&&C.createOrReplyComment(w.thread,w.text,!1)})),t.subscriptions.push(o.commands.registerCommand("pr.createSingleComment",async w=>{r.sendTelemetryEvent("pr.createSingleComment");const C=zt(w.thread);C&&C.createOrReplyComment(w.thread,w.text,!0)})),t.subscriptions.push(o.commands.registerCommand("pr.editComment",async w=>{r.sendTelemetryEvent("pr.editComment"),w.startEdit()})),t.subscriptions.push(o.commands.registerCommand("pr.cancelEditComment",async w=>{r.sendTelemetryEvent("pr.cancelEditComment"),w.cancelEdit()})),t.subscriptions.push(o.commands.registerCommand("pr.saveComment",async w=>{r.sendTelemetryEvent("pr.saveComment");const C=zt(w.parent);C&&await C.editComment(w.parent,w)})),t.subscriptions.push(o.commands.registerCommand("pr.deleteComment",async w=>{if(r.sendTelemetryEvent("pr.deleteComment"),await o.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const P=zt(w.parent);P&&await P.deleteComment(w.parent,w)}})),t.subscriptions.push(o.commands.registerCommand("review.openFile",w=>{var C;const P=w instanceof Er?w.openFileCommand():Al(w);o.commands.executeCommand(P.command,...(C=P.arguments)!=null?C:[])})),t.subscriptions.push(o.commands.registerCommand("pr.refreshChanges",w=>{n.forEach(C=>{C.updateComments(),At.refresh(),C.changesInPrDataProvider.refresh()})})),t.subscriptions.push(o.commands.registerCommand("pr.setFileListLayoutAsTree",w=>{o.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(o.commands.registerCommand("pr.setFileListLayoutAsFlat",w=>{o.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(o.commands.registerCommand("pr.refreshPullRequest",w=>{var C;const P=e.getManagerForIssueModel(w.pullRequestModel);P&&w.pullRequestModel.equals(P==null?void 0:P.activePullRequest)&&((C=Wn.getReviewManagerForFolderManager(n,P))==null||C.updateComments()),At.refresh(),s.refresh(w)})),t.subscriptions.push(o.commands.registerCommand("pr.markFileAsViewed",async w=>{try{await w.pullRequest.markFileAsViewed(w.fileName)}catch(C){o.window.showErrorMessage(`Marked file as viewed failed: ${C}`)}})),t.subscriptions.push(o.commands.registerCommand("pr.unmarkFileAsViewed",async w=>{try{await w.pullRequest.unmarkFileAsViewed(w.fileName)}catch(C){o.window.showErrorMessage(`Marked file as not viewed failed: ${C}`)}}))}var Tr=ye(9035),If=Object.defineProperty,Gl=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?If(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Df{constructor(e){this.baseReporter=e,Gl(this,"sharedProperties",{})}sendTelemetryEvent(e,n,r){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...n},r)}sendTelemetryErrorEvent(e,n,r){this.baseReporter.sendTelemetryErrorEvent(e,{...this.sharedProperties,...n})}setSharedProperty(e,n){this.sharedProperties[e]=n}postEvent(e,n){const r={};for(const[i,s]of n)r[i]=s;this.sendTelemetryEvent(e,r)}dispose(){return this.baseReporter.dispose()}}function Af(){switch(o.env.uriScheme){case"vscode":return Tr.aU.Public;case"vscode-insiders":return Tr.aU.Insiders;case"vscode-exploration":return Tr.aU.Internal;case"code-oss":return Tr.aU.Team;default:return Tr.aU.Public}}class Ff{constructor(){Gl(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,n){}getTreatmentVariableAsync(e,n){return Promise.resolve(void 0)}}async function xf(t,e){const n=t.extension.id,r=t.extension.packageJSON.name,i=t.extension.packageJSON.version,s=Af();return r==="vscode-pull-request-github"?(0,Tr.X7)(n,i,s,e,t.globalState):new Ff}var Of=Object.defineProperty,ti=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Of(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class $v extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Hv extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class Gv extends Error{constructor(e,n,r){super();this.branchName=e,this.upstreamRef=n,this.problem=r}get message(){const{upstreamRef:{remote:e,name:n},branchName:r,problem:i}=this;return`The upstream ref ${e}/${n} for branch ${r} ${i}.`}}const Vv="No Milestone";class Vl{constructor(e,n,r){this._folderManagers=e,this._credentialStore=n,this._telemetry=r,ti(this,"_subs"),ti(this,"_onDidChangeState",new o.EventEmitter),ti(this,"onDidChangeState",this._onDidChangeState.event),ti(this,"_state",Nt.Initializing),this._subs=[],o.commands.executeCommand("setContext",Tl,this._state),this._subs.push(...e.map(i=>i.onDidLoadRepositories(s=>this.state=s)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){const n=o.workspace.workspaceFolders;if(n){const r=n.findIndex(i=>i.uri.toString()===e.repository.rootUri.toString());if(r>-1){const i=this._folderManagers.slice(r,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,r),this._folderManagers.push(e),this._folderManagers.push(...i);return}}this._folderManagers.push(e)}removeRepo(e){const n=this._folderManagers.findIndex(r=>r.repository.rootUri.toString()===e.rootUri.toString());if(n>-1){const r=this._folderManagers[n];this._folderManagers.splice(n),r.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const n=e.remote.url.substring(0,e.remote.url.length-h.extname(e.remote.url).length);for(const r of this._folderManagers)if(r.gitHubRepositories.map(i=>i.remote.url.substring(0,i.remote.url.length-h.extname(i.remote.url).length)).includes(n))return r}getManagerForFile(e){for(const n of this._folderManagers){const r=n.repository.rootUri.path,i=e.path.substring(r.length>1?r.length+1:r.length);if(o.Uri.joinPath(n.repository.rootUri,i).path===e.path)return n}}get state(){return this._state}set state(e){const n=e!==this._state;this._state=e,n&&(o.commands.executeCommand("setContext",Tl,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=Nt.Initializing}async authenticate(){const e=await this._credentialStore.login(Fe.github);let n;return zr()&&(n=await this._credentialStore.login(Fe["github-enterprise"])),!!e||!!n}createGitHubRepository(e,n){return new gr(e,n,this._telemetry)}createGitHubRepositoryFromOwnerName(e,n){const r=`https://github.com/${e}/${n}`;return new gr(new Hi(n,r,new _n(r)),this._credentialStore,this._telemetry)}dispose(){this._subs.forEach(e=>e.dispose())}}ti(Vl,"ID","RepositoriesManager");function Bv(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var Mf=Object.defineProperty,en=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Ba{constructor(e){en(this,"_onDidOpenRepository",new o.EventEmitter),en(this,"onDidOpenRepository",this._onDidOpenRepository.event),en(this,"_onDidCloseRepository",new o.EventEmitter),en(this,"onDidCloseRepository",this._onDidCloseRepository.event),en(this,"_onDidChangeState",new o.EventEmitter),en(this,"onDidChangeState",this._onDidChangeState.event),en(this,"_onDidPublish",new o.EventEmitter),en(this,"onDidPublish",this._onDidPublish.event),en(this,"_gitAPI"),en(this,"_disposables");const n=e.exports;try{this._gitAPI=n.getAPI(1)}catch(r){throw o.window.showErrorMessage("Activating the Pull Requests and Issues extension failed. Please make sure you have git installed."),r}this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(this._gitAPI.onDidOpenRepository(r=>this._onDidOpenRepository.fire(r))),this._disposables.push(this._gitAPI.onDidChangeState(r=>this._onDidChangeState.fire(r))),this._disposables.push(this._gitAPI.onDidPublish(r=>this._onDidPublish.fire(r)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static async createProvider(){const e=o.extensions.getExtension("vscode.git");if(e)return await e.activate(),new Ba(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var Lf=Object.defineProperty,tt=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Lf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class qf{constructor(e){this._liveShareAPI=e,tt(this,"_onDidOpenRepository",new o.EventEmitter),tt(this,"onDidOpenRepository",this._onDidOpenRepository.event),tt(this,"_onDidCloseRepository",new o.EventEmitter),tt(this,"onDidCloseRepository",this._onDidCloseRepository.event),tt(this,"_openRepositories",[]),tt(this,"_sharedServiceProxy"),tt(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(Ln)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(o.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async n=>{n.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(n)}),e.removed.forEach(async n=>{n.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(n)})}async _refreshWorkspaces(e){o.workspace.workspaceFolders&&o.workspace.workspaceFolders.forEach(async n=>{n.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(n):await this.closeVSLSRepository(n))})}async openVSLSRepository(e){if(this.getRepository(e))return;const r=new Hf(e,this._sharedServiceProxy),i=new Uf,s=new Proxy(r,i);await s.initialize(),this.openRepository(s)}async closeVSLSRepository(e){const n=this.getRepository(e);!n||this.closeRepository(n)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(n=>n!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(n=>n.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class Uf{constructor(){}get(e,n){return n in e?e[n]:function(...r){return e.proxy.request(Mn,[n,e.workspaceFolder.uri.toString(),...r])}}}class $f{constructor(e){tt(this,"HEAD"),tt(this,"refs"),tt(this,"remotes"),tt(this,"submodules",[]),tt(this,"rebaseCommit"),tt(this,"mergeChanges",[]),tt(this,"indexChanges",[]),tt(this,"workingTreeChanges",[]),tt(this,"_onDidChange",new o.EventEmitter),tt(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class Hf{constructor(e,n){this.workspaceFolder=e,this.proxy=n,tt(this,"rootUri"),tt(this,"state")}async initialize(){const e=await this.proxy.request(Mn,[ft,this.workspaceFolder.uri.toString()]);this.state=new $f(e),this.rootUri=o.Uri.parse(e.rootUri),this.proxy.onNotify(kn,this._notifyHandler.bind(this))}_notifyHandler(e){var n;(n=this.state)==null||n.update(e)}}var Gf=Object.defineProperty,Bl=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Gf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Vf{constructor(e,n){this._liveShareAPI=e,this._api=n,Bl(this,"_sharedService"),Bl(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(Ln)||void 0,this._sharedService&&this._sharedService.onRequest(Mn,this._gitHandler.bind(this))}async _gitHandler(e){const n=e[0],r=e[1],i=o.Uri.parse(r),s=this._liveShareAPI.convertSharedUriToLocal(i),l=this._api.getGitProvider(s);if(!l)return;const g=l.repositories.filter(w=>w.rootUri.toString()===s.toString())[0];if(g){const w=e.slice(2);if(n===ft)return this._disposables.push(g.state.onDidChange(C=>{this._sharedService.notify(kn,{HEAD:g.state.HEAD,remotes:g.state.remotes,refs:g.state.refs})})),{HEAD:g.state.HEAD,remotes:g.state.remotes,refs:g.state.refs,rootUri:i.toString()};if(n==="show"){const C=w[1],P=i.with({path:C}),M=this._liveShareAPI.convertSharedUriToLocal(P);return w[1]=M.fsPath,g[n](...w)}if(g[n])return g[n](...w)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var Bf=Object.defineProperty,ni=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);async function jf(){const t=o.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const n="0.3.967";return e.getApi?e.getApi(n):e.getApiAsync(n)}class zf{constructor(e){this._api=e,ni(this,"_liveShareAPI"),ni(this,"_host"),ni(this,"_guest"),ni(this,"_localDisposables"),ni(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await jf()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(n=>n.dispose()),e.role===1){this._host=new Vf(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new qf(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function Qf(t){return new zf(t)}async function Wf(t,e){const n=await Ba.createProvider();if(n)return e.registerGitProvider(n),n}var Kf=Object.defineProperty,jl=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Kf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Yf{constructor(e){this.pullRequestManager=e,jl(this,"onNotifiedEmitter",new o.EventEmitter),jl(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(n=>{n.onDidChangeAssignableUsers(r=>{this.notifySuggestedAccounts(r)})})}async requestAsync(e,n,r){let i=null;switch(e){case"initialize":i={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const s=new Map;for(const l of this.pullRequestManager.folderManagers){const g=l.getAllAssignableUsers();if(!!g)for(const w of g)s.has(w.login)||s.set(w.login,w)}s.size>0&&this.notifySuggestedAccounts(Array.from(s.values()));break;default:throw new Error(`type:${e} not supported`)}return i}async notifySuggestedAccounts(e){let n;try{n=await this.getCurrentUserLogin()}catch(r){}n&&e.findIndex(r=>r.login===n)!==-1&&this.notifySuggestedUsers(e.filter(r=>r.email).map(r=>({id:r.login,displayName:r.name?r.name:r.login,email:r.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const n=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(n){const r=n.hub.currentUser;if(r)return r.login}}notify(e,n){this.onNotifiedEmitter.fire({type:e,body:n})}notifySuggestedUsers(e,n){this.notify("suggestedUsers",{contacts:e,exclusive:n})}}var Xf=Object.defineProperty,zl=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Xf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Jf{constructor(){zl(this,"_extensionsDisposable"),zl(this,"_subscriptions",[]),this._extensionsDisposable=o.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),o.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(n){n.branch.isRemote||o.commands.executeCommand("pr.create",{repoPath:n.repoPath,compareBranch:n.branch.name})}}))}async onExtensionsChanged(){var e;const n=(e=o.extensions.getExtension("eamodio.gitlens"))!=null?e:o.extensions.getExtension("eamodio.gitlens-insiders");if(n)if(this._extensionsDisposable.dispose(),n.isActive)this.register(await n.exports);else{let r=0;const i=setInterval(async()=>{n.isActive?(clearInterval(i),this.register(await n.exports)):(r++,r>60&&clearInterval(i))},1e3)}}}var Zf=Object.defineProperty,Xn=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Zf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Ql{constructor(e,n,r,i,s){this.issueModel=e,this.manager=n,this.stateManager=r,this.shouldPromptForBranch=s,Xn(this,"repoChangeDisposable"),Xn(this,"_branchName"),Xn(this,"user"),Xn(this,"repo"),Xn(this,"_repoDefaults"),Xn(this,"_onDidChangeCurrentIssueState",new o.EventEmitter),Xn(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(i!=null?i:this.issueModel.githubRepository.remote)}setRepo(e){var n;for(let r=0;r<this.stateManager.gitAPI.repositories.length;r++){const i=this.stateManager.gitAPI.repositories[r];for(let s=0;s<i.state.remotes.length;s++){const l=i.state.remotes[s];if(l.name===(e==null?void 0:e.remoteName)&&((n=l.fetchUrl)==null?void 0:n.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=i;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const n=this.manager.getCurrentUser(this.issueModel).login;return o.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(r=>r.login===n))&&(await this.manager.assignIssue(this.issueModel,n),await this.stateManager.refresh()),!0}}catch(n){o.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(n){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(n){return n.message!=="User aborted"&&o.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${n.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async ensureBranchTitleConfigMigrated(){var e;const n=o.workspace.getConfiguration(Xe),r=n.inspect(dl);async function i(s,l){await n.update(Ta,s,l),await n.update(dl,void 0,l)}return(r==null?void 0:r.globalValue)&&await i(r.globalValue,o.ConfigurationTarget.Global),(r==null?void 0:r.workspaceValue)&&await i(r.workspaceValue,o.ConfigurationTarget.Workspace),(r==null?void 0:r.workspaceFolderValue)&&await i(r.workspaceFolderValue,o.ConfigurationTarget.WorkspaceFolder),(e=o.workspace.getConfiguration(Xe).get(Ta))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const n=/[^ \\@\~\^\?\*\[]+/,r=e.match(n);if(r&&r.length>0&&r[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const n="Edit Setting";o.window.showErrorMessage(e,n).then(r=>{r===n&&o.commands.executeCommand("workbench.action.openSettings",`${Xe}.${Ta}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":o.workspace.getConfiguration(Xe).get(hl);if(e==="off")return!0;const n=this.stateManager.getSavedIssueState(this.issueModel.number);if(this._branchName=this.shouldPromptForBranch?void 0:n.branch,!this._branchName){const r=await Zi(await this.ensureBranchTitleConfigMigrated(),this.issue,void 0,await this.getUser());if(e==="on"){const i=this.validateBranchName(r);if(i)return this.showBranchNameError(i),!1;this._branchName=r}else this._branchName=await o.window.showInputBox({value:r,prompt:"Enter the label for the new branch."})}return this._branchName?(n.branch=this._branchName,await this.stateManager.setSavedIssueState(this.issueModel,n),await this.createOrCheckoutBranch(this._branchName)||(this._branchName=void 0),!0):!1}async getCommitMessage(){const e=o.workspace.getConfiguration(Xe).get(xp);if(typeof e=="string")return Zi(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}class Wl extends o.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,o.CompletionItemKind.Issue);this.issue=e}}class eg{constructor(e,n,r){this.stateManager=e,this.repositoriesManager=n,this.context=r}async provideCompletionItems(e,n,r,i){var s,l,g,w;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&n.character>0&&i.triggerKind===o.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(n)).match(/#[0-9]*$/))return[];if(n.character<=6&&e.languageId==="markdown"&&e.getText(new o.Range(n.with(void 0,0),n))===new Array(n.character+1).join("#"))return[];if(i.triggerKind===o.CompletionTriggerKind.TriggerCharacter&&o.workspace.getConfiguration(Xe).get("ignoreCompletionTrigger",[]).find(K=>K===e.languageId))return[];if(e.languageId!=="scminput"&&!await Aa(e,n))return[];let C=new o.Range(n,n);n.character-1>=0&&e.getText(new o.Range(n.translate(0,-1),n))==="#"&&(C=new o.Range(n.translate(0,-1),n)),await this.stateManager.tryInitializeAndWait();const P=new Map,M=new Date;let $,j;if(e.languageId==="scminput"?j=_l(e.uri):e.uri.scheme==="comment"?j=o.window.visibleTextEditors.length>0?(s=o.workspace.getWorkspaceFolder(o.Uri.file(o.window.visibleTextEditors[0].document.uri.fsPath)))==null?void 0:s.uri:void 0:j=(l=o.workspace.getWorkspaceFolder(e.uri))==null?void 0:l.uri,!j)return[];try{$=await((g=this.repositoriesManager.getManagerForFile(j))==null?void 0:g.getPullRequestDefaults())}catch(K){}const W=this.stateManager.getIssueCollection(j);for(const K of W){const X=(w=await K[1])!=null?w:[];if(X.length!==0)if(X[0]instanceof ut){let ee=0;for(const ie of X)P.set(br(ie),await this.completionItemFromIssue($,ie,M,C,e,ee++))}else for(let ee=0;ee<X.length;ee++){const ie=X[ee];for(const ue of ie.issues)P.set(br(ue),await this.completionItemFromIssue($,ue,M,C,e,ee,ie.milestone))}}return[...P.values()]}async completionItemFromIssue(e,n,r,i,s,l,g){var w;const C=new Wl(n);if(s.languageId==="markdown")C.insertText=`[${br(n,e)}](${n.html_url})`;else{const M=o.workspace.getConfiguration(Xe).get("issueCompletionFormatScm");s.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof M=="string"?C.insertText=await Zi(M,n,e):C.insertText=`${br(n,e)}`}C.documentation=n.body,C.range=i,C.detail=g?g.title:(w=n.milestone)==null?void 0:w.title;let P=(r.getTime()-new Date(n.updatedAt).getTime()).toString();return P=new Array(20-P.length).join("0")+P,C.sortText=`${l} ${P}`,C.filterText=`${C.detail} # ${n.number} ${n.title} ${C.documentation}`,C}async resolveCompletionItem(e,n){return e instanceof Wl&&(e.documentation=await Ia(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}var tg=Object.defineProperty,ri=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?tg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const vn="newIssue",ng="NewIssue.md",rs="Assignees:",ii="Labels:";function ja(t){const e=JSON.parse(t.query);if(e.origin)return o.Uri.parse(e.origin)}class rg{constructor(){ri(this,"content"),ri(this,"createTime",0),ri(this,"modifiedTime",0),ri(this,"_onDidChangeFile",new o.EventEmitter),ri(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,n){const r=this.onDidChangeFile(i=>{i.length===0&&i[0].type===o.FileChangeType.Deleted&&r.dispose()});return r}stat(e){var n,r;return{type:o.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(r=(n=this.content)==null?void 0:n.length)!=null?r:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var n;return(n=this.content)!=null?n:new Uint8Array(0)}writeFile(e,n,r={create:!1,overwrite:!1}){const i=this.content;this.content=n,i===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:o.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:o.FileChangeType.Changed}]))}delete(e,n){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:o.FileChangeType.Deleted}])}rename(e,n,r){}}class ig{constructor(e){this.manager=e}async provideCompletionItems(e,n,r,i){if(!e.lineAt(n.line).text.startsWith(ii))return[];const s=ja(e.uri);if(!s)return[];const l=this.manager.getManagerForFile(s);if(!l)return[];const g=await l.getPullRequestDefaults();return(await l.getLabels(void 0,g)).map(C=>{const P=new o.CompletionItem(C.name,o.CompletionItemKind.Color);return P.documentation=`#${C.color}`,P.commitCharacters=[" ",","],P})}}class sg{constructor(e,n,r,i){this.manager=e,this.stateManager=n,this.context=r,this.telemetry=i}async provideHover(e,n,r){if(!await kl(e,n))return;let i=e.getWordRangeAtPosition(n,Qr);if(i&&i.start.character>0){i=new o.Range(new o.Position(i.start.line,i.start.character-1),i.end);const l=e.getText(i).match(Qr),g=Na(l),w=this.manager.getManagerForFile(e.uri);if(!w)return;if(g&&l&&g.issueNumber<=this.stateManager.maxIssueNumber(w.repository.rootUri))return this.createHover(w,l[0],g,i)}else return}async createHover(e,n,r,i){const s=await Op(this.stateManager,e,n,r);if(!!s)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new o.Hover(await Ia(s,this.context,this.manager,r.commentNumber),i)}}var ag=Object.defineProperty,Kl=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Jn extends o.TreeItem{constructor(e,n,r){super(n,r);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class og{constructor(e,n,r){this.stateManager=e,this.manager=n,this.context=r,Kl(this,"_onDidChangeTreeData",new o.EventEmitter),Kl(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),r.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),r.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),r.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var n;let r;return e instanceof Jn?r=e:e instanceof kr?r=new Jn(e.repository.rootUri,h.basename(e.repository.rootUri.fsPath),o.TreeItemCollapsibleState.Expanded):e instanceof ut?(r=new Jn(void 0,`${e.number}: ${e.title}`,o.TreeItemCollapsibleState.None),r.iconPath=e.isOpen?new o.ThemeIcon("issues",new o.ThemeColor("issues.open")):new o.ThemeIcon("issue-closed",new o.ThemeColor("issues.closed")),((n=this.stateManager.currentIssue(e.uri))==null?void 0:n.issue.number)===e.number?(r.label=`\u2713 ${r.label}`,r.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?r.contextValue="continueissue":r.contextValue="issue",Pp(e)&&(r.contextValue="link"+r.contextValue)):r=new Jn(e.uri,e.milestone.title,e.issues.length>0?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.None),r}getChildren(e){return e===void 0&&this.manager.state!==Nt.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,n){return n instanceof ut&&(e.tooltip=await Ia(n,this.context,this.manager)),e}getStateChildren(){return this.manager.state===Nt.NeedsAuthentication?[]:[new Jn(void 0,"Loading...")]}getQueryItems(e){const n=this.stateManager.getIssueCollection(e.repository.rootUri);if(n.size===1)return Array.from(n.values())[0];const r=Array.from(n.keys()),i=r[0];return r.map(s=>{const l=new Jn(e.repository.rootUri,s);return l.contextValue="query",l.collapsibleState=s===i?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.Collapsed,l})}getIssuesChildren(e){var n;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof kr?this.getQueryItems(e):e instanceof Jn?e.uri?(n=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?n:[]:[]:e instanceof ut?[]:e.issues.map(r=>{const i=Object.assign(r);return i.uri=e.uri,i})}}var ug=Object.defineProperty,lg=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class cg{constructor(e){lg(this,"expression"),e.subscriptions.push(o.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=o.workspace.getConfiguration(Xe).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,n,r,i){if(this.expression===void 0||r.only&&r.only!==o.CodeActionKind.QuickFix)return[];const s=[];let l=n.start.line;do{const g=e.lineAt(l).text,w=g.substring(0,Ap);if(!w.match(Qr)){const P=w.search(this.expression);if(P>=0){const M=new o.CodeAction("Create GitHub Issue",o.CodeActionKind.QuickFix),$=w.substring(P).search(/\s/),j=P+($>0?$:w.match(this.expression)[0].length);M.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:l,line:g,insertIndex:j,range:n}]},s.push(M);break}}l++}while(n.end.line>=l);return s}}var dg=Object.defineProperty,Pt=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const hg=["Recovery"],mg="currentIssue",za="issues",Yl="ignoreMilestones",Qa=[{label:"My Issues",query:"default"}];class jv extends null{constructor(){super(...arguments);Pt(this,"uri")}}class pg{constructor(e,n,r){this.gitAPI=e,this.manager=n,this.context=r,Pt(this,"resolvedIssues",new Map),Pt(this,"_singleRepoStates",new Map),Pt(this,"_onRefreshCacheNeeded",new o.EventEmitter),Pt(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),Pt(this,"_onDidChangeIssueData",new o.EventEmitter),Pt(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),Pt(this,"_queries",[]),Pt(this,"_onDidChangeCurrentIssue",new o.EventEmitter),Pt(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),Pt(this,"initializePromise"),Pt(this,"statusBarItem"),Pt(this,"isSettingIssue",!1),n.folderManagers.forEach(i=>{this.context.subscriptions.push(i.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var n;let r=(n=this._singleRepoStates.get(e.path))==null?void 0:n.issueCollection;return r||(r=new Map,r)}getOrCreateSingleRepoState(e,n){let r=this._singleRepoStates.get(e.path);return r||(n||(n=this.manager.getManagerForFile(e)),r={issueCollection:new Map,maxIssueNumber:0,folderManager:n},this._singleRepoStates.set(e.path,r),r)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===Nt.RepositoriesLoaded)this.doInitialize(),e();else{const n=this.manager.onDidChangeState(()=>{this.manager.state===Nt.RepositoriesLoaded&&(this.doInitialize(),n.dispose(),e())});this.context.subscriptions.push(n)}})),this.initializePromise}registerRepositoryChangeEvent(){this.gitAPI.repositories.forEach(e=>{this.context.subscriptions.push(e.state.onDidChange(async()=>{var n;const r=this.getOrCreateSingleRepoState(e.rootUri),i=r.lastHead,s=r.lastBranch,l=e.state.HEAD?e.state.HEAD.commit:void 0;(e.state.HEAD?e.state.HEAD.commit:void 0)!==i&&await this.setIssueData(r.folderManager);const g=(n=e.state.HEAD)==null?void 0:n.name;(i!==l||s!==g)&&(!r.currentIssue||g!==r.currentIssue.branchName)&&(g?r.folderManager&&await this.setCurrentIssueFromBranch(r,g):await this.setCurrentIssue(r,void 0)),r.lastHead=e.state.HEAD?e.state.HEAD.commit:void 0,r.lastBranch=e.state.HEAD?e.state.HEAD.name:void 0}))})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=o.workspace.getConfiguration(Xe).get(wr,Qa),this._queries.length===0&&(this._queries=Qa),this.context.subscriptions.push(o.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration(`${Xe}.${wr}`)?(this._queries=o.workspace.getConfiguration(Xe).get(wr,Qa),this._onRefreshCacheNeeded.fire()):n.affectsConfiguration(`${Xe}.${Yl}`)&&this._onRefreshCacheNeeded.fire()})),await this.setAllIssueData(),this.registerRepositoryChangeEvent(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const n of this.manager.folderManagers){const r=this.getOrCreateSingleRepoState(n.repository.rootUri,n);r.lastHead=n.repository.state.HEAD?n.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(n.repository.rootUri.path,r);const i=(e=n.repository.state.HEAD)==null?void 0:e.name;!r.currentIssue&&i&&await this.setCurrentIssueFromBranch(r,i)}}cleanIssueState(){const e=this.context.workspaceState.get(za),n=e?JSON.parse(e):{issues:[],branches:[]},r=new Date().valueOf()-30*864e5;for(const i in n.issues)n.issues[i].stateModifiedTime<r&&(n.branches&&n.branches[i]&&delete n.branches[i],delete n.issues[i])}async getUsers(e){var n;await this.initializePromise;const r=await((n=this.manager.getManagerForFile(e))==null?void 0:n.getAssignableUsers()),i=new Map;for(const s in r)r[s].forEach(l=>{i.set(l.login,l)});return i}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const n=this.getOrCreateSingleRepoState(e);return n.userMap||(n.userMap=this.getUsers(e)),n.userMap}async getCurrentUser(e){var n;return(n=this.manager.credentialStore.getCurrentUser(e))==null?void 0:n.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var n,r;const i=this.getOrCreateSingleRepoState(e.repository.rootUri,e);i.issueCollection.clear();let s,l;for(const g of this._queries){let w;if(g.query===Fp)w=this.setMilestones(e);else{if(!s)try{s=await e.getPullRequestDefaults()}catch(C){}if(!l){const C=mr(e.repository).filter(P=>P.authProviderId===Fe["github-enterprise"]);l=await this.getCurrentUser(C.length?Fe["github-enterprise"]:Fe.github)}w=this.setIssues(e,await Zi(g.query,void 0,s,l))}i.issueCollection.set(g.label,w)}i.maxIssueNumber=await e.getMaxIssue(),i.lastHead=(n=e.repository.state.HEAD)==null?void 0:n.commit,i.lastBranch=(r=e.repository.state.HEAD)==null?void 0:r.name}setIssues(e,n){return new Promise(async r=>{const i=await e.getIssues({fetchNextPage:!1},n);this._onDidChangeIssueData.fire(),r(i.items.map(s=>{const l=s;return l.uri=e.repository.rootUri,l}))})}async setCurrentIssueFromBranch(e,n){if(o.workspace.getConfiguration(Xe).get(hl)==="off")return;let i;try{i=await e.folderManager.getPullRequestDefaults()}catch(l){return}if(n===i.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===n)return;const s=this.getSavedState();for(const l in s.branches)if(l===n){const g=await e.folderManager.resolveIssue(s.branches[l].owner,s.branches[l].repositoryName,s.branches[l].number);g&&await this.setCurrentIssue(e,new Ql(g,e.folderManager,this));return}}setMilestones(e){return new Promise(async n=>{const r=new Date,i=o.workspace.getConfiguration(Xe).get(Yl,[]),s=await e.getMilestones({fetchNextPage:!1},i.indexOf(Nl)<0);let l;const g=new Map,w=[];for(let C=0;C<s.items.length;C++){const P=s.items[C];P.uri=e.repository.rootUri;const M=s.items[C].milestone;if(P.issues&&P.issues.length<=0||i.indexOf(M.title)>=0)continue;w.push(P);let $=M.dueOn?new Date(M.dueOn):void 0;$||($=new Date(this.removeDateExcludeStrings(M.title)),isNaN($.getTime())&&($=new Date(M.createdAt))),$<r&&(l===void 0||$>l)&&(l=$),g.set(M.id?M.id:M.title,$)}w.sort((C,P)=>{const M=g.get(C.milestone.id?C.milestone.id:C.milestone.title),$=g.get(P.milestone.id?P.milestone.id:P.milestone.title);return l&&M>=l&&$>=l?M<=$?-1:1:M>=$?-1:1}),this._onDidChangeIssueData.fire(),n(w)})}removeDateExcludeStrings(e){return hg.forEach(n=>e=e.replace(n,"")),e}currentIssue(e){var n;return(n=this._singleRepoStates.get(e.path))==null?void 0:n.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var n,r;return(r=(n=this._singleRepoStates.get(e.path))==null?void 0:n.maxIssueNumber)!=null?r:0}async setCurrentIssue(e,n){if(!(this.isSettingIssue&&n===void 0)){if(this.isSettingIssue=!0,e instanceof kr){const r=this._singleRepoStates.get(e.repository.rootUri.path);if(!r)return;e=r}try{if(e.currentIssue&&(n==null?void 0:n.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),n&&this.context.subscriptions.push(n.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(mg,n==null?void 0:n.issue.number),(!n||await n.startWorking())&&(e.currentIssue=n,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(r){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),n=e.length>0;if(!n){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}n&&!this.statusBarItem&&(this.statusBarItem=o.window.createStatusBarItem("github.issues.status",o.StatusBarAlignment.Left,0),this.statusBarItem.name="GitHub Active Issue");const r=this.statusBarItem;r.text=`$(issues) Issue ${e.map(i=>br(i.issue,i.repoDefaults)).join(", ")}`,r.tooltip=e.map(i=>i.issue.title).join(", "),r.command="issue.statusBar",r.show()}getSavedState(){const e=this.context.workspaceState.get(za);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var n;return(n=this.getSavedState().issues[`${e}`])!=null?n:{}}async setSavedIssueState(e,n){const r=this.getSavedState();return r.issues[`${e.number}`]={...n,stateModifiedTime:new Date().valueOf()},n.branch&&(r.branches||(r.branches=Object.create(null)),r.branches[n.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(za,JSON.stringify(r))}}class fg{constructor(e,n,r){this.stateManager=e,this.manager=n}async provideCompletionItems(e,n,r,i){var s;if(e.languageId!=="scminput"&&e.uri.scheme!==vn&&n.character>0&&i.triggerKind===o.CompletionTriggerKind.Invoke&&e.getText(new o.Range(n.with(void 0,n.character-1),n))!=="@")return[];if(i.triggerKind===o.CompletionTriggerKind.TriggerCharacter&&o.workspace.getConfiguration(Xe).get("ignoreUserCompletionTrigger",[]).find(C=>C===e.languageId))return[];if(e.languageId!=="scminput"&&!await Aa(e,n))return[];let l=new o.Range(n,n);n.character-1>=0&&e.getText(new o.Range(n.translate(0,-1),n))==="@"&&(l=new o.Range(n.translate(0,-1),n));const g=e.uri.scheme===vn?(s=ja(e.uri))!=null?s:e.uri:e.languageId==="scminput"?_l(e.uri):e.uri;if(!g)return[];const w=[];return(await this.stateManager.getUserMap(g)).forEach(C=>{const P=new Lp({label:C.login,description:C.name},o.CompletionItemKind.User);P.insertText=`@${C.login}`,P.login=C.login,P.uri=g,P.range=l,P.detail=C.name,P.filterText=`@ ${C.login} ${C.name}`,e.uri.scheme===vn&&(P.commitCharacters=[" ",","]),w.push(P)}),w}async resolveCompletionItem(e,n){const r=this.manager.getManagerForFile(e.uri);if(!r)return e;const i=await r.getPullRequestDefaults(),s=await r.resolveUser(i.owner,i.repo,e.login);return s&&(e.documentation=Pa(i,s),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}class gg{constructor(e,n){this.manager=e,this.telemetry=n}async provideHover(e,n,r){if(!await kl(e,n))return;let i=e.getWordRangeAtPosition(n,Sa);if(i&&i.start.character>0){i=new o.Range(new o.Position(i.start.line,i.start.character),i.end);const l=e.getText(i).match(Sa);if(l)return this.createHover(e.uri,l[1],i)}else return}async createHover(e,n,r){try{const i=this.manager.getManagerForFile(e);if(!i)return;const s=await i.getPullRequestDefaults(),l=await i.resolveUser(s.owner,s.repo,n);return l&&l.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new o.Hover(Pa(s,l),r)):void 0}catch(i){return}}}var vg=Object.defineProperty,Wa=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const yg="issueCompletions.enabled",wg="userCompletions.enabled";class bg{constructor(e,n,r,i,s){this.gitAPI=e,this.manager=n,this.reviewManagers=r,this.context=i,this.telemetry=s,Wa(this,"_stateManager"),Wa(this,"createIssueInfo"),Wa(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new pg(e,this.manager,this.context)}async initialize(){return this.context.subscriptions.push(o.workspace.registerFileSystemProvider(vn,new rg)),this.registerCompletionProviders(),this.context.subscriptions.push(o.languages.registerCompletionItemProvider({scheme:vn},new ig(this.manager)," ",",")),this.context.subscriptions.push(o.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new og(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(o.commands.registerCommand("issue.createIssueFromSelection",(e,n)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,n)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.copyGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(o.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(o.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(o.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.createIssueFromFile",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),this.createIssueFromFile()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(o.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(o.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(o.commands.registerCommand("issue.goToLinkedCode",async e=>Ip(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(o.languages.registerHoverProvider("*",new sg(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(o.languages.registerHoverProvider("*",new gg(this.manager,this.telemetry))),this.context.subscriptions.push(o.languages.registerCodeActionsProvider("*",new cg(this.context)))})}dispose(){}registerCompletionProviders(){const e=[{provider:eg,trigger:"#",disposable:void 0,configuration:yg},{provider:fg,trigger:"@",disposable:void 0,configuration:wg}];for(const n of e)o.workspace.getConfiguration(Xe).get(n.configuration,!0)&&this.context.subscriptions.push(n.disposable=o.languages.registerCompletionItemProvider(this.documentFilters,new n.provider(this._stateManager,this.manager,this.context),n.trigger));this.context.subscriptions.push(o.workspace.onDidChangeConfiguration(n=>{for(const r of e)if(n.affectsConfiguration(`${Xe}.${r.configuration}`)){const i=o.workspace.getConfiguration(Xe).get(r.configuration,!0);!i&&r.disposable?(r.disposable.dispose(),r.disposable=void 0):i&&!r.disposable&&this.context.subscriptions.push(r.disposable=o.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));break}}))}async createIssue(){var e,n;let r=(e=o.window.activeTextEditor)==null?void 0:e.document.uri;if(r||(r=(n=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:n.repository.rootUri),r)return this.makeNewIssueFile(r)}async createIssueFromFile(){var e,n,r,i;let s;if(!o.window.activeTextEditor||o.window.activeTextEditor.document.uri.scheme!==vn)return;s=o.window.activeTextEditor.document.getText();const l=s.indexOf(`\r
\r
`),g=s.indexOf(`

`);let w;if(l<0&&g<0)return;l<0?w=g:g<0?w=l:w=Math.min(l,g);const C=s.substring(0,w);let P;if(s=s.substring(w+2).trim(),s.startsWith(rs)){const W=s.split(/\r\n|\n/,1);W.length===1&&(P=W[0].substring(rs.length).split(",").map(K=>(K=K.trim(),K.startsWith("@")&&(K=K.substring(1)),K)),s=s.substring(W[0].length).trim())}let M;if(s.startsWith(ii)){const W=s.split(/\r\n|\n/,1);W.length===1&&(M=W[0].substring(ii.length).split(",").map(K=>K.trim()).filter(K=>K),s=s.substring(W[0].length).trim())}const $=s;if(!C||!$)return;const j=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(n=this.createIssueInfo)==null?void 0:n.newIssue,C,$,P,M,(r=this.createIssueInfo)==null?void 0:r.lineNumber,(i=this.createIssueInfo)==null?void 0:i.insertIndex,ja(o.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,j&&await o.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const n=o.workspace.getConfiguration(Xe),r=n.inspect(wr);let i;if(r==null?void 0:r.workspaceValue)i="workbench.action.openWorkspaceSettingsFile";else{const l=n.get(wr);(r==null?void 0:r.defaultValue)&&JSON.stringify(r==null?void 0:r.defaultValue)===JSON.stringify(l)&&n.update(wr,r.defaultValue,o.ConfigurationTarget.Global),i="workbench.action.openSettingsJson"}await o.commands.executeCommand(i);const s=o.window.activeTextEditor;if(s){const g=s.document.getText().search(e.labelAsString);if(g>=0){const w=s.document.positionAt(g);s.revealRange(new o.Range(w,w)),s.selection=new o.Selection(w,w)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await o.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),o.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof ut)return o.env.openExternal(o.Uri.parse(e.html_url))}async doStartWorking(e,n,r){if(!e){o.window.showErrorMessage(`There are no repositories open that match ${n.remote.url}`);return}const i=await e.findUpstreamForItem(n);i.needsFork&&await e.tryOfferToFork(n.githubRepository)===void 0||await this._stateManager.setCurrentIssue(e,new Ql(n,e,this._stateManager,i.remote,r))}async startWorking(e){e instanceof ut&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof ut&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var n;const r=this.manager.getManagerForIssueModel(e);!r||e instanceof ut&&((n=this._stateManager.currentIssue(r.repository.rootUri))==null?void 0:n.issue.number)===e.number&&await this._stateManager.setCurrentIssue(r,void 0)}async statusBarActions(e){const n=`$(globe) Open #${e.issue.number} ${e.issue.title}`,r=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let i;try{i=await e.manager.getPullRequestDefaults()}catch(w){}const s=`$(primitive-square) Stop working on #${e.issue.number}`,l=e.branchName&&i?[n,r,s]:[n,r,s];switch(await o.window.showQuickPick(l,{placeHolder:"Current issue options"})){case n:return this.openIssue(e.issue);case r:{const w=Wn.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(w)return Kp(e.manager,w,this._stateManager);break}case s:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const n=e.map(i=>({label:`#${i.issue.number} from ${i.issue.githubRepository.remote.owner}/${i.issue.githubRepository.remote.repositoryName}`,currentIssue:i})),r=await o.window.showQuickPick(n);if(r)return this.statusBarActions(r.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof ut)return o.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof ut)return o.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await o.env.clipboard.readText())}async createTodoIssue(e,n){let r,i,s,l,g,w;if(!e&&o.window.activeTextEditor)r=o.window.activeTextEditor.document,w=r.getText(o.window.activeTextEditor.selection);else if(e)r=e.document,s=e.insertIndex,l=e.lineNumber,i=e.line.substring(s,e.line.length).trim(),w=r.getText(e.range.isEmpty?r.lineAt(e.range.start.line).range:e.range);else return;const C=w.match(Sa);C&&C.length===2&&(await this._stateManager.getUserMap(r.uri)).has(C[1])&&(g=[C[1]]);let P;const M=n||(e==null?void 0:e.document.isUntitled)?n:(await Da(this.gitAPI,e)).permalink,$=o.window.createInputBox();$.value=i!=null?i:"",$.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",$.title="Create Issue",$.buttons=[{iconPath:new o.ThemeIcon("edit"),tooltip:"Edit Description"}],$.onDidAccept(async()=>{P=$.value,P&&($.busy=!0,await this.doCreateIssue(r,e,P,M,g,void 0,l,s),$.busy=!1),$.hide()}),$.onDidTriggerButton(async()=>{P=$.value,$.busy=!0,this.createIssueInfo={document:r,newIssue:e,lineNumber:l,insertIndex:s},this.makeNewIssueFile(r.uri,P,M,g),$.busy=!1,$.hide()}),$.show()}async makeNewIssueFile(e,n,r,i){const s=`?{"origin":"${e.toString()}"}`,l=o.Uri.parse(`${vn}:/${ng}${s}`);if(o.window.visibleTextEditors.filter(K=>K.document.uri.scheme===vn).length>0)return;await o.workspace.fs.delete(l);const g=`${rs} ${i&&i.length>0?i.map(K=>"@"+K).join(", ")+" ":""}`,w=`${ii} `,C=`${n!=null?n:"Issue Title"}

${g}
${w}

${r!=null?r:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await o.workspace.fs.writeFile(l,this.stringToUint8Array(C));const P=o.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new o.ThemeColor("issues.newIssueDecoration")}}),M=o.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new o.ThemeColor("issues.newIssueDecoration")}}),$=o.window.onDidChangeActiveTextEditor(K=>{if((K==null?void 0:K.document.uri.scheme)===vn){const X=K.document.lineAt(2);X.text.startsWith(rs)&&K.setDecorations(P,[new o.Range(new o.Position(2,0),new o.Position(2,X.text.length))]);const ee=K.document.lineAt(3);ee.text.startsWith(ii)&&K.setDecorations(M,[new o.Range(new o.Position(3,0),new o.Position(3,ee.text.length))])}}),j=await o.window.showTextDocument(l),W=o.workspace.onDidCloseTextDocument(K=>{K===j.document&&($.dispose(),W.dispose())})}async verifyLabels(e,n){var r;if(!n.labels)return!0;const i=(await e.getLabels(void 0,n)).map(g=>g.name),s=[],l=[];if((r=n.labels)==null||r.forEach(g=>{let w=typeof g=="string"?g:g.name;!w||(i.includes(w)?l.push(w):s.push(w))}),s.length>0){const g="Yes",w="No";switch(await o.window.showInformationMessage(`The following labels don't exist in this repository: ${s.join(", ")}. 
Do you want to create these labels?`,{modal:!0},g,w)){case g:return!0;case w:return n.labels=l,!0;default:return!1}}return!0}async chooseRepo(e){const n=[];for(const i of this.manager.folderManagers)try{const s=await i.getPullRequestDefaults();n.push({label:`${s.owner}/${s.repo}`,repo:i})}catch(s){}if(n.length===0)return;if(n.length===1)return n[0].repo;const r=await o.window.showQuickPick(n,{placeHolder:e});return r==null?void 0:r.repo}async doCreateIssue(e,n,r,i,s,l,g,w,C){let P,M;if(e?M=this.manager.getManagerForFile(e.uri):C&&(M=this.manager.getManagerForFile(C)),M||(M=await this.chooseRepo("Choose where to create the issue.")),!M)return!1;try{P=await M.getPullRequestDefaults()}catch(K){return o.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const $=i||(n==null?void 0:n.document.isUntitled)?i:(await Da(this.gitAPI,n)).permalink,j={owner:P.owner,repo:P.repo,title:r,body:$,assignees:s,labels:l};if(!await this.verifyLabels(M,j))return!1;const W=await M.createIssue(j);if(W){if(e!==void 0&&w!==void 0&&g!==void 0){const K=new o.WorkspaceEdit,X=o.workspace.getConfiguration(Xe).get("createInsertFormat","number")==="number"?`#${W.number}`:W.html_url;K.insert(e.uri,new o.Position(g,w),` ${X}`),await o.workspace.applyEdit(K)}else{const K="Copy URL",X="Open Issue";o.window.showInformationMessage("Issue created",K,X).then(async ee=>{switch(ee){case K:await o.env.clipboard.writeText(W.html_url);break;case X:await o.env.openExternal(o.Uri.parse(W.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(){const e=await Da(this.gitAPI);return e.error&&o.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${e.error}`),e}async getContextualizedPermalink(e,n){const r=await o.env.asExternalUri(e),i=r.scheme==="https"&&/^(vscode|github)\./.test(r.authority)?r.authority:void 0;if(!i)return n;const s=o.Uri.parse(n),l=`/github${s.path}`;return s.with({authority:i,path:l}).toString()}async copyPermalink(){const e=await this.getPermalinkWithError();if(e.permalink)return o.env.clipboard.writeText(e.originalFile?await this.getContextualizedPermalink(e.originalFile,e.permalink):e.permalink)}getMarkdownLinkText(){if(!o.window.activeTextEditor)return;let e=o.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new o.Range(e.start,new o.Position(e.start.line+1,0)));const n=o.window.activeTextEditor.document.getText(e);if(n)return n;if(e=o.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return o.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),n=this.getMarkdownLinkText();if(e.permalink&&n)return o.env.clipboard.writeText(`[${n.trim()}](${e.permalink})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e.permalink)return o.env.openExternal(o.Uri.parse(e.originalFile?await this.getContextualizedPermalink(e.originalFile,e.permalink):e.permalink))}}var kg=Object.defineProperty,_g=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?kg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Eg{constructor(){_g(this,"_disposables"),this._disposables=[],this._disposables.push(o.window.registerFileDecorationProvider(this))}provideFileDecoration(e,n){if(e.scheme!=="filechange"&&e.scheme!=="github")return;const r=sn(e);if(r&&r.status!==void 0)return{propagate:!1,badge:this.letter(r.status)};const i=ct(e);if(i&&i.status!==void 0)return{propagate:!1,badge:this.letter(i.status)}}letter(e){switch(e){case be.MODIFY:return"M";case be.ADD:return"A";case be.DELETE:return"D";case be.RENAME:return"R";case be.UNKNOWN:return"U";case be.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var Rg=Object.defineProperty,is=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Rg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Cg extends kt{constructor(e,n,r,i,s){super();this.parent=e,this.pullRequestManager=n,this.pullRequest=r,this.commit=i,this.comments=s,is(this,"sha"),is(this,"collapsibleState"),is(this,"iconPath"),is(this,"contextValue"),this.label=i.commit.message,this.sha=i.sha,this.collapsibleState=o.TreeItemCollapsibleState.Collapsed;let l;try{i.author&&i.author.avatar_url&&(l=o.Uri.parse(`${i.author.avatar_url}&s=${64}`))}catch(g){}this.iconPath=l,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){var e;const r=((e=await this.pullRequest.getCommitChangedFiles(this.commit))!=null?e:[]).map(i=>{const s=this.comments.filter(C=>C.path===i.filename&&C.originalCommitId===this.commit.sha),l=i.filename,g=o.Uri.parse(h.posix.join(`commit~${this.commit.sha.substr(0,8)}`,l)),w=new Er(this,this.pullRequestManager,this.pullRequest,Un(i.status),l,void 0,It(g,l,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),It(g,l,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),[],s,this.commit.sha);return w.useViewChangesCommand(),w});return Promise.resolve(r)}}var Sg=Object.defineProperty,si=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Sg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Tg extends kt{constructor(e,n,r,i){super();si(this,"label","Commits"),si(this,"collapsibleState"),si(this,"_folderRepoManager"),si(this,"_pr"),si(this,"_comments"),this.parent=e,this._pr=r,this._folderRepoManager=n,this._comments=i,this.collapsibleState=o.TreeItemCollapsibleState.Collapsed}getTreeItem(){return this}async getChildren(){try{const n=(await this._pr.getCommits()).map(r=>new Cg(this,this._folderRepoManager,this._pr,r,this._comments));return Promise.resolve(n)}catch(e){return Promise.resolve([])}}}var Ng=Object.defineProperty,Ka=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Ng(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Pg extends kt{constructor(e,n){super();this.parent=e,this._fileChanges=n,Ka(this,"label","Files"),Ka(this,"collapsibleState"),Ka(this,"directories",[]),this.collapsibleState=o.TreeItemCollapsibleState.Expanded;const r=new Yn(this,"");this._fileChanges.forEach(i=>r.addFile(i)),r.finalize(),r.label===""?this.directories=r.children:this.directories=[r]}getTreeItem(){return this}async getChildren(){let e;return o.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"?e=this.directories:e=this._fileChanges,Promise.resolve(e)}}var Ig=Object.defineProperty,ss=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Dg extends Kn{constructor(e,n,r,i,s){super(e,n.title,n.userAvatarUri,n);this.parent=e,this._pullRequest=n,this._pullRequestManager=r,this._comments=i,this._localFileChanges=s,ss(this,"_filesCategoryNode"),ss(this,"_commitsCategoryNode"),ss(this,"collapsibleState",o.TreeItemCollapsibleState.Expanded),ss(this,"_disposables",[]),this.label=this._pullRequest.title,this._disposables.push(o.window.onDidChangeActiveTextEditor(l=>{const g=l==null?void 0:l.document.uri.toString();this.revealActiveEditorInTree(g)})),this._disposables.push(this.parent.view.onDidChangeVisibility(l=>{var g;const w=(g=o.window.activeTextEditor)==null?void 0:g.document.uri.toString();this.revealActiveEditorInTree(w)}))}revealActiveEditorInTree(e){if(this.parent.view.visible&&e){const n=this._localFileChanges.find(r=>r.filePath.toString()===e);n&&this.reveal(n,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new Pg(this.parent,this._localFileChanges),this._commitsCategoryNode=new Tg(this.parent,this._pullRequestManager,this._pullRequest,this._comments)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var Ag=Object.defineProperty,ai=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Xl extends o.Disposable{constructor(e){super(()=>this.dispose());this._context=e,ai(this,"_onDidChangeTreeData",new o.EventEmitter),ai(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),ai(this,"_disposables",[]),ai(this,"_pullRequestManagerMap",new Map),ai(this,"_view"),this._view=o.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(o.workspace.onDidChangeConfiguration(async n=>{if(n.affectsConfiguration(`${Vt}.fileListLayout`)){this._onDidChangeTreeData.fire();const r=o.workspace.getConfiguration(`${Vt}`).get("fileListLayout");await o.commands.executeCommand("setContext","fileListLayout:flat",r==="flat")}else n.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(){this._onDidChangeTreeData.fire()}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const n=this._pullRequestManagerMap.values().next();n.done||(e=n.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,n,r,i,s){const l=new Dg(this,n,e,i,r);this._pullRequestManagerMap.set(e,l),this.updateViewTitle(),await o.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),s&&this._view.reveal(l)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await o.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,n){this._view.reveal(e,n)}async getChildren(e){if(e)return await e.getChildren();{const n=[];if(this._pullRequestManagerMap.size>=1)for(const r of this._pullRequestManagerMap.values())n.push(r);return n}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,n){return n instanceof Er&&await n.resolve(),n}dispose(){this._disposables.forEach(e=>e.dispose())}}var Fg=Object.defineProperty,Fn=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n),yn;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoGitRepositories=5]="NoGitRepositories",t[t.NoOpenFolder=6]="NoOpenFolder",t[t.NoMatchingRemotes=7]="NoMatchingRemotes",t[t.ConfigureRemotes=8]="ConfigureRemotes",t[t.Initializing=9]="Initializing"})(yn||(yn={}));class tn extends kt{constructor(e,n,r){super();switch(Fn(this,"collapsibleState"),Fn(this,"iconPath"),Fn(this,"type"),Fn(this,"command"),this.parent=e,this.type=n,this.collapsibleState=o.TreeItemCollapsibleState.None,n){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[r]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[r]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No git repositories found.";break;case 6:this.label="You have not yet opened a folder.";break;case 7:this.label="No remotes match the current setting.";break;case 8:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 9:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class Ya extends kt{constructor(e,n,r,i,s,l){super();switch(this.parent=e,this._folderRepoManager=n,this._telemetry=r,this._type=i,this._categoryQuery=l,Fn(this,"collapsibleState"),Fn(this,"prs"),Fn(this,"fetchNextPage",!1),Fn(this,"repositoryPageInformation",new Map),this.prs=[],this.collapsibleState=this._type===rt.All?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.Collapsed,i){case rt.All:this.label="All Open";break;case rt.Query:this.label=s;break;case rt.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}}async getChildren(){this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(i=>i.dispose()),this.childrenDisposables=[]);let e=!1,n=!1,r=!1;if(this._type===rt.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(i){o.window.showErrorMessage(`Fetching local pull requests failed: ${V(i)}`),r=i instanceof $i}else if(this.fetchNextPage){try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(i.items),e=i.hasMorePages,n=i.hasUnsearchedRepositories}catch(i){o.window.showErrorMessage(`Fetching pull requests failed: ${V(i)}`),r=i instanceof $i}this.fetchNextPage=!1}else try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=i.items,e=i.hasMorePages,n=i.hasUnsearchedRepositories,this._type){case rt.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case rt.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(i){o.window.showErrorMessage(`Fetching pull requests failed: ${V(i)}`),r=i instanceof $i}if(this.prs&&this.prs.length){const i=this.prs.map(s=>new Sr(this,this._folderRepoManager,s,this._type===rt.LocalPullRequest));return e?i.push(new tn(this,1,this)):n&&i.push(new tn(this,2,this)),this.childrenDisposables=i,i}else{const i=r?3:0,s=[new tn(this,i)];return this.childrenDisposables=s,s}}getTreeItem(){return this}}var xg=Object.defineProperty,Jl=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);const Zl="queries";class oi extends kt{constructor(e,n,r,i){super();this.folderManager=r,this.telemetry=i,Jl(this,"collapsibleState"),Jl(this,"iconPath"),this.parent=e,this.collapsibleState=o.TreeItemCollapsibleState.Expanded,this.label=h.basename(n.fsPath)}static getQueries(e){return o.workspace.getConfiguration(Vt,e.repository.rootUri).get(Zl)||[]}getTreeItem(){return this}async getChildren(){return oi.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,n,r){const i=oi.getQueries(e).map(s=>new Ya(r,e,n,rt.Query,s.label,s.query));return[new Ya(r,e,n,rt.LocalPullRequest),...i,new Ya(r,e,n,rt.All)]}}var Og=Object.defineProperty,xn=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Og(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class ec{constructor(e){this._telemetry=e,xn(this,"_onDidChangeTreeData",new o.EventEmitter),xn(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),xn(this,"_onDidChange",new o.EventEmitter),xn(this,"_disposables"),xn(this,"_childrenDisposables"),xn(this,"_view"),xn(this,"_reposManager"),xn(this,"_initialized",!1),this._disposables=[],this._disposables.push(o.workspace.registerTextDocumentContentProvider("pr",Ul())),this._disposables.push(o.window.registerFileDecorationProvider(Dl)),this._disposables.push(o.window.registerFileDecorationProvider(Oa)),this._disposables.push(o.commands.registerCommand("pr.refreshList",n=>{this._onDidChangeTreeData.fire()})),this._disposables.push(o.commands.registerCommand("pr.loadMore",n=>{n.fetchNextPage=!0,this._onDidChangeTreeData.fire(n)})),this._view=o.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(o.commands.registerCommand("pr.configurePRViewlet",async()=>{var n;const r=((n=this._reposManager)==null?void 0:n.state)===Nt.RepositoriesLoaded;switch(await o.window.showQuickPick(["Configure Remotes...","Configure Queries...",...r?["Sign out of GitHub..."]:[]])){case"Configure Queries...":return o.commands.executeCommand("workbench.action.openSettings",`@ext:${Ot} queries`);case"Configure Remotes...":return o.commands.executeCommand("workbench.action.openSettings",`@ext:${Ot} remotes`);case"Sign out of GitHub...":return o.commands.executeCommand("auth.signout");default:return}})),this._disposables.push(o.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration(`${Vt}.fileListLayout`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}async reveal(e,n){return this._view.reveal(e,n)}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(n=>n.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(o.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${Vt}.${Zl}`)&&this.refresh()}))}refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async resolveTreeItem(e,n){return n instanceof ts&&await n.resolve(),n}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===Nt.NeedsAuthentication?Promise.resolve([]):o.workspace.getConfiguration(Vt).get(Wr)?Promise.resolve([new tn(this,yn.NoMatchingRemotes),new tn(this,yn.ConfigureRemotes)]):Promise.resolve([new tn(this,yn.NoRemotes)])}async getChildren(e){if(!this._reposManager)return o.workspace.workspaceFolders?Promise.resolve([new tn(this,yn.NoGitRepositories)]):Promise.resolve([new tn(this,yn.NoOpenFolder)]);if(this._reposManager.state===Nt.Initializing)return Promise.resolve([new tn(this,yn.Initializing)]);if(this._reposManager.folderManagers.filter(n=>n.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(r=>r.dispose());let n;return this._reposManager.folderManagers.length===1?n=oi.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this):n=this._reposManager.folderManagers.map(r=>new oi(this,r.repository.rootUri,r,this._telemetry)),this._childrenDisposables=n,Promise.resolve(n)}return this._reposManager.folderManagers.filter(n=>n.repository.state.remotes.length>0).length===0?Promise.resolve([new tn(this,yn.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var Mg=Object.defineProperty,tc=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?Mg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class Lg{constructor(e){this.gitAPI=e,tc(this,"_onDidChange",new o.EventEmitter),tc(this,"_fallback")}get onDidChange(){return this._onDidChange.event}async provideTextDocumentContent(e,n){if(!this._fallback)return"";const{path:r,commit:i,rootPath:s}=bn(e.query);if(!r||!i)return"";const l=nl(this.gitAPI,o.Uri.file(s));if(!l)return o.window.showErrorMessage(`We couldn't find an open repository for ${i} locally.`),"";const g=h.join(l.rootUri.fsPath,r).replace(/\\/g,"/");let w;try{if(w=await l.show(i,g),!w)throw new Error}catch(C){if(w=await this._fallback(e),!w)try{await l.getCommit(i)}catch(P){o.window.showErrorMessage(`We couldn't find commit ${i} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return w||""}registerTextDocumentContentFallback(e){this._fallback=e}}var qg=Object.defineProperty,nc=(t,e,n)=>(typeof e!="symbol"&&(e+=""),e in t?qg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n);class rc{constructor(e,n,r,i,s,l,g){this._context=e,this._reposManager=n,this._reviewManagers=r,this._prsTreeDataProvider=i,this._prFileChangesProvider=s,this._telemetry=l,nc(this,"_disposables"),this._disposables=[];const w=new Lg(g);w.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(o.workspace.registerTextDocumentContentProvider("review",w)),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(o.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new Xl(this._context);for(const n of this._reviewManagers)n.updateState(!0)}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new ec(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const n of this._reviewManagers)if(e.fsPath.startsWith(n.repository.rootUri.fsPath))return n.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}nc(rc,"ID","Reviews");const Ug="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let mt;const ic="prompts",sc="createPROnPublish";async function ac(t,e,n,r,i,s,l){t.subscriptions.push(a),a.appendLine("Git repository found, initializing review manager and pr tree view."),o.authentication.onDidChangeSessions(async X=>{X.provider.id==="github"&&(await C.clearCredentialCache(),M&&M.forEach(ee=>ee.updateState(!0)))}),t.subscriptions.push(e.onDidPublish(async X=>{if(!X.branch||Iu(ic,sc)===!1)return;const ee=M.find(ve=>ve.repository.rootUri.toString()===X.repository.rootUri.toString());if(ee==null?void 0:ee.isCreatingPullRequest)return;const ie="Create Pull Request...",ue="Don't Show Again",re=await o.window.showInformationMessage(`Would you like to create a Pull Request for branch '${X.branch}'?`,ie,ue);re===ie?o.commands.executeCommand("pr.create"):re===ue&&Du(ic,sc,!1)})),t.subscriptions.push(o.window.registerUriHandler(hi)),t.subscriptions.push(new Eg);const g=o.workspace.workspaceFolders;g&&(r=r.sort((X,ee)=>{let ie=g.length,ue=g.length;for(let re=0;re<g.length&&(g[re].uri.toString()===X.rootUri.toString()?ie=re:g[re].uri.toString()===ee.rootUri.toString()&&(ue=re),!(ie!==g.length&&ue!==g.length));re++);return ie-ue}));const w=r.map(X=>new kr(t,X,mt,e,n));t.subscriptions.push(...w);const C=new Vl(w,n,mt);t.subscriptions.push(C),s.then(X=>{X&&X.registerContactServiceProvider("github-pr",new Yf(C))});const P=new Xl(t);t.subscriptions.push(P);const M=w.map(X=>new Wn(t,X.repository,X,mt,P,l)),$=new rc(t,C,M,i,P,mt,e);t.subscriptions.push($),e.onDidChangeState(()=>{a.appendLine(`Git initialization state changed: state=${e.state}}`),M.forEach(X=>X.updateState(!0))}),e.onDidOpenRepository(X=>{const ee=X.state.onDidChange(()=>{const ie=new kr(t,X,mt,e,n);C.insertFolderManager(ie);const ue=new Wn(t,ie.repository,ie,mt,P,l);M.push(ue),i.refresh(),ee.dispose()})}),e.onDidCloseRepository(X=>{C.removeRepo(X);const ee=M.findIndex(ie=>ie.repository.rootUri.toString()===X.rootUri.toString());if(ee){const ie=M[ee];M.splice(ee),ie.dispose()}i.refresh()}),i.initialize(C),kp(t),Pf(t,C,M,mt,n,i);const j=o.workspace.getConfiguration("githubPullRequests").get("fileListLayout");await o.commands.executeCommand("setContext","fileListLayout:flat",j==="flat");const W=new bg(e,C,M,t,mt);t.subscriptions.push(W),await W.initialize(),t.subscriptions.push(new Jf),await o.commands.executeCommand("setContext","github:initialized",!0);const K=await xf(t,mt);await K.initializePromise,await K.isCachedFlightEnabled("githubaa"),mt.sendTelemetryEvent("startup")}async function $g(t){if(Ot==="GitHub.vscode-pull-request-github-insiders"&&o.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");const e=new _f;o.commands.registerCommand("github.api.preloadPullRequest",async i=>{await o.commands.executeCommand("setContext",Ae,!0),await o.commands.executeCommand("github:activePullRequest:welcome.focus"),e.shouldShow=i}),Wt.initialize(t);const n=new nn,r=o.extensions.getExtension(Ot).packageJSON.version;return mt=new Df(new R.Z(Ot,r,Ug)),t.subscriptions.push(mt),Hg(t,n,e),n}async function Hg(t,e,n){Am(t);const r=new qm(mt);t.subscriptions.push(r),await r.initialize(Fe.github),zr()&&await r.initialize(Fe["github-enterprise"]);const i=await Wf(r,e);i&&t.subscriptions.push(i);const s=Qf(e);t.subscriptions.push(s);const l=s.initialize();t.subscriptions.push(e);const g=new ec(mt);t.subscriptions.push(g),a.appendLine("Looking for git repository");const w=e.repositories;a.appendLine(`Found ${w.length} repositories during activation`),w.length>0?await ac(t,e,r,w,g,l,n):(a.appendLine("Waiting for git repository"),O(e.onDidOpenRepository)(async C=>{a.appendLine(`Repository ${C.rootUri} opened`),await ac(t,e,r,[C],g,l,n)}))}async function Gg(){mt&&mt.dispose()}})(),module.exports=as})();
