module.exports=function(e){var t={};function s(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=16)}([function(e,t){e.exports=require("vscode")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.Level=void 0;const r=s(0),i=s(6);var o;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(o=t.Level||(t.Level={}));t.logger=new class{constructor(){this.logLevel=o.INFO,this.outputChannel=r.window.createOutputChannel(""+i.Constants.outputChannelName)}setLogLevel(e){this.logLevel=e}debug(e){this.log(""+e.toString(),o.DEBUG)}info(e){this.log(""+e.toString(),o.INFO)}warn(e){this.log(""+e.toString(),o.WARN)}error(e){this.log(""+e.toString(),o.ERROR)}output(e){this.outputChannel.appendLine(e.toString())}showOutput(){this.outputChannel.show()}getOutputChannel(){return this.outputChannel}log(e,t){switch(e=`[${(new Date).toLocaleTimeString()}][${i.Constants.extensionName}][${t}] ${e}`,t){case o.ERROR:console.error(e);break;case o.WARN:console.warn(e);break;case o.INFO:console.info(e);break;default:console.log(e)}this.logLevel&&function(e,t){switch(t){case o.ERROR:return e===o.ERROR;case o.WARN:return e===o.WARN||e===o.ERROR;case o.INFO:return e===o.INFO||e===o.WARN||e===o.ERROR;case o.DEBUG:return!0;default:return e===o.INFO||e===o.WARN||e===o.ERROR}}(t,this.logLevel)&&this.output(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0,function(e){e.showOutputChannel="sqlite.showOutputChannel",e.runDocumentQuery="sqlite.runDocumentQuery",e.runSelectedQuery="sqlite.runSelectedQuery",e.useDatabase="sqlite.useDatabase",e.explorerAdd="sqlite.explorer.add",e.explorerRemove="sqlite.explorer.remove",e.explorerRefresh="sqlite.explorer.refresh",e.explorerCopyName="sqlite.explorer.copyName",e.explorerCopyPath="sqlite.explorer.copyPath",e.explorerCopyRelativePath="sqlite.explorer.copyRelativePath",e.newQuery="sqlite.newQuery",e.newQuerySelect="sqlite.newQuerySelect",e.newQueryInsert="sqlite.newQueryInsert",e.quickQuery="sqlite.quickQuery",e.runTableQuery="sqlite.runTableQuery",e.runSqliteMasterQuery="sqlite.runSqliteMasterQuery",e.changeWorkspaceTrust="sqlite.changeWorkspaceTrust",e.askWorkspaceTrust="sqlite.askWorkspaceTrust",e.reloadSettings="sqlite.reloadSettings"}(t.Commands||(t.Commands={}))},function(e,t){e.exports=require("path")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueBy=t.queryObject=t.randomString=t.splitNotInString=t.findNotInString=t.splitArrayByCondition=t.convertFromBaseToBase=t.octalToChars=t.replaceEscapedOctetsWithChar=t.sqlSafeName=t.sanitizeStringForHtml=void 0;const r=s(12),i=new Set(r.keywords);function o(e){let t=e.map(e=>n(e,8,16)).join(""),s=new Buffer(t,"hex").toString("utf8");for(let e=0;e<s.length;e++)if(65533===s.charCodeAt(e))return t;return s}function n(e,t,s){return"number"==typeof e&&(e=e.toString()),parseInt(e,t).toString(s)}function a(e,t){let s=Array.from(t),r=!1,i=null,o=[];for(let t=0;t<s.length;t++){let n=s[t],a=t>0?s[t-1]:null,l=t<s.length?s[t+1]:null;"\\"===a||"'"!==n&&'"'!==n||!1!==r?"\\"===a||n!==i||!0!==r?(1===e.length?n!==e:n!==e[0]||l!==e[1])||!1!==r||o.push(t):(r=!1,i=null):(r=!0,i=n)}return o}t.sanitizeStringForHtml=function(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;","/":"&#x2F;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>\/"']/g,e=>t[e])},t.sqlSafeName=function(e){return/^[A-Za-z_]\w*$/.test(e)&&!i.has(e.toUpperCase())?e:`\`${e.replace(/`/g,"``")}\``},t.replaceEscapedOctetsWithChar=function(e){return e.replace(/(?:^|[^\\])((?:\\[0-9]{3})+)/g,(e,...t)=>{let s=t[0].toString(),r="";e.length>s.length&&(r=e[0]);let i=s.split("\\").filter(e=>""!==e.trim());try{return r+o(i)}catch(t){return e}})},t.octalToChars=o,t.convertFromBaseToBase=n,t.splitArrayByCondition=function(e,t){let s=[];return e.forEach(e=>{t(e)||s===[]?s.push([e]):s[s.length-1].push(e)}),s},t.findNotInString=a,t.splitNotInString=function(e,t){let s=a(e,t),r=[];return s.forEach((i,o)=>{let n=o>0?s[o-1]+e.length:0,a=t.substring(n,i);r.push(a)}),r.push(t.substring(s===[]?0:s[s.length-1]+e.length)),r},t.randomString=function(e,t=!1){let s="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t&&(r+="èé+*][ò@à#°ù§-_!£$%&/()=<>^ì?");for(var i=0;i<e;i++)s+=r.charAt(Math.floor(Math.random()*r.length));return s},t.queryObject=function(e,t){let s=e,r=t.split("/").filter(e=>""!==e);for(;;){let e=r.shift();if(!e||!s)break;s=s[e]}return s},t.uniqueBy=function(e,t){var s={};return e.filter(e=>{let r=e[t];return(!r||!s.hasOwnProperty(r))&&(s[r]=!0)})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showWarningMessage=t.showErrorMessage=t.getEditorSelection=t.getEditorSqlDocument=t.createSqlDocument=t.showQueryInputBox=t.pickWorkspaceDatabase=t.pickListDatabase=void 0;const r=s(27);Object.defineProperty(t,"pickListDatabase",{enumerable:!0,get:function(){return r.pickListDatabase}}),Object.defineProperty(t,"pickWorkspaceDatabase",{enumerable:!0,get:function(){return r.pickWorkspaceDatabase}});const i=s(28);Object.defineProperty(t,"showQueryInputBox",{enumerable:!0,get:function(){return i.showQueryInputBox}});const o=s(29);Object.defineProperty(t,"createSqlDocument",{enumerable:!0,get:function(){return o.createSqlDocument}}),Object.defineProperty(t,"getEditorSqlDocument",{enumerable:!0,get:function(){return o.getEditorSqlDocument}}),Object.defineProperty(t,"getEditorSelection",{enumerable:!0,get:function(){return o.getEditorSelection}});const n=s(30);Object.defineProperty(t,"showErrorMessage",{enumerable:!0,get:function(){return n.showErrorMessage}}),Object.defineProperty(t,"showWarningMessage",{enumerable:!0,get:function(){return n.showWarningMessage}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=void 0;const r=s(9);!function(e){e.extensionName=r.name,e.extensionDisplayName=r.displayName,e.extensionVersion=r.version,e.outputChannelName=""+e.extensionDisplayName,e.sqliteExplorerViewId=r.contributes.views.explorer[0].id}(t.Constants||(t.Constants={}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildQueryExecutionOptions=void 0;const r=s(21),i=s(0),o=s(24),n=s(26),a=s(1),l=s(5),u=s(2),c=s(3);t.buildQueryExecutionOptions=function(e,t){if(!i.workspace.workspaceFolders)return{sql:[]};for(let s in e)if(c.join(i.workspace.workspaceFolders[0].uri.fsPath,s)===t){return{sql:e[s].sql}}return{sql:[]}},t.default=class{constructor(e,t){this.extensionPath=e,this.setSqliteCommand(t)}query(e,t,s){return this.sqliteCommand||Promise.resolve({error:"Unable to execute query: provide a valid sqlite3 executable in the setting sqlite.sqlite3."}),o.executeQuery(this.sqliteCommand,e,t,s)}schema(e,t){return this.sqliteCommand||Promise.resolve({error:"Unable to execute query: provide a valid sqlite3 executable in the setting sqlite.sqlite3."}),Promise.resolve(r.Schema.build(e,this.sqliteCommand,t))}dispose(){}setSqliteCommand(e){try{this.sqliteCommand=n.validateSqliteCommand(e,this.extensionPath)}catch(e){a.logger.error(e.message),l.showErrorMessage(e.message,{title:"Show output",command:u.Commands.showOutputChannel}),this.sqliteCommand=""}}}},function(e,t){e.exports=require("os")},function(e){e.exports=JSON.parse('{"name":"vscode-sqlite","icon":"resources/icon/icon_128x128.png","displayName":"SQLite","description":"Explore and query SQLite databases.","version":"0.13.0","publisher":"alexcvzz","repository":{"url":"https://github.com/AlexCovizzi/vscode-sqlite","type":"git"},"engines":{"vscode":"^1.30.0"},"categories":["Other"],"activationEvents":["onLanguage:sql","onLanguage:sqlite","onLanguage:db","onCommand:sqlite.showOutputChannel","onCommand:sqlite.explorer.add","onCommand:sqlite.explorer.remove","onCommand:sqlite.newQuery","onCommand:sqlite.quickQuery","onCommand:sqlite.useDatabase","onCommand:sqlite.runDocumentQuery"],"main":"./dist/extension","contributes":{"commands":[{"command":"sqlite.changeWorkspaceTrust","title":"Change Workspace Trust","category":"SQLite"},{"command":"sqlite.showOutputChannel","title":"Show Output","category":"SQLite"},{"command":"sqlite.explorer.add","title":"Open Database","category":"SQLite"},{"command":"sqlite.explorer.remove","title":"Close Database","category":"SQLite"},{"command":"sqlite.explorer.refresh","title":"Refresh Databases","category":"SQLite","icon":{"light":"resources/light/refresh.svg","dark":"resources/dark/refresh.svg"}},{"command":"sqlite.explorer.copyName","title":"Copy Name","category":"SQLite"},{"command":"sqlite.explorer.copyPath","title":"Copy Path","category":"SQLite"},{"command":"sqlite.explorer.copyRelativePath","title":"Copy Relative Path","category":"SQLite"},{"command":"sqlite.useDatabase","title":"Use Database","category":"SQLite"},{"command":"sqlite.newQuery","title":"New Query","category":"SQLite","icon":{"light":"resources/light/newquery.svg","dark":"resources/dark/newquery.svg"}},{"command":"sqlite.newQuerySelect","title":"New Query [Select]","category":"SQLite","icon":{"light":"resources/light/newquery.svg","dark":"resources/dark/newquery.svg"}},{"command":"sqlite.newQueryInsert","title":"New Query [Insert]","category":"SQLite"},{"command":"sqlite.quickQuery","title":"Quick Query","category":"SQLite"},{"command":"sqlite.runDocumentQuery","title":"Run Query","category":"SQLite"},{"command":"sqlite.runSelectedQuery","title":"Run Selected Query","category":"SQLite"},{"command":"sqlite.runTableQuery","title":"Show Table","category":"SQLite","icon":{"light":"resources/light/runquery.svg","dark":"resources/dark/runquery.svg"}},{"command":"sqlite.runSqliteMasterQuery","title":"Show Table \'sqlite_master\'","category":"SQLite","icon":{"light":"resources/light/runquery.svg","dark":"resources/dark/runquery.svg"}}],"keybindings":[{"command":"sqlite.runDocumentQuery","key":"ctrl+shift+q","mac":"cmd+shift+q","when":"editorLangId =~ /(sql|sqlite)/"}],"views":{"explorer":[{"id":"sqlite.explorer","name":"SQLite Explorer","when":"sqlite.explorer.show","icon":"resources/dark/database.svg"}]},"menus":{"commandPalette":[{"command":"sqlite.showOutputChannel","group":"sqlite"},{"command":"sqlite.explorer.add","group":"sqlite"},{"command":"sqlite.explorer.remove","group":"sqlite","when":"sqlite.explorer.show"},{"command":"sqlite.explorer.refresh","group":"sqlite","when":"sqlite.explorer.show"},{"command":"sqlite.newQuery","group":"sqlite"},{"command":"sqlite.quickQuery","group":"sqlite"},{"command":"sqlite.runDocumentQuery","when":"editorLangId =~ /(sql|sqlite)/","group":"sqlite"},{"command":"sqlite.runSelectedQuery","when":"editorLangId =~ /(sql|sqlite)/","group":"sqlite"},{"command":"sqlite.useDatabase","when":"editorLangId =~ /(sql|sqlite)/","group":"sqlite"},{"command":"sqlite.runSqliteMasterQuery","when":"false"},{"command":"sqlite.runTableQuery","when":"false"},{"command":"sqlite.explorer.copyName","group":"sqlite","when":"false"},{"command":"sqlite.explorer.copyPath","group":"sqlite","when":"false"},{"command":"sqlite.explorer.copyRelativePath","group":"sqlite","when":"false"},{"command":"sqlite.newQuerySelect","group":"sqlite","when":"false"},{"command":"sqlite.newQueryInsert","group":"sqlite","when":"false"}],"explorer/context":[{"command":"sqlite.explorer.add","when":"resourceLangId == db && !explorerResourceIsFolder","group":"navigation@1"},{"command":"sqlite.newQuery","when":"resourceLangId == db","group":"0_sqlite@1"}],"editor/context":[{"when":"editorTextFocus && editorLangId =~ /(sql|sqlite)/","command":"sqlite.runDocumentQuery","group":"9.1_sqlite@1"},{"when":"editorTextFocus && editorLangId =~ /(sql|sqlite)/","command":"sqlite.runSelectedQuery","group":"9.1_sqlite@2"},{"when":"editorTextFocus && editorLangId =~ /(sql|sqlite)/","command":"sqlite.useDatabase","group":"9.1_sqlite@3"}],"view/title":[{"command":"sqlite.newQuery","when":"view == sqlite.explorer","group":"navigation@1"},{"command":"sqlite.explorer.refresh","when":"view == sqlite.explorer","group":"navigation@2"}],"view/item/context":[{"command":"sqlite.newQuery","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"inline@1"},{"command":"sqlite.runSqliteMasterQuery","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"1_query@1"},{"command":"sqlite.newQuery","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"2_sql@1"},{"command":"sqlite.explorer.copyPath","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"3_copy@1"},{"command":"sqlite.explorer.copyRelativePath","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"3_copy@2"},{"command":"sqlite.explorer.remove","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"4_utils@1"},{"command":"sqlite.runTableQuery","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"inline@1"},{"command":"sqlite.runTableQuery","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"1_query@1"},{"command":"sqlite.newQuerySelect","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"2_sql@1"},{"command":"sqlite.newQueryInsert","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"2_sql@2"},{"command":"sqlite.explorer.copyName","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"3_copy@1"},{"command":"sqlite.explorer.copyName","when":"view == sqlite.explorer && viewItem == sqlite.columnItem","group":"3_copy@1"}]},"languages":[{"id":"sqlite","aliases":["SQLite","SQLite3"],"firstLine":"\\\\s*--\\\\s*(sql|SQL)ite","extensions":[".sql",".sql3"],"configuration":"./language-configuration.json"},{"id":"db","aliases":["Database"],"extensions":[".db",".db3",".sdb",".s3db",".sqlite",".sqlite3"]}],"grammars":[{"language":"sqlite","scopeName":"source.sql.sqlite","path":"./syntaxes/sqlite.tmLanguage.json"}],"configuration":{"type":"object","title":"SQLite Configuration","properties":{"sqlite.sqlite3":{"type":"string","default":"sqlite3","description":"SQLite3 command or executable path."},"sqlite.logLevel":{"type":"string","enum":["DEBUG","INFO","WARN","ERROR"],"default":"INFO","description":"Logging level in the output channel (DEBUG, INFO, WARN, ERROR)"},"sqlite.recordsPerPage":{"type":"number","default":50,"minimum":-1,"description":"Number of records to show per page. (-1 to show all records)"},"sqlite.databaseExtensions":{"type":"array","items":{"type":"string"},"default":["db","db3","sdb","s3db","sqlite","sqlite3"],"description":"The file extensions recognized as SQLite database."},"sqlite.setupDatabase":{"type":"object","patternProperties":{".*":{"type":"object","properties":{"sql":{"type":"array","items":{"type":"string"}}}}},"default":{},"description":"SQL query to execute every time a database is opened."}}}},"scripts":{"vscode:prepublish":"webpack --mode production && npm run prepublish-html","compile":"webpack --mode development","watch":"webpack --mode development --watch","test":"jest --silent --config jest.config.js","install-html":"cd ./src/resultview/html && npm install","prepublish-html":"cd ./src/resultview/html && npm run prepublish","build-html":"cd ./src/resultview/html && npm run build","test-html":"cd ./src/resultview/html && npm run test","watch-html":"cd ./src/resultview/html && npm run watch","package":"vsce package"},"devDependencies":{"@types/jest":"^26.0.0","@types/node":"^7.10.14","@types/sqlite3":"^3.1.7","@types/vscode":"1.30.0","jest":"^26.0.0","sqlite3":"^4.2.0","ts-jest":"^26.0.0","ts-loader":"^7.0.5","tslint":"^6.1.3","typescript":"^3.9.9","vsce":"^1.93.0","webpack":"^4.46.0","webpack-cli":"^3.3.12"},"dependencies":{"csv-parser":"~2.3.5","csv-stringify":"~5.6.2"}}')},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CliDatabase=void 0;const r=s(11),i=s(8),o=s(4),n=s(22),a=(...e)=>{},l=o.randomString(8);t.CliDatabase=class{constructor(e,t,s){this.command=e,this.path=t;let o=["-csv","-header","-bail","-nullvalue","NULL"];this._started=!1,this._ended=!1,this.errStr="",this.rows=[],this.execQueue=[],this.busy=!1,this.sql="",this.startCallback=s,this.csvParser=n({separator:",",strict:!1,headers:!1});try{this.sqliteProcess=r.spawn(this.command,o,{stdio:["pipe","pipe","pipe"]})}catch(e){let t=new Error("SQLite process failed to start: "+e.message);return void setTimeout(()=>this.onStartError(t),0)}this.sqliteProcess.once("error",e=>{let t=new Error("SQLite process failed to start: "+e.message);this.onStartError(t)});const u=`"${this.path.replace(/\\/g,"/")}"`;try{this._write(`.open ${u}${i.EOL}`),this._write("select 1 from sqlite_master limit 1;"+i.EOL),this._write(`.print ${l}${i.EOL}`),this.busy=!0}catch(e){return void setTimeout(()=>this.onStartError(e),0)}this.sqliteProcess.once("exit",(e,t)=>{this.onExit(e,t)}),this.sqliteProcess.stderr.on("data",e=>{this.onError(e)}),this.sqliteProcess.stdout.pipe(this.csvParser).on("data",e=>{this.onData(e)}),this.sqliteProcess.stdin.once("error",a),this.sqliteProcess.stdout.once("error",a),this.csvParser.once("error",a)}close(e){if(this._ended)e&&e(new Error("SQLite process already ended."));else try{this._ended=!0,this.endCallback=e,this.execQueue.push({sql:".exit"}),this.busy||this.next()}catch(e){}}execute(e,t){if(this._ended)t&&t([],new Error("SQLite process already ended."));else{if((e=e.trim()).toLowerCase().startsWith("explain")){let t="explain".length;e=e.slice(0,t)+" "+e.slice(t)}try{this.execQueue.push({sql:e,callback:t}),this.busy||this.next()}catch(e){}}}_write(e){if(this.sqliteProcess){e.endsWith("\n")||(e+="\n");try{this.sqliteProcess.stdin.write(e)}catch(e){}}}onStartError(e){this._started=!1,this.csvParser.end(),this.startCallback&&(this.startCallback(e),this.startCallback=void 0)}onExit(e,t){this._ended=!0,this.csvParser.end(),this._started?(0===e||(1===e||t)&&this.writeCallback&&this.writeCallback([],new Error(this.errStr)),this.endCallback&&this.endCallback()):this.startCallback&&this.startCallback(new Error(this.errStr))}onData(e){if(this.errStr)return;let t=Object.values(e);if(1===t.length&&t[0]===l){this._started||(this._started=!0);let e=this.rows;return this.sql.startsWith(".")&&(e=[[e.map(e=>e.join(" ")).join("\n")]]),this.writeCallback&&this.writeCallback(e),void this.next()}this.rows.push(t)}onError(e){if(e&&!e.toString().match(/\: \/lib64\/libtinfo\.so\.[0-9]+: no version information available \(required by /)&&(this.errStr+=e.toString(),this.errStr.endsWith("\n"))){let e=this.errStr.match(/Error: near line [0-9]+:(?: near "(.+)":)? (.+)/);if(e){let t=e[1],s=e[2];this.errStr=`${t?`near "${t}": `:""}${s}`}}}next(){this.rows=[],this.sql="";let e=this.execQueue.shift();e?(this._write(e.sql),this._write(`.print ${l}${i.EOL}`),this.busy=!0,this.sql=e.sql,this.writeCallback=e.callback):this.busy=!1}get ended(){return this._ended}get started(){return this._started}}},function(e,t){e.exports=require("child_process")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keywords=void 0,t.keywords=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","ANALYZE","AND","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FOR","FOREIGN","FROM","FULL","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LEFT","LIKE","LIMIT","MATCH","NATURAL","NO","NOT","NOTNULL","NULL","OF","OFFSET","ON","OR","ORDER","OUTER","PLAN","PRAGMA","PRIMARY","QUERY","RAISE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RIGHT","ROLLBACK","ROW","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TO","TRANSACTION","TRIGGER","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WITH","WITHOUT"]},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("fs")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractStatements=void 0;const r=s(25);t.extractStatements=function(e){let t,s=[],i=!1,o=!1,n=!1,a=!1,l="",u="",c=e.split(/\r?\n/);for(let e=0;e<c.length;e++){let d=c[e];for(let c=0;c<d.length;c++){let h=d[c],m=c>0?d[c-1]:void 0,p=c<d.length-1?d[c+1]:void 0;if(i)t&&(t.sql+=h),o||"-"!==h||"-"!==p?o||"/"!==h||"*"!==p?o||n||";"!==h?o||"'"!==h?o||'"'!==h?o&&h===u&&(o=!1,u=""):(o=!0,u='"'):(o=!0,u="'"):(i=!1,t&&(t.position.end=[e,c],s.push(t),t=void 0)):(n=!0,l="/"):(n=!0,l="-");else if(n&&"-"===l);else if(n&&"/"===l)"/"===h&&"*"===m&&(n=!1,l="");else if(a)t&&(t.sql+=h);else if(" "===h||"\t"===h);else if("-"===h&&"-"===p)n=!0,l="-";else if("/"===h&&"*"===p)n=!0,l="/";else if("."===h)a=!0,t={sql:h,position:{start:[e,c],end:[e,c]},type:r.StatementType.COMMAND};else{if(!h.match(/\w/))throw Error("Not a valid query");i=!0,t={sql:h,position:{start:[e,c],end:[e,c]},type:r.StatementType.OTHER}}}a&&(a=!1,t&&(t.position.end=[e,d.length-1],s.push(t),t=void 0)),!o&&n&&"-"===l&&(n=!1,l=""),i&&t&&(t.sql+="\n")}return t&&0===s.length&&(t.sql=t.sql.trim(),t.sql.endsWith(";")||(t.sql+=";"),s.push(t)),s.forEach(e=>e.type=function(e){let t;t=(e=e.toLowerCase()).startsWith(r.StatementType.SELECT.toLowerCase())?r.StatementType.SELECT:e.startsWith(r.StatementType.INSERT.toLowerCase())?r.StatementType.INSERT:e.startsWith(r.StatementType.UPDATE.toLowerCase())?r.StatementType.UPDATE:e.startsWith(r.StatementType.EXPLAIN.toLowerCase())?r.StatementType.EXPLAIN:e.startsWith(r.StatementType.PRAGMA.toLowerCase())?r.StatementType.PRAGMA:e.startsWith(".")?r.StatementType.COMMAND:r.StatementType.OTHER;return t}(e.sql)),s}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const r=s(0),i=s(1),o=s(17),n=s(6),a=s(18),l=s(7),u=s(31),c=s(37),d=s(39),h=s(2),m=s(42),p=s(43),f=s(44),g=s(46),b=s(47),y=s(48),w=s(49);let v,q,C,S,x,E,T=new Array;t.activate=function(e){i.logger.info(`Activating extension ${n.Constants.extensionName} v${n.Constants.extensionVersion}...`),v=o.getConfiguration(e),i.logger.setLogLevel(v.logLevel),e.subscriptions.push(r.commands.registerCommand(h.Commands.reloadSettings,()=>{v=o.getConfiguration(e),i.logger.setLogLevel(v.logLevel),S.setSqliteCommand(v.sqlite3);for(let e of T)w.isConfigurationChangeAware(e)&&e.onConfigurationChange(v)})),e.subscriptions.push(r.workspace.onDidChangeConfiguration(()=>{r.commands.executeCommand(h.Commands.reloadSettings)})),C=new a.default,S=new l.default(e.extensionPath,v.sqlite3),E=new u.default(e.extensionPath),q=new c.default,x=new d.default(e),q.setSchemaProvider(e=>{let t=C.getDocumentDatabase(e);return t?S.schema(t,l.buildQueryExecutionOptions(v.setupDatabase,t)):Promise.resolve()}),e.subscriptions.push(q,C,S,x,E),T.push(new m.WorkspaceTrustCommandsHandler(e),new p.OutputChannelCommandsHandler,new f.ClipboardCommandsHandler,new g.SqlDocumentCommandsHandler(C,v.databaseExtensions),new b.RunQueryCommandsHandler(C,S,E,v.recordsPerPage,v.databaseExtensions,v.setupDatabase),new y.ExplorerCommandsHandler(x,S,v.databaseExtensions,v.setupDatabase));for(let t of T)t.activate(e);return i.logger.info("Extension activated."),Promise.resolve(!0)},t.deactivate=function(){for(let e of T)e.deactivate();T=new Array}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfiguration=void 0;const r=s(0),i=s(2),o=s(1),n=s(9).contributes.configuration.properties;function a(e){(function(e){const t=r.workspace.getConfiguration().inspect(e);return!!t&&(null!=t.workspaceFolderValue||null!=t.workspaceValue)})("sqlite.sqlite3")&&null==e.workspaceState.get("isTrustedWorkspace")&&r.commands.executeCommand(i.Commands.askWorkspaceTrust);return function(e,t,s){const i=r.workspace.getConfiguration().inspect(e);return i?s&&null!=i.workspaceFolderValue?i.workspaceFolderValue:s&&null!=i.workspaceValue?i.workspaceValue:null!=i.globalValue?i.globalValue:null!=i.defaultValue?i.defaultValue:t:t}("sqlite.sqlite3","",e.workspaceState.get("isTrustedWorkspace",!1))}function l(){let e=r.workspace.getConfiguration().get("sqlite.logLevel"),t=n["sqlite.logLevel"].default;return e&&null!=o.Level[""+e]&&(t=e.toString()),t}function u(){let e=r.workspace.getConfiguration().get("sqlite.recordsPerPage"),t=n["sqlite.recordsPerPage"].default;if("string"==typeof e){let s=Number.parseInt(e);s>=-1&&(t=s)}else"number"==typeof e&&e>=-1&&(t=e);return t}function c(){let e=n["sqlite.databaseExtensions"].default||[],t=r.workspace.getConfiguration().get("sqlite.databaseExtensions",[])||[];return[...new Set(t.concat(...e))]}function d(){return r.workspace.getConfiguration().get("sqlite.setupDatabase",{})}t.getConfiguration=function(e){return{sqlite3:a(e),logLevel:l(),recordsPerPage:u(),databaseExtensions:c(),setupDatabase:d()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(19),o=s(20);t.default=class{constructor(){let e=[];this.documentDatabaseBindings=new i.DocumentDatabaseBindings,this.databaseStatusBarItem=new o.DatabaseStatusBarItem(this.documentDatabaseBindings),e.push(this.documentDatabaseBindings),e.push(this.databaseStatusBarItem),this.disposable=r.Disposable.from(...e)}bindDatabaseToDocument(e,t){let s=this.documentDatabaseBindings.bind(t,e);return s&&this.databaseStatusBarItem.update(),s}getDocumentDatabase(e){return this.documentDatabaseBindings.get(e)}dispose(){this.disposable.dispose()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentDatabaseBindings=void 0;t.DocumentDatabaseBindings=class{constructor(){this.bindings={}}bind(e,t){return!!e&&(this.bindings[e.uri.toString()]=t,!0)}get(e){return e?this.bindings[e.uri.toString()]:void 0}unbind(e){Object.keys(this.bindings).forEach(t=>{this.bindings[t]===e&&delete this.bindings[t]})}dispose(){}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseStatusBarItem=void 0;const r=s(0),i=s(3);t.DatabaseStatusBarItem=class{constructor(e){this.documentDatabase=e;let t=[];this.statusBarItem=r.window.createStatusBarItem(r.StatusBarAlignment.Right,100),this.statusBarItem.command="sqlite.useDatabase",t.push(this.statusBarItem),t.push(r.window.onDidChangeActiveTextEditor(e=>this.update())),t.push(r.window.onDidChangeTextEditorViewColumn(e=>this.update())),t.push(r.workspace.onDidOpenTextDocument(e=>this.update())),t.push(r.workspace.onDidCloseTextDocument(e=>this.update())),this.disposable=r.Disposable.from(...t)}update(){let e=!r.window.activeTextEditor||"sql"!==r.window.activeTextEditor.document.languageId&&"sqlite"!==r.window.activeTextEditor.document.languageId?void 0:r.window.activeTextEditor.document;if(e){let t,s,r=this.documentDatabase.get(e);r?(t=r,s=i.basename(t)):(t="No database",s=t),this.statusBarItem.tooltip="SQLite: "+t,this.statusBarItem.text="SQLite: "+s,this.statusBarItem.show()}else this.statusBarItem.hide()}dispose(){this.disposable.dispose()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Schema=void 0;const r=s(10),i=s(23),o=s(1);!function(e){e.build=function(e,t,s={sql:[]}){return new Promise((n,a)=>{if(!i.isFileSync(e))return a(new Error(`Failed to retrieve database schema: '${e}' is not a file`));let l={path:e,tables:[]};let u=new r.CliDatabase(t,e,e=>{a(e)});for(let e of s.sql)u.execute(e,(e,t)=>{t&&a(new Error("Failed to setup database: "+t.message))});u.execute("SELECT name, type FROM sqlite_master\n                                WHERE (type=\"table\" OR type=\"view\")\n                                AND name <> 'sqlite_sequence'\n                                AND name <> 'sqlite_stat1'\n                                ORDER BY type ASC, name ASC;",(t,s)=>{if(s)return a(s);t.shift(),l.tables=t.map(t=>({database:e,name:t[0],type:t[1],columns:[]}));for(let t of l.tables){let s=`PRAGMA table_info('${t.name}');`;u.execute(s,(s,r)=>{if(r){const e=`Error retrieving '${t.name}' schema: ${r}`;return void o.logger.warn(e)}if(s.length<2)return;let i=s.shift()||[];t.columns=s.map(s=>({database:e,table:t.name,name:s[i.indexOf("name")],type:s[i.indexOf("type")].toUpperCase(),notnull:"1"===s[i.indexOf("notnull")],pk:Number(s[i.indexOf("pk")])||0,defVal:s[i.indexOf("dflt_value")]}))})}u.close(()=>{n(l)})})})}}(t.Schema||(t.Schema={}))},function(e,t,s){const{Transform:r}=s(13),[i]=Buffer.from("\r"),[o]=Buffer.from("\n"),n={escape:'"',headers:null,mapHeaders:({header:e})=>e,mapValues:({value:e})=>e,newline:"\n",quote:'"',raw:!1,separator:",",skipComments:!1,skipLines:null,maxRowBytes:Number.MAX_SAFE_INTEGER,strict:!1};class a extends r{constructor(e={}){super({objectMode:!0,highWaterMark:16}),Array.isArray(e)&&(e={headers:e});const t=Object.assign({},n,e);t.customNewline=t.newline!==n.newline;for(const e of["newline","quote","separator"])void 0!==t[e]&&([t[e]]=Buffer.from(t[e]));t.escape=(e||{}).escape?Buffer.from(t.escape)[0]:t.quote,this.state={empty:t.raw?Buffer.alloc(0):"",escaped:!1,first:!0,lineNumber:0,previousEnd:0,rowLength:0,quoted:!1},this._prev=null,!1===t.headers&&(t.strict=!1),(t.headers||!1===t.headers)&&(this.state.first=!1),this.options=t,this.headers=t.headers}parseCell(e,t,s){const{escape:r,quote:i}=this.options;e[t]===i&&e[s-1]===i&&(t++,s--);let o=t;for(let n=t;n<s;n++)e[n]===r&&n+1<s&&e[n+1]===i&&n++,o!==n&&(e[o]=e[n]),o++;return this.parseValue(e,t,o)}parseLine(e,t,s){const{customNewline:r,escape:o,mapHeaders:n,mapValues:a,quote:l,separator:u,skipComments:c,skipLines:d}=this.options;s--,!r&&e.length&&e[s-1]===i&&s--;const h=u,m=[];let p=!1,f=t;if(c){const s="string"==typeof c?c:"#";if(e[t]===Buffer.from(s)[0])return}const g=e=>{if(this.state.first)return e;const t=m.length,s=this.headers[t];return a({header:s,index:t,value:e})};for(let r=t;r<s;r++){const t=!p&&e[r]===l,i=p&&e[r]===l&&r+1<=s&&e[r+1]===h,n=p&&e[r]===o&&r+1<s&&e[r+1]===l;if(t||i)p=!p;else if(n)r++;else if(e[r]===h&&!p){let t=this.parseCell(e,f,r);t=g(t),m.push(t),f=r+1}}if(f<s){let t=this.parseCell(e,f,s);t=g(t),m.push(t)}e[s-1]===h&&m.push(g(this.state.empty));const b=d&&d>this.state.lineNumber;if(this.state.lineNumber++,this.state.first&&!b)return this.state.first=!1,this.headers=m.map((e,t)=>n({header:e,index:t})),void this.emit("headers",this.headers);if(!b&&this.options.strict&&m.length!==this.headers.length){const e=new RangeError("Row length does not match headers");this.emit("error",e)}else b||this.writeRow(m)}parseValue(e,t,s){return this.options.raw?e.slice(t,s):e.toString("utf-8",t,s)}writeRow(e){(!1===this.headers||e.length>this.headers.length)&&(this.headers=e.map((e,t)=>t));const t=e.reduce((e,t,s)=>{const r=this.headers[s];return null!==r&&(e[r]=t),e},{});this.push(t)}_flush(e){if(this.state.escaped||!this._prev)return e();this.parseLine(this._prev,this.state.previousEnd,this._prev.length+1),e()}_transform(e,t,s){"string"==typeof e&&(e=Buffer.from(e));const{escape:r,quote:n}=this.options;let a=0,l=e;this._prev&&(a=this._prev.length,l=Buffer.concat([this._prev,e]),this._prev=null);const u=l.length;for(let e=a;e<u;e++){const t=l[e],c=e+1<u?l[e+1]:null;if(this.state.rowLength++,this.state.rowLength>this.options.maxRowBytes)return s(new Error("Row exceeds the maximum size"));this.state.escaped||t!==r||c!==n||e===a?t!==n?this.state.quoted||(this.state.first&&!this.options.customNewline&&(t===o?this.options.newline=o:t===i&&c!==o&&(this.options.newline=i)),t===this.options.newline&&(this.parseLine(l,this.state.previousEnd,e+1),this.state.previousEnd=e+1,this.state.rowLength=0)):this.state.escaped?this.state.escaped=!1:this.state.quoted=!this.state.quoted:this.state.escaped=!0}return this.state.previousEnd===u?(this.state.previousEnd=0,s()):u-this.state.previousEnd<e.length?(this._prev=e,this.state.previousEnd-=u-e.length,s()):(this._prev=l,void s())}}e.exports=e=>new a(e)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileExistsSync=t.fileExists=t.isFileSync=t.isDirectorySync=void 0;const r=s(14);t.isDirectorySync=function(e){try{return r.lstatSync(e).isDirectory()}catch(e){return!1}},t.isFileSync=function(e){try{return r.lstatSync(e).isFile()}catch(e){return!1}},t.fileExists=function(e){return new Promise((t,s)=>{r.exists(e,e=>{t(e)})})},t.fileExistsSync=function(e){return r.existsSync(e)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeQuery=void 0;const r=s(10),i=s(15),o=s(1);t.executeQuery=function(e,t,s,n={sql:[]}){if(!e)return Promise.reject(new Error(`Unable to execute query: SQLite command is not valid: '${e}'`));let a;o.logger.debug(`SQLite3 command: '${e}'`),o.logger.debug(`Database path: '${t}'`),o.logger.debug("Query: "+s);try{a=i.extractStatements(s)}catch(e){return Promise.reject("Unable to execute query: "+e.message)}o.logger.debug("Query execution options: "+JSON.stringify(n)),o.logger.debug("Statements: "+JSON.stringify(a));let l,u=[];return new Promise((s,i)=>{let o;o=new r.CliDatabase(e,t,e=>{l=e});for(let e of n.sql)o.execute(e,(e,t)=>{t&&(l=new Error("Failed to setup database: "+t.message))});for(let e of a)o.execute(e.sql,(t,s)=>{if(s)l=s;else{let s=t.length>1?t.shift():[];u.push({stmt:e.sql,header:s,rows:t})}});o.close(()=>{s({resultSet:u,error:l})})})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatementType=void 0,function(e){e.COMMAND="COMMAND",e.PRAGMA="PRAGMA",e.SELECT="SELECT",e.UPDATE="UPDATE",e.INSERT="INSERT",e.EXPLAIN="EXPLAIN",e.OTHER="OTHER"}(t.StatementType||(t.StatementType={}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSqliteBinariesPath=t.isSqliteCommandValid=t.validateSqliteCommand=void 0;const r=s(11),i=s(1),o=s(8),n=s(3),a=s(14);function l(e){let t=r.spawnSync(e,["-version"]);if(t.error)return i.logger.debug(`'${e}' is not a valid SQLite command: ${t.error}`),!1;let s=t.stderr.toString(),o=t.stdout.toString();if(s&&!s.match(/\: \/lib64\/libtinfo\.so\.[0-9]+: no version information available \(required by /))return i.logger.debug(`'${e}' is not a valid SQLite command: ${s}`),!1;let n=o.match(/3\.(?:9|[0-9][0-9])\.[0-9]{1,2} [0-9]{4}\-[0-9]{2}\-[0-9]{2} [0-9]{2}\:[0-9]{2}\:[0-9]{2}/);return n||i.logger.debug(`'${e}' is not a valid SQLite command: version must be >= 3.9`),!!n}function u(e){let t,s=o.platform(),r=o.arch();switch(s){case"win32":t="sqlite-v3.26.0-win32-x86.exe";break;case"linux":t="x64"===r?"sqlite-v3.26.0-linux-x64":"sqlite-v3.26.0-linux-x86";break;case"darwin":t="sqlite-v3.26.0-osx-x86";break;default:i.logger.info("Fallback binary not found: system OS not recognized."),t=""}if(t){let s=n.join(e,"bin",t);return a.existsSync(s)?(i.logger.debug(`Fallback SQLite binary found: '${s}'.`),s):(i.logger.debug(`Fallback SQLite binary not found: '${s}' does not exist.`),"")}return""}t.validateSqliteCommand=function(e,t){let s=e&&l(e);if(s)return e;if(!(e=u(t)))throw new Error("Unable to find a valid SQLite command. Fallback binary not found.");if(s=l(e),s)return e;throw new Error("Unable to find a valid SQLite command. Fallback binary is not valid.")},t.isSqliteCommandValid=l,t.getSqliteBinariesPath=u},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showAutoQuickPick=t.pickListDatabase=t.pickWorkspaceDatabase=t.QuickPick=void 0;const r=s(0),i=s(3);var o;function n(e,t,s){if(e&&t instanceof Array&&1===t.length){let e=t[0];return new Promise(t=>t(e))}return new Promise((i,o)=>{let n,a;!e||t instanceof Array||(n=new r.CancellationTokenSource,a=n.token,t.then(e=>{if(1===e.length){let t=e[0];i(t),n&&(n.cancel(),n.dispose())}})),r.window.showQuickPick(t,{placeHolder:s||""},a).then(e=>{i(e),n&&n.dispose()})})}!function(e){e.DatabaseItem=class{constructor(e,t){this.path=e,this.label=this.toLabel(e),this.description=t||e}toLabel(e){return":memory:"===e?e:r.workspace.workspaceFolders?i.relative(r.workspace.workspaceFolders[0].uri.fsPath,e):i.basename(e)}};e.FileDialogItem=class{constructor(){this.label="Choose database from file",this.description=""}};e.ErrorItem=class{constructor(e){this.label=e}}}(o=t.QuickPick||(t.QuickPick={})),t.pickWorkspaceDatabase=function(e,t=[],s=!0,i){t==[]&&(t=["db","db3","sqlite","sqlite3","sdb","s3db"]);const a=new Promise(e=>{r.workspace.findFiles("**/*.{"+t.join(",")+"}").then(t=>{let r=new o.FileDialogItem,i=t.map(e=>new o.DatabaseItem(e.fsPath));s&&i.push(new o.DatabaseItem(":memory:","sqlite in-memory database")),i.push(r),e(i)})});return new Promise((s,l)=>{n(e,a,i=i||"Choose a database.").then(e=>{e instanceof o.DatabaseItem?s(e.path):e instanceof o.FileDialogItem?r.window.showOpenDialog({filters:{Database:t}}).then(e=>{e?s(e[0].fsPath):s()}):s()})})},t.pickListDatabase=function(e,t){let s;return s=0===t.length?[]:t.map(e=>new o.DatabaseItem(e)),new Promise((t,r)=>{n(e,s,"Choose a database to close.").then(e=>{e instanceof o.DatabaseItem?t(e.path):r()})})},t.showAutoQuickPick=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showQueryInputBox=void 0;const r=s(0);t.showQueryInputBox=function(e){const t={placeHolder:`Your query here (database: ${e})`};return r.window.showInputBox(t)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditorSelection=t.getEditorSqlDocument=t.createSqlDocument=void 0;const r=s(0),i=new r.Position(0,0);t.createSqlDocument=function(e,t=i,s=!0){let o="-- SQLite\n"+e;return t=t.translate(1),r.workspace.openTextDocument({language:"sqlite",content:o}).then(e=>(s&&r.window.showTextDocument(e,r.ViewColumn.One).then(e=>{e.selection=new r.Selection(t,t)}),Promise.resolve(e)))},t.getEditorSqlDocument=function(){let e=r.window.activeTextEditor;return e&&("sql"===e.document.languageId||"sqlite"===e.document.languageId)?e.document:void 0},t.getEditorSelection=function(){return r.window.activeTextEditor?r.window.activeTextEditor.selection:void 0}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showWarningMessage=t.showErrorMessage=void 0;const r=s(0);function i(e,t){if(null==e)return Promise.resolve(e);for(let s of t)if(e===s.title)return s.command&&r.commands.executeCommand(s.command,s.args),Promise.resolve(s.title);return Promise.reject(`There is no action associated with the selected item '${e}'`)}t.showErrorMessage=function(e,...t){let s=t.map(e=>e.title);return r.window.showErrorMessage(e,...s).then(e=>i(e,t))},t.showWarningMessage=function(e,...t){let s=t.map(e=>e.title);return r.window.showWarningMessage(e,...s).then(e=>i(e,t))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(32),o=s(4),n=s(34),a=s(8);class l extends i.CustomView{constructor(e){super("resultview","SQLite"),this.extensionPath=e,this.msgQueue=[]}display(e,t){this.show(this.extensionPath,t),this.msgQueue=[],e.then(e=>{this.resultSet=e||[];const s=this.resultSet?this.resultSet:[];this.send({type:"FETCH_RESULTS",payload:s.map((e,s)=>({statement:e.stmt,columns:e.header,size:e.rows.length,rows:{rows:e.rows.slice(0,t),offset:0,limit:t,result:s}}))}),this.msgQueue&&this.msgQueue.forEach(this.handleMessage.bind(this))})}handleMessage(e){if(this.resultSet)switch(e.type){case"FETCH_RESULTS":{const e=this.resultSet?this.resultSet:[];this.send({type:"FETCH_RESULTS",payload:e.map(e=>({statement:e.stmt,columns:e.header,size:e.rows.length}))})}case"FETCH_ROWS":{const t=this.resultSet?this.resultSet[e.payload.result]:null,s=e.payload.offset,r=s+e.payload.limit;this.send({type:"FETCH_ROWS",payload:{result:e.payload.result,rows:t.rows.slice(s,r),offset:s,limit:e.payload.limit}})}case"EXPORT_RESULTS":{const t=e.payload.result?this.resultSet[e.payload.result]:this.resultSet,s=e.payload.format;"csv"===s&&this.exportCsv(t),"html"===s&&this.exportHtml(t),"json"===s&&this.exportJson(t)}}else this.msgQueue.push(e)}exportJson(e){let t=JSON.stringify(e);this.exportFile("json",t)}exportCsv(e){setTimeout(()=>{let t=[];if(Array.isArray(e))for(let s in e){let r=n(e[s].rows,{columns:e[s].header,header:!0});t.push(r)}else{let s=n(e.rows,{columns:e.header,header:!0});t.push(s)}this.exportFile("csv",t.join(a.EOL))},0)}exportHtml(e){let t=(e,t)=>{let s="<table>";return s+="<tr>"+e.map(e=>`<th>${o.sanitizeStringForHtml(e)}</th>`).join("")+"<tr>",s+=t.map(e=>`<tr>${e.map(e=>`<td>${o.sanitizeStringForHtml(e)}</td>`).join("")}</tr>`).join(""),s+="</table>",s};setTimeout(()=>{let s=[];if(Array.isArray(e))for(let r in e){let i=t(e[r].header,e[r].rows);s.push(i)}else{let r=t(e.header,e.rows);s.push(r)}this.exportFile("html",s.join(""))},0)}exportFile(e,t){r.workspace.openTextDocument({language:e,content:t}).then(e=>r.window.showTextDocument(e,r.ViewColumn.One)).then(()=>r.commands.executeCommand("workbench.action.files.saveAs"))}}t.default=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomView=void 0;const r=s(0),i=s(33),o=s(3);class n extends i.EventEmitter{constructor(e,t){super(),this.type=e,this.title=t,this.resourceScheme="vscode-resource",this.resourcesPath=""}show(e,t){this.resourcesPath=o.join(e,"dist"),this.panel||this.init();const s=o.join(this.resourcesPath,"resultview.js");this.panel.webview.html=`\n            <html>\n                <head>\n                    <title>ResultView</title>\n                </head>\n                <body>\n                    <div id="root"></div>\n                    <script>const RECORDS_PER_PAGE=${t||20}<\/script>\n                    <script src="${this.panel.webview.asWebviewUri(r.Uri.file(s)).toString()}"><\/script>\n                </body>\n            </html>\n        `}send(e){this.panel&&this.panel.webview.postMessage(e)}handleMessage(e){throw new Error("Method not implemented")}dispose(){this.disposable&&this.disposable.dispose(),this.panel=void 0}init(){let e=[],t={enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[r.Uri.file(this.resourcesPath).with({scheme:this.resourceScheme})]};this.panel=r.window.createWebviewPanel(this.type,this.title,r.ViewColumn.Two,t),e.push(this.panel),e.push(this.panel.onDidDispose(()=>this.dispose())),e.push(this.panel.webview.onDidReceiveMessage(e=>{this.handleMessage(e)})),this.disposable=r.Disposable.from(...e)}}t.CustomView=n},function(e,t){e.exports=require("events")},function(e,t,s){const r=s(35),{StringDecoder:i}=s(36);e.exports=function(e,t={}){const s=[];if(Buffer.isBuffer(e)){e=(new i).write(e)}function o(e){e&&s.push(e.toString())}let n=new r.Stringifier(t);n.on("data",o);for(let t of e)n.write(t);return n.end(),n.off("data",o),s.join("")}},function(e,t,s){const{Transform:r}=s(13),o=Buffer.from([239,187,191]);class n extends r{constructor(e={}){super({writableObjectMode:!0,...e});const t={};let s;for(let s in e)t[c(s)]=e[s];if(s=this.normalize(t))throw s;switch(t.record_delimiter){case"auto":t.record_delimiter=null;break;case"unix":t.record_delimiter="\n";break;case"mac":t.record_delimiter="\r";break;case"windows":t.record_delimiter="\r\n";break;case"ascii":t.record_delimiter="";break;case"unicode":t.record_delimiter="\u2028"}this.options=t,this.state={stop:!1},this.info={records:0}}normalize(e){if(void 0===e.bom||null===e.bom||!1===e.bom)e.bom=!1;else if(!0!==e.bom)return new l("CSV_OPTION_BOOLEAN_INVALID_TYPE",["option `bom` is optional and must be a boolean value,","got "+JSON.stringify(e.bom)]);if(void 0===e.delimiter||null===e.delimiter)e.delimiter=",";else if(Buffer.isBuffer(e.delimiter))e.delimiter=e.delimiter.toString();else if("string"!=typeof e.delimiter)return new l("CSV_OPTION_DELIMITER_INVALID_TYPE",["option `delimiter` must be a buffer or a string,","got "+JSON.stringify(e.delimiter)]);if(void 0===e.quote||null===e.quote)e.quote='"';else if(!0===e.quote)e.quote='"';else if(!1===e.quote)e.quote="";else if(Buffer.isBuffer(e.quote))e.quote=e.quote.toString();else if("string"!=typeof e.quote)return new l("CSV_OPTION_QUOTE_INVALID_TYPE",["option `quote` must be a boolean, a buffer or a string,","got "+JSON.stringify(e.quote)]);if(void 0!==e.quoted&&null!==e.quoted||(e.quoted=!1),void 0!==e.quoted_empty&&null!==e.quoted_empty||(e.quoted_empty=void 0),void 0===e.quoted_match||null===e.quoted_match||!1===e.quoted_match?e.quoted_match=null:Array.isArray(e.quoted_match)||(e.quoted_match=[e.quoted_match]),e.quoted_match)for(let t of e.quoted_match){const e=t instanceof RegExp;if(!("string"==typeof t)&&!e)return Error("Invalid Option: quoted_match must be a string or a regex, got "+JSON.stringify(t))}if(void 0!==e.quoted_string&&null!==e.quoted_string||(e.quoted_string=!1),void 0!==e.eof&&null!==e.eof||(e.eof=!0),void 0===e.escape||null===e.escape)e.escape='"';else if(Buffer.isBuffer(e.escape))e.escape=e.escape.toString();else if("string"!=typeof e.escape)return Error("Invalid Option: escape must be a buffer or a string, got "+JSON.stringify(e.escape));if(e.escape.length>1)return Error(`Invalid Option: escape must be one character, got ${e.escape.length} characters`);if(void 0!==e.header&&null!==e.header||(e.header=!1),e.columns=this.normalize_columns(e.columns),void 0!==e.quoted&&null!==e.quoted||(e.quoted=!1),void 0!==e.cast&&null!==e.cast||(e.cast={}),void 0!==e.cast.bigint&&null!==e.cast.bigint||(e.cast.bigint=e=>""+e),void 0!==e.cast.boolean&&null!==e.cast.boolean||(e.cast.boolean=e=>e?"1":""),void 0!==e.cast.date&&null!==e.cast.date||(e.cast.date=e=>""+e.getTime()),void 0!==e.cast.number&&null!==e.cast.number||(e.cast.number=e=>""+e),void 0!==e.cast.object&&null!==e.cast.object||(e.cast.object=e=>JSON.stringify(e)),void 0!==e.cast.string&&null!==e.cast.string||(e.cast.string=function(e){return e}),void 0===e.record_delimiter||null===e.record_delimiter)e.record_delimiter="\n";else if(Buffer.isBuffer(e.record_delimiter))e.record_delimiter=e.record_delimiter.toString();else if("string"!=typeof e.record_delimiter)return Error("Invalid Option: record_delimiter must be a buffer or a string, got "+JSON.stringify(e.record_delimiter))}_transform(e,t,s){if(!0===this.state.stop)return;if(!Array.isArray(e)&&"object"!=typeof e)return this.state.stop=!0,s(Error("Invalid Record: expect an array or an object, got "+JSON.stringify(e)));if(0===this.info.records)if(Array.isArray(e)){if(!0===this.options.header&&!this.options.columns)return this.state.stop=!0,s(Error("Undiscoverable Columns: header option requires column option or object records"))}else void 0!==this.options.columns&&null!==this.options.columns||(this.options.columns=this.normalize_columns(Object.keys(e)));0===this.info.records&&(this.bom(),this.headers());try{this.emit("record",e,this.info.records)}catch(e){return this.state.stop=!0,this.emit("error",e)}let r;if(this.options.eof){if(r=this.stringify(e),void 0===r)return;r+=this.options.record_delimiter}else{if(r=this.stringify(e),void 0===r)return;(this.options.header||this.info.records)&&(r=this.options.record_delimiter+r)}this.info.records++,this.push(r),s()}_flush(e){0===this.info.records&&(this.bom(),this.headers()),e()}stringify(e,t=!1){if("object"!=typeof e)return e;const{columns:s,header:r}=this.options,o=[];if(Array.isArray(e)){s&&e.splice(s.length);for(let s=0;s<e.length;s++){const r=e[s],[i,n]=this.__cast(r,{index:s,column:s,records:this.info.records,header:t});if(i)return void this.emit("error",i);o[s]=[n,r]}}else if(s)for(let r=0;r<s.length;r++){const i=w(e,s[r].key),[n,a]=this.__cast(i,{index:r,column:s[r].key,records:this.info.records,header:t});if(n)return void this.emit("error",n);o[r]=[a,i]}else for(let r of e){const n=e[r],[a,l]=this.__cast(n,{index:i,column:s[i].key,records:this.info.records,header:t});if(a)return void this.emit("error",a);o.push([l,n])}let n="";for(let e=0;e<o.length;e++){let t,s,[r,i]=o[e];if("string"==typeof r)t=this.options;else if(u(r)){if(t=r,r=t.value,delete t.value,"string"!=typeof r&&null!=r)return void this.emit("error",Error("Invalid Casting Value: returned value must return a string, null or undefined, got "+JSON.stringify(r)));if(t={...this.options,...t},s=this.normalize(t))return void this.emit("error",s)}else{if(null!=r)return void this.emit("error",Error("Invalid Casting Value: returned value must return a string, an object, null or undefined, got "+JSON.stringify(r)));t=this.options}const{delimiter:a,escape:l,quote:c,quoted:d,quoted_empty:h,quoted_string:m,quoted_match:p,record_delimiter:f}=t;if(r){if("string"!=typeof r)return this.emit("error",Error("Formatter must return a string, null or undefined, got "+JSON.stringify(r))),null;const e=a.length&&r.indexOf(a)>=0,t=""!==c&&r.indexOf(c)>=0,s=r.indexOf(l)>=0&&l!==c,o=r.indexOf(f)>=0,u=m&&"string"==typeof i;let h=p&&p.filter(e=>"string"==typeof e?-1!==r.indexOf(e):e.test(r));h=h&&h.length>0;const g=!0===t||e||o||d||u||h;if(!0===g&&!0===s){const e="\\"===l?new RegExp(l+l,"g"):new RegExp(l,"g");r=r.replace(e,l+l)}if(!0===t){const e=new RegExp(c,"g");r=r.replace(e,l+c)}!0===g&&(r=c+r+c),n+=r}else(!0===h||""===i&&!0===m&&!1!==h)&&(n+=c+c);e!==o.length-1&&(n+=a)}return n}bom(){!0===this.options.bom&&this.push(o)}headers(){if(!1===this.options.header)return;if(void 0===this.options.columns)return;let e=this.options.columns.map(e=>e.header);e=this.options.eof?this.stringify(e,!0)+this.options.record_delimiter:this.stringify(e),this.push(e)}__cast(e,t){const s=typeof e;try{return"string"===s?[void 0,this.options.cast.string(e,t)]:"bigint"===s?[void 0,this.options.cast.bigint(e,t)]:"number"===s?[void 0,this.options.cast.number(e,t)]:"boolean"===s?[void 0,this.options.cast.boolean(e,t)]:e instanceof Date?[void 0,this.options.cast.date(e,t)]:"object"===s&&null!==e?[void 0,this.options.cast.object(e,t)]:[void 0,e,e]}catch(e){return[e]}}normalize_columns(e){if(null!=e){if("object"!=typeof e)throw Error('Invalid option "columns": expect an array or an object');if(Array.isArray(e)){const t=[];for(let s of e)if("string"==typeof s)t.push({key:s,header:s});else{if("object"!=typeof s||void 0===s||Array.isArray(s))throw Error("Invalid column definition: expect a string or an object");if(!s.key)throw Error('Invalid column definition: property "key" is required');void 0===s.header&&(s.header=s.key),t.push(s)}e=t}else{const t=[];for(let s in e)t.push({key:s,header:e[s]});e=t}return e}}}const a=function(){let e,t,s;for(let r in arguments){const i=arguments[r],o=typeof i;if(void 0===e&&Array.isArray(i))e=i;else if(void 0===t&&u(i))t=i;else{if(void 0!==s||"function"!==o)throw new l("CSV_INVALID_ARGUMENT",["Invalid argument:",`got ${JSON.stringify(i)} at index ${r}`]);s=i}}const r=new n(t);if(s){const e=[];r.on("readable",(function(){let t;for(;null!==(t=this.read());)e.push(t)})),r.on("error",(function(e){s(e)})),r.on("end",(function(){s(void 0,e.join(""))}))}if(void 0!==e)if("function"==typeof setImmediate)setImmediate((function(){for(let t of e)r.write(t);r.end()}));else{for(let t of e)r.write(t);r.end()}return r};class l extends Error{constructor(e,t,...s){Array.isArray(t)&&(t=t.join(" ")),super(t),void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,l),this.code=e;for(const e of s)for(const t in e){const s=e[t];this[t]=Buffer.isBuffer(s)?s.toString():null==s?s:JSON.parse(JSON.stringify(s))}}}a.Stringifier=n,a.CsvError=l,e.exports=a;const u=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)},c=function(e){return e.replace(/([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()}))},d=".".charCodeAt(0),h=/\\(\\)?/g,m=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/,g=function(e){const t=typeof e;return"symbol"===t||"object"===t&&e&&"[object Symbol]"===function(e){return Object.prototype.toString.call(e)}(e)},b=function(e,t){return Array.isArray(e)?e:function(e,t){if(Array.isArray(e))return!1;const s=typeof e;return!("number"!==s&&"symbol"!==s&&"boolean"!==s&&e&&!g(e))||(f.test(e)||!p.test(e)||null!=t&&e in Object(t))}(e,t)?[e]:function(e){const t=[];return e.charCodeAt(0)===d&&t.push(""),e.replace(m,(function(e,s,r,i){let o=e;r?o=i.replace(h,"$1"):s&&(o=s.trim()),t.push(o)})),t}(e)},y=function(e){if("string"==typeof e||g(e))return e;const t=""+e;return"0"==t&&1/e==-INFINITY?"-0":t},w=function(e,t){let s=0;const r=(t=b(t,e)).length;for(;null!=e&&s<r;)e=e[y(t[s++])];return s&&s===r?e:void 0}},function(e,t){e.exports=require("string_decoder")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(38);t.default=class{constructor(){this.subscriptions=[],this.completionProvider=new i.CompletionProvider({provideSchema:e=>this.schemaProvider?this.schemaProvider(e):Promise.resolve()});this.subscriptions.push(r.languages.registerCompletionItemProvider([{language:"sql"},{language:"sqlite"}],this.completionProvider,"."))}setSchemaProvider(e){this.schemaProvider=e}dispose(){r.Disposable.from(...this.subscriptions).dispose()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionProvider=void 0;const r=s(0),i=s(12),o=s(4);t.CompletionProvider=class{constructor(e){this.schemaProvider=e,this.schemaMap={}}provideCompletionItems(e,t,s,r){let o=this.schemaMap[e.uri.fsPath];return(o?Promise.resolve(o):this.schemaProvider.provideSchema(e)).then(s=>{if(!s)return this.getKeywordCompletionItems(i.keywords);let o=[];if("."===r.triggerCharacter){let r=e.getWordRangeAtPosition(t.translate(0,-1)),i=e.getText(r),n=s?s.tables.find(e=>e.name===i):void 0;return o=n?this.getColumnCompletionItems(n.columns):this.getColumnCompletionItems(s.tables.reduce((e,t)=>e.concat(t.columns),[])),o}let n=this.getKeywordCompletionItems(i.keywords);return[...this.getTableCompletionsItems(s.tables),...this.getColumnCompletionItems(s.tables.reduce((e,t)=>e.concat(t.columns),[])),...n]})}getTableCompletionsItems(e=[]){return e.map(e=>new a(e.name))}getColumnCompletionItems(e=[],t=!0){let s=e.map(e=>new l(e.name));return t&&(s=o.uniqueBy(s,"label")),s}getKeywordCompletionItems(e){return e.map(e=>new n(e))}};class n extends r.CompletionItem{constructor(e){super(e,r.CompletionItemKind.Keyword)}}class a extends r.CompletionItem{constructor(e){super(e,r.CompletionItemKind.File),this.detail="table"}}class l extends r.CompletionItem{constructor(e){super(e,r.CompletionItemKind.Field),this.detail="column"}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(40),o=s(6);t.default=class{constructor(e){let t=[];this.explorerTreeProvider=new i.ExplorerTreeProvider(e),t.push(r.window.createTreeView(o.Constants.sqliteExplorerViewId,{treeDataProvider:this.explorerTreeProvider})),this.disposable=r.Disposable.from(...t)}add(e){this.explorerTreeProvider.addToTree(e)>0&&r.commands.executeCommand("setContext","sqlite.explorer.show",!0)}remove(e){0===this.explorerTreeProvider.removeFromTree(e)&&setTimeout(()=>{r.commands.executeCommand("setContext","sqlite.explorer.show",!1)},100)}list(){return this.explorerTreeProvider.getDatabaseList()}refresh(){this.explorerTreeProvider.refresh()}dispose(){this.disposable.dispose()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExplorerTreeProvider=void 0;const r=s(0),i=s(41);t.ExplorerTreeProvider=class{constructor(e){this._onDidChangeTreeData=new r.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.context=e,this.databaseList=[]}refresh(){this._onDidChangeTreeData.fire()}addToTree(e){let t=this.databaseList.findIndex(t=>t.path===e.path);return t<0?this.databaseList.push(e):this.databaseList[t]=e,this.refresh(),this.databaseList.length}removeFromTree(e){let t=this.databaseList.findIndex(t=>t.path===e);return t>-1&&this.databaseList.splice(t,1),this.refresh(),this.databaseList.length}getTreeItem(e){return"tables"in e?new i.DBItem(this.context,e.path):"columns"in e?new i.TableItem(this.context,e.name,e.type):new i.ColumnItem(this.context,e.name,e.type,e.notnull,e.pk,e.defVal)}getDatabaseList(){return this.databaseList}getChildren(e){return e?"tables"in e?e.tables:"columns"in e?e.columns:[]:this.databaseList}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnItem=t.TableItem=t.DBItem=t.SQLItem=void 0;const r=s(0),i=s(3);class o extends r.TreeItem{constructor(e,t,s,r){super(t,s),this.name=e,this.label=t,this.collapsibleState=s,this.command=r}}t.SQLItem=o;t.DBItem=class extends o{constructor(e,t,s){super(t,i.basename(t),r.TreeItemCollapsibleState.Collapsed,s),this.dbPath=t,this.iconPath={light:e.asAbsolutePath(i.join("resources","light","database.svg")),dark:e.asAbsolutePath(i.join("resources","dark","database.svg"))},this.contextValue="sqlite.databaseItem"}get tooltip(){return""+this.dbPath}};t.TableItem=class extends o{constructor(e,t,s,o){super(t,t,r.TreeItemCollapsibleState.Collapsed,o),this.type=s,this.contextValue="sqlite.tableItem";let n="table.svg";"view"===this.type&&(n="table_view.svg"),this.iconPath={light:e.asAbsolutePath(i.join("resources","light",n)),dark:e.asAbsolutePath(i.join("resources","dark",n))}}get tooltip(){return`${this.name}\n${"view"===this.type?"VIEW":"TABLE"}`}};t.ColumnItem=class extends o{constructor(e,t,s,o,n,a,l){super(t,t+" : "+s.toLowerCase(),r.TreeItemCollapsibleState.None,l),this.type=s,this.notnull=o,this.pk=n,this.defVal=a,this.contextValue="sqlite.columnItem";let u=o?"col_notnull.svg":"col_nullable.svg";u=n>0?"col_pk.svg":u,this.iconPath={light:e.asAbsolutePath(i.join("resources","light",u)),dark:e.asAbsolutePath(i.join("resources","dark",u))}}get tooltip(){let e=this.pk?"\nPRIMARY KEY":"",t=this.notnull?"\nNOT NULL":"",s="NULL"!==this.defVal?"\nDEFAULT: "+this.defVal:"";return`${this.name}\n${this.type}${e}${t}${s}`}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceTrustCommandsHandler=void 0;const r=s(0),i=s(2),o=s(5);t.WorkspaceTrustCommandsHandler=class{constructor(e){this.extensionContext=e}activate(e){e.subscriptions.push(r.commands.registerCommand(i.Commands.changeWorkspaceTrust,this.onChangeWorkspaceTrust,this),r.commands.registerCommand(i.Commands.askWorkspaceTrust,this.onAskWorkspaceTrust,this))}deactivate(){}onAskWorkspaceTrust(){this.hasWorkspaceTrustValue()||this.extensionContext.workspaceState.update("isTrustedWorkspace",!1);const e={title:"Trust this workspace",command:i.Commands.changeWorkspaceTrust,args:[!0]};return o.showWarningMessage('The workspace setting "sqlite.sqlite3" is disabled by default for the untrusted workspace. If you trust this workspace you can explicitly enable the workspace settings by running the command "SQLite: Change Workspace Trust".',{title:"Do nothing"},e)}onChangeWorkspaceTrust(e){let t=null!=e?e:!this.isTrustedWorkspace();this.extensionContext.workspaceState.update("isTrustedWorkspace",t).then(()=>{const e=t?"This workspace is trusted. Workspace settings are enabled.":"This workspace is not trusted. Workspace settings are disabled";return r.window.showInformationMessage(e),r.commands.executeCommand(i.Commands.reloadSettings)})}isTrustedWorkspace(){return this.extensionContext.workspaceState.get("isTrustedWorkspace",!1)}hasWorkspaceTrustValue(){return null!=this.extensionContext.workspaceState.get("isTrustedWorkspace")}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputChannelCommandsHandler=void 0;const r=s(0),i=s(2),o=s(1);t.OutputChannelCommandsHandler=class{activate(e){e.subscriptions.push(r.commands.registerCommand(i.Commands.showOutputChannel,()=>{o.logger.showOutput()}))}deactivate(){}}},function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(i,o){function n(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(n,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardCommandsHandler=void 0;const i=s(0),o=s(2),n=s(45);t.ClipboardCommandsHandler=class{activate(e){e.subscriptions.push(i.commands.registerCommand(o.Commands.explorerCopyName,this.onExplorerCopyName,this),i.commands.registerCommand(o.Commands.explorerCopyPath,this.onExplorerCopyPath,this),i.commands.registerCommand(o.Commands.explorerCopyRelativePath,this.onExplorerCopyRelativePath,this))}deactivate(){}onExplorerCopyName(e){return r(this,void 0,void 0,(function*(){yield this.copyToClipboard(e.name)}))}onExplorerCopyPath(e){return r(this,void 0,void 0,(function*(){yield this.copyToClipboard(e.path)}))}onExplorerCopyRelativePath(e){return r(this,void 0,void 0,(function*(){let t=i.workspace.asRelativePath(e.path);yield this.copyToClipboard(t)}))}copyToClipboard(e){return r(this,void 0,void 0,(function*(){yield n.default.copy(e),i.window.setStatusBarMessage(`Copied '${e}' to clipboard.`,2e3)}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);var i;!function(e){e.copy=function(e){return Promise.resolve(r.env.clipboard.writeText(e))},e.read=function(){return Promise.resolve(r.env.clipboard.readText())}}(i||(i={})),t.default=i},function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(i,o){function n(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(n,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SqlDocumentCommandsHandler=void 0;const i=s(0),o=s(2),n=s(4),a=s(5);t.SqlDocumentCommandsHandler=class{constructor(e,t){this.sqlWorkspace=e,this.databaseExtensions=t}onConfigurationChange(e){this.databaseExtensions=e.databaseExtensions}activate(e){e.subscriptions.push(i.commands.registerCommand(o.Commands.useDatabase,this.onUseDatabase,this),i.commands.registerCommand(o.Commands.newQuery,this.onNewQuery,this),i.commands.registerCommand(o.Commands.newQuerySelect,this.onNewQuerySelect,this),i.commands.registerCommand(o.Commands.newQueryInsert,this.onNewQueryInsert,this))}deactivate(){}onUseDatabase(){return r(this,void 0,void 0,(function*(){let e=a.getEditorSqlDocument(),t=yield a.pickWorkspaceDatabase(!1,this.databaseExtensions,!0);return e&&t&&this.sqlWorkspace.bindDatabaseToDocument(t,e),t}))}onNewQuery(e){return r(this,void 0,void 0,(function*(){const t=yield a.createSqlDocument("");return e&&this.sqlWorkspace.bindDatabaseToDocument(e.path,t),t.uri}))}onNewQuerySelect(e){return r(this,void 0,void 0,(function*(){let t="SELECT "+e.columns.map(e=>n.sqlSafeName(e.name)).join(", "),s=`FROM ${n.sqlSafeName(e.name)};`,r=t+"\n"+s,o=new i.Position(1,s.length-1);const l=yield a.createSqlDocument(r,o);return this.sqlWorkspace.bindDatabaseToDocument(e.database,l),l.uri}))}onNewQueryInsert(e){return r(this,void 0,void 0,(function*(){let t=`INSERT INTO ${n.sqlSafeName(e.name)} (${e.columns.map(e=>n.sqlSafeName(e.name)).join(", ")})`+"\nVALUES ();",s=new i.Position(1,"VALUES ();".length-2);const r=yield a.createSqlDocument(t,s);return this.sqlWorkspace.bindDatabaseToDocument(e.database,r),r.uri}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunQueryCommandsHandler=void 0;const r=s(0),i=s(2),o=s(1),n=s(7),a=s(15),l=s(4),u=s(5);t.RunQueryCommandsHandler=class{constructor(e,t,s,r,i,o){this.sqlWorkspace=e,this.sqlite=t,this.resultView=s,this.recordsPerPage=r,this.databaseExtensions=i,this.setupDatabaseConfig=o}onConfigurationChange(e){this.recordsPerPage=e.recordsPerPage,this.databaseExtensions=e.databaseExtensions,this.setupDatabaseConfig=e.setupDatabase}activate(e){e.subscriptions.push(r.commands.registerCommand(i.Commands.runDocumentQuery,this.onRunDocumentQuery,this),r.commands.registerCommand(i.Commands.runSelectedQuery,this.onRunSelectedQuery,this),r.commands.registerCommand(i.Commands.runTableQuery,this.onRunTableQuery,this),r.commands.registerCommand(i.Commands.runSqliteMasterQuery,this.onRunSqliteMasterQuery,this),r.commands.registerCommand(i.Commands.quickQuery,this.onQuickQuery,this))}deactivate(){}onRunDocumentQuery(){const e=u.getEditorSqlDocument();if(!e)return;const t=this.sqlWorkspace.getDocumentDatabase(e);if(t){const s=e.getText();this.runQuery(t,s)}else r.commands.executeCommand(i.Commands.useDatabase).then(()=>this.onRunDocumentQuery())}onRunSelectedQuery(){let e=u.getEditorSqlDocument();if(!e)return;let t=this.sqlWorkspace.getDocumentDatabase(e);if(t){let s=u.getEditorSelection(),o="";if(s)if(s.isEmpty){let t=e.getText(),i=a.extractStatements(t);for(let e of i){let t=new r.Position(e.position.start[0],e.position.start[1]),i=new r.Position(e.position.end[0],e.position.end[1]+1);if(new r.Range(t,i).contains(s)){o=e.sql;break}}}else o=e.getText(s);else o=e.getText();if(""!=o)this.runQuery(t,o);else{let e="No query selected.";u.showErrorMessage(e,{title:"Show output",command:i.Commands.showOutputChannel})}}else r.commands.executeCommand(i.Commands.useDatabase).then(()=>this.onRunSelectedQuery())}onRunTableQuery(e){let t=`SELECT * FROM ${l.sqlSafeName(e.name)};`;this.runQuery(e.database,t)}onRunSqliteMasterQuery(e){this.runQuery(e.path,"SELECT * FROM sqlite_master;")}onQuickQuery(){u.pickWorkspaceDatabase(!1,this.databaseExtensions,!0).then(e=>{e&&u.showQueryInputBox(e).then(t=>{t&&this.runQuery(e,t)})})}runQuery(e,t){let s=this.sqlite.query(e,t,n.buildQueryExecutionOptions(this.setupDatabaseConfig,e)).then(({resultSet:e,error:t})=>(t&&(o.logger.error(t.message),u.showErrorMessage(t.message,{title:"Show output",command:i.Commands.showOutputChannel})),e));this.resultView.display(s,this.recordsPerPage)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExplorerCommandsHandler=void 0;const r=s(0),i=s(2),o=s(1),n=s(7),a=s(5);t.ExplorerCommandsHandler=class{constructor(e,t,s,r){this.sqlite=t,this.explorer=e,this.databaseExtensions=s,this.setupDatabaseConfig=r}activate(e){e.subscriptions.push(r.commands.registerCommand(i.Commands.explorerAdd,this.onExplorerAdd,this),r.commands.registerCommand(i.Commands.explorerRemove,this.onExplorerRemove,this),r.commands.registerCommand(i.Commands.explorerRefresh,this.onExplorerRefresh,this))}deactivate(){}onConfigurationChange(e){this.databaseExtensions=e.databaseExtensions,this.setupDatabaseConfig=e.setupDatabase}onExplorerAdd(e){let t=e?e.fsPath:void 0;return t?this.sqlite.schema(t,n.buildQueryExecutionOptions(this.setupDatabaseConfig,t)).then(e=>this.explorer.add(e),e=>{let s=`Failed to open database '${t}': ${e.message}`;o.logger.error(s),a.showErrorMessage(s,{title:"Show output",command:i.Commands.showOutputChannel})}):a.pickWorkspaceDatabase(!1,this.databaseExtensions,!1).then(e=>{if(e)return this.onExplorerAdd(r.Uri.file(e))},e=>{})}onExplorerRemove(e){if(e)return Promise.resolve(this.explorer.remove(e.path));{let e=this.explorer.list().map(e=>e.path);return a.pickListDatabase(!1,e).then(e=>{e&&this.explorer.remove(e)},e=>{})}}onExplorerRefresh(){let e=this.explorer.list();return Promise.all(e.map(e=>{let t=e.path;return this.sqlite.schema(t,n.buildQueryExecutionOptions(this.setupDatabaseConfig,t)).then(e=>this.explorer.add(e),e=>{this.explorer.remove(t);let s="Failed to refresh database: "+e.message;o.logger.error(s),a.showErrorMessage(s,{title:"Show output",command:i.Commands.showOutputChannel})})}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isConfigurationChangeAware=void 0,t.isConfigurationChangeAware=function(e){return"onConfigurationChange"in e&&e.onConfigurationChange instanceof Function}}]);
//# sourceMappingURL=extension.js.map