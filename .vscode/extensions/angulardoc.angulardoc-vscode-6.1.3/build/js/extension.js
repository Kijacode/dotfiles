/*! require("source-map-support").install(); */
module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=45)}([function(e,t){e.exports=require("vscode")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("typescript")},function(e,t,n){"use strict";function r(e){try{return d.accessSync(e),!0}catch(e){return!1}}function o(e){return process.platform.startsWith("win")?e=e.indexOf("//")>0?e.replace(/\\/g,f.sep):e.replace(/\//g,f.sep):e}function i(e,t){var n=new g.ProjectSymbols(e,{get:function(e){return new Promise(function(t,n){h.readFile(e,function(e,r){e?n(e):t(r.toString())})})},getSync:function(e){return h.readFileSync(e,{encoding:"utf-8"})}},t);return Promise.resolve(n)}function a(e){var t=l.workspace.workspaceFolders;return!(!t||0===t.length)&&r(f.join(t[0].uri.fsPath,"node_modules",e))}function s(e){var t=l.workspace.workspaceFolders;if(!t||0===t.length)return[];var n=f.join(t[0].uri.fsPath,"node_modules",e,"package.json");if(!r(n))return[];var o=JSON.parse(d.readFileSync(n,"utf-8"));if(!o.schematics)return[];var i=f.join(n,"..",o.schematics);if(!r(i))return[];var a=v.parse(d.readFileSync(i,"utf-8"),null,!0);return a.schematics?Object.keys(a.schematics).map(function(e){return u({cmd:e},a.schematics[e])}):[]}function c(e){var t=[],n=p.createSourceFile(e.fileName,e.getText(),p.ScriptTarget.Latest);return p.forEachChild(n,function(n){switch(n.kind){case p.SyntaxKind.ClassDeclaration:var r=n;r.name&&t.push(new m.TsDeclarationNode(e.uri,r));break;case p.SyntaxKind.TypeAliasDeclaration:var o=n;o.name&&t.push(new m.TsDeclarationNode(e.uri,o));break;case p.SyntaxKind.InterfaceDeclaration:var i=n;i.name&&t.push(new m.TsDeclarationNode(e.uri,i));break;case p.SyntaxKind.FunctionDeclaration:var a=n;a.name&&t.push(new m.TsDeclarationNode(e.uri,a));break;case p.SyntaxKind.EnumDeclaration:var s=n;t.push(new m.TsDeclarationNode(e.uri,s));break;case p.SyntaxKind.VariableStatement:var c=n;t.push(new m.TsDeclarationNode(e.uri,c.declarationList.declarations[0]));break;case p.SyntaxKind.ExportDeclaration:var u=n;u.name&&t.push(new m.TsDeclarationNode(e.uri,u))}}),t}var u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),d=n(2),f=n(1),p=n(3),h=n(2),g=n(7),m=n(17),v=n(21);t.pathExists=r,t.formatPath=o,t.loadProject=i,t.hasSchematics=a,t.getCommandsForSchematics=s,t.getOutlineNodes=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(19),s=n(21),c=n(42),u=n(38),l=n(18);!function(e){function t(e){var t=process.env.APPDATA;if(!t)if("darwin"==process.platform)t=process.env.HOME+"/Library/Application Support";else if("linux"==process.platform){var r=n(39);t=r.homedir()+"/.config"}else t="/var/local";t+="/Code",O=t.concat("/User/",U),i.existsSync(q)?v():g(),h(),d()}function d(){B=p(r.workspace.rootPath)}function f(){return B}function p(e){var t=[],n=function(e){i.readdirSync(e).forEach(function(r){i.statSync(o.join(e,r)).isDirectory()&&"node_modules"!=r&&"typeings"!=r&&".github"!=r&&(t.push(o.join(e,r)),n(o.join(e,r)))})};return n(e),t}function h(){I().then(function(e){new(0,n(44).Server)({port:e,path:"/websocket"}).on("connection",function(e){H.push(e),e.on("close",function(){H=H.filter(function(t,n){return t!==e})})})})}function g(){T(q).then(function(e){if(i.existsSync(K))T(K).then(function(t){var n=m();t.repoId||(t.repoId=N()),e.repoId&&(t.repoId=e.repoId),t.lastSync=0,n.get("directoryFilter")||n.update("directoryFilter",z,!1).then(function(){console.log("directoryFilter is auto-generated")},function(e){console.log("directoryFilter is NOT set"),console.log(e)}),n.get("fileFilter")||n.update("fileFilter",L,!1).then(function(){console.log("fileFilter is auto-generated")},function(e){console.log("fileFilter is NOT set"),console.log(e)}),R={directoryFilter:n.get("directoryFilter"),fileFilter:n.get("fileFilter"),repoId:t.repoId,lastSync:t.lastSync},i.writeFileSync(q,s.stringify(t,null,2)),i.unlinkSync(K)});else{var t=m();e.repoId||(e.repoId=t.get("repoId")?t.get("repoId"):N(),t.update("repoId",void 0,!1)),e.lastSync||(e.lastSync=t.get("lastSync")?t.get("lastSync"):0,t.update("lastSync",void 0,!1)),t.get("directoryFilter")||t.update("directoryFilter",z,!1).then(function(){console.log("directoryFilter is auto-generated")},function(e){console.log("directoryFilter is NOT set"),console.log(e)}),t.get("fileFilter")||t.update("fileFilter",L,!1).then(function(){console.log("fileFilter is auto-generated")},function(e){console.log("fileFilter is NOT set"),console.log(e)}),R={directoryFilter:t.get("directoryFilter"),fileFilter:t.get("fileFilter"),repoId:e.repoId,lastSync:e.lastSync},i.writeFileSync(q,s.stringify(e,null,2))}})}function m(){return r.workspace.getConfiguration("angulardoc")}function v(){R=w(),R.access_token&&""!=R.access_token&&M(R.access_token).then(function(e){e||x()}),y().then(function(e){for(var t in e)R[t]=e[t]})}function y(){return new Promise(function(e,t){T(q).then(function(t){var n=m();t.repoId||(t.repoId=N()),t.lastSync=0,n.get("directoryFilter")||n.update("directoryFilter",z,!1).then(function(){console.log("directoryFilter is auto-generated")},function(e){console.log("directoryFilter is NOT set"),console.log(e)}),n.get("fileFilter")||n.update("fileFilter",L,!1).then(function(){console.log("fileFilter is auto-generated")},function(e){console.log("fileFilter is NOT set"),console.log(e)}),i.writeFileSync(q,s.stringify(t,null,2)),e({repoId:t.repoId,lastSync:0,directoryFilter:n.get("directoryFilter"),fileFilter:n.get("fileFilter")})})})}function x(){return m().update("access_token",void 0,!0)}function w(){var e=r.workspace.getConfiguration("angulardoc");return console.log(J()),{email:e.get("email"),access_token:e.get("access_token"),username:e.get("username"),baseUrl:e.get("baseUrl")||J()}}function b(){return R}function S(){var e=N();return R.repoId=e,H.forEach(function(t){var n={repoId:e};t.send(JSON.stringify(n))}),new Promise(function(t){T(q).then(function(n){n.repoId=e,i.writeFileSync(q,s.stringify(n,null,2)),t(e)})})}function D(e){H.forEach(function(t){var n={repoId:e};t.send(JSON.stringify(n))})}function C(e){H.forEach(function(t){var n={repoId:e};t.send(JSON.stringify(n))})}function N(){return c.v4()}function k(e){try{i.statSync(e)}catch(t){A(e),i.writeFileSync(e,s.stringify(Object.create(null)))}}function E(e,t){var n=m();return n.update("email",e,!0).then(function(){return n.update("access_token",t,!0)})}function P(e,t){return T(q).then(function(n){n?(n.lastSync=e,_(n)):(n={lastSync:0},_(n)),t||(R.lastSync=n.lastSync),i.writeFileSync(q,s.stringify(n,null,2))})}function _(e){e.repoId||(e.repoId=N())}function F(){return new Promise(function(e,t){T(q).then(function(t){e({repoId:t.repoId,lastSync:t.lastSync})}).catch(function(e){return t(e)})})}function T(e){return new Promise(function(t,n){i.readFile(e,{encoding:"utf8"},function(r,o){if(r)k(e);else{var i=o.toString();if(i){try{var a=s.parse(i);t(a?a:Object.create(null))}catch(r){n(r)}return}}t(Object.create(null))})})}function A(e){var t=o.dirname(e);if(a.WorkspaceUtils.directoryExists(t))return!0;A(t),i.mkdirSync(t)}function M(e){var t=w().baseUrl;if(t){var n=t+"/api/v1/user/me",r=new l.HttpRequest(l.HttpClient.GET,n,{Authorization:"Bearer "+e},{});return new Promise(function(e,t){(new l.HttpClient).send(r).then(function(t){e(t.statusCode<400)})})}return new Promise(function(e){return e(!1)})}function I(){return new Promise(function(e,t){var n=u.createServer().listen(0,function(){V=n.address().port,n.close(function(){e(V)})}).on("error",t)})}function j(){return V}var O,R,U="settings.json",K=r.workspace.rootPath+"/.vscode/angulardoc.json",q=r.workspace.rootPath+"/.angulardoc.json",z=["!typings","!node_modules","!.vscode"],L=["**/!(*.*spec).ts"],V=0,H=[],B=Object.create(null),J=function(){return process.env.ANGULARDOC_URL||"https://angulardoc.io"};e.activate=t,e.getFolderCache=f,e.getWorkspaceConfiguration=m,e.initializeSettings=v,e.initRepoSettings=y,e.removeExpiredToken=x,e.getUserSettings=w,e.getAngularDocConfiguration=b,e.updateRepoId=S,e.refreshDiagram=D,e.sendRepoIdToClient=C,e.saveUserSettings=E,e.saveLastSync=P,e.getWorkspaceSettings=F,e.getRandomPort=j}(t.AngularDocSetting||(t.AngularDocSetting={}))},function(e,t){e.exports=require("@angular/tsc-wrapped")},function(e,t){e.exports=require("ngast")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ngdocScheme="ngdoc",t.TS_MODE={language:"typescript",scheme:"file"};!function(e){e.authentication={get method(){return"angulardoc/authentication"}}}(t.ServerRequest||(t.ServerRequest={}));!function(e){e.metadata={get method(){return"angulardoc/server"}}}(t.ServerNotification||(t.ServerNotification={}));!function(e){e.metadata={get method(){return"angulardoc/migrationRepo"}}}(t.MigrationRepoNotification||(t.MigrationRepoNotification={}));!function(e){e.metadata={get method(){return"angulardoc/metadata"}}}(t.ServerMetadata||(t.ServerMetadata={}));!function(e){e.params={get method(){return"angulardoc/configurationChanged"}}}(t.ConfigurationChanged||(t.ConfigurationChanged={}))},function(e,t,n){"use strict";function r(e){var t=g.join(__dirname,"server.js"),n={execArgv:["--nolazy","--debug=6075"]},r={run:{module:t,transport:p.TransportKind.ipc},debug:{module:t,transport:p.TransportKind.ipc,options:n}},o={documentSelector:["typescript","html"],synchronize:{configurationSection:"angulardoc",fileEvents:f.workspace.createFileSystemWatcher("**/**.ts")},initializationOptions:function(){var e=v.AngularDocSetting.getAngularDocConfiguration();return e?{directoryFilter:e.directoryFilter||["!typings","!node_modules","!.vscode"],fileFilter:e.fileFilter||["**/!(*.*spec).ts"],access_token:e.access_token,baseUrl:h.AngularDocAPI.baseUrl,repoId:e.repoId,email:e.email,lastSync:e.lastSync||0}:void 0},initializationFailedHandler:function(e){return d.error("Server initialization failed.",e),d.outputChannel.show(!0),!1}};d=new p.LanguageClient("AngularDoc",r,o);var a=new p.SettingMonitor(d,"true");d.onReady().then(function(){l(v.AngularDocSetting.getWorkspaceConfiguration().access_token)}),e.subscriptions.push(a.start(),f.commands.registerCommand("angulardoc.applySingleFix",i),f.commands.registerCommand("angulardoc.applySameFixes",i),f.commands.registerCommand("angulardoc.applyAllFixes",i))}function o(e,t){if("ng"===e){if(!d.outputChannel){var n=f.window.createOutputChannel("AngularDoc");n.show(!0),n.appendLine(t)}d.outputChannel.show(!0),d.outputChannel.appendLine(t)}}function i(e,t,n){var r=f.window.activeTextEditor;r&&r.document.uri.toString()===e&&(r.document.version!==t&&f.window.showInformationMessage("AngularDoc fixes are outdated and can't be applied to the document."),r.edit(function(e){for(var t=0,r=n;t<r.length;t++){var o=r[t];e.replace(p.Protocol2Code.asRange(o.range),o.newText)}}).then(function(e){e||f.window.showErrorMessage("Failed to apply TSLint fixes to the document. Please consider opening an issue with steps to reproduce.")}))}function a(e,t){d.sendRequest(m.ServerMetadata.metadata,{url:e,action:t})}function s(e){d.sendRequest(m.ServerRequest.authentication,{userInfo:e}).then(function(e){200==e.statusCode&&console.log("Authentication info was set")},function(e){console.log(e)})}function c(e){d.sendRequest(m.MigrationRepoNotification.metadata,{isMigration:e})}function u(){return v.AngularDocSetting.removeExpiredToken().then(function(){c(!1)})}function l(e){h.AngularDocAPI.checkMigrationToken(e).then(function(e){c(e)}).catch(function(e){f.window.showErrorMessage(e.message)})}Object.defineProperty(t,"__esModule",{value:!0});var d,f=n(0),p=n(43),h=n(14),g=n(1),m=n(8),v=n(5);n(13);t.activate=r,t.getOutputChannel=o,t.sendRequest=a,t.sendUserInfoToServer=s,t.sendMigrationRepoToServer=c,t.removeExpiredToken=u,t.signIn=l},function(e,t,n){"use strict";function r(e,t){var n=new m.ProjectSymbols(e,{get:function(e){return new Promise(function(t,n){h.readFile(e,function(e,r){e?n(e):t(r.toString())})})},getSync:function(e){return h.readFileSync(e,{encoding:"utf-8"})}},t);return Promise.resolve(n)}function o(e){return(new g.MetadataCollector).getMetadata(e)}function i(e){var t=[];return d.forEachChild(e,function(e){switch(e.kind){case d.SyntaxKind.ClassDeclaration:var n=e;n.name&&t.push(n);break;case d.SyntaxKind.TypeAliasDeclaration:var r=e;r.name&&t.push(r);break;case d.SyntaxKind.InterfaceDeclaration:var o=e;o.name&&t.push(o);break;case d.SyntaxKind.FunctionDeclaration:var i=e;i.name&&t.push(i);break;case d.SyntaxKind.EnumDeclaration:var a=e;t.push(a);break;case d.SyntaxKind.ExportDeclaration:var s=e;s.name&&t.push(s);break;case d.SyntaxKind.VariableStatement:e.declarationList.declarations.forEach(function(e){e.name.kind===d.SyntaxKind.ObjectBindingPattern?e.name.elements.forEach(function(e){t.push(e)}):t.push(e)})}}),t}function a(e,t){var n,r=s(e,t);if(n=r?f.join(f.dirname(e.fileName),r):f.join(f.dirname(e.fileName),t),h.existsSync(n)){var o=h.statSync(n);o&&o.isDirectory()&&(n=f.join(n,"index.ts"))}else n+=".ts";return h.existsSync(n)?n:null}function s(e,t){for(var n,r=v.tsquery.ast(e.text,e.fileName),o=v.tsquery(r,"ImportDeclaration")||[],i=0,a=o;i<a.length;i++){var s=a[i],c=!1,u=s,l=u.importClause.namedBindings;if(l.kind===d.SyntaxKind.NamedImports)for(var f=l.elements||[],p=0,h=f;p<h.length;p++){var g=h[p],m=g.name.text;if(m===t){c=!0;break}}else l.kind===d.SyntaxKind.NamespaceImport&&l.name.text===t&&(c=!0);if(c){n=u.moduleSpecifier.text;break}}return n}function c(e){var t=[],n=function(e){e.kind===d.SyntaxKind.ClassDeclaration&&t.push(e),d.forEachChild(e,n)};return n(e),t}function u(e,t){if(e){var n=d.createSourceFile(e,p.readFileSync(e).toString(),d.ScriptTarget.Latest),r=v.tsquery.ast(n.text,n.fileName);if((v.tsquery(r,"VariableDeclaration[name.name="+t+"][type.typeName.name=ActionReducerMap]")||[]).length>0)return n;for(var o=v.tsquery(r,"ExportDeclaration")||[],i=0,s=o;i<s.length;i++){return u(a(n,s[i].moduleSpecifier.text),t)}}return null}function l(e,t){return(v.tsquery(e,t)||[]).length>0}Object.defineProperty(t,"__esModule",{value:!0});var d=n(3),f=n(1),p=n(2),h=n(2),g=n(6),m=n(7),v=n(12);t.loadProject=r,t.getMetadata=o,t.getDeclarations=i,t.getImportFromFilePath=a,t.searchImport=s,t.getClassDefinition=c,t.searchFile=u,t.nodeExists=l},function(e,t,n){"use strict";function r(e){var t=v.get(e.fileName);return t||(t=new m(e),v.set(e.fileName,t)),t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(2),a=n(6),s=n(35),c=n(12),u=n(15),l=n(10),d=function(){function e(e,t,n){this.sourceFile=e,this.name=t,this.reducers=n}return e.prototype.getFilePath=function(){return a.isMetadataImportedSymbolReferenceExpression(this.reducers)?l.getImportFromFilePath(this.sourceFile,this.reducers.module):null},e.prototype.getReducerMap=function(){if(a.isMetadataImportedSymbolReferenceExpression(this.reducers)){var e=l.getImportFromFilePath(this.sourceFile,this.reducers.module),t=this.reducers.name;return r(o.createSourceFile(e,i.readFileSync(e).toString(),o.ScriptTarget.Latest)).getReducerMap(t)}return new Map},e}();t.NgrxStoreModuleDef=d;var f=function(){function e(e,t,n){this.sourceFile=e,this.name=t,this.effects=n}return e.prototype.getFilePath=function(){return a.isMetadataImportedSymbolReferenceExpression(this.effects)?l.getImportFromFilePath(this.sourceFile,this.effects.module):null},e}();t.NgrxEffectsModuleDef=f;var p=function(){function e(e,t,n){this.sourceFile=e,this.name=t,this.reducer=n}return e.prototype.getFilePath=function(){return l.getImportFromFilePath(this.sourceFile,this.reducer.expression)},e.prototype.getStateMap=function(){var e=this.getFilePath();if(e){return r(o.createSourceFile(e,i.readFileSync(e).toString(),o.ScriptTarget.Latest)).getStateMap()}return new Map},e.prototype.getActionMap=function(){var e=this.getFilePath();if(e){return r(o.createSourceFile(e,i.readFileSync(e).toString(),o.ScriptTarget.Latest)).getActionMap()}return new Map},e}();t.NgrxReducerDef=p;var h=function(){function e(e,t,n){this.sourceFile=e,this.name=t,this.state=n}return e}();t.NgrxStateDef=h;var g=function(){function e(e,t){this.sourceFile=e,this.name=t}return e}();t.NgrxActionDef=g;var m=function(){function e(e){this.sourceFile=e,this.symbols=new s.Symbols(e);var t=e.fileName;this.rootAst=c.tsquery.ast(e.text,t)}return e.prototype.getStoreModules=function(e){var t=u.getMatchingPropertyV2(e,"imports"),n=[];if(t&&t.initializer.kind===o.SyntaxKind.ArrayLiteralExpression)for(var r=t.initializer,i=0,a=r.elements;i<a.length;i++){var s=a[i];if(s.kind===o.SyntaxKind.CallExpression){var c=s,l=c.expression,f=l.expression.text,p=l.name.text;if(f+"."+p=="StoreModule.forRoot"&&c.arguments.length>0){var h=c.arguments[0],g=this.symbols.resolve(u.getInitializerValue(h));g&&(g.pos=h.pos,g.end=h.end,n.push(new d(this.sourceFile,"<ROOT>",g)))}else if(f+"."+p=="StoreModule.forFeature"&&c.arguments.length>1){var m=u.getInitializerValue(c.arguments[0]),h=c.arguments[1],g=this.symbols.resolve(u.getInitializerValue(h));g&&(g.pos=h.pos,g.end=h.end,n.push(new d(this.sourceFile,m,g)))}}}return n},e.prototype.getEffectsModules=function(e){var t=this,n=u.getMatchingPropertyV2(e,"imports"),r=[];if(n&&n.initializer.kind===o.SyntaxKind.ArrayLiteralExpression)for(var i=n.initializer,a=0,s=i.elements;a<s.length;a++){var c=s[a];if(c.kind===o.SyntaxKind.CallExpression){var l=c,d=l.expression,p=d.expression.text,h=d.name.text;if((p+"."+h=="EffectsModule.forRoot"||p+"."+h=="EffectsModule.forFeature")&&l.arguments.length>0){var g=l.arguments[0];if(g.kind===o.SyntaxKind.ArrayLiteralExpression){var m=g;m.elements.forEach(function(e){var n=u.getInitializerValue(e),o=t.symbols.resolve(n);o&&(o.pos=e.pos,o.end=e.end,r.push(new f(t.sourceFile,n,o)))})}else if(g.kind===o.SyntaxKind.Identifier){var v=g.text,y=this.symbols.resolve(v);y&&(y.pos=g.pos,y.end=g.end,r.push(new f(this.sourceFile,v,y)))}}}}return r},e.prototype.getReducerMap=function(e){var t=this,n=(new Map,new Map),r=c.tsquery(this.rootAst,"VariableDeclaration[name.name="+e+"][type.typeName.name=ActionReducerMap]");if(r.length>0){c.tsquery(r[0],"PropertyAssignment").forEach(function(e){var r=e,o=r.name.text,i=u.getInitializerValue(r.initializer);n.set(o,new p(t.sourceFile,o,i))})}return n},e.prototype.getStateMap=function(){var e=this,t=new Map,n=c.tsquery(this.rootAst,"FunctionDeclaration[name.name=reducer]");if(n.length>0){var r=n[0],o=r.type.getText(),i=c.tsquery(this.rootAst,"InterfaceDeclaration[name.name="+o+"]");if(i.length>0){i[0].members.forEach(function(n){var r=n.name.text,o={name:r,type:""};t.set(r,new h(e.sourceFile,r,o))})}}return t},e.prototype.getActionMap=function(){var e=new Map,t=c.tsquery(this.rootAst,"FunctionDeclaration[name.name=reducer]");if(t.length>0){var n=t[0],r=n.parameters[1],a=r.type;if(a.kind===o.SyntaxKind.TypeReference){var s=a.getText(),u=l.getImportFromFilePath(this.sourceFile,s);if(u){var d=o.createSourceFile(u,i.readFileSync(u).toString(),o.ScriptTarget.Latest),f=c.tsquery.ast(d.text,d.fileName),p=c.tsquery(f,"TypeAliasDeclaration[name.name="+s+"]")||[];if(p&&p.length>0){p[0].type.types.forEach(function(t){if(t.kind===o.SyntaxKind.TypeReference){var n=t.typeName.getText();e.set(n,new g(d,n))}})}}}}return e},e}();t.NgrxAnalyzer=m;var v=new Map;t.getNgrxAnalyzer=r},function(e,t){e.exports=require("@phenomnomnominal/tsquery")},function(e,t){e.exports=require("request")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(2),a=n(18),s=n(5),c=n(41),u=n(13);!function(e){function t(){var e=o.join(r.workspace.rootPath,".angular-cli.json");if(i.existsSync(e)){var t=i.readFileSync(e,"utf-8"),n=JSON.parse(t).apps;return n&&n.length>0&&n[0].root?n[0].root:"/"}return"/"}function n(t,n){var r=e.baseUrl+"/api/users",o={loginName:t,email:t,password:n,provider:"vscode"},i=new a.HttpRequest(a.HttpClient.POST,r,null,o);return new Promise(function(n,r){(new a.HttpClient).send(i).then(function(i){if(i.statusCode>=400)return r(i.statusCode+": "+(i.body||i.statusMessage));var c=i.body.token;return s.AngularDocSetting.saveUserSettings(o.email,c).then(function(){var i=e.baseUrl+"/api/v1/copilot/local/repo",u=s.AngularDocSetting.getAngularDocConfiguration(),l={repoType:"local",repoId:u.repoId,owner:o.loginName,private:!0,projectPath:encodeURIComponent("/")},d=new a.HttpRequest(a.HttpClient.POST,i,{Authorization:"Bearer "+c},l);return(new a.HttpClient).send(d).then(function(e){if(200==e.statusCode){var o={email:t,access_token:c,repoId:u.repoId};n(o)}else 201==e.statusCode?s.AngularDocSetting.updateRepoId().then(function(e){r({email:t,access_token:c,repoId:e})}):r(e.statusCode+": "+(e.body||e.statusMessage))}).catch(function(e){r(e)})})}).catch(function(e){r(e)})})}function l(e,t,n,r){return new Promise(function(t,n){return s.AngularDocSetting.saveUserSettings(e,r).then(function(){})})}function d(e){return new Promise(function(t,n){r.workspace.findFiles(".angulardoc.json").then(function(n){if(n&&n.length>0){var r=i.readFileSync(n[0].fsPath).toString(),o=JSON.parse(r);if(o.migrate_from&&o.migrate_from.repoId&&o.migrate_from.token){h(o.migrate_from.repoId,o.migrate_from.token,e).then(function(e){t(e)}).catch(function(e){return t(!1)})}}else t(!1)})})}function f(t,n){var r=e.baseUrl+"/api/login";return new Promise(function(e,o){var i=new a.HttpRequest(a.HttpClient.POST,r,{},{email:t,password:n});(new a.HttpClient).send(i).then(function(t){if(t)if(t.statusCode>400)o(new Error("User email or password not correct"));else{var n=t.body;e(n.token)}else o(new Error("No response from angulardoc server"))}).catch(function(e){o(e)})})}function p(){var t=s.AngularDocSetting.getAngularDocConfiguration(),n=t.repoId,r=t.access_token,o=encodeURIComponent("/"),i=e.baseUrl+"/api/vscode/metadata/local/"+n+"/"+o;return new Promise(function(e,t){var n=new a.HttpRequest(a.HttpClient.DELETE,i,{Authorization:"Bearer "+r},{});(new a.HttpClient).send(n).then(function(t){e(t?t.statusCode>400?null:null:null)}).catch(function(t){console.log(JSON.stringify(t)),e(t)})})}function h(t,n,r){var o=s.AngularDocSetting.getAngularDocConfiguration();r||o.access_token;var i=e.baseUrl+"/api/vscode/local/"+t;return new Promise(function(e,t){if(r){var o=new a.HttpRequest(a.HttpClient.GET,i,{Authorization:"Bearer "+r,"x-angulardoc-upgradeid":n},{});(new a.HttpClient).send(o).then(function(t){if(t)if(t.statusCode>400)e(!1);else{var n=t.body;e(n.migration)}else e(!1)}).catch(function(t){e(!1)})}else e(!1)})}function g(t,n,r){var o=e.baseUrl+"/api/vscode/repos/local/"+t;return new Promise(function(e,t){var i=new a.HttpRequest(a.HttpClient.PUT,o,{Authorization:"Bearer "+r},{repoDetail:n});(new a.HttpClient).send(i).then(function(t){e(t?t.statusCode>400?null:!0:null)}).catch(function(t){console.log(JSON.stringify(t)),e(t)})})}function m(e){return new Promise(function(t,n){if(e&&e.indexOf("github.com")>=0){var r=e.split("#"),o=void 0;r[0].indexOf("github.com")>=0&&(o=(v(e,"github.com")||r[0]).split("/"));var i=o[o.length-2];""===i&&t(null);var a=o[o.length-1];""===a&&t(null),y(i,a).then(function(e){t(e)}).catch(function(e){return t(null)})}else t(null)})}function v(e,t){var n=e.indexOf(t)+t.length+1,r=e.substring(n);r=r.replace(".git","");var o=r.split("/");return"https://"+t.toString()+"/"+o[0]+"/"+o[1]}function y(e,t){var n=c.format("https://api.github.com/repos/%s/%s",e,t),r={url:n,headers:{"User-Agent":"AngularDoc"}};return new Promise(function(e,t){u.get(r,function(n,r,o){if(n&&t(n),r&&200==r.statusCode)if(r.body){var i=JSON.parse(r.body),a={repoType:"github",repoId:i.id,owner:i.owner,created_at:i.created_at,updated_at:i.updated_at,pushed_at:i.pushed_at,git_url:i.git_url,stargazers_count:i.stargazers_count,watchers_count:i.watchers_count,watchers:i.watchers,forks_count:i.forks_count,forks:i.forks,network_count:i.network_count,subscribers_count:i.subscribers_count},s=Object.assign({},{owner:i.owner.login,description:i.description,repoDetail:a});e(s)}else t(new Error("Could not get github response"));else t(new Error("Could not get github response"))})})}e.baseUrl=s.AngularDocSetting.getUserSettings().baseUrl||"https://angulardoc.io",e.getDefaultProject=t,e.signUp=n,e.getUserRepo=l,e.checkMigrationToken=d,e.login=f,e.clearTsMetadatas=p,e.updateRepoInfo=g,e.parseGithubUrl=m}(t.AngularDocAPI||(t.AngularDocAPI={}))},function(e,t,n){"use strict";function r(e){var t=e.expression.arguments;return t&&t.length?t[0].getText():null}function o(e){var t=e.decorators;if(t&&t.length>0){t[0].expression.arguments.forEach(function(e){e.properties.forEach(function(e){d.isPropertyAssignment(e)?i(e.initializer):d.isShorthandPropertyAssignment(e)||d.isSpreadAssignment(e)||d.isMethodDeclaration(e)})})}}function i(e){if(e)switch(e.kind){case d.SyntaxKind.ArrayLiteralExpression:return e.elements.map(function(e){return i(e)});case d.SyntaxKind.StringLiteral:case d.SyntaxKind.Identifier:return e.text;case d.SyntaxKind.TrueKeyword:return!0;case d.SyntaxKind.FalseKeyword:return!1;case d.SyntaxKind.NumberKeyword:case d.SyntaxKind.FirstLiteralToken:return Number(e.text);case d.SyntaxKind.NewExpression:var t=e;if("Date"===t.expression.text){var n=new Date;if(t.arguments){var r=t.arguments.filter(function(e){return void 0!==e.kind}),o=r.map(function(e){return i(e)});o.length>0&&(n=new Date(o))}return n.toISOString()}return;case d.SyntaxKind.ObjectLiteralExpression:var a=e,s={};return a.properties.forEach(function(e){s[e.name.text]=i(e.initializer||e.name)}),s;case d.SyntaxKind.CallExpression:var c=e,u={call:i(c.expression),arguments:[]};return c.arguments.forEach(function(e,t){u.arguments.push(i(e))}),u;case d.SyntaxKind.PropertyAccessExpression:var l=e;return{name:l.name.getText(),expression:i(l.expression)};case d.SyntaxKind.ConditionalExpression:default:return}}function a(e,t){var n=c(e,"bootstrap");if(!n)throw new Error("Cannot find bootstrap components in '"+t+"'");var r=n.getChildren(),o=r[r.length-1].getChildren(),i=o.slice(1,o.length-1)[0];if(!i)throw new Error("Cannot find bootstrap components in '"+t+"'");return i.getText()}function s(e,t,n){return e.properties.filter(function(e){return e.kind===d.SyntaxKind.PropertyAssignment}).filter(function(e){var r=e.name;switch(r.kind){case d.SyntaxKind.Identifier:return r.getText(t)===n;case d.SyntaxKind.StringLiteral:return r.text===n}return!1})[0]}function c(e,t){var n=e.getSourceFile(),r=f.getDecoratorMetadata(n,"NgModule","@angular/core"),o=r.find(function(t){for(var n=t;n&&n.parent!==e;)n=n.parent;return!!n});return o?s(o,n,t):null}function u(e){var t=c(e,"imports");if(t.initializer.kind===d.SyntaxKind.ArrayLiteralExpression)for(var n=t.initializer,r=0,o=n.elements;r<o.length;r++){var i=o[r];if(i.kind===d.SyntaxKind.CallExpression){var a=i,s=a.expression.getText(e);if(("RouterModule.forRoot"===s||"RouterModule.forChild"===s)&&a.arguments.length>0){var u=a.arguments[0];if(u.kind===d.SyntaxKind.ArrayLiteralExpression)return u.elements}}}return null}function l(e,t){var n=e.decorators;if(n)for(var r=0,o=n;r<o.length;r++){var i=o[r],a=i.expression,s=a.expression;if("NgModule"===s.text)for(var c=a.arguments[0],u=c.properties,l=0,d=u;l<d.length;l++){var f=d[l],p=f.name;if(p.text===t)return f}}return null}Object.defineProperty(t,"__esModule",{value:!0});var d=n(3),f=n(36);t.getDecoratorTextValue=r,t.getDecoratorInitializerValues=o,t.getInitializerValue=i,t.getBootstrapComponent=a,t.getMatchingProperty=c,t.getListOfRoutes=u,t.getMatchingPropertyV2=l},function(e,t,n){"use strict";function r(e){return s(this,void 0,void 0,function(){var t,n,n,n,t,t,t;return c(this,function(r){return e.nodeData instanceof f.Symbol?(t=u.Uri.file(e.nodeData.symbol.filePath),u.window.showTextDocument(t)):e.nodeData instanceof f.ProviderSymbol?(n=e.nodeData.getMetadata().token.identifier.reference.filePath,u.window.showTextDocument(u.Uri.file(n))):e.nodeData instanceof g.NgrxStoreModuleDef?(n=e.nodeData.getFilePath())&&u.window.showTextDocument(u.Uri.file(n)):e.nodeData instanceof g.NgrxEffectsModuleDef?(n=e.nodeData.getFilePath())&&u.window.showTextDocument(u.Uri.file(n)):e.nodeData instanceof g.NgrxReducerDef?(t=u.Uri.file(e.nodeData.sourceFile.fileName),u.window.showTextDocument(t)):e.nodeData instanceof g.NgrxStateDef?(t=u.Uri.file(e.nodeData.sourceFile.fileName),u.window.showTextDocument(t)):e.nodeData instanceof g.NgrxActionDef&&(t=u.Uri.file(e.nodeData.sourceFile.fileName),u.window.showTextDocument(t)),[2]})})}function o(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){return t=null,(t=d.isConstructorDeclaration(e.nodeData)?e.nodeData:(d.isClassElement(e.nodeData),e.nodeData.name))?(u.window.showTextDocument(e.rootUri).then(function(e){var n=e.document.positionAt(t.pos+1),r=e.document.positionAt(t.end),o=e.document.getText(new u.Range(n,r)),i=o.length-o.trim().length,a=e.document.positionAt(t.pos+1+i);e.selection=new u.Selection(a,r),e.revealRange(e.selection,u.TextEditorRevealType.Default)}),[2]):[2]})})}function i(e,t){return s(this,void 0,void 0,function(){var t,n,r,o,i,a,s,d;return c(this,function(c){switch(c.label){case 0:return[4,u.workspace.getConfiguration("angulardoc").get("schematics")];case 1:return t=c.sent(),t=m.concat(t).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),[4,u.window.showQuickPick(t.map(function(t){return p.hasSchematics(t)?{label:t,target:e}:null}).filter(function(e){return e}),{placeHolder:"Select the schematics command to execute"})];case 2:return(n=c.sent())?(r=p.getCommandsForSchematics(n.label),r&&0!==r.length?[4,u.window.showQuickPick(r.map(function(t){return{label:t.cmd,description:t.description,target:e}},{placeHolder:"Select the schematics command to execute"}))]:[2]):[3,4];case 3:if(o=c.sent()){if(!(i=u.workspace.workspaceFolders)&&0===i.length)return[2];"ng-add"===o.label?h.execNgAddCommand(i[0].uri.fsPath,n.label).catch(function(e){return u.window.showErrorMessage(e.message)}):o.target&&(a=null,o.target.nodeData?(s=o.target.nodeData,a="ng:project"===o.target.contextValue?l.join(i[0].uri.fsPath,s.sourceRoot,s.prefix):o.target.nodeData.symbol?o.target.nodeData.symbol.filePath:null):o.target&&(a=o.target.fsPath),d=o.target.contextValue,a&&h.execCommand(o.label,a,"@schematics/angular"===n.label?null:n.label,d).then(function(){e&&e.nodeData&&e.refresh()}).catch(function(e){return u.window.showErrorMessage(e.message)}))}c.label=4;case 4:return[2]}})})}function a(e,t){return s(this,void 0,void 0,function(){var t,n,r,o;return c(this,function(i){switch(i.label){case 0:return t=p.getCommandsForSchematics("@ngrx/schematics"),t&&0!==t.length?[4,u.window.showQuickPick(t.map(function(t){return{label:t.cmd,description:t.description,target:e}},{placeHolder:"Select the ngrx schematics command to execute"}))]:[2];case 1:return n=i.sent(),n&&(r=n.target.nodeData.symbol?n.target.nodeData.symbol.filePath:null,o=n.target.contextValue,h.execCommand(n.label,r,"@ngrx/schematics",o).catch(function(e){return u.window.showErrorMessage(e.message)})),[2]}})})}var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(1),d=n(3),f=n(7),p=n(4),h=n(24),g=n(11),m=["@schematics/angular","@ngrx/schematics","@angular/pwa","@ng-bootstrap/schematics","@angular/material","@clr/angular","@angular/elements"];t.openFileForNgNode=r,t.gotoDeclarationForDeclarationNode=o,t.execAngularCliCommands=i,t.execNgRxCommands=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2),c=n(1),u=n(3),l=n(4),d=n(10),f=n(7),p=n(11);!function(e){e[e.Root=0]="Root",e[e.Project=1]="Project",e[e.Application=2]="Application",e[e.NgModule=3]="NgModule",e[e.Component=4]="Component",e[e.Directive=5]="Directive",e[e.Provider=6]="Provider",e[e.Unknown=7]="Unknown"}(t.NodeType||(t.NodeType={}));var h=function(e,t){return e.label<t.label?-1:e.label>t.label?1:0},g=function(){function e(e,t,n,r,o,i,a){this.parentNode=e,this.rootUri=t,this.nodeData=n,this.label=r,this.contextValue=o,this.collapsibleState=i,this.eventEmitter=a}return e.prototype.getTreeItem=function(e){var t=null;return this.nodeData instanceof f.Symbol?t=c.relative(this.rootUri.path,this.nodeData.symbol.filePath):this.nodeData instanceof f.ProviderSymbol?t=c.relative(this.rootUri.path,this.nodeData.getMetadata().token.identifier.reference.filePath):this.nodeData instanceof a.Uri&&(t=a.workspace.asRelativePath(this.nodeData)),{label:this.label,collapsibleState:this.collapsibleState,iconPath:{light:e.asAbsolutePath(c.join("images","resources","light",this.getIconName())),dark:e.asAbsolutePath(c.join("images","resources","dark",this.getIconName()))},tooltip:t?this.label+" - "+t:this.label,contextValue:this.contextValue,command:{command:"angular.explorer.open",title:"Open File",arguments:[this]}}},e.prototype.getChildren=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,[]]})})},e.prototype.getIconName=function(){return this.contextValue.replace(":","-")+".svg"},e.prototype.refresh=function(){a.commands.executeCommand("angular.explorer.refresh",this)},e}();t.NgNode=g;var m=function(e){function t(t,n,r){var o=e.call(this,null,t,n,r,"ng:cli6",a.TreeItemCollapsibleState.Expanded)||this;return o.rootUri=t,o.nodeData=n,o.label=r,o}return r(t,e),t.prototype.getChildren=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o=this;return i(this,function(i){return e=c.join(this.rootUri.fsPath,"angular.json"),t=JSON.parse(s.readFileSync(e,"utf-8")),n=t.projects||{},r=Object.keys(n).filter(function(e){return n[e]&&n[e].architect&&n[e].architect.build}).map(function(e){return new v(o,o.rootUri,n[e],e,o.eventEmitter)}),[2,r]})})},t}(g);t.NgCliNode=m;var v=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ng:project",a.TreeItemCollapsibleState.Expanded,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t.prototype.getChildren=function(){return o(this,void 0,void 0,function(){var e=this;return i(this,function(t){return this.modules?[2,this.modules]:[2,new Promise(function(t,n){var r=c.join(e.rootUri.fsPath,e.nodeData.architect.build.options.tsConfig),o=c.join(e.rootUri.fsPath,e.nodeData.root,e.nodeData.sourceRoot||"");l.loadProject(r,function(e){return console.error(e)}).then(function(n){e.modules=n.getModules().filter(function(e){return l.formatPath(e.symbol.filePath).startsWith(o)}).map(function(t){return new x(e,e.rootUri,t,t.symbol.name,e.eventEmitter)}).sort(h),t(e.modules)})})]})})},t.prototype.getTreeItem=function(t){var n=e.prototype.getTreeItem.call(this,t),r=c.join(this.rootUri.path,this.nodeData.root,this.nodeData.sourceRoot||"");return n.tooltip=this.label+" ("+this.nodeData.projectType+") - "+r,n},t}(g);t.NgProjectNode=v;var y=function(e){function t(t,n,r,o){var i=e.call(this,null,t,n,r,"ng:project",a.TreeItemCollapsibleState.Expanded,o)||this;return i.rootUri=t,i.nodeData=n,i.label=r,i.eventEmitter=o,i}return r(t,e),t.prototype.getChildren=function(){return o(this,void 0,void 0,function(){var e=this;return i(this,function(t){return[2,new Promise(function(t,n){var r=c.join(e.rootUri.fsPath,"tsconfig.json"),o=c.join(e.rootUri.fsPath,"src");l.loadProject(r,function(e,t){return a.window.showErrorMessage("Error occurred while processing the project at "+t+": "+e)}).then(function(n){var r=n.getModules().filter(function(e){return e.symbol.filePath.startsWith(o)});t(r.map(function(t){return new x(e,e.rootUri,t,t.symbol.name,e.eventEmitter)}))})})]})})},t.prototype.getTreeItem=function(t){var n=e.prototype.getTreeItem.call(this,t),r=c.join(this.rootUri.path,"src");return n.tooltip=this.label+" - "+r,n},t}(g);t.TsConfigProjectNode=y;var x=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ng:module",a.TreeItemCollapsibleState.Collapsed,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t.prototype.getNgRxNodes=function(){var e=this,t=this.nodeData,n=[],r=[],o=t.symbol.filePath,i=u.createSourceFile(o,s.readFileSync(o).toString(),u.ScriptTarget.Latest),a=d.getClassDefinition(i);if(a.length>0)for(var c=p.getNgrxAnalyzer(i),l=0,f=a;l<f.length;l++){var h=f[l],g=c.getStoreModules(h);g.forEach(function(t){n.push(new k(e,e.rootUri,t,t.name,e.eventEmitter))});var m=c.getEffectsModules(h);m.forEach(function(t){r.push(new P(e,e.rootUri,t,t.name,e.eventEmitter))})}return n.concat(r)},t.prototype.getChildren=function(){return o(this,void 0,void 0,function(){var e,t,n,r,o=this;return i(this,function(i){return e=this.nodeData,t=e.getDeclaredDirectives().map(function(e){return e.isComponent?new w(o,o.rootUri,e,e.symbol.name,o.eventEmitter):new b(o,o.rootUri,e,e.symbol.name,o.eventEmitter)}).sort(h),n=e.getProviders().filter(function(e){return!!e.getMetadata().token.identifier&&!e.getMetadata().token.identifier.reference.filePath.includes("node_modules")}).map(function(e){return new D(o,o.rootUri,e,e.getMetadata().token.identifier.reference.name,o.eventEmitter)}),r=e.getDeclaredPipes().map(function(e){return new S(o,o.rootUri,e,e.symbol.name,o.eventEmitter)}),[2,t.concat(n,r)]})})},t}(g);t.NgModuleNode=x;var w=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ng:component",a.TreeItemCollapsibleState.None,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t}(g);t.ComponentNode=w;var b=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ng:directive",a.TreeItemCollapsibleState.None,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t}(g);t.DirectiveNode=b;var S=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ng:pipe",a.TreeItemCollapsibleState.None,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t}(g);t.PipeNode=S;var D=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ng:provider",a.TreeItemCollapsibleState.None,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t}(g);t.ProviderNode=D;var C=function(e){function t(t,n,r){var o=e.call(this,null,t,n,u.isIdentifier(n.name)?n.name.text:n.name.toString(),"ts:"+u.SyntaxKind[n.kind].toLowerCase(),n.kind===u.SyntaxKind.ClassDeclaration?a.TreeItemCollapsibleState.Expanded:a.TreeItemCollapsibleState.None,r)||this;return o.rootUri=t,o.declaration=n,o.eventEmitter=r,o}return r(t,e),t.prototype.getChildren=function(){return o(this,void 0,void 0,function(){var t,n,r=this;return i(this,function(o){return t=this.nodeData,t&&t.kind===u.SyntaxKind.ClassDeclaration?(n=[],t.members.forEach(function(e){var t=e.name?e.name.text:"";switch(e.kind){case u.SyntaxKind.Constructor:var o=e;n.push(new N(r,r.rootUri,o,"constructor()","constructor() - Constructor"));break;case u.SyntaxKind.PropertyDeclaration:var i=e;n.push(new N(r,r.rootUri,i,t,t+" - Property"));break;case u.SyntaxKind.MethodDeclaration:var a=e;n.push(new N(r,r.rootUri,a,t+"()",t+" - Method"));break;case u.SyntaxKind.GetAccessor:var s=e;n.push(new N(r,r.rootUri,s,t,t+" - Getter"));break;case u.SyntaxKind.SetAccessor:var c=e;n.push(new N(r,r.rootUri,c,t,t+" - Setter"));break;case u.SyntaxKind.IndexSignature:var l=e;n.push(new N(r,r.rootUri,l,t,t+" - Index signature"));break;case u.SyntaxKind.SemicolonClassElement:case u.SyntaxKind.MissingDeclaration:}}),[2,n]):[2,e.prototype.getChildren.call(this)]})})},t.prototype.getTreeItem=function(e){var t=this.nodeData;return{label:this.label,collapsibleState:this.collapsibleState,iconPath:{light:e.asAbsolutePath(c.join("images","resources","light",this.getIconName())),dark:e.asAbsolutePath(c.join("images","resources","dark",this.getIconName()))},tooltip:this.label+" - "+u.SyntaxKind[t.kind],contextValue:this.contextValue,command:{command:"angular.outline.goto",title:"Go to Declaration",arguments:[this]}}},t}(g);t.TsDeclarationNode=C;var N=function(e){function t(t,n,r,o,i,s){var c=e.call(this,t,n,r,o,"ts:"+u.SyntaxKind[r.kind].toLowerCase(),a.TreeItemCollapsibleState.None,s)||this;return c.parentNode=t,c.rootUri=n,c.element=r,c.label=o,c.tooltip=i,c.eventEmitter=s,c}return r(t,e),t.prototype.getTreeItem=function(e){return{label:this.label,collapsibleState:this.collapsibleState,iconPath:{light:e.asAbsolutePath(c.join("images","resources","light",this.getIconName())),dark:e.asAbsolutePath(c.join("images","resources","dark",this.getIconName()))},tooltip:this.tooltip||this.label,command:{command:"angular.outline.goto",title:"Go to Declaration",arguments:[this]}}},t}(g);t.TsClassElementNode=N;var k=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ngrx:store",a.TreeItemCollapsibleState.Collapsed,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t.prototype.getChildren=function(){return o(this,void 0,void 0,function(){var e,t,n=this;return i(this,function(r){return e=[],t=this.nodeData.getReducerMap(),t.forEach(function(t,r){e.push(new E(n,n.rootUri,t,r,n.eventEmitter))}),[2,e]})})},t}(g);t.NgrxStoreNode=k;var E=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ngrx:reducer",a.TreeItemCollapsibleState.Collapsed,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t.prototype.getChildren=function(){return o(this,void 0,void 0,function(){var e,t,n,r=this;return i(this,function(o){return e=[],t=this.nodeData.getStateMap(),t.forEach(function(t,n){e.push(new _(r,r.rootUri,t,n,r.eventEmitter))}),n=this.nodeData.getActionMap(),n.forEach(function(t,n){e.push(new F(r,r.rootUri,t,n,r.eventEmitter))}),[2,e]})})},t}(g);t.NgrxReducerNode=E;var P=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ngrx:effects",a.TreeItemCollapsibleState.None,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t}(g);t.NgrxEffectsNode=P;var _=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ngrx:state",a.TreeItemCollapsibleState.None,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t}(g);t.NgrxStateNode=_;var F=function(e){function t(t,n,r,o,i){var s=e.call(this,t,n,r,o,"ngrx:action",a.TreeItemCollapsibleState.None,i)||this;return s.parentNode=t,s.rootUri=n,s.nodeData=r,s.label=o,s.eventEmitter=i,s}return r(t,e),t}(g);t.NgrxActionNode=F},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(){function e(e,t,n,r){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];this.method=e,this.url=t,this.headers=n,this.json=r,this.token=o[0]}return e}();t.HttpRequest=o;var i=function(){function e(e,t,n,r){this.statusCode=e,this.statusMessage=t,this.headers=n,this.body=r}return e}();t.HttpResponse=i;var a=function(){function e(){}return e.prototype.send=function(e){var t=e.url;e.token&&(t=t+"?access_token="+e.token);var n={url:encodeURI(decodeURI(t)),method:e.method,headers:e.headers,json:e.json,timeout:3e4};return new Promise(function(e,t){r(n,function(n,r,o){if(n)return void t(n);e(new i(r.statusCode,r.statusMessage,r.headers,o))})})},e.getHeaderValue=function(e,t){if(e)for(var n in e)if(n.toLowerCase()===t.toLowerCase())return e[n];return null},e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.PUT="PUT",e}();t.HttpClient=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=function(){function e(){}return e.openFileInEditor=function(e){r.workspace.openTextDocument(e).then(function(e){e&&r.window.showTextDocument(e).then(function(e){})})},e.directoryExists=function(e){try{return o.statSync(e).isDirectory()}catch(e){return!1}},e}();t.WorkspaceUtils=i},function(e,t){e.exports=require("child_process")},function(e,t){e.exports=require("comment-json")},function(e,t,n){"use strict";function r(e){if(p.existsSync(h.join(i.workspace.rootPath,"package.json"))){JSON.parse(p.readFileSync(h.join(i.workspace.rootPath,"package.json"),"utf-8")).name}var t=[];i.workspace.findFiles("**/package.json","**/node_modules",10).then(function(e){for(var n=0,r=e.length;n<r;n++){var o=e[n];console.log("Verifying "+o.fsPath+" ...");var i=JSON.parse(p.readFileSync(o.fsPath,"utf-8"));if(i.dependencies&&i.dependencies["@angular/core"]){t.push(!0);break}}}).then(function(){t.length>0?o(e):i.workspace.findFiles("**/@angular/core/package.json").then(function(t){t.length>0&&o(e)})})}function o(e){a.AngularDocSetting.activate(e),c.activate(e),u.activate(e),l.activate(e),d.activate(e),s.activate(e);var t=new f.NgdocStatusBar;e.subscriptions.push(t),console.log("Activated AngularDoc")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(5),s=n(9),c=n(26),u=n(31),l=n(29),d=n(30),f=n(34),p=n(2),h=n(1);t.activate=r},function(e,t,n){"use strict";function r(e,t,n,r){var o="",i="",a=r;process.env.PWD=a,n=n.filter(function(e){return void 0!==e});var s=([e.silent&&"silent",e.waitForMatch&&"matching("+e.waitForMatch+")"].filter(function(e){return!!e}).join(", ").replace(/^(.+)$/," [$1]"),{cwd:a}),c=t,u=[t].concat(n);g.getOutputChannel(t,u.join(" ")),process.platform.startsWith("win")&&(n.unshift("/c",t),t="cmd.exe",s.stdio="pipe");var l=h.spawn(t,n,s);l.stdout.on("data",function(t){o+=t.toString("utf-8"),e.silent||t.toString("utf-8").split(/[\n\r]+/).filter(function(e){return""!==e}).forEach(function(e){return g.getOutputChannel(c,"  "+e)})}),l.stderr.on("data",function(e){i+=e.toString("utf-8"),e.toString("utf-8").split(/[\n\r]+/).filter(function(e){return""!==e}).forEach(function(e){return g.getOutputChannel(c,"  "+e)})}),m.push(l);var d=new Error('Error occurred while running "'+t+" "+n.join(" ")+'":\n');return new Promise(function(t,n){l.on("exit",function(e){m=m.filter(function(e){return e!==l}),e?(d.message+=""+o,g.getOutputChannel(c,d.message),n(d)):t(o)}),e.waitForMatch&&l.stdout.on("data",function(n){n.toString().match(e.waitForMatch)&&t(o)})})}function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r({},e,t,"")}function i(e,t,n){return r({waitForMatch:n},e,t,"")}function a(e,t,n){return r({silent:!0,waitForMatch:n},e,t,"")}function s(e,t){return"build"==e[0]?c(e,t):r({},"ng",e,t)}function c(e,t){return r({silent:!0},"ng",e,t)}function u(e,t){return r({silent:!0},"npm",e,t)}function l(e,t){return r({},"npm",e,t)}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r({},"node",e,"")}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r({},"git",e,"")}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r({silent:!0},"git",e,"")}Object.defineProperty(t,"__esModule",{value:!0});var h=n(20),g=n(9),m=[];t.exec=o,t.execAndWaitForOutputToMatch=i,t.silentExecAndWaitForOutputToMatch=a,t.ng=s,t.silentNg=c,t.silentNpm=u,t.npm=l,t.node=d,t.git=f,t.silentGit=p},function(e,t,n){"use strict";function r(e,t,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),s(this,void 0,void 0,function(){var i,s;return c(this,function(c){switch(c.label){case 0:return[4,u.window.showInputBox({placeHolder:"Please enter the name and arguments",value:e})];case 1:if(i=c.sent(),s=[],s=/(^\s+)|(\s+$)|\s+/g.test(i.trim())?i.split(" "):[i],!s[0]||/[~`!#$%\^&*+=\[\]\\';,\/{}|\\":<>\?\s]/g.test(s[0]))throw new Error("Not a valid name (no whitespaces or special characters allowed)");return s.length>0?null!=n?[3,3]:[4,o(t,e,s,r)]:[3,5];case 2:return c.sent(),u.window.showInformationMessage("Successfully created "+e+" <"+s[0]+">"),[3,5];case 3:return null==n?[3,5]:[4,a(t,e,s,n,r)];case 4:c.sent(),u.window.showInformationMessage("Successfully created "+e+" <"+s[0]+">"),c.label=5;case 5:return[2]}})})}function o(e,t,n,r){var o=f.basename(e);d.statSync(e).isFile()&&(e=f.resolve(e,".."));var i=["generate",t];return i=i.concat(n),"ng:module"===r&&o&&-1===i.indexOf("--module")&&(i=i.concat(["--module",o])),l.ng(i,e)}function i(e,t){var n=["add",t];return l.ng(n,e)}function a(e,t,n,r,o){var i=["generate",r?r+":"+t:t];"@angular/material"===r&&n.unshift("--name"),i=i.concat(n);var a=f.basename(e);return d.statSync(e).isFile()&&(e=f.resolve(e,"..")),"ng:module"===o&&a&&-1===i.indexOf("--module")&&(i=i.concat(["--module",a])),l.ng(i,e)}var s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=n(23),d=n(2),f=n(1);t.execCommand=r,t.cliCmd=o,t.execNgAddCommand=i,t.schematicCmd=a},function(e,t,n){"use strict";function r(e){return g.Uri.file(m.join(__dirname,"..","front-end",e)).toString()}function o(e){return g.Uri.file(m.join(__dirname,"..","new_browser",e)).toString()}function i(e,t,n){var i=x.AngularDocSetting.getAngularDocConfiguration(),a=i.repoId;return'\n    <body style="width:100%;height:100vh;margin:0;padding:0;">\n        <script src="'+o(m.join("lib","jquery.min.js"))+'"><\/script>\n        <script src="'+o("index.js")+'"><\/script>\n        <a class="openFile" id="openFile" style="display:none;" href=""></a>\n        <a class="openCopilot" id="openCopilot" style="display:none;" href=""></a>\n        <input type="hidden" id="repoId" value='+a+' />\n        <input type="hidden" id="repoType" value="local" />\n        <iframe width="100%" height="100%" frameborder="0" scrolling="auto" src=\''+r(m.join("dist","index-vscode.html"))+"'>\n        </iframe>\n    </body>\n    "}function a(){var e=g.window.activeTextEditor;return e&&e.document?(g.commands.executeCommand("vscode.executeDocumentSymbolProvider",e.document.uri).then(function(e){e.forEach(function(e){console.log(e)})}),c()):p("No outline available.")}function s(){var e=g.window.activeTextEditor;return e&&g.languages.match(v.TS_MODE,e.document)?c():p("Not available for non-TypeScript files.")}function c(){var e=g.window.activeTextEditor,t=e.document,n=g.workspace.rootPath,r=e.document.fileName,o=y.Ng2Util.getMeta(n,r),i=y.Ng2Util.parseMeta(o),a="color:#DCDCAA;text-decoration:none;line-height:150%",s='\n        <body>\n            <div class="view-line">\n                <h4 style="color:#9cdcfe">'+i.name+"</h4>\n                <hr>\n    ";if(i.decorators){s+='\n            <h4 style="color:#9cdcfe">Decorators</h4>\n            <ul>\n        ';for(var c=0,p=i.decorators;c<p.length;c++){var m=p[c];s+='\n                <li><a style="'+a+'" href="'+encodeURI("command:ngdoc.revealRange?"+JSON.stringify([t.uri,h(m.pos)]))+'">'+m.name+"</a></li>\n            "}s+="\n            </ul>\n        "}if((i.extends||i.implements)&&(s+='\n            <h4 style="color:#9cdcfe">Heritages</h4>\n            <ul>\n        ',i.extends&&(s+='\n                <li><span style="color:#c586c0">Extends: </span><span>'+d(i.extends)+"</span></li>\n            "),i.implements&&(s+='\n                <li><span style="color:#c586c0">Implements: </span><span>'+f(i.implements)+"</span></li>\n                </ul>\n            ")),i.methods){s+='\n            <h4 style="color:#9cdcfe">Methods</h4>\n            <ul>\n        ';for(var v=0,x=i.methods;v<x.length;v++){var w=x[v];s+='\n                <li><a style="'+a+'" href="'+encodeURI("command:ngdoc.revealRange?"+JSON.stringify([t.uri,h(w.pos)]))+'">'+u(w)+"</a></li>\n            "}s+="\n            </ul>\n        "}if(i.properties){s+='\n            <h4 style="color:#9cdcfe">Properties</h4>\n            <ul>\n        ';for(var b=0,S=i.properties;b<S.length;b++){var D=S[b];s+='\n                <li><a style="'+a+'" href="'+encodeURI("command:ngdoc.revealRange?"+JSON.stringify([t.uri,h(D.pos)]))+'">'+l(D)+"</a></li>\n            "}}return s+="\n        </div>\n    </body>\n    "}function u(e){var t="";if(e.name&&(t=e.name),e.parameters){var n="";for(var r in e.parameters)n+="arg"+r+": "+e.parameters[r]+", ";n=n.substring(0,n.lastIndexOf(",")),t+="("+n+")"}else t+="()";return t}function l(e){var t="";return e.name&&(t+=e.name),e.type&&(t+=": "+e.type),e.dataType&&"Array"===e.dataType&&(t+="[]"),t}function d(e){return e?e.substring(e.indexOf("#")+1,e.length):""}function f(e){var t="";if(e){for(var n=0,r=e;n<r.length;n++){var o=r[n];t+=o.substring(o.indexOf("#")+1,o.length)+", "}t=t.substring(0,t.lastIndexOf(","))}return t}function p(e){return"\n        <body>\n            "+e+"\n        </body>"}function h(e){var t=g.window.activeTextEditor,n=t.document,r=n.positionAt(e);return n.lineAt(r).lineNumber+1}Object.defineProperty(t,"__esModule",{value:!0});var g=n(0),m=n(1),v=n(8),y=n(33),x=n(5);n(37).htmlEncode,g.workspace.rootPath;t.generateView=i,t.generateSymbolOutlineView=a,t.generateOutlineView=s},function(e,t,n){"use strict";function r(e){function t(e,t){var n;switch(process.platform){case"darwin":n="open";break;case"win32":n='start ""';break;default:n=a.join(__dirname,"../vendor/xdg-open")}return process.env.SUDO_USER&&(n="sudo -u "+process.env.SUDO_USER+" "+n),p.spawn(n,[e],t)}function n(){var e=[{label:"Open in Angular Copilot",type:"1",description:"open in Angular Copilot and get more details"},{label:"Download Angular Copilot",type:"2",description:"download Angular Copilot"}];u.AngularDocSetting.getWorkspaceConfiguration().access_token&&e.push({label:"Logout AngularDoc",type:"3",description:"logout from angulardoc.io"}),o.window.showQuickPick(e).then(function(e){e&&("1"===e.type?o.commands.executeCommand("copilot:open"):"2"===e.type?o.commands.executeCommand("copilot:download"):"3"===e.type&&o.commands.executeCommand("ngdoc.logout"))})}var r=new m,s=o.workspace.registerTextDocumentContentProvider(l.ngdocScheme,r);o.window.onDidChangeActiveTextEditor(function(e){e&&(e.document.uri===h&&r.update(h),e.document===o.window.activeTextEditor.document&&r.update(g))}),o.commands.registerCommand("copilot:download",function(){o.commands.executeCommand("vscode.open",o.Uri.parse("https://angulardoc.github.io/#/products/"))});var v=o.commands.registerCommand("ngdoc",function(){var e=a.join(o.workspace.rootPath,".angulardoc.json");if(i.existsSync(e))try{var t=JSON.parse(i.readFileSync(e).toString());t.migrate_from&&t.migrate_from.repoId&&t.migrate_from.token?o.commands.executeCommand("ngdoc.signIn",!0):n()}catch(e){n()}else n()});e.subscriptions.push(v,s);var y=o.commands.registerCommand("copilot:open",function(){var e=o.workspace.rootPath,n=u.AngularDocSetting.getAngularDocConfiguration().repoId,r="copilot://vscode/"+n+"/"+encodeURIComponent(e),i=JSON.parse(JSON.stringify(process.env));delete i.ATOM_SHELL_INTERNAL_RUN_AS_NODE,delete i.ELECTRON_RUN_AS_NODE,t(r,{env:i})});e.subscriptions.push(y);var x=o.commands.registerCommand("ngdoc.openEditor",function(e){var t=a.join(o.workspace.rootPath,d.AngularDocAPI.getDefaultProject(),e);return c.WorkspaceUtils.openFileInEditor(t)});e.subscriptions.push(x);var w=o.commands.registerCommand("ngdoc.signIn",function(e){u.AngularDocSetting.getWorkspaceConfiguration().access_token?n():o.window.showInputBox({placeHolder:"Please enter the AngularDoc login email ",value:""}).then(function(e){/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e)?o.window.showInputBox({placeHolder:"Please enter AngularDoc password ",password:!0}).then(function(t){d.AngularDocAPI.login(e,t).then(function(t){u.AngularDocSetting.saveUserSettings(e,t).then(function(){f.signIn(t)})}).catch(function(e){o.window.showErrorMessage(e.message)})}):o.window.showErrorMessage("Not a valid email")})});e.subscriptions.push(w);var b=o.commands.registerCommand("ngdoc.signUp",function(e){var t=e.email,n=e.password,r=e.token;d.AngularDocAPI.getUserRepo(t,n,t,r).then(function(){}).catch(function(e){o.window.showErrorMessage(e)})});e.subscriptions.push(b);var S=o.commands.registerCommand("ngdoc.refresh",function(){d.AngularDocAPI.clearTsMetadatas().then(function(){u.AngularDocSetting.saveLastSync(0,!0)})});e.subscriptions.push(S);var D=o.commands.registerCommand("ngdoc.selectDashboardView",function(e){r.selectDashboardView(e)});e.subscriptions.push(D);var C=o.commands.registerCommand("ngdoc.logout",function(){f.removeExpiredToken()});e.subscriptions.push(C);var N=o.commands.registerCommand("ngdoc.loginError",function(e){e=JSON.parse(e);var t=e.message||e.responseText||e.error;o.window.showErrorMessage(t)});e.subscriptions.push(N);var k=o.commands.registerCommand("ngdoc.revealRange",function(e,t){for(var n=0,r=o.window.visibleTextEditors;n<r.length;n++){var i=r[n];if(i.document.uri.toString()===e.toString()){var a=i.document.lineAt(t-1).range;i.selection=new o.Selection(a.start,a.end),i.revealRange(a)}}});e.subscriptions.push(k)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(2),a=n(1),s=n(25),c=n(19),u=n(5),l=n(8),d=n(14),f=n(9),p=n(20),h=o.Uri.parse(l.ngdocScheme+"://editors/angulardoc?x="+(new Date).getTime().toString()),g=o.Uri.parse(l.ngdocScheme+"://editors/outline"),m=function(){function e(){this._onDidChange=new o.EventEmitter,this.viewName=""}return e.prototype.provideTextDocumentContent=function(e,t){if(e.scheme==h.scheme&&e.authority==h.authority&&e.path==h.path){var n=u.AngularDocSetting.getUserSettings(),r=!!n.access_token&&""!=n.access_token,o=!!n.email,i=this.viewName||"overview";return s.generateView(r,o,i)}return e.toString()==g.toString()?s.generateOutlineView():""},Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!0,configurable:!0}),e.prototype.update=function(e){this._onDidChange.fire(e)},e.prototype.selectDashboardView=function(e){this.viewName=e},e}();t.activate=r},function(e,t,n){"use strict";function r(e,t,n){var r=f.relative(t,n);if(e){if("@angular"==e.substr(0,"@angular".length))return e;var o=f.dirname(r),i=f.join(o,e),a=f.resolve(t,i);return d.existsSync(a)||d.existsSync(a+".ts")?i:e}return""}function o(e){if(e)switch(e.kind){case l.SyntaxKind.StringKeyword:return"String";case l.SyntaxKind.BooleanKeyword:return"Boolean";case l.SyntaxKind.NumberKeyword:return"Number";case l.SyntaxKind.AnyKeyword:return"Any";case l.SyntaxKind.ArrayType:return"Array";case l.SyntaxKind.TypeReference:return e.typeName.text}return"Any"}function i(e,t,n){if(Array.isArray(e))for(var r=0,o=e;r<o.length;r++){var i=o[r];if(i.loadChildren){var s=i.loadChildren,c=a(s,t,n);i.loadChildren=c}}}function a(e,t,n){var r="";if(e){var o=void 0,i=void 0;e.indexOf("#")>=0?(o=e.substring(0,e.lastIndexOf("#"))+".ts",i=e.substring(e.indexOf("#")+1,e.length)):o=e+".ts";for(var a=f.dirname(t),s=a+"/"+o,c=!0;!d.existsSync(s);)if(a=a.substring(0,a.lastIndexOf("/")),s=""===a?o:a+"/"+o,""===a){c=!1;break}if(c){var u=f.relative(n,s);r=u.substring(0,u.lastIndexOf(".ts")),i&&(r=r+"#"+i)}}return r}function s(e){if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t++){if(!c(n[t]))return!1}return!0}return c(e)}function c(e){var t=Object.keys(e);if(t&&t.length>0){for(var n=0,r=0,o=t;r<o.length;r++){var i=o[r];g.indexOf(i)>=0&&n++}return t.length===n}return!1}Object.defineProperty(t,"__esModule",{value:!0});var u=n(6),l=n(3),d=n(2),f=n(1),p=n(40),h=l.ModifierFlags?function(e){return!!(l.getCombinedModifierFlags(e)&l.ModifierFlags.Export)}:function(e){return!!(e.flags&l.NodeFlags.Export)},g=(l.ModifierFlags,l.SyntaxKind.SpreadElement||l.SyntaxKind.SpreadElementExpression,["path","pathMatch","component","redirectTo","outlet","canActivate","canActivateChild","canDeactivate","data","resolve","children","loadChildren"]),m=function(){function e(e){this.projectDir=e,this.metaCollector=new u.MetadataCollector}return e.prototype.getMeta=function(e,t){var n;try{n=this.metaCollector.getMetadata(e,t),n&&this.postHandle(n,e,t)}catch(e){e&&(n=null)}return n},e.prototype.getAllMeta=function(e,t){var n=this;return p.Observable.create(function(r){e.forEach(function(e){n.getMeta(e,t);r.next(e)}),r.complete()})},e.prototype.buildSymbol=function(e){var t=this,n=new Map;["Object","Function","String","Number","Array","Boolean","Map","NaN","Infinity","Math","Date","RegExp","Error","Error","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","JSON","ArrayBuffer","DataView","Int8Array","Uint8Array","Uint8ClampedArray","Uint16Array","Int16Array","Int32Array","Uint32Array","Float32Array","Float64Array","Any"].forEach(function(e){return n.set(e,{__symbolic:"reference",name:e})});var o=function(e){return e.replace(/^['"]|['"]$/g,"")},i=function(a){switch(a.kind){case l.SyntaxKind.ClassDeclaration:var s=a,c=f.relative(t.projectDir,e.fileName);n.set(s.name.text,{__symbolic:"reference",module:c.substring(0,c.lastIndexOf(".ts")),name:s.name.text});break;case l.SyntaxKind.ImportEqualsDeclaration:var u=a;if(u.moduleReference.kind===l.SyntaxKind.ExternalModuleReference){var d=u.moduleReference;d.expression.parent||(d.expression.parent=d,d.parent=e);var p=r(o(d.expression.getText()),t.projectDir,e.fileName);n.set(u.name.text,{__symbolic:"reference",module:p})}else n.set(u.name.text,{__symbolic:"error",message:"Unsupported import syntax"});break;case l.SyntaxKind.ImportDeclaration:var h=a;if(!h.importClause)break;h.moduleSpecifier.parent||(h.moduleSpecifier.parent=h,h.parent=e);var g=r(o(h.moduleSpecifier.getText()),t.projectDir,e.fileName);h.importClause.name&&n.set(h.importClause.name.text,{__symbolic:"reference",module:g,default:!0});var m=h.importClause.namedBindings;if(m)switch(m.kind){case l.SyntaxKind.NamedImports:for(var v=0,y=m.elements;v<y.length;v++){var x=y[v];n.set(x.name.text,{__symbolic:"reference",module:g,name:x.propertyName?x.propertyName.text:x.name.text})}break;case l.SyntaxKind.NamespaceImport:n.set(m.name.text,{__symbolic:"reference",module:g})}}l.forEachChild(a,i)};return e&&l.forEachChild(e,i),n},e.prototype.postHandle=function(e,t,n){var r=this,o=this.buildSymbol(t);this.handleFileLocation(e,t);var i=new Map;l.forEachChild(t,function(e){switch(e.kind){case l.SyntaxKind.ExportDeclaration:var t=e,n=t.moduleSpecifier,r=t.exportClause;n||r.elements.forEach(function(e){var t=e.name.text,n=(e.propertyName||e.name).text;i.set(n,t)})}});var a=function(e){return i.has(e.text)},s=function(e){return h(e)||a(e.name)};l.forEachChild(t,function(n){switch(n.kind){case l.SyntaxKind.ClassDeclaration:var i=n;if(i.name){var a=i.name.text;if(s(i)){for(var c=0,d=i.members;c<d.length;c++){var f=d[c];switch(f.kind){case l.SyntaxKind.Constructor:case l.SyntaxKind.MethodDeclaration:var p=f;r.handleMethod(e,p,o,a);break;case l.SyntaxKind.PropertyDeclaration:case l.SyntaxKind.GetAccessor:case l.SyntaxKind.SetAccessor:var g=f;u.isMetadataError(g)||r.handleProperty(e,g,o,a)}}i.heritageClauses&&r.handleHeritageClause(e,i.heritageClauses,o,a),r.updateDecoratorMembers(e,a,t)}}break;case l.SyntaxKind.VariableStatement:var m=n;if(h(m))for(var v=0,y=m.declarationList.declarations;v<y.length;v++){var x=y[v];if(x.name.kind==l.SyntaxKind.Identifier){var w=x.name.text;r.handleSpreadStatement(e,w,t),r.handleVariableStatement(e,x,t)}}}}),this.resolveRelativePath(e,this.projectDir,t)},e.prototype.handleFileLocation=function(e,t){var n=f.relative(this.projectDir,t.fileName);n.endsWith(".ts")&&(n=n.substring(0,n.lastIndexOf(".ts"))),e.file=n},e.prototype.handleDecorators=function(e,t,n,o){var i=e.metadata,a=i[n];if(a.decorators)for(var s=0,c=a.decorators;s<c.length;s++){var u=c[s];if(u.arguments)for(var l=0,d=u.arguments;l<d.length;l++){var f=d[l];if(f[o])for(var p=0,h=f[o];p<h.length;p++){var g=h[p];if("reference"===g.__symbolic){var m=g.module,v=r(m,this.projectDir,t.fileName);g.module=v}else if("select"===g.__symbolic){var y=g.expression,m=y.module,v=r(m,this.projectDir,t.fileName);y.module=v}}}}},e.prototype.updateDecoratorMembers=function(e,t,n){var r=e.metadata,o=r[t];if(o.decorators)for(var i=0,a=o.decorators;i<a.length;i++){var s=a[i];if(s.arguments)for(var c=0,u=s.arguments;c<u.length;c++){var l=u[c];if(l.declarations)for(var d=0,f=l.declarations;d<f.length;d++){var p=f[d];if("select"===p.__symbolic){var h=p.expression,g=p.member;p.member=this.resolveMember(h,g,n)}}}}},e.prototype.handleVariableStatement=function(e,t,n){var r=e.metadata,o=t.name.text,a=r[o],c=a.arguments;if(c&&c.length>0)for(var u=0,l=c;u<l.length;u++){var d=l[u];s(d)&&i(d,n.fileName,this.projectDir)}},e.prototype.handleSpreadStatement=function(e,t,n){var r=e.metadata,o=r[t],i=o.arguments,a=[];if(arguments&&Array.isArray(i)){for(var s=0,c=i;s<c.length;s++){var u=c[s],l=[];a.push(l);for(var d=0,f=u;d<f.length;d++){var p=f[d];if("spread"===p.__symbolic&&p.expression){var h=p.expression,g=this.resolveSpreadElement(h,n);if(g&&Array.isArray(g))for(var m=0,v=g;m<v.length;m++){var y=v[m];l.push(y)}}else l.push(p)}}o.arguments=a}},e.prototype.handleMethod=function(e,t,n,r){var i=e.metadata,a=i[r],s=a.members,c=t.parameters;if(c&&c.length>0){var u=t.kind===l.SyntaxKind.Constructor,d=void 0;if(u)d=s.__ctor__[0];else{d=s[t.name.text][0]}for(var f=[],p=0,h=c;p<h.length;p++){var g=h[p],m=g.name.text,v=o(g.type),y=n.get(v);y||(y={__symbolic:"reference",name:v}),y.param=m,f.push(y)}d.parameters=f}},e.prototype.handleProperty=function(e,t,n,r){var i={__symbolic:"property"},a=t.name.text,s=t.type;if(s){var c=o(s);if(i.type=n.get(c),s.kind===l.SyntaxKind.ArrayType){var u=o(s.elementType);i.ref=n.get(u)}}var d=e.metadata,f=d[r],p=f.members;p?p[a]=i:(p={},p[a]=i,f.members=p)},e.prototype.handleHeritageClause=function(e,t,n,r){var o=e.metadata,i=o[r],a=[];if(i.extends&&delete i.extends,t&&t.length>0){for(var s=0,c=t;s<c.length;s++){var u=c[s],d=u.token;if(d==l.SyntaxKind.ImplementsKeyword){if(u.types)for(var f=0,p=u.types;f<p.length;f++){var h=p[f],g=h.expression.text,m=n.get(g);a.push({__symbolic:"implements",interfaces:m.module+"#"+m.name})}}else if(d==l.SyntaxKind.ExtendsKeyword){var h=u.types[0],g=h.expression.text,m=n.get(g);a.push({__symbolic:"extends",extends:m.module+"#"+m.name})}}i.heritages=a}},e.prototype.resolveMember=function(e,t,n){if(e.name){var o=e.name;if(e.module){var i=r(e.module,this.projectDir,n.fileName),a=f.join(this.projectDir+"/"+i+".ts");if(d.existsSync(a)){var s=l.createProgram([a],{target:l.ScriptTarget.ES5,module:l.ModuleKind.CommonJS}),c=s.getSourceFile(a),u=this.metaCollector.getMetadata(c,!1),p=u.metadata;return p[o]?this.resolve(p[o],t):null}}}},e.prototype.resolve=function(e,t){for(var n,r=Object.keys(e),o=0,i=r;o<i.length;o++){var a=i[o],s=e[a];if("object"==typeof s){if(a===t){n=s;break}n=this.resolve(s,t)}}return n},e.prototype.resolveSpreadElement=function(e,t){if(e.name){var n=e.name;if(e.module){var o=r(e.module,this.projectDir,t.fileName),i=f.join(this.projectDir+"/"+o+".ts");if(d.existsSync(i)){var a=l.createProgram([i],{target:l.ScriptTarget.ES5,module:l.ModuleKind.CommonJS}),s=a.getSourceFile(i);return this.metaCollector.getMetadata(s,!1).metadata[n]}}}},e.prototype.resolveRelativePath=function(e,t,n){for(var o=Object.keys(e),i=0,s=o;i<s.length;i++){var c=s[i],u=e[c];if("loadChildren"===c){var l=a(u,n.fileName,t);e[c]=l}else if("object"==typeof u)if("reference"===u.__symbolic&&u.module){var d=u.module,f=r(d,t,n.fileName);u.module=f}else this.resolveRelativePath(u,t,n)}},e}();t.Ng2xMetaCollector=m},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(2),c=n(3),u=n(12),l=n(4),d=n(11),f=n(10),p=n(6),h=n(15),g=function(){function e(){}return e.prototype.getNgrxMetadata=function(){return r(this,void 0,void 0,function(){var e,t;return o(this,function(n){switch(n.label){case 0:return e=[],[4,this.getModules()];case 1:return t=n.sent(),t.forEach(function(t){var n=t.symbol.filePath,r=t.symbol.name,o=c.createSourceFile(n,s.readFileSync(n).toString(),c.ScriptTarget.Latest),i=new m(o,r);i.analyze(),e.push(i.toNgRxNode())}),[2,e]}})})},e.prototype.getModules=function(){return r(this,void 0,void 0,function(){var e,t,n,r,c,u;return o(this,function(d){switch(d.label){case 0:return(e=i.workspace.workspaceFolders)&&0!==e.length?[3,1]:(i.window.showInformationMessage("Nothing to display since the workspace is empty."),[2,[]]);case 1:t=[],n=function(e){var n,r,c,u,d,f,p,h,g,m,v,y;return o(this,function(x){switch(x.label){case 0:if(n=a.join(e.uri.fsPath,"angular.json"),!l.pathExists(n))return[3,5];r=JSON.parse(s.readFileSync(n,"utf-8")),c=r.projects||{},u=Object.keys(c).filter(function(e){return c[e]&&c[e].architect&&c[e].architect.build}),d=function(n){var r,i,s,u,d;return o(this,function(o){switch(o.label){case 0:return r=c[n],i=a.join(e.uri.fsPath,r.architect.build.options.tsConfig),s=a.join(e.uri.fsPath,r.root,r.sourceRoot||""),[4,l.loadProject(i,function(e){return console.error(e)})];case 1:return u=o.sent(),d=u.getModules().filter(function(e){return l.formatPath(e.symbol.filePath).startsWith(s)}),t=t.concat(d),[2]}})},f=0,p=u,x.label=1;case 1:return f<p.length?(h=p[f],[5,d(h)]):[3,4];case 2:x.sent(),x.label=3;case 3:return f++,[3,1];case 4:return[3,7];case 5:return g=a.join(e.uri.fsPath,"tsconfig.json"),l.pathExists(g)?(m=a.join(e.uri.fsPath,"src"),[4,l.loadProject(g,function(e,t){return i.window.showErrorMessage("Error occurred while processing the project at "+t+": "+e)})]):[3,7];case 6:v=x.sent(),y=v.getModules().filter(function(e){return l.formatPath(e.symbol.filePath).startsWith(m)}),t=t.concat(y),x.label=7;case 7:return[2]}})},r=0,c=e,d.label=2;case 2:return r<c.length?(u=c[r],[5,n(u)]):[3,5];case 3:d.sent(),d.label=4;case 4:return r++,[3,2];case 5:return 0===t.length&&i.window.showInformationMessage("Workspace has no angular projects."),[2,t]}})})},e}();t.NgrxMetadataProcessor=g;var m=function(){function e(e,t){this.sourceFile=e,this.moduleName=t,this.ngrxStores=new Array,this.ngrxEffects=new Array}return e.prototype.analyze=function(){var e=this,t=f.getClassDefinition(this.sourceFile);if(t.length>0)for(var n=d.getNgrxAnalyzer(this.sourceFile),r=0,o=t;r<o.length;r++){var i=o[r],a=i.name.text;if(a===this.moduleName){var s=n.getStoreModules(i);s.forEach(function(t){var n=new v(t.sourceFile,t.name,t.reducers);n.analyze(),e.addNgrxStore(n)});var c=n.getEffectsModules(i);c.forEach(function(t){var n=new y(t.sourceFile,t.name,t.effects);n.analyze(),e.addNgrxEffects(n)})}}},e.prototype.toNgRxNode=function(){for(var e=[],t=[],n=0,r=this.ngrxStores;n<r.length;n++){var o=r[n];e.push(o.toNgRxNode())}for(var s=0,c=this.ngrxEffects;s<c.length;s++){var u=c[s];t.push(u.toNgRxNode())}return{nodeType:"ngmodule",name:this.moduleName,filePath:a.relative(i.workspace.rootPath,this.sourceFile.fileName),pos:this.sourceFile.pos,end:this.sourceFile.end,children:e.concat(t)}},e.prototype.addNgrxStore=function(e){this.ngrxStores.push(e)},e.prototype.addNgrxEffects=function(e){this.ngrxEffects.push(e)},e}(),v=function(){function e(e,t,n){this.sourceFile=e,this.name=t,this.reducersMeta=n,this.reducers=new Array,this.pos=n.pos||0,this.end=n.end||0}return e.prototype.addReducer=function(e){this.reducers.push(e)},e.prototype.analyze=function(){var e,t,n,r=this;if(p.isMetadataImportedSymbolReferenceExpression(this.reducersMeta)){var o=f.getImportFromFilePath(this.sourceFile,this.reducersMeta.module);t=this.reducersMeta.name,n=f.searchFile(o,t)}else t=name,n=this.sourceFile;if(n){e=u.tsquery.ast(n.text,n.fileName);var i=u.tsquery(e,"VariableDeclaration[name.name="+t+"][type.typeName.name=ActionReducerMap]");if(i.length>0){u.tsquery(i[0],"PropertyAssignment").forEach(function(e){var t=e,o=t.name.text,i=h.getInitializerValue(t.initializer),a=f.getImportFromFilePath(n,i.expression?i.expression:i);if(a){var u=c.createSourceFile(a,s.readFileSync(a).toString(),c.ScriptTarget.Latest),l=new x(u,{symbolName:o,refName:i.name?i.name:i});r.addReducer(l),l.analyze()}})}var a=u.tsquery(e,"VariableDeclaration[initializer.expression.name=createFeatureSelector]");if(a&&a.length>0){var l=u.tsquery(e,"VariableDeclaration[initializer.expression.name=createSelector]"),d=l.map(function(e){var t=new D(n,e);return t.analyze(),t});this.featureSelector=new D(n,a[0],d),this.featureSelector.analyze()}}},e.prototype.toNgRxNode=function(){for(var e=[],t=0,n=this.reducers;t<n.length;t++){var r=n[t];e.push(r.toNgRxNode())}return this.featureSelector&&e.push(this.featureSelector.toNgRxNode()),{nodeType:"store",name:this.name,filePath:a.relative(i.workspace.rootPath,this.sourceFile.fileName),pos:this.pos,end:this.end,children:e}},e}(),y=function(){function e(e,t,n){this.sourceFile=e,this.name=t,this.effectsMeta=n,this.effectArr=new Array,this.pos=n.pos||0,this.end=n.end||0}return e.prototype.addEffect=function(e){this.effectArr.push(e)},e.prototype.analyze=function(){var e,t,n;if(p.isMetadataImportedSymbolReferenceExpression(this.effectsMeta)){var r=f.getImportFromFilePath(this.sourceFile,this.effectsMeta.module);t=this.effectsMeta.name,n=c.createSourceFile(r,s.readFileSync(r).toString(),c.ScriptTarget.Latest)}else t=name,n=this.sourceFile;if(n){e=u.tsquery.ast(n.text,n.fileName);var o=u.tsquery(e,"ClassDeclaration[name.name="+t+"] > PropertyDeclaration > Decorator[expression.expression.name=Effect]")||[];if(0==o.length){var i=u.tsquery(e,"VariableDeclaration[name.name="+t+"]");if(i&&i.length>0){var a=i[0],l=a.initializer;if(l.kind===c.SyntaxKind.ArrayLiteralExpression)for(var d=l.elements||[],h=0,g=d;h<g.length;h++){var m=g[h],v=m.text;if(f.nodeExists(e,"ClassDeclaration[name.name="+v+"]"))o=u.tsquery(e,"ClassDeclaration[name.name="+v+"] > PropertyDeclaration > Decorator[expression.expression.name=Effect]");else{var y=f.getImportFromFilePath(n,v);if(y){var x=c.createSourceFile(y,s.readFileSync(y).toString(),c.ScriptTarget.Latest),w=u.tsquery.ast(x.text,x.fileName);o=o.concat(u.tsquery(w,"ClassDeclaration[name.name="+v+"] > PropertyDeclaration > Decorator[expression.expression.name=Effect]"))}}}}}for(var b=0,D=o;b<D.length;b++){var C=D[b],N=C.parent,k=N.name.getText();this.addEffect(new S(n,{name:k,pos:N.pos,end:N.end}))}}},e.prototype.toNgRxNode=function(){return{nodeType:"effects",name:this.name,filePath:a.relative(i.workspace.rootPath,this.sourceFile.fileName),pos:this.pos,end:this.end,children:this.effectArr.map(function(e){return e.toNgRxNode()})}},e}(),x=function(){function e(e,t){this.sourceFile=e,this.reducerVar=t,this.states=new Array,this.actions=new Array,this.rootAst=u.tsquery.ast(this.sourceFile.text,this.sourceFile.fileName)}return e.prototype.addState=function(e){this.states.push(e)},e.prototype.addAction=function(e){this.actions.push(e)},e.prototype.analyze=function(){var e=this,t=u.tsquery(this.rootAst,"FunctionDeclaration[name.name="+this.reducerVar.refName+"]");if(t.length>0){var n=t[0];this.pos=n.pos,this.end=n.end;var r=void 0;if(n.type)r=n.type.getText();else{r=n.parameters[0].type.getText()}var o=u.tsquery(this.rootAst,"InterfaceDeclaration[name.name="+r+"]");if(o.length>0){o[0].members.forEach(function(t){var n=t.name.text;e.addState(new w(e.sourceFile,{name:n,pos:t.pos,end:t.end}))})}var i=n.parameters[1],a=i.type;if(a.kind===c.SyntaxKind.TypeReference){var l=void 0,d=void 0,p=a.typeName;p.kind===c.SyntaxKind.QualifiedName?(l=p.left.getText(),d=p.right.getText()):p.kind===c.SyntaxKind.Identifier&&(l=p.getText(),d=l);var h=f.getImportFromFilePath(this.sourceFile,l);if(h&&s.existsSync(h)){var g=c.createSourceFile(h,s.readFileSync(h).toString(),c.ScriptTarget.Latest),m=u.tsquery.ast(g.text,g.fileName),v=u.tsquery(m,"TypeAliasDeclaration[name.name="+d+"]")||[];if(v&&v.length>0){v[0].type.types.forEach(function(t){if(t.kind===c.SyntaxKind.TypeReference){var n={},r=t.typeName.getText();n.name=r;var o=u.tsquery(m,"ClassDeclaration[name.name="+r+"]")||[];if(o.length>0){var i=o[0];n.pos=i.pos,n.end=i.end}e.addAction(new b(g,n))}})}}}}},e.prototype.toNgRxNode=function(){for(var e=[],t=[],n=0,r=this.states;n<r.length;n++){var o=r[n];e.push(o.toNgRxNode())}for(var s=0,c=this.actions;s<c.length;s++){var u=c[s];t.push(u.toNgRxNode())}return{nodeType:"reducer",filePath:a.relative(i.workspace.rootPath,this.sourceFile.fileName),name:this.reducerVar.symbolName,pos:this.pos,end:this.end,children:e.concat(t)}},e}(),w=function(){function e(e,t){this.sourceFile=e,this.stateData=t,this.pos=t.pos||0,this.end=t.end||0}return e.prototype.analyze=function(){},e.prototype.toNgRxNode=function(){return{nodeType:"state",name:this.stateData.name,filePath:a.relative(i.workspace.rootPath,this.sourceFile.fileName),pos:this.pos,end:this.end,children:[]}},e}(),b=function(){function e(e,t){this.sourceFile=e,this.actionData=t,this.pos=t.pos||0,this.end=t.end||0}return e.prototype.analyze=function(){},e.prototype.toNgRxNode=function(){return{nodeType:"action",name:this.actionData.name?this.actionData.name:this.actionData,filePath:a.relative(i.workspace.rootPath,this.sourceFile.fileName),pos:this.pos,end:this.end,children:[]}},e}(),S=function(){function e(e,t){this.sourceFile=e,this.effectData=t,this.pos=t.pos||0,this.end=t.end||0}return e.prototype.analyze=function(){},e.prototype.toNgRxNode=function(){return{nodeType:"effect",name:this.effectData.name?this.effectData.name:this.effectData,filePath:a.relative(i.workspace.rootPath,this.sourceFile.fileName),pos:this.pos,end:this.end,children:[]}},e}(),D=function(){function e(e,t,n){this.sourceFile=e,this.selectorData=t,this.childSelectors=n,this.pos=t.pos||0,this.end=t.end||0}return e.prototype.analyze=function(){this.name=this.selectorData.name.getText()},e.prototype.toNgRxNode=function(){return{nodeType:"selector",name:this.name,filePath:a.relative(i.workspace.rootPath,this.sourceFile.fileName),pos:this.pos,end:this.end,children:(this.childSelectors||[]).map(function(e){return e.toNgRxNode()})}},e}()},function(e,t,n){"use strict";function r(e){if(s.workspace.workspaceFolders&&0!==s.workspace.workspaceFolders.length){var t=new l(e);s.window.registerTreeDataProvider("ngrx.explorer",t),e.subscriptions.push(s.commands.registerCommand("ngrx.explorer.refresh",function(e){return t.refresh(e)})),e.subscriptions.push(s.commands.registerCommand("ngrx.explorer.open",function(e){return o(e)}))}}function o(e){var t=s.Uri.file(c.join(s.workspace.rootPath,e.filePath));s.window.showTextDocument(t).then(function(t){var n=t.document.positionAt(e.pos+1),r=t.document.positionAt(e.end),o=t.document.getText(new s.Range(n,r)),i=o.length-o.trim().length,a=t.document.positionAt(e.pos+1+i);t.selection=new s.Selection(a,r),t.revealRange(t.selection,s.TextEditorRevealType.Default)})}var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=n(1),u=n(28);t.activate=r;var l=function(){function e(e){this.context=e,this._onDidChangeTreeData=new s.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.ngrxMetadataProcessor=new u.NgrxMetadataProcessor}return e.prototype.refresh=function(e){this._onDidChangeTreeData.fire(e)},e.prototype.getTreeItem=function(e){var t;switch(e.nodeType){case"ngmodule":t=s.TreeItemCollapsibleState.Expanded;break;case"store":case"effects":case"reducer":t=s.TreeItemCollapsibleState.Collapsed;break;case"selector":t=e.children&&e.children.length>0?s.TreeItemCollapsibleState.Collapsed:s.TreeItemCollapsibleState.None;break;default:t=s.TreeItemCollapsibleState.None}return{label:e.name,collapsibleState:0===e.children.length?s.TreeItemCollapsibleState.None:t,iconPath:{light:this.context.asAbsolutePath(c.join("images","resources","light","ngrx-"+e.nodeType+".svg")),dark:this.context.asAbsolutePath(c.join("images","resources","dark","ngrx-"+e.nodeType+".svg"))},tooltip:"<"+e.nodeType+"> "+e.name+" - "+e.filePath,command:{command:"ngrx.explorer.open",title:"Open",arguments:[e]}}},e.prototype.getChildren=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return e?[3,2]:[4,this.ngrxMetadataProcessor.getNgrxMetadata()];case 1:return t=n.sent(),[2,t.filter(function(e){return e.children.length>0})];case 2:return[2,e.children]}})})},e}()},function(e,t,n){"use strict";function r(e){if(a.workspace.workspaceFolders&&0!==a.workspace.workspaceFolders.length){var t=new u(e);a.window.registerTreeDataProvider("angular.outline",t),e.subscriptions.push(a.commands.registerCommand("angular.outline.goto",s.gotoDeclarationForDeclarationNode))}}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(16),c=n(4);t.activate=r;var u=function(){function e(e){var t=this;this.context=e,this._onDidChangeTreeData=new a.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.autoRefresh=!0,a.window.onDidChangeActiveTextEditor(function(){return t.onActiveEditorChanged()}),a.workspace.onDidChangeTextDocument(function(e){return t.onDocumentChanged(e)}),this.autoRefresh=a.workspace.getConfiguration("angularOutline").get("autorefresh")||!0,a.workspace.onDidChangeConfiguration(function(){t.autoRefresh=a.workspace.getConfiguration("angularOutline").get("autorefresh")||!0}),this.onActiveEditorChanged()}return e.prototype.refresh=function(){this._onDidChangeTreeData.fire()},e.prototype.onActiveEditorChanged=function(){if(a.window.activeTextEditor){if("file"===a.window.activeTextEditor.document.uri.scheme){var e="typescript"===a.window.activeTextEditor.document.languageId;a.commands.executeCommand("setContext","ngOutlineEnabled",e),e&&this.refresh()}}else a.commands.executeCommand("setContext","ngOutlineEnabled",!1)},e.prototype.onDocumentChanged=function(e){this.autoRefresh&&a.window.activeTextEditor&&e.document.uri.toString()===a.window.activeTextEditor.document.uri.toString()&&this._onDidChangeTreeData.fire()},e.prototype.getTreeItem=function(e){return e.getTreeItem(this.context)},e.prototype.getChildren=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return e?[2,e.getChildren()]:[2,this.getRootNodes()]})})},e.prototype.getRootNodes=function(){var e=a.window.activeTextEditor;return e&&e.document?c.getOutlineNodes(e.document):[]},e}()},function(e,t,n){"use strict";function r(e){if(o.workspace.workspaceFolders&&0!==o.workspace.workspaceFolders.length){new i.AngularExplorer(e);o.commands.registerCommand("view.component",function(e){var t=e.config.symbol?e.config.symbol.filePath:null;t&&console.log("component",t)})}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(32);t.activate=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(4),c=n(17),u=n(16),l=function(){function e(e){this.context=e,this._onDidChangeTreeData=new i.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}return e.prototype.refresh=function(e){this._onDidChangeTreeData.fire(e)},e.prototype.getTreeItem=function(e){return e.getTreeItem(this.context)},e.prototype.getParent=function(e){return e.parentNode},e.prototype.getChildren=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){return e?[2,e.getChildren()]:[2,this.getRootNodes()]})})},e.prototype.getRootNodes=function(){var e=i.workspace.workspaceFolders;if(e&&0!==e.length){var t=[];return e.forEach(function(e){var n=a.join(e.uri.fsPath,"angular.json");if(s.pathExists(n))t.push(new c.NgCliNode(e.uri,e.uri,e.name));else{var r=a.join(e.uri.fsPath,"tsconfig.json");s.pathExists(r)&&t.push(new c.TsConfigProjectNode(e.uri,e.uri,e.name))}}),0===t.length&&i.window.showInformationMessage("Workspace has no angular projects."),t}return i.window.showInformationMessage("Nothing to display since the workspace is empty."),[]},e}();t.AngularNodeProvider=l;var d=function(){function e(e){var t=this;this._onDidSelectNode=new i.EventEmitter,this.onDidSelectNode=this._onDidSelectNode.event;var n=new l(e);this.angularExplorer=i.window.createTreeView("angular.explorer",{treeDataProvider:n}),e.subscriptions.push(i.commands.registerCommand("angular.explorer.refresh",function(e){return n.refresh(e)})),e.subscriptions.push(i.commands.registerCommand("angular.explorer.open",u.openFileForNgNode)),e.subscriptions.push(i.commands.registerCommand("angular.explorer.schematics",u.execAngularCliCommands)),e.subscriptions.push(i.commands.registerCommand("angular.explorer.ngrx",u.execNgRxCommands)),this.angularExplorer.onDidChangeSelection(function(e){e.selection&&e.selection.length>0&&t._onDidSelectNode.fire(e.selection[0])})}return e}();t.AngularExplorer=d},function(e,t,n){"use strict";function r(e,t){if(e&&Array.isArray(e)){for(var n=[],r=0,o=e;r<o.length;r++){var i=o[r],a=i.expression,s={};a&&(s.name="@"+a.name),i.pos&&(s.pos=i.pos),n.push(s)}t.decorators=n}}function o(e,t){if(e&&Array.isArray(e))for(var n=0,r=e;n<r.length;n++){var o=r[n];"implements"===o.__symbolic?t.implements=o.interfaces:"extends"===o.__symbolic&&(t.extends=o.extends)}}function i(e,t){if(e){var n=[],r=[];for(var o in e)if(Array.isArray(e[o])){var i=e[o][0];if("method"===i.__symbolic||"constructor"===i.__symbolic){var a={},s="constructor"===i.__symbolic?"constructor".length:o.length;if(a.name="constructor"===i.__symbolic?"constructor":o,i.parameters){for(var c=[],u=i.parameters,l=0,d=u;l<d.length;l++){var f=d[l];c.push(f.name)}a.parameters=c}i.pos&&(a.pos=i.pos+s),n.push(a)}else if("property"===i.__symbolic){var p={};if(p.name=o,i.propertyType){var h=i.propertyType;p.type=h.name,h.module&&(p.module=h.module)}if(i.propertyDecorators){i.propertyDecorators[0]}i.dataType&&(p.dataType=i.dataType),i.pos&&(p.pos=i.pos+o.length),r.push(p)}}t.methods=n,t.properties=r}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(27),s=n(3),c=function(){function e(){}return e.getMeta=function(e,t){var n,r=s.createProgram([t],{target:s.ScriptTarget.ES5,module:s.ModuleKind.CommonJS}),o=(r.getTypeChecker(),r.getSourceFile(t)),i=new a.Ng2xMetaCollector(e);try{n=i.getMeta(o,!1)}catch(e){throw e}return n},e.parseMeta=function(e){var t={};if(e&&e.hasOwnProperty("metadata")){var n=e.metadata,a=void 0;for(var s in n){t.name=s,a=n[s];break}for(var c in a)"__symbolic"===c?t.type=a[c]:"decorators"===c?r(a.decorators,t):"heritages"===c?o(a.heritages,t):"members"===c&&i(a.members,t)}return t},e}();t.Ng2Util=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(){this.ngdocStatusBarItem=r.window.createStatusBarItem(r.StatusBarAlignment.Left),this.ngdocStatusBarItem.command="ngdoc",this.ngdocStatusBarItem.text="AngularDoc",this.ngdocStatusBarItem.show()}return e.prototype.dispose=function(){this.ngdocStatusBarItem.dispose()},e}();t.NgdocStatusBar=o},function(e,t){e.exports=require("@angular/tsc-wrapped/src/symbols")},function(e,t){e.exports=require("@schematics/angular/utility/ast-utils")},function(e,t){e.exports=require("htmlencode")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("rxjs")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("uuid")},function(e,t){e.exports=require("vscode-languageclient")},function(e,t){e.exports=require("ws")},function(e,t,n){e.exports=n(22)}]);