var app=function(){"use strict";function t(){}const n=t=>t;function e(t,n){for(const e in n)t[e]=n[e];return t}function r(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(r)}function c(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(n,e,r){n.$$.on_destroy.push(function(n,...e){if(null==n)return t;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}(e,r))}const l="undefined"!=typeof window;let a=l?()=>window.performance.now():()=>Date.now(),f=l?t=>requestAnimationFrame(t):t;const d=new Set;function h(t){d.forEach((n=>{n.c(t)||(d.delete(n),n.f())})),0!==d.size&&f(h)}function p(t,n){t.appendChild(n)}function g(t,n,e){t.insertBefore(n,e||null)}function m(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function b(t){return document.createTextNode(t)}function y(){return b(" ")}function v(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function w(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function x(t,n,e){t.classList[e?"add":"remove"](n)}let _;function k(t){_=t}function C(t){(function(){if(!_)throw new Error("Function called outside component initialization");return _})().$$.on_mount.push(t)}const E=[],A=[],j=[],S=[],T=Promise.resolve();let O=!1;function z(t){j.push(t)}let P=!1;const D=new Set;function L(){if(!P){P=!0;do{for(let t=0;t<E.length;t+=1){const n=E[t];k(n),N(n.$$)}for(k(null),E.length=0;A.length;)A.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];D.has(n)||(D.add(n),n())}j.length=0}while(E.length);for(;S.length;)S.pop()();O=!1,P=!1,D.clear()}}function N(t){if(null!==t.fragment){t.update(),i(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(z)}}const q=new Set;function F(t,n){t&&t.i&&(q.delete(t),t.i(n))}function B(t,n,e){const{fragment:o,on_mount:s,on_destroy:u,after_update:l}=t.$$;o&&o.m(n,e),z((()=>{const n=s.map(r).filter(c);u?u.push(...n):i(n),t.$$.on_mount=[]})),l.forEach(z)}function M(t,n){const e=t.$$;null!==e.fragment&&(i(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function R(t,n){-1===t.$$.dirty[0]&&(E.push(t),O||(O=!0,T.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function G(n,e,r,c,s,u,l=[-1]){const a=_;k(n);const f=e.props||{},d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:o(),dirty:l,skip_bound:!1};let h=!1;if(d.ctx=r?r(n,f,((t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&s(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),h&&R(n,t)),e})):[],d.update(),h=!0,i(d.before_update),d.fragment=!!c&&c(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(m)}else d.fragment&&d.fragment.c();e.intro&&F(n.$$.fragment),B(n,e.target,e.anchor),L()}k(a)}class H{$destroy(){M(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const I=t=>new Promise((n=>setTimeout(n,t))),J=(t,n)=>{for(const e of n)""===e.text?Q(t,e.range[0],e.range[1]):0===e.rangeLength?K(t,e.range[0],e.text):U(t,e.range[0],e.range[1],e.text)},K=(t,n,e)=>{const r=e.split("\n"),o=t[n.line]||"";1!==r.length?t.splice(0,t.length,...t.slice(0,n.line-2),o.slice(0,n.character)+r[0],...r.slice(1,r.length-1),r[r.length-1]+o.slice(n.character),...t.slice(n.line+1)):t[n.line]=o.slice(0,n.character)+e+o.slice(n.character+1)},Q=(t,n,e)=>{const r=t[n.line]||"";n.line!==e.line?(t[n.line]=r.slice(0,n.character)+(t[e.line]||"").slice(e.character),t.splice(n.line+1,e.line-n.line)):t[n.line]=r.slice(0,n.character)+r.slice(e.character)},U=(t,n,e,r)=>{Q(t,n,e),K(t,n,r)},V=[];function W(t){const n=t-1;return n*n*n+1}function X(t){return"[object Date]"===Object.prototype.toString.call(t)}function Y(t,n){if(t===n||t!=t)return()=>t;const e=typeof t;if(e!==typeof n||Array.isArray(t)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const e=n.map(((n,e)=>Y(t[e],n)));return t=>e.map((n=>n(t)))}if("object"===e){if(!t||!n)throw new Error("Object cannot be null");if(X(t)&&X(n)){t=t.getTime();const e=(n=n.getTime())-t;return n=>new Date(t+n*e)}const e=Object.keys(n),r={};return e.forEach((e=>{r[e]=Y(t[e],n[e])})),t=>{const n={};return e.forEach((e=>{n[e]=r[e](t)})),n}}if("number"===e){const e=n-t;return n=>t+n*e}throw new Error(`Cannot interpolate ${e} values`)}function Z(r,o={}){const i=function(n,e=t){let r;const o=[];function i(t){if(s(n,t)&&(n=t,r)){const t=!V.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),V.push(e,n)}if(t){for(let t=0;t<V.length;t+=2)V[t][0](V[t+1]);V.length=0}}}return{set:i,update:function(t){i(t(n))},subscribe:function(c,s=t){const u=[c,s];return o.push(u),1===o.length&&(r=e(i)||t),c(n),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}(r);let c,u=r;function l(t,s){if(null==r)return i.set(r=t),Promise.resolve();u=t;let l=c,p=!1,{delay:g=0,duration:m=400,easing:$=n,interpolate:b=Y}=e(e({},o),s);if(0===m)return l&&(l.abort(),l=null),i.set(r=u),Promise.resolve();const y=a()+g;let v;return c=function(t){let n;return 0===d.size&&f(h),{promise:new Promise((e=>{d.add(n={c:t,f:e})})),abort(){d.delete(n)}}}((n=>{if(n<y)return!0;p||(v=b(r,t),"function"==typeof m&&(m=m(r,t)),p=!0),l&&(l.abort(),l=null);const e=n-y;return e>m?(i.set(r=t),!1):(i.set(r=v($(e/m))),!0)})),c.promise}return{set:l,update:(t,n)=>l(t(u,r),n),subscribe:i.subscribe}}function tt(t,n,e){const r=t.slice();return r[11]=n[e],r}function nt(n){let e,r,o;return{c(){e=$("button"),e.textContent="replay"},m(t,i){g(t,e,i),r||(o=v(e,"click",n[8]),r=!0)},p:t,d(t){t&&m(e),r=!1,o()}}}function et(t){let n,e,r,o,i;function c(...n){return t[9](t[11],...n)}return{c(){n=$("button"),e=b(t[11]),r=b("x"),w(n,"class","plain-button svelte-1dzbhua"),x(n,"active",t[11]===t[2])},m(t,s){g(t,n,s),p(n,e),p(n,r),o||(i=v(n,"click",c),o=!0)},p(e,r){t=e,4&r&&x(n,"active",t[11]===t[2])},d(t){t&&m(n),o=!1,i()}}}function rt(n){let e,r,o,i,c,s,u,l,a,f=n[0].join("\n")+"",d="done"===n[3]&&nt(n),h=[.5,1,2,3],v=[];for(let t=0;t<4;t+=1)v[t]=et(tt(n,h,t));return{c(){d&&d.c(),e=y(),r=$("div"),o=$("div"),o.textContent="Change speed:",i=y();for(let t=0;t<4;t+=1)v[t].c();c=y(),s=$("progress"),u=y(),l=$("pre"),a=b(f),w(r,"class","row svelte-1dzbhua"),s.value=n[4],w(s,"class","svelte-1dzbhua")},m(t,n){d&&d.m(t,n),g(t,e,n),g(t,r,n),p(r,o),p(r,i);for(let t=0;t<4;t+=1)v[t].m(r,null);g(t,c,n),g(t,s,n),g(t,u,n),g(t,l,n),p(l,a)},p(t,[n]){if("done"===t[3]?d?d.p(t,n):(d=nt(t),d.c(),d.m(e.parentNode,e)):d&&(d.d(1),d=null),4&n){let e;for(h=[.5,1,2,3],e=0;e<4;e+=1){const o=tt(t,h,e);v[e]?v[e].p(o,n):(v[e]=et(o),v[e].c(),v[e].m(r,null))}for(;e<4;e+=1)v[e].d(1)}16&n&&(s.value=t[4]),1&n&&f!==(f=t[0].join("\n")+"")&&function(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}(a,f)},i:t,o:t,d(t){d&&d.d(t),t&&m(e),t&&m(r),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(v,t),t&&m(c),t&&m(s),t&&m(u),t&&m(l)}}}function ot(t,n,e){let r;var o=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function c(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(c,s)}u((r=r.apply(t,n||[])).next())}))};let i=1,{startingChunks:c}=n,{textChunks:s}=n,{recordingSteps:l}=n,a=l&&l.length?"running":"static";const f=Z(0,{duration:100,easing:W});u(t,f,(t=>e(4,r=t)));const d=()=>o(void 0,void 0,void 0,(function*(){if(!l||!l.length)return f.set(1),void e(3,a="done");e(3,a="running");const t=(new Date).getTime(),n=l[l.length-1][0];let r=0;for(;r<l.length;){const[o,c]=l[r],u=((new Date).getTime()-t)*i;u<o?(f.set(u/n),yield I(10)):(J(s,c),e(0,s),r++)}f.set(1),e(3,a="done")}));C((()=>o(void 0,void 0,void 0,(function*(){yield d()}))));return t.$$set=t=>{"startingChunks"in t&&e(1,c=t.startingChunks),"textChunks"in t&&e(0,s=t.textChunks),"recordingSteps"in t&&e(7,l=t.recordingSteps)},[s,c,i,a,r,f,d,l,()=>{e(0,s=[...c]),f.set(0),d()},t=>{e(2,i=t)}]}class it extends H{constructor(t){super(),G(this,t,ot,rt,s,{startingChunks:1,textChunks:0,recordingSteps:7})}}function ct(n){let e,r,o;return e=new it({props:{startingChunks:initialText.split("\n"),textChunks:initialText.split("\n"),recordingSteps:initRecordingSteps}}),{c(){var t;(t=e.$$.fragment)&&t.c(),r=b(";")},m(t,n){B(e,t,n),g(t,r,n),o=!0},p:t,i(t){o||(F(e.$$.fragment,t),o=!0)},o(t){!function(t,n,e,r){if(t&&t.o){if(q.has(t))return;q.add(t),(void 0).c.push((()=>{q.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}(e.$$.fragment,t),o=!1},d(t){M(e,t),t&&m(r)}}}return new class extends H{constructor(t){super(),G(this,t,null,ct,s,{})}}({target:document.body})}();
//# sourceMappingURL=preview-story.js.map
