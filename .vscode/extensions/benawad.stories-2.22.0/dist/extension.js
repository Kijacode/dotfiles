/*! For license information please see extension.js.LICENSE.txt */
module.exports=(()=>{var e={8767:e=>{e.exports=function(e){let t=e.url;if(void 0===t)return t;let r=e._parsedUrl;if(r&&r._raw===t)return r;r={},r.query=r.search=null,r.href=r.path=r.pathname=t;let n=t.indexOf("?",1);return-1!==n&&(r.search=t.substring(n),r.query=r.search.substring(1),r.pathname=t.substring(0,n)),r._raw=t,e._parsedUrl=r}},706:e=>{!function(){"use strict";e.exports=function(e){return(e instanceof Buffer?e:Buffer.from(e.toString(),"binary")).toString("base64")}}()},8500:(e,t,r)=>{"use strict";var n=r(4293).Buffer,o=r(4293).SlowBuffer;function i(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var r=0,o=0;o<e.length;o++)r|=e[o]^t[o];return 0===r}e.exports=i,i.install=function(){n.prototype.equal=o.prototype.equal=function(e){return i(this,e)}};var s=n.prototype.equal,a=o.prototype.equal;i.restore=function(){n.prototype.equal=s,o.prototype.equal=a}},5015:(e,t,r)=>{"use strict";var n=r(9509).Buffer,o=r(6972);function i(e){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function s(e,t,r){for(var n=0;t+n<r&&0===e[t+n];)++n;return e[t+n]>=128&&--n,n}e.exports={derToJose:function(e,t){e=i(e);var r=o(t),s=r+1,a=e.length,c=0;if(48!==e[c++])throw new Error('Could not find expected "seq"');var u=e[c++];if(129===u&&(u=e[c++]),a-c<u)throw new Error('"seq" specified length of "'+u+'", only "'+(a-c)+'" remaining');if(2!==e[c++])throw new Error('Could not find expected "int" for "r"');var l=e[c++];if(a-c-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(a-c-2)+'" available');if(s<l)throw new Error('"r" specified length of "'+l+'", max of "'+s+'" is acceptable');var f=c;if(c+=l,2!==e[c++])throw new Error('Could not find expected "int" for "s"');var h=e[c++];if(a-c!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(a-c)+'"');if(s<h)throw new Error('"s" specified length of "'+h+'", max of "'+s+'" is acceptable');var p=c;if((c+=h)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-c)+'" bytes remain');var d=r-l,m=r-h,y=n.allocUnsafe(d+l+m+h);for(c=0;c<d;++c)y[c]=0;e.copy(y,c,f+Math.max(-d,0),f+l);for(var v=c=r;c<v+m;++c)y[c]=0;return e.copy(y,c,p+Math.max(-m,0),p+h),(y=y.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=i(e);var r=o(t),a=e.length;if(a!==2*r)throw new TypeError('"'+t+'" signatures must be "'+2*r+'" bytes, saw "'+a+'"');var c=s(e,0,r),u=s(e,r,e.length),l=r-c,f=r-u,h=2+l+1+1+f,p=h<128,d=n.allocUnsafe((p?2:3)+h),m=0;return d[m++]=48,p?d[m++]=h:(d[m++]=129,d[m++]=255&h),d[m++]=2,d[m++]=l,c<0?(d[m++]=0,m+=e.copy(d,m,0,r)):m+=e.copy(d,m,c,r),d[m++]=2,d[m++]=f,u<0?(d[m++]=0,e.copy(d,m,r)):e.copy(d,m,r+u),d}}},6972:e=>{"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var r={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=r[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},7626:(e,t,r)=>{var n=r(158);e.exports=function(e,t){t=t||{};var r=n.decode(e,t);if(!r)return null;var o=r.payload;if("string"==typeof o)try{var i=JSON.parse(o);null!==i&&"object"==typeof i&&(o=i)}catch(e){}return!0===t.complete?{header:r.header,payload:o,signature:r.signature}:o}},9704:(e,t,r)=>{e.exports={decode:r(7626),verify:r(7030),sign:r(2506),JsonWebTokenError:r(8619),NotBeforeError:r(1826),TokenExpiredError:r(2340)}},8619:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(t.prototype=Object.create(Error.prototype)).constructor=t,e.exports=t},1826:(e,t,r)=>{var n=r(8619),o=function(e,t){n.call(this,e),this.name="NotBeforeError",this.date=t};(o.prototype=Object.create(n.prototype)).constructor=o,e.exports=o},2340:(e,t,r)=>{var n=r(8619),o=function(e,t){n.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(o.prototype=Object.create(n.prototype)).constructor=o,e.exports=o},4964:(e,t,r)=>{var n=r(6625);e.exports=n.satisfies(process.version,"^6.12.0 || >=8.0.0")},8034:(e,t,r)=>{var n=r(7824);e.exports=function(e,t){var r=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var o=n(e);if(void 0===o)return;return Math.floor(r+o/1e3)}return"number"==typeof e?r+e:void 0}},2506:(e,t,r)=>{var n=r(8034),o=r(4964),i=r(158),s=r(8922),a=r(8094),c=r(5928),u=r(3126),l=r(8146),f=r(5751),h=r(8917),p=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];o&&p.splice(3,0,"PS256","PS384","PS512");var d={expiresIn:{isValid:function(e){return c(e)||f(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return c(e)||f(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return f(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,p),message:'"algorithm" must be a valid string enum value'},header:{isValid:l,message:'"header" must be an object'},encoding:{isValid:f,message:'"encoding" must be a string'},issuer:{isValid:f,message:'"issuer" must be a string'},subject:{isValid:f,message:'"subject" must be a string'},jwtid:{isValid:f,message:'"jwtid" must be a string'},noTimestamp:{isValid:a,message:'"noTimestamp" must be a boolean'},keyid:{isValid:f,message:'"keyid" must be a string'},mutatePayload:{isValid:a,message:'"mutatePayload" must be a boolean'}},m={iat:{isValid:u,message:'"iat" should be a number of seconds'},exp:{isValid:u,message:'"exp" should be a number of seconds'},nbf:{isValid:u,message:'"nbf" should be a number of seconds'}};function y(e,t,r,n){if(!l(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach((function(o){var i=e[o];if(i){if(!i.isValid(r[o]))throw new Error(i.message)}else if(!t)throw new Error('"'+o+'" is not allowed in "'+n+'"')}))}var v={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},b=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,r,o){"function"==typeof r?(o=r,r={}):r=r||{};var s="object"==typeof e&&!Buffer.isBuffer(e),a=Object.assign({alg:r.algorithm||"HS256",typ:s?"JWT":void 0,kid:r.keyid},r.header);function c(e){if(o)return o(e);throw e}if(!t&&"none"!==r.algorithm)return c(new Error("secretOrPrivateKey must have a value"));if(void 0===e)return c(new Error("payload is required"));if(s){try{!function(e){y(m,!0,e,"payload")}(e)}catch(e){return c(e)}r.mutatePayload||(e=Object.assign({},e))}else{var u=b.filter((function(e){return void 0!==r[e]}));if(u.length>0)return c(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==r.expiresIn)return c(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==r.notBefore)return c(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){y(d,!1,e,"options")}(r)}catch(e){return c(e)}var l=e.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete e.iat:s&&(e.iat=l),void 0!==r.notBefore){try{e.nbf=n(r.notBefore,l)}catch(e){return c(e)}if(void 0===e.nbf)return c(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==r.expiresIn&&"object"==typeof e){try{e.exp=n(r.expiresIn,l)}catch(e){return c(e)}if(void 0===e.exp)return c(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(v).forEach((function(t){var n=v[t];if(void 0!==r[t]){if(void 0!==e[n])return c(new Error('Bad "options.'+t+'" option. The payload already has an "'+n+'" property.'));e[n]=r[t]}}));var f=r.encoding||"utf8";if("function"!=typeof o)return i.sign({header:a,payload:e,secret:t,encoding:f});o=o&&h(o),i.createSign({header:a,privateKey:t,payload:e,encoding:f}).once("error",o).once("done",(function(e){o(null,e)}))}},7030:(e,t,r)=>{var n=r(8619),o=r(1826),i=r(2340),s=r(7626),a=r(8034),c=r(4964),u=r(158),l=["RS256","RS384","RS512","ES256","ES384","ES512"],f=["RS256","RS384","RS512"],h=["HS256","HS384","HS512"];c&&(l.splice(3,0,"PS256","PS384","PS512"),f.splice(3,0,"PS256","PS384","PS512")),e.exports=function(e,t,r,c){var p;if("function"!=typeof r||c||(c=r,r={}),r||(r={}),r=Object.assign({},r),p=c||function(e,t){if(e)throw e;return t},r.clockTimestamp&&"number"!=typeof r.clockTimestamp)return p(new n("clockTimestamp must be a number"));if(void 0!==r.nonce&&("string"!=typeof r.nonce||""===r.nonce.trim()))return p(new n("nonce must be a non-empty string"));var d=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return p(new n("jwt must be provided"));if("string"!=typeof e)return p(new n("jwt must be a string"));var m,y=e.split(".");if(3!==y.length)return p(new n("jwt malformed"));try{m=s(e,{complete:!0})}catch(e){return p(e)}if(!m)return p(new n("invalid token"));var v,b=m.header;if("function"==typeof t){if(!c)return p(new n("verify must be called asynchronous if secret or public key is provided as a callback"));v=t}else v=function(e,r){return r(null,t)};return v(b,(function(t,s){if(t)return p(new n("error in secret or public key callback: "+t.message));var c,v=""!==y[2].trim();if(!v&&s)return p(new n("jwt signature is required"));if(v&&!s)return p(new n("secret or public key must be provided"));if(v||r.algorithms||(r.algorithms=["none"]),r.algorithms||(r.algorithms=~s.toString().indexOf("BEGIN CERTIFICATE")||~s.toString().indexOf("BEGIN PUBLIC KEY")?l:~s.toString().indexOf("BEGIN RSA PUBLIC KEY")?f:h),!~r.algorithms.indexOf(m.header.alg))return p(new n("invalid algorithm"));try{c=u.verify(e,m.header.alg,s)}catch(e){return p(e)}if(!c)return p(new n("invalid signature"));var g=m.payload;if(void 0!==g.nbf&&!r.ignoreNotBefore){if("number"!=typeof g.nbf)return p(new n("invalid nbf value"));if(g.nbf>d+(r.clockTolerance||0))return p(new o("jwt not active",new Date(1e3*g.nbf)))}if(void 0!==g.exp&&!r.ignoreExpiration){if("number"!=typeof g.exp)return p(new n("invalid exp value"));if(d>=g.exp+(r.clockTolerance||0))return p(new i("jwt expired",new Date(1e3*g.exp)))}if(r.audience){var w=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some((function(e){return w.some((function(t){return t instanceof RegExp?t.test(e):t===e}))})))return p(new n("jwt audience invalid. expected: "+w.join(" or ")))}if(r.issuer&&("string"==typeof r.issuer&&g.iss!==r.issuer||Array.isArray(r.issuer)&&-1===r.issuer.indexOf(g.iss)))return p(new n("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return p(new n("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return p(new n("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return p(new n("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if("number"!=typeof g.iat)return p(new n("iat required when maxAge is specified"));var S=a(r.maxAge,g.iat);if(void 0===S)return p(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(d>=S+(r.clockTolerance||0))return p(new i("maxAge exceeded",new Date(1e3*S)))}if(!0===r.complete){var j=m.signature;return p(null,{header:b,payload:g,signature:j})}return p(null,g)}))}},4178:(e,t,r)=>{var n=r(8500),o=r(9509).Buffer,i=r(6417),s=r(5015),a=r(1669),c="secret must be a string or buffer",u="key must be a string or a buffer",l="function"==typeof i.createPublicKey;function f(e){if(!o.isBuffer(e)&&"string"!=typeof e){if(!l)throw m(u);if("object"!=typeof e)throw m(u);if("string"!=typeof e.type)throw m(u);if("string"!=typeof e.asymmetricKeyType)throw m(u);if("function"!=typeof e.export)throw m(u)}}function h(e){if(!o.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw m("key must be a string, a buffer or an object")}function p(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function d(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var r=0;r<t;++r)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function m(e){var t=[].slice.call(arguments,1),r=a.format.bind(a,e).apply(null,t);return new TypeError(r)}function y(e){var t;return t=e,o.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function v(e){return function(t,r){!function(e){if(!o.isBuffer(e)){if("string"==typeof e)return e;if(!l)throw m(c);if("object"!=typeof e)throw m(c);if("secret"!==e.type)throw m(c);if("function"!=typeof e.export)throw m(c)}}(r),t=y(t);var n=i.createHmac("sha"+e,r);return p((n.update(t),n.digest("base64")))}}function b(e){return function(t,r,i){var s=v(e)(t,i);return n(o.from(r),o.from(s))}}function g(e){return function(t,r){h(r),t=y(t);var n=i.createSign("RSA-SHA"+e);return p((n.update(t),n.sign(r,"base64")))}}function w(e){return function(t,r,n){f(n),t=y(t),r=d(r);var o=i.createVerify("RSA-SHA"+e);return o.update(t),o.verify(n,r,"base64")}}function S(e){return function(t,r){h(r),t=y(t);var n=i.createSign("RSA-SHA"+e);return p((n.update(t),n.sign({key:r,padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function j(e){return function(t,r,n){f(n),t=y(t),r=d(r);var o=i.createVerify("RSA-SHA"+e);return o.update(t),o.verify({key:n,padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function x(e){var t=g(e);return function(){var r=t.apply(null,arguments);return s.derToJose(r,"ES"+e)}}function _(e){var t=w(e);return function(r,n,o){return n=s.joseToDer(n,"ES"+e).toString("base64"),t(r,n,o)}}function P(){return function(){return""}}function E(){return function(e,t){return""===t}}l&&(u+=" or a KeyObject",c+="or a KeyObject"),e.exports=function(e){var t={hs:v,rs:g,ps:S,es:x,none:P},r={hs:b,rs:w,ps:j,es:_,none:E},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var o=(n[1]||n[3]).toLowerCase(),i=n[2];return{sign:t[o](i),verify:r[o](i)}}},158:(e,t,r)=>{var n=r(8952),o=r(3079);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=n.sign,t.verify=o.verify,t.decode=o.decode,t.isValid=o.isValid,t.createSign=function(e){return new n(e)},t.createVerify=function(e){return new o(e)}},7006:(e,t,r)=>{var n=r(9509).Buffer,o=r(2413);function i(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=n.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=n.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}r(1669).inherits(i,o),i.prototype.write=function(e){this.buffer=n.concat([this.buffer,n.from(e)]),this.emit("data",e)},i.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=i},8952:(e,t,r)=>{var n=r(9509).Buffer,o=r(7006),i=r(4178),s=r(2413),a=r(2010),c=r(1669);function u(e,t){return n.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){var t=e.header,r=e.payload,n=e.secret||e.privateKey,o=e.encoding,s=i(t.alg),l=function(e,t,r){r=r||"utf8";var n=u(a(e),"binary"),o=u(a(t),r);return c.format("%s.%s",n,o)}(t,r,o),f=s.sign(l,n);return c.format("%s.%s",l,f)}function f(e){var t=e.secret||e.privateKey||e.key,r=new o(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=r,this.payload=new o(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}c.inherits(f,s),f.prototype.sign=function(){try{var e=l({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},f.sign=l,e.exports=f},2010:(e,t,r)=>{var n=r(4293).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||n.isBuffer(e)?e.toString():JSON.stringify(e)}},3079:(e,t,r)=>{var n=r(9509).Buffer,o=r(7006),i=r(4178),s=r(2413),a=r(2010),c=r(1669),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(e){var t=e.split(".",1)[0];return function(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}(n.from(t,"base64").toString("binary"))}function f(e){return e.split(".")[2]}function h(e){return u.test(e)&&!!l(e)}function p(e,t,r){if(!t){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}var o=f(e=a(e)),s=function(e){return e.split(".",2).join(".")}(e);return i(t).verify(s,o,r)}function d(e,t){if(t=t||{},!h(e=a(e)))return null;var r=l(e);if(!r)return null;var o=function(e,t){t=t||"utf8";var r=e.split(".")[1];return n.from(r,"base64").toString(t)}(e);return("JWT"===r.typ||t.json)&&(o=JSON.parse(o,t.encoding)),{header:r,payload:o,signature:f(e)}}function m(e){var t=(e=e||{}).secret||e.publicKey||e.key,r=new o(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=r,this.signature=new o(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}c.inherits(m,s),m.prototype.verify=function(){try{var e=p(this.signature.buffer,this.algorithm,this.key.buffer),t=d(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},m.decode=d,m.isValid=h,m.verify=p,e.exports=m},8922:e=>{var t=9007199254740991,r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=/^(?:0|[1-9]\d*)$/,a=parseInt;function c(e){return e!=e}var u,l,f=Object.prototype,h=f.hasOwnProperty,p=f.toString,d=f.propertyIsEnumerable,m=(u=Object.keys,l=Object,function(e){return u(l(e))}),y=Math.max;function v(e,r){return!!(r=null==r?t:r)&&("number"==typeof e||s.test(e))&&e>-1&&e%1==0&&e<r}var b=Array.isArray;function g(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}(e.length)&&!function(e){var t=w(e)?p.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function S(e){return!!e&&"object"==typeof e}e.exports=function(e,t,s,u){var l;e=g(e)?e:(l=e)?function(e,t){return function(t,r){for(var n=-1,o=t?t.length:0,i=Array(o);++n<o;)i[n]=(s=t[n],e[s]);var s;return i}(t)}(l,function(e){return g(e)?function(e,t){var r=b(e)||function(e){return function(e){return S(e)&&g(e)}(e)&&h.call(e,"callee")&&(!d.call(e,"callee")||"[object Arguments]"==p.call(e))}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!h.call(e,i)||o&&("length"==i||v(i,n))||r.push(i);return r}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||f))return m(e);var t,r,n=[];for(var o in Object(e))h.call(e,o)&&"constructor"!=o&&n.push(o);return n}(e)}(l)):[],s=s&&!u?function(e){var t=function(e){return e?Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||S(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(w(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=w(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var s=o.test(e);return s||i.test(e)?a(e.slice(2),s?2:8):n.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),s=t%1;return t==t?s?t-s:t:0}(s):0;var j=e.length;return s<0&&(s=y(j+s,0)),function(e){return"string"==typeof e||!b(e)&&S(e)&&"[object String]"==p.call(e)}(e)?s<=j&&e.indexOf(t,s)>-1:!!j&&function(e,t,r){if(t!=t)return function(e,t,r,n){for(var o=e.length,i=r+-1;++i<o;)if(t(e[i],i,e))return i;return-1}(e,c,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,s)>-1}},8094:e=>{var t=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==t.call(e)}},5928:e=>{var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,o=/^0o[0-7]+$/i,i=parseInt,s=Object.prototype.toString;function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return"number"==typeof e&&e==function(e){var c=function(e){return e?Infinity===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(a(e)){var c="function"==typeof e.valueOf?e.valueOf():e;e=a(c)?c+"":c}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var u=n.test(e);return u||o.test(e)?i(e.slice(2),u?2:8):r.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),u=c%1;return c==c?u?c-u:c:0}(e)}},3126:e=>{var t=Object.prototype.toString;e.exports=function(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"==t.call(e)}},8146:e=>{var t,r,n=Function.prototype,o=Object.prototype,i=n.toString,s=o.hasOwnProperty,a=i.call(Object),c=o.toString,u=(t=Object.getPrototypeOf,r=Object,function(e){return t(r(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=c.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=u(e);if(null===t)return!0;var r=s.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&i.call(r)==a}},5751:e=>{var t=Object.prototype.toString,r=Array.isArray;e.exports=function(e){return"string"==typeof e||!r(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},8917:e=>{var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,o=/^0o[0-7]+$/i,i=parseInt,s=Object.prototype.toString;function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return function(e,c){var u;if("function"!=typeof c)throw new TypeError("Expected a function");return e=function(e){var c=function(e){return e?1/0===(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==s.call(e)}(e))return NaN;if(a(e)){var c="function"==typeof e.valueOf?e.valueOf():e;e=a(c)?c+"":c}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var u=n.test(e);return u||o.test(e)?i(e.slice(2),u?2:8):r.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),u=c%1;return c==c?u?c-u:c:0}(e),function(){return--e>0&&(u=c.apply(this,arguments)),e<=1&&(c=void 0),u}}(2,e)}},3576:(e,t,r)=>{"use strict";function n(e,t){for(var r=0,n=e.length;r<n;r++)if(!t(e[r],r,e))return!1;return!0}r.r(t),r.d(t,{exec:()=>l,match:()=>c,parse:()=>u});const o="/";function i(e){if(e===o)return e;47===e.charCodeAt(0)&&(e=e.substring(1));var t=e.length-1;return 47===e.charCodeAt(t)?e.substring(0,t):e}function s(e){return(e=i(e))===o?[o]:e.split(o)}function a(e,t,r){return r=e[r],t.val===r&&0===t.type||(r===o?t.type>1:0!==t.type&&(r||"").endsWith(t.end))}function c(e,t){for(var r,o,i=0,c=s(e),u=c.length,l=a.bind(a,c);i<t.length;i++)if(((o=(r=t[i]).length)===u||o<u&&2===r[o-1].type||o>u&&3===r[o-1].type)&&n(r,l))return r;return[]}function u(e){if(e===o)return[{old:e,type:0,val:e,end:""}];for(var t,r,n,s,a=i(e),c=-1,u=0,l=a.length,f=[];++c<l;)if(58!==(t=a.charCodeAt(c)))if(42!==t){for(u=c;c<l&&47!==a.charCodeAt(c);)++c;f.push({old:e,type:0,val:a.substring(u,c),end:""}),a=a.substring(c),l-=c,c=u=0}else f.push({old:e,type:2,val:a.substring(c),end:""});else{for(u=c+1,n=1,r=0,s="";c<l&&47!==a.charCodeAt(c);)63===(t=a.charCodeAt(c))?(r=c,n=3):46===t&&0===s.length&&(s=a.substring(r=c)),c++;f.push({old:e,type:n,val:a.substring(u,r||c),end:s}),a=a.substring(c),l-=c,c=0}return f}function l(e,t){for(var r,n,i=0,a=s(e),c={};i<t.length;i++)r=a[i],n=t[i],r!==o&&void 0!==r&&!1|n.type&&(c[n.val]=r.replace(n.end,""));return c}},7824:e=>{var t=1e3,r=60*t,n=60*r,o=24*n;function i(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,s){s=s||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var s=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===u&&isFinite(e))return s.long?(a=e,(c=Math.abs(a))>=o?i(a,c,o,"day"):c>=n?i(a,c,n,"hour"):c>=r?i(a,c,r,"minute"):c>=t?i(a,c,t,"second"):a+" ms"):function(e){var i=Math.abs(e);return i>=o?Math.round(e/o)+"d":i>=n?Math.round(e/n)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6457:(e,t,r)=>{"use strict";r.r(t),r.d(t,{FetchError:()=>h,Headers:()=>k,Request:()=>H,Response:()=>I,default:()=>J});var n=r(2413),o=r(8605);const i=require("url"),s=require("https"),a=require("zlib"),c=n.Readable,u=Symbol("buffer"),l=Symbol("type");class f{constructor(){this[l]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,o=Number(t.length);for(let e=0;e<o;e++){const o=t[e];let i;i=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof f?o[u]:Buffer.from("string"==typeof o?o:String(o)),n+=i.length,r.push(i)}}this[u]=Buffer.concat(r);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[l]=o)}get size(){return this[u].length}get type(){return this[l]}text(){return Promise.resolve(this[u].toString())}arrayBuffer(){const e=this[u],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new c;return e._read=function(){},e.push(this[u]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,o;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),o=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const i=Math.max(o-n,0),s=this[u].slice(n,n+i),a=new f([],{type:arguments[2]});return a[u]=s,a}}function h(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let p;Object.defineProperties(f.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(f.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.name="FetchError";try{p=require("encoding").convert}catch(e){}const d=Symbol("Body internals"),m=n.PassThrough;function y(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.size;let i=void 0===o?0:o;var s=r.timeout;let a=void 0===s?0:s;null==e?e=null:b(e)?e=Buffer.from(e.toString()):g(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof n||(e=Buffer.from(String(e)))),this[d]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=a,e instanceof n&&e.on("error",(function(e){const r="AbortError"===e.name?e:new h(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[d].error=r}))}function v(){var e=this;if(this[d].disturbed)return y.Promise.reject(new TypeError("body used already for: "+this.url));if(this[d].disturbed=!0,this[d].error)return y.Promise.reject(this[d].error);let t=this.body;if(null===t)return y.Promise.resolve(Buffer.alloc(0));if(g(t)&&(t=t.stream()),Buffer.isBuffer(t))return y.Promise.resolve(t);if(!(t instanceof n))return y.Promise.resolve(Buffer.alloc(0));let r=[],o=0,i=!1;return new y.Promise((function(n,s){let a;e.timeout&&(a=setTimeout((function(){i=!0,s(new h(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(i=!0,s(t)):s(new h(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!i&&null!==t){if(e.size&&o+t.length>e.size)return i=!0,void s(new h(`content size at ${e.url} over limit: ${e.size}`,"max-size"));o+=t.length,r.push(t)}})),t.on("end",(function(){if(!i){clearTimeout(a);try{n(Buffer.concat(r,o))}catch(t){s(new h(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function b(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function g(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function w(e){let t,r,o=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof n&&"function"!=typeof o.getBoundary&&(t=new m,r=new m,o.pipe(t),o.pipe(r),e[d].body=t,o=r),o}function S(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":b(e)?"application/x-www-form-urlencoded;charset=UTF-8":g(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():e instanceof n?null:"text/plain;charset=UTF-8"}function j(e){const t=e.body;return null===t?0:g(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}y.prototype={get body(){return this[d].body},get bodyUsed(){return this[d].disturbed},arrayBuffer(){return v.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return v.call(this).then((function(t){return Object.assign(new f([],{type:e.toLowerCase()}),{[u]:t})}))},json(){var e=this;return v.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return y.Promise.reject(new h(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return v.call(this).then((function(e){return e.toString()}))},buffer(){return v.call(this)},textConverted(){var e=this;return v.call(this).then((function(t){return function(e,t){if("function"!=typeof p)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,o,i="utf-8";return r&&(n=/charset=([^;]*)/i.exec(r)),o=e.slice(0,1024).toString(),!n&&o&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(o)),!n&&o&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),n||(n=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o),n&&n.pop()),n&&(n=/charset=(.*)/i.exec(n.pop()))),!n&&o&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o)),n&&(i=n.pop(),"gb2312"!==i&&"gbk"!==i||(i="gb18030")),p(e,"UTF-8",i).toString()}(t,e.headers)}))}},Object.defineProperties(y.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),y.mixIn=function(e){for(const t of Object.getOwnPropertyNames(y.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(y.prototype,t);Object.defineProperty(e,t,r)}},y.Promise=global.Promise;const x=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,_=/[^\t\x20-\x7e\x80-\xff]/;function P(e){if(e=""+e,x.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")}function E(e){if(e=""+e,_.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function O(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const T=Symbol("map");class k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[T]=Object.create(null),e instanceof k){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){P(e=""+e);const t=O(this[T],e);return void 0===t?null:this[T][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=U(this),n=0;for(;n<r.length;){var o=r[n];const i=o[0],s=o[1];e.call(t,s,i,this),r=U(this),n++}}set(e,t){t=""+t,P(e=""+e),E(t);const r=O(this[T],e);this[T][void 0!==r?r:e]=[t]}append(e,t){t=""+t,P(e=""+e),E(t);const r=O(this[T],e);void 0!==r?this[T][r].push(t):this[T][e]=[t]}has(e){return P(e=""+e),void 0!==O(this[T],e)}delete(e){P(e=""+e);const t=O(this[T],e);void 0!==t&&delete this[T][t]}raw(){return this[T]}keys(){return $(this,"key")}values(){return $(this,"value")}[Symbol.iterator](){return $(this,"key+value")}}function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[T]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[T][t].join(", ")}:function(t){return[t.toLowerCase(),e[T][t].join(", ")]})}k.prototype.entries=k.prototype[Symbol.iterator],Object.defineProperty(k.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(k.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const B=Symbol("internal");function $(e,t){const r=Object.create(A);return r[B]={target:e,kind:t,index:0},r}const A=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==A)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[B];const t=e.target,r=e.kind,n=e.index,o=U(t,r);return n>=o.length?{value:void 0,done:!0}:(this[B].index=n+1,{value:o[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function R(e){const t=Object.assign({__proto__:null},e[T]),r=O(e[T],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(A,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const M=Symbol("Response internals"),C=o.STATUS_CODES;class I{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.call(this,e,t);const r=t.status||200,n=new k(t.headers);if(null!=e&&!n.has("Content-Type")){const t=S(e);t&&n.append("Content-Type",t)}this[M]={url:t.url,status:r,statusText:t.statusText||C[r],headers:n,counter:t.counter}}get url(){return this[M].url||""}get status(){return this[M].status}get ok(){return this[M].status>=200&&this[M].status<300}get redirected(){return this[M].counter>0}get statusText(){return this[M].statusText}get headers(){return this[M].headers}clone(){return new I(w(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}y.mixIn(I.prototype),Object.defineProperties(I.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(I.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const N=Symbol("Request internals"),D=i.parse,q=i.format,V="destroy"in n.Readable.prototype;function L(e){return"object"==typeof e&&"object"==typeof e[N]}class H{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L(e)?t=D(e.url):(t=e&&e.href?D(e.href):D(""+e),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||L(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=r.body?r.body:L(e)&&null!==e.body?w(e):null;y.call(this,o,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const i=new k(r.headers||e.headers||{});if(null!=o&&!i.has("Content-Type")){const e=S(o);e&&i.append("Content-Type",e)}let s=L(e)?e.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[N]={method:n,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:t,signal:s},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[N].method}get url(){return q(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}clone(){return new H(this)}}function F(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}y.mixIn(H.prototype),Object.defineProperty(H.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(H.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),F.prototype=Object.create(Error.prototype),F.prototype.constructor=F,F.prototype.name="AbortError";const K=n.PassThrough,z=i.resolve;function W(e,t){if(!W.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return y.Promise=W.Promise,new W.Promise((function(r,i){const c=new H(e,t),u=function(e){const t=e[N].parsedURL,r=new k(e[N].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof n.Readable&&!V)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let o=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(o="0"),null!=e.body){const t=j(e);"number"==typeof t&&(o=String(t))}o&&r.set("Content-Length",o),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return"function"==typeof i&&(i=i(t)),r.has("Connection")||i||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:R(r),agent:i})}(c),l=("https:"===u.protocol?s:o).request,f=c.signal;let p=null;const d=function(){let e=new F("The user aborted a request.");i(e),c.body&&c.body instanceof n.Readable&&c.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(f&&f.aborted)return void d();const m=function(){d(),b()},y=l(u);let v;function b(){y.abort(),f&&f.removeEventListener("abort",m),clearTimeout(v)}f&&f.addEventListener("abort",m),c.timeout&&y.once("socket",(function(e){v=setTimeout((function(){i(new h("network timeout at: "+c.url,"request-timeout")),b()}),c.timeout)})),y.on("error",(function(e){i(new h(`request to ${c.url} failed, reason: ${e.message}`,"system",e)),b()})),y.on("response",(function(e){clearTimeout(v);const t=function(e){const t=new k;for(const r of Object.keys(e))if(!x.test(r))if(Array.isArray(e[r]))for(const n of e[r])_.test(n)||(void 0===t[T][r]?t[T][r]=[n]:t[T][r].push(n));else _.test(e[r])||(t[T][r]=[e[r]]);return t}(e.headers);if(W.isRedirect(e.statusCode)){const n=t.get("Location"),o=null===n?null:z(c.url,n);switch(c.redirect){case"error":return i(new h("uri requested responds with a redirect, redirect mode is set to error: "+c.url,"no-redirect")),void b();case"manual":if(null!==o)try{t.set("Location",o)}catch(e){i(e)}break;case"follow":if(null===o)break;if(c.counter>=c.follow)return i(new h("maximum redirect reached at: "+c.url,"max-redirect")),void b();const n={headers:new k(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:c.body,signal:c.signal,timeout:c.timeout,size:c.size};return 303!==e.statusCode&&c.body&&null===j(c)?(i(new h("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void b()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==c.method)||(n.method="GET",n.body=void 0,n.headers.delete("content-length")),r(W(new H(o,n))),void b())}}e.once("end",(function(){f&&f.removeEventListener("abort",m)}));let n=e.pipe(new K);const o={url:c.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:c.size,timeout:c.timeout,counter:c.counter},s=t.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===s||204===e.statusCode||304===e.statusCode)return p=new I(n,o),void r(p);const u={flush:a.Z_SYNC_FLUSH,finishFlush:a.Z_SYNC_FLUSH};if("gzip"==s||"x-gzip"==s)return n=n.pipe(a.createGunzip(u)),p=new I(n,o),void r(p);if("deflate"!=s&&"x-deflate"!=s){if("br"==s&&"function"==typeof a.createBrotliDecompress)return n=n.pipe(a.createBrotliDecompress()),p=new I(n,o),void r(p);p=new I(n,o),r(p)}else e.pipe(new K).once("data",(function(e){n=8==(15&e[0])?n.pipe(a.createInflate()):n.pipe(a.createInflateRaw()),p=new I(n,o),r(p)}))})),function(e,t){const r=t.body;null===r?e.end():g(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(y,c)}))}W.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},W.Promise=global.Promise;const J=W},2266:(e,t,r)=>{const n=r(8605),o=r(2160),{parse:i}=r(1191),s=r(8767);function a(e){return 47===e.charCodeAt(0)?e:"/"+e}function c(e){let t=e.indexOf("/",1);return t>1?e.substring(0,t):e}function u(e,t){t.url=t.url.substring(e.length)||"/",t.path=t.path.substring(e.length)||"/"}function l(e,t,r,o){let i=r.statusCode=e.code||e.status||500;r.end(e.length&&e||e.message||n.STATUS_CODES[i])}class f extends o{constructor(e={}){super(e),this.apps={},this.wares=[],this.bwares={},this.parse=s,this.server=e.server,this.handler=this.handler.bind(this),this.onError=e.onError||l,this.onNoMatch=e.onNoMatch||this.onError.bind(null,{code:404})}add(e,t,...r){let n=a(c(t));if(void 0!==this.apps[n])throw new Error(`Cannot mount ".${e.toLowerCase()}('${a(t)}')" because a Polka application at ".use('${n}')" already exists! You should move this handler into your Polka application instead.`);return super.add(e,t,...r)}use(e,...t){return"function"==typeof e?this.wares=this.wares.concat(e,t):"/"===e?this.wares=this.wares.concat(t):(e=a(e),t.forEach((t=>{if(t instanceof f)this.apps[e]=t;else{let r=this.bwares[e]||[];r.length>0||r.push(((t,r,n)=>(u(e,t),n()))),this.bwares[e]=r.concat(t)}}))),this}listen(){return(this.server=this.server||n.createServer()).on("request",this.handler),this.server.listen.apply(this.server,arguments),this}handler(e,t,r){r=r||this.parse(e);let n=[],o=this.wares,s=this.find(e.method,r.pathname);e.originalUrl=e.originalUrl||e.url;let a=c(e.path=r.pathname);void 0!==this.bwares[a]&&(o=o.concat(this.bwares[a])),s?(n=s.handlers,e.params=s.params):void 0!==this.apps[a]?(u(a,e),r.pathname=e.path,n.push(this.apps[a].handler.bind(null,e,t,r))):0===n.length&&n.push(this.onNoMatch),e.search=r.search,e.query=i(r.query);let l=0,f=o.length,h=n.length;if(f===l&&1===h)return n[0](e,t);let p=r=>r?this.onError(r,e,t,p):d(),d=r=>t.finished||l<f&&o[l++](e,t,p);o=o.concat(n),f+=h,d()}}e.exports=e=>new f(e)},9509:(e,t,r)=>{var n=r(4293),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},6625:(e,t)=>{var r;t=e.exports=z,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],i=t.src=[],s=0,a=s++;i[a]="0|[1-9]\\d*";var c=s++;i[c]="[0-9]+";var u=s++;i[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var l=s++;i[l]="("+i[a]+")\\.("+i[a]+")\\.("+i[a]+")";var f=s++;i[f]="("+i[c]+")\\.("+i[c]+")\\.("+i[c]+")";var h=s++;i[h]="(?:"+i[a]+"|"+i[u]+")";var p=s++;i[p]="(?:"+i[c]+"|"+i[u]+")";var d=s++;i[d]="(?:-("+i[h]+"(?:\\."+i[h]+")*))";var m=s++;i[m]="(?:-?("+i[p]+"(?:\\."+i[p]+")*))";var y=s++;i[y]="[0-9A-Za-z-]+";var v=s++;i[v]="(?:\\+("+i[y]+"(?:\\."+i[y]+")*))";var b=s++,g="v?"+i[l]+i[d]+"?"+i[v]+"?";i[b]="^"+g+"$";var w="[v=\\s]*"+i[f]+i[m]+"?"+i[v]+"?",S=s++;i[S]="^"+w+"$";var j=s++;i[j]="((?:<|>)?=?)";var x=s++;i[x]=i[c]+"|x|X|\\*";var _=s++;i[_]=i[a]+"|x|X|\\*";var P=s++;i[P]="[v=\\s]*("+i[_]+")(?:\\.("+i[_]+")(?:\\.("+i[_]+")(?:"+i[d]+")?"+i[v]+"?)?)?";var E=s++;i[E]="[v=\\s]*("+i[x]+")(?:\\.("+i[x]+")(?:\\.("+i[x]+")(?:"+i[m]+")?"+i[v]+"?)?)?";var O=s++;i[O]="^"+i[j]+"\\s*"+i[P]+"$";var T=s++;i[T]="^"+i[j]+"\\s*"+i[E]+"$";var k=s++;i[k]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var U=s++;i[U]="(?:~>?)";var B=s++;i[B]="(\\s*)"+i[U]+"\\s+",o[B]=new RegExp(i[B],"g");var $=s++;i[$]="^"+i[U]+i[P]+"$";var A=s++;i[A]="^"+i[U]+i[E]+"$";var R=s++;i[R]="(?:\\^)";var M=s++;i[M]="(\\s*)"+i[R]+"\\s+",o[M]=new RegExp(i[M],"g");var C=s++;i[C]="^"+i[R]+i[P]+"$";var I=s++;i[I]="^"+i[R]+i[E]+"$";var N=s++;i[N]="^"+i[j]+"\\s*("+w+")$|^$";var D=s++;i[D]="^"+i[j]+"\\s*("+g+")$|^$";var q=s++;i[q]="(\\s*)"+i[j]+"\\s*("+w+"|"+i[P]+")",o[q]=new RegExp(i[q],"g");var V=s++;i[V]="^\\s*("+i[P]+")\\s+-\\s+("+i[P]+")\\s*$";var L=s++;i[L]="^\\s*("+i[E]+")\\s+-\\s+("+i[E]+")\\s*$";var H=s++;i[H]="(<|>)?=?\\s*\\*";for(var F=0;F<35;F++)r(F,i[F]),o[F]||(o[F]=new RegExp(i[F]));function K(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[S]:o[b]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof z))return new z(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?o[S]:o[b]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=K,t.valid=function(e,t){var r=K(e,t);return r?r.version:null},t.clean=function(e,t){var r=K(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),J(this.major,e.major)||J(this.minor,e.minor)||J(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return J(n,o)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(X(e,t))return null;var r=K(e),n=K(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var s in r)if(("major"===s||"minor"===s||"patch"===s)&&r[s]!==n[s])return o+s;return i},t.compareIdentifiers=J;var W=/^[0-9]+$/;function J(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function G(e,t,r){return new z(e,r).compare(new z(t,r))}function Y(e,t,r){return G(e,t,r)>0}function Z(e,t,r){return G(e,t,r)<0}function X(e,t,r){return 0===G(e,t,r)}function Q(e,t,r){return 0!==G(e,t,r)}function ee(e,t,r){return G(e,t,r)>=0}function te(e,t,r){return G(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return X(e,r,n);case"!=":return Q(e,r,n);case">":return Y(e,r,n);case">=":return ee(e,r,n);case"<":return Z(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return J(t,e)},t.major=function(e,t){return new z(e,t).major},t.minor=function(e,t){return new z(e,t).minor},t.patch=function(e,t){return new z(e,t).patch},t.compare=G,t.compareLoose=function(e,t){return G(e,t,!0)},t.rcompare=function(e,t,r){return G(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=Y,t.lt=Z,t.eq=X,t.neq=Q,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var oe={};function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof ne)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,r,n,o,i,s,a,c,u,l,f,h){return((t=se(r)?"":se(n)?">="+r+".0.0":se(o)?">="+r+"."+n+".0":">="+t)+" "+(a=se(c)?"":se(u)?"<"+(+c+1)+".0.0":se(l)?"<"+c+"."+(+u+1)+".0":f?"<="+c+"."+u+"."+l+"-"+f:"<="+a)).trim()}function ce(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==oe&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function ue(e,t,r){try{t=new ie(t,r)}catch(e){return!1}return t.test(e)}function le(e,t,r,n){var o,i,s,a,c;switch(e=new z(e,n),t=new ie(t,n),r){case">":o=Y,i=te,s=Z,a=">",c=">=";break;case"<":o=Z,i=ee,s=Y,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],f=null,h=null;if(l.forEach((function(e){e.semver===oe&&(e=new ne(">=0.0.0")),f=f||e,h=h||e,o(e.semver,f.semver,n)?f=e:s(e.semver,h.semver,n)&&(h=e)})),f.operator===a||f.operator===c)return!1;if((!h.operator||h.operator===a)&&i(e,h.semver))return!1;if(h.operator===c&&s(e,h.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?o[N]:o[D],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=oe},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new z(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new ie(e.value,t),ue(this.value,r,t);if(""===e.operator)return r=new ie(this.value,t),ue(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&s||a||c},t.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[L]:o[V];e=e.replace(n,ae),r("hyphen replace",e),e=e.replace(o[q],"$1$2$3"),r("comparator trim",e,o[q]),e=(e=(e=e.replace(o[B],"$1~")).replace(o[M],"$1^")).split(/\s+/).join(" ");var i=t?o[N]:o[D],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[I]:o[C];return e.replace(n,(function(t,n,o,i,s){var a;return r("caret",e,t,n,o,i,s),se(n)?a="":se(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":se(i)?a="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),a="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",a),a}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[A]:o[$];return e.replace(n,(function(t,n,o,i,s){var a;return r("tilde",e,t,n,o,i,s),se(n)?a="":se(o)?a=">="+n+".0.0 <"+(+n+1)+".0.0":se(i)?a=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":s?(r("replaceTilde pr",s),a=">="+n+"."+o+"."+i+"-"+s+" <"+n+"."+(+o+1)+".0"):a=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[T]:o[O];return e.replace(n,(function(t,n,o,i,s,a){r("xRange",e,t,n,o,i,s,a);var c=se(o),u=c||se(i),l=u||se(s);return"="===n&&l&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&l?(u&&(i=0),s=0,">"===n?(n=">=",u?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),t=n+o+"."+i+"."+s):u?t=">="+o+".0.0 <"+(+o+1)+".0.0":l&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[H],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new ne(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=ue,t.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&-1!==o.compare(e)||(o=new z(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&1!==o.compare(e)||(o=new z(n=e,r)))})),n},t.minVersion=function(e,t){e=new ie(e,t);var r=new z("0.0.0");if(e.test(r))return r;if(r=new z("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new z(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!Y(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},t.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return le(e,t,"<",r)},t.gtr=function(e,t,r){return le(e,t,">",r)},t.outside=le,t.prerelease=function(e,t){var r=K(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new ie(e,r),t=new ie(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof z)return e;if("string"!=typeof e)return null;var t=e.match(o[k]);return null==t?null:K(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},2160:(e,t,r)=>{const{exec:n,match:o,parse:i}=r(3576);e.exports=class{constructor(e){this.opts=e||{},this.routes={},this.handlers={},this.all=this.add.bind(this,"*"),this.get=this.add.bind(this,"GET"),this.head=this.add.bind(this,"HEAD"),this.patch=this.add.bind(this,"PATCH"),this.options=this.add.bind(this,"OPTIONS"),this.connect=this.add.bind(this,"CONNECT"),this.delete=this.add.bind(this,"DELETE"),this.trace=this.add.bind(this,"TRACE"),this.post=this.add.bind(this,"POST"),this.put=this.add.bind(this,"PUT")}add(e,t,...r){return void 0===this.routes[e]&&(this.routes[e]=[]),this.routes[e].push(i(t)),void 0===this.handlers[e]&&(this.handlers[e]={}),this.handlers[e][t]=r,this}find(e,t){let r=o(t,this.routes[e]||[]);return!(0===r.length&&(r=o(t,this.routes[e="*"]||[]),!r.length))&&{params:n(t,r),handlers:this.handlers[e][r[0].old]}}}},9885:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlairProvider=void 0;const a=i(r(5747)),c=i(r(7549)),u=s(r(706));class l{static init(){const e=c.Uri.joinPath(this.extensionUri,"media","flairs");a.readdirSync(e.fsPath).forEach((e=>{const t=c.Uri.joinPath(this.extensionUri,"media","flairs",e),r=a.readFileSync(t.fsPath,{encoding:"utf-8"}),n=e.split(".")[0];this.flairMap[n]="data:image/svg+xml;base64,"+u.default(r),this.flairUriMap[n]=t}))}static getJavascriptMapString(){return this.javascriptMapString?this.javascriptMapString:`\n      const flairMap = {\n        ${Object.entries(this.flairMap).map((([e,t])=>`"${e}": "${t}"`))}\n      }\n      `}}t.FlairProvider=l,l.flairMap={},l.flairUriMap={},l.javascriptMapString=""},6622:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewStoryPanel=void 0;const a=i(r(7549)),c=r(5601),u=r(7686);class l{constructor(e,t,r){this._disposables=[],this._panel=e,this._extensionUri=t,this._data=r,this._update(),this._panel.onDidDispose((()=>this.dispose()),null,this._disposables)}static createOrShow(e,t){const r=a.window.activeTextEditor?a.window.activeTextEditor.viewColumn:void 0;if(l.currentPanel)return l.currentPanel._panel.reveal(r),l.currentPanel._data=t,void l.currentPanel._update();const n=a.window.createWebviewPanel(l.viewType,"View Story",r||a.ViewColumn.One,{enableScripts:!0,localResourceRoots:[a.Uri.joinPath(e,"media"),a.Uri.joinPath(e,"out/compiled")]});l.currentPanel=new l(n,e,t)}static revive(e,t,r){l.currentPanel=new l(e,t,r)}dispose(){for(l.currentPanel=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_update(){return s(this,void 0,void 0,(function*(){const e=this._panel.webview;this._panel.webview.html=this._getHtmlForWebview(e)}))}_getHtmlForWebview(e){const t=e.asWebviewUri(a.Uri.joinPath(this._extensionUri,"out","compiled/preview-story.js")),r=a.Uri.joinPath(this._extensionUri,"media","reset.css"),n=a.Uri.joinPath(this._extensionUri,"media","vscode.css"),o=e.asWebviewUri(r),i=e.asWebviewUri(n),s=e.asWebviewUri(a.Uri.joinPath(this._extensionUri,"out","compiled/preview-story.css")),l=u.getNonce();return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t\x3c!--\n\t\t\t\t\tUse a content security policy to only allow loading images from https or from our extension directory,\n\t\t\t\t\tand only allow scripts that have a specific nonce.\n        --\x3e\n        <meta http-equiv="Content-Security-Policy" content="default-src ${c.apiBaseUrl}; img-src https: data:; style-src ${e.cspSource}; script-src 'nonce-${l}';">\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t\t\t\t<link href="${o}" rel="stylesheet">\n\t\t\t\t<link href="${i}" rel="stylesheet">\n        <link href="${s}" rel="stylesheet">\n        <script nonce="${l}">\n            const initRecordingSteps = ${JSON.stringify(this._data.initRecordingSteps)};\n            const initialText = ${JSON.stringify(this._data.intialText)};\n            const tsvscode = acquireVsCodeApi();\n        <\/script>\n\t\t\t</head>\n      <body>\n\t\t\t</body>\n\t\t\t\t<script nonce="${l}" src="${t}"><\/script>\n\t\t\t</html>`}}t.PreviewStoryPanel=l,l.viewType="previewStory"},9513:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StorySidebarProvider=void 0;const a=i(r(7549)),c=r(5601),u=r(9885),l=r(7686),f=r(8788);t.StorySidebarProvider=class{constructor(e){this._extensionUri=e}resolveWebviewView(e,t,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),e.webview.onDidReceiveMessage((e=>s(this,void 0,void 0,(function*(){switch(e.type){case"onStoryPress":if(!e.value)return;f.ViewStoryPanel.createOrShow(this._extensionUri,e.value);break;case"onError":if(!e.value)return;a.window.showErrorMessage(e.value)}}))))}_getHtmlForWebview(e){const t=e.asWebviewUri(a.Uri.joinPath(this._extensionUri,"media","reset.css")),r=e.asWebviewUri(a.Uri.joinPath(this._extensionUri,"media","vscode.css")),n=l.getNonce();return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t\x3c!--\n\t\t\t\t\tUse a content security policy to only allow loading images from https or from our extension directory,\n\t\t\t\t\tand only allow scripts that have a specific nonce.\n        --\x3e\n        <meta http-equiv="Content-Security-Policy" content="default-src ${c.apiBaseUrl}; img-src https: data:; style-src ${e.cspSource}; script-src 'nonce-${n}';">\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t\t\t\t<link href="${t}" rel="stylesheet">\n\t\t\t\t<link href="${r}" rel="stylesheet">\n        <script nonce="${n}">\n            const apiBaseUrl = "${c.apiBaseUrl}";\n            const tsvscode = acquireVsCodeApi();\n            ${u.FlairProvider.getJavascriptMapString()}\n        <\/script>\n\t\t\t</head>\n      <body>\n      <div>I sold VSCode Stories and now it's being maintained as a new extension:</div>\n      <a href="${c.newExtensionUrl}">click to download</a>\n      <br />\n      <br />\n      <div>The new owner is also doing a Kickstarter:</div>\n      <a href="${c.kickstarterUrl}">support it and receive a PRO badge!</a>\n      <br />\n      <br />\n      <a href="https://youtu.be/CHO316LKnZw">More info and why I sold it</a>\n\t\t\t</body>\n\t\t\t</html>`}}},8788:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewStoryPanel=void 0;const c=i(r(7549)),u=r(5601),l=r(9885),f=r(7686),h=r(9882),p=a(r(9704));class d{constructor(e,t,r){this._disposables=[],this._panel=e,this._extensionUri=t,this._story=r,this._update(),this._panel.onDidDispose((()=>this.dispose()),null,this._disposables)}static createOrShow(e,t){const r=c.window.activeTextEditor?c.window.activeTextEditor.viewColumn:void 0;if(d.currentPanel)return d.currentPanel._panel.reveal(r),d.currentPanel._story=t,void d.currentPanel._update();const n=c.window.createWebviewPanel(d.viewType,"View Story",r||c.ViewColumn.One,{enableScripts:!0,localResourceRoots:[c.Uri.joinPath(e,"media"),c.Uri.joinPath(e,"out/compiled")]});d.currentPanel=new d(n,e,t)}static revive(e,t,r){d.currentPanel=new d(e,t,r)}dispose(){for(d.currentPanel=void 0,this._panel.dispose();this._disposables.length;){const e=this._disposables.pop();e&&e.dispose()}}_update(){return s(this,void 0,void 0,(function*(){const e=this._panel.webview;this._panel.webview.html=this._getHtmlForWebview(e),e.onDidReceiveMessage((e=>s(this,void 0,void 0,(function*(){switch(e.type){case"close":c.commands.executeCommand("workbench.action.closeActiveEditor");break;case"onInfo":if(!e.value)return;c.window.showInformationMessage(e.value);break;case"onError":if(!e.value)return;c.window.showErrorMessage(e.value);break;case"tokens":yield h.Util.context.globalState.update(u.accessTokenKey,e.accessToken),yield h.Util.context.globalState.update(u.refreshTokenKey,e.refreshToken)}}))))}))}_getHtmlForWebview(e){const t=e.asWebviewUri(c.Uri.joinPath(this._extensionUri,"out","compiled/view-story.js")),r=c.Uri.joinPath(this._extensionUri,"media","reset.css"),n=c.Uri.joinPath(this._extensionUri,"media","vscode.css"),o=e.asWebviewUri(r),i=e.asWebviewUri(n),s=e.asWebviewUri(c.Uri.joinPath(this._extensionUri,"out","compiled/view-story.css")),a=f.getNonce(),d=this._story;if(this._panel.title=d.creatorUsername,d.flair in l.FlairProvider.flairUriMap){const e=l.FlairProvider.flairUriMap[d.flair];this._panel.iconPath={light:e,dark:e}}else this._panel.iconPath=void 0;let m="";try{m=p.default.decode(h.Util.getAccessToken()).userId}catch(e){}return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t\x3c!--\n\t\t\t\t\tUse a content security policy to only allow loading images from https or from our extension directory,\n\t\t\t\t\tand only allow scripts that have a specific nonce.\n        --\x3e\n        <meta http-equiv="Content-Security-Policy" content="default-src ${u.apiBaseUrl}; img-src https: data:; style-src ${e.cspSource}; script-src 'nonce-${a}';">\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t\t\t\t<link href="${o}" rel="stylesheet">\n\t\t\t\t<link href="${i}" rel="stylesheet">\n        <link href="${s}" rel="stylesheet">\n        <script nonce="${a}">\n            const currentUserId = "${m}";\n            const story = JSON.parse('${JSON.stringify(this._story)}');\n            let accessToken = "${h.Util.getAccessToken()}";\n            let refreshToken = "${h.Util.getRefreshToken()}";\n            const apiBaseUrl = "${u.apiBaseUrl}";\n            const tsvscode = acquireVsCodeApi();\n            ${l.FlairProvider.getJavascriptMapString()}\n        <\/script>\n\t\t\t</head>\n      <body>\n\t\t\t</body>\n\t\t\t\t<script nonce="${a}" src="${t}"><\/script>\n\t\t\t</html>`}}t.ViewStoryPanel=d,d.viewType="viewStory"},1326:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.authenticate=void 0;const c=a(r(2266)),u=i(r(7549)),l=r(5601),f=r(9882);t.authenticate=()=>{const e=c.default();e.listen(54321),u.commands.executeCommand("vscode.open",u.Uri.parse(l.apiBaseUrl+"/auth/github")),e.get("/callback/:token/:refreshToken",((t,r)=>s(void 0,void 0,void 0,(function*(){const{token:n,refreshToken:o}=t.params;if(!n||!o)return r.end("ext: something went wrong"),void e.server.close();yield f.Util.context.globalState.update(l.accessTokenKey,n),yield f.Util.context.globalState.update(l.refreshTokenKey,o),r.end('\n    <!doctype html>\n    <html lang="en">\n      <head>\n        <meta charset="utf-8">\n        <meta\n          http-equiv="Content-Security-Policy"\n          content="default-src vscode-resource:; form-action vscode-resource:; frame-ancestors vscode-resource:; img-src vscode-resource: https:; script-src \'self\' \'unsafe-inline\' vscode-resource:; style-src \'self\' \'unsafe-inline\' vscode-resource:;"\n        />\n        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">\n      </head>\n      <body>\n          <h1>Success! You may now close this tab.</h1>\n          <style>\n            html, body {\n              background-color: #1a1a1a;\n              color: #c3c3c3;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              height: 100%;\n              width: 100%;\n              margin: 0;\n            }\n          </style>\n      </body>\n    </html>\n    '),e.server.close()}))))}},5601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kickstarterUrl=t.newExtensionUrl=t.apiBaseUrl=t.refreshTokenKey=t.accessTokenKey=t._prod_=void 0,t._prod_=!0,t.accessTokenKey="@stories/token"+(t._prod_?"":"dev"),t.refreshTokenKey="@stories/refresh-token"+(t._prod_?"":"dev"),t.apiBaseUrl=t._prod_?"https://bowl.azurewebsites.net":"http://localhost:8080",t.newExtensionUrl="https://marketplace.visualstudio.com/items?itemName=bar9.stories",t.kickstarterUrl="https://www.kickstarter.com/projects/rolandbrand/vs-code-stories"},112:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const a=i(r(7549)),c=(r(1326),r(1353),r(1535)),u=r(9513),l=r(9882),f=r(9885),h=r(5601);r(6622),t.activate=function(e){function t(){return s(this,void 0,void 0,(function*(){const e=yield a.window.showInformationMessage("I sold VSCode Stories and now it's being maintained as a new extension, would you like to download it?","Yes","View Kickstarter","Dismiss");"Yes"===e?a.commands.executeCommand("vscode.open",a.Uri.parse(h.newExtensionUrl)):"View on Kickstarter"===e&&a.commands.executeCommand("vscode.open",a.Uri.parse(h.kickstarterUrl))}))}l.Util.context=e,f.FlairProvider.extensionUri=e.extensionUri,f.FlairProvider.init(),e.globalState.get("sold-message")||(e.globalState.update("sold-message","true"),t()),a.commands.registerCommand("stories.setFlair",(()=>{t()})),a.commands.registerCommand("stories.authenticate",(()=>{t()}));const r=new u.StorySidebarProvider(e.extensionUri);e.subscriptions.push(a.window.registerWebviewViewProvider("storiesPanel",r));const n=new u.StorySidebarProvider(e.extensionUri);e.subscriptions.push(a.window.registerWebviewViewProvider("stories-full",n)),a.commands.registerCommand("stories.refresh",(()=>{t()})),(new Date).getTime(),new c.RecordingStatus,a.commands.registerCommand("stories.startTextRecording",(()=>s(this,void 0,void 0,(function*(){t()})))),a.commands.registerCommand("stories.stopTextRecording",(()=>{t()}))}},7686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNonce=void 0,t.getNonce=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}},1353:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mutation=t.mutationNoErr=void 0;const c=a(r(6457)),u=i(r(7549)),l=r(5601),f=r(9882);t.mutationNoErr=(e,r)=>s(void 0,void 0,void 0,(function*(){try{return yield t.mutation(e,r)}catch(e){}})),t.mutation=(e,t)=>s(void 0,void 0,void 0,(function*(){try{const r=yield c.default(l.apiBaseUrl+e,{method:"POST",body:JSON.stringify(t),headers:{"content-type":"application/json","access-token":f.Util.getAccessToken(),"refresh-token":f.Util.getRefreshToken()}});if(200!==r.status)throw new Error(yield r.text());const n=r.headers.get("access-token"),o=r.headers.get("refresh-token");return n&&o&&(yield f.Util.context.globalState.update(l.accessTokenKey,n),yield f.Util.context.globalState.update(l.refreshTokenKey,o)),yield r.json()}catch(e){throw console.log(e),u.window.showErrorMessage(e.message),e}}))},3183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0,t.sleep=e=>new Promise((t=>setTimeout(t,e)))},1535:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RecordingStatus=void 0;const o=r(7549),i=r(3183);function s(e){let t=""+Math.trunc(e);return t.length<2&&(t="0"+t),t}const a=36e5;t.RecordingStatus=class{constructor(){this.counting=!1,this.item=o.window.createStatusBarItem(o.StatusBarAlignment.Right),this.stop(),this.item.show()}show(){this.item.show()}dispose(){this.recordingStopped(),this.item.dispose()}stop(){this.recordingStopped(),this.item.command="stories.startTextRecording",this.item.text="$(debug-start) Record Story (beta)",this.counting=!1}stopping(){this.recordingStopped(),this.item.text="Recording stopping...",this.counting=!1}recordingStopped(){this.timeout&&clearInterval(this.timeout)}updateTime(e,t){const r=Date.now()-t;let n=`${s(r/6e4%60)}:${s(r/1e3%60)}`;r>a&&(n=`${Math.trunc(r/a)}:${n}`),this.item.text=`${e}: ${n}`}start(){this.item.command="stories.stopTextRecording",this.item.text="$(debug-stop) Recording";const e=this.updateTime.bind(this,this.item.text,Date.now());this.timeout=setInterval(e,1e3),e()}countDown(e){return n(this,void 0,void 0,(function*(){void 0===e&&(e=3),this.item.command="stories.stopTextRecording",this.counting=!0;for(let t=e;t>0;t-=1)if(this.item.text=`$(debug-breakpoint-log-unverified) Starting in ${t} seconds...`,yield i.sleep(1e3),!this.counting)throw new Error("Countdown canceled");this.counting=!1,this.item.text="Recording starting"}))}}},9882:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;const s=i(r(5622)),a=i(r(7549)),c=r(5601);t.Util=class{static getRefreshToken(){return this.context.globalState.get(c.refreshTokenKey)||""}static getAccessToken(){return this.context.globalState.get(c.accessTokenKey)||""}static isLoggedIn(){return!!this.context.globalState.get(c.accessTokenKey)&&!!this.context.globalState.get(c.refreshTokenKey)}static getWorkspacePath(){const e=a.workspace.workspaceFolders;return e?e[0].uri.fsPath:void 0}static getResource(e){return s.resolve(this.context.extensionPath,e.replace(/\//g,s.sep)).replace(/\\/g,"/")}}},4293:e=>{"use strict";e.exports=require("buffer")},6417:e=>{"use strict";e.exports=require("crypto")},5747:e=>{"use strict";e.exports=require("fs")},8605:e=>{"use strict";e.exports=require("http")},5622:e=>{"use strict";e.exports=require("path")},1191:e=>{"use strict";e.exports=require("querystring")},2413:e=>{"use strict";e.exports=require("stream")},1669:e=>{"use strict";e.exports=require("util")},7549:e=>{"use strict";e.exports=require("vscode")}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(112)})();
//# sourceMappingURL=extension.js.map